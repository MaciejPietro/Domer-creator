const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-565dN1Wk.js","assets/webworkerAll-jlsikzaB.js","assets/colorToUniform-D097EnAu.js","assets/CanvasPool-Betj7H66.js","assets/batchSamplersUniformGroup-PeBTdcm4.js","assets/WebGPURenderer-DHDTG2Kt.js","assets/SharedSystems-CqC5KpKH.js","assets/WebGLRenderer-vEA7FTn8.js"])))=>i.map(i=>d[i]);
var tZ=Object.defineProperty;var nZ=(n,e,t)=>e in n?tZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ve=(n,e,t)=>nZ(n,typeof e!="symbol"?e+"":e,t);function iZ(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var ya=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ia(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function rZ(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var $H={exports:{}},TS={},XH={exports:{}},rn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0=Symbol.for("react.element"),sZ=Symbol.for("react.portal"),oZ=Symbol.for("react.fragment"),aZ=Symbol.for("react.strict_mode"),lZ=Symbol.for("react.profiler"),cZ=Symbol.for("react.provider"),uZ=Symbol.for("react.context"),hZ=Symbol.for("react.forward_ref"),dZ=Symbol.for("react.suspense"),fZ=Symbol.for("react.memo"),pZ=Symbol.for("react.lazy"),PD=Symbol.iterator;function mZ(n){return n===null||typeof n!="object"?null:(n=PD&&n[PD]||n["@@iterator"],typeof n=="function"?n:null)}var YH={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qH=Object.assign,ZH={};function Bm(n,e,t){this.props=n,this.context=e,this.refs=ZH,this.updater=t||YH}Bm.prototype.isReactComponent={};Bm.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Bm.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function KH(){}KH.prototype=Bm.prototype;function YI(n,e,t){this.props=n,this.context=e,this.refs=ZH,this.updater=t||YH}var qI=YI.prototype=new KH;qI.constructor=YI;qH(qI,Bm.prototype);qI.isPureReactComponent=!0;var RD=Array.isArray,QH=Object.prototype.hasOwnProperty,ZI={current:null},JH={key:!0,ref:!0,__self:!0,__source:!0};function e6(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)QH.call(e,i)&&!JH.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:y0,type:n,key:s,ref:o,props:r,_owner:ZI.current}}function gZ(n,e){return{$$typeof:y0,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function KI(n){return typeof n=="object"&&n!==null&&n.$$typeof===y0}function yZ(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var ID=/\/+/g;function xT(n,e){return typeof n=="object"&&n!==null&&n.key!=null?yZ(""+n.key):e.toString(36)}function _1(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case y0:case sZ:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+xT(o,0):i,RD(r)?(t="",n!=null&&(t=n.replace(ID,"$&/")+"/"),_1(r,e,t,"",function(c){return c})):r!=null&&(KI(r)&&(r=gZ(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(ID,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",RD(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+xT(s,a);o+=_1(s,e,t,l,r)}else if(l=mZ(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+xT(s,a++),o+=_1(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xx(n,e,t){if(n==null)return n;var i=[],r=0;return _1(n,i,"","",function(s){return e.call(t,s,r++)}),i}function vZ(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var us={current:null},w1={transition:null},xZ={ReactCurrentDispatcher:us,ReactCurrentBatchConfig:w1,ReactCurrentOwner:ZI};function t6(){throw Error("act(...) is not supported in production builds of React.")}rn.Children={map:Xx,forEach:function(n,e,t){Xx(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Xx(n,function(){e++}),e},toArray:function(n){return Xx(n,function(e){return e})||[]},only:function(n){if(!KI(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};rn.Component=Bm;rn.Fragment=oZ;rn.Profiler=lZ;rn.PureComponent=YI;rn.StrictMode=aZ;rn.Suspense=dZ;rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xZ;rn.act=t6;rn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=qH({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ZI.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)QH.call(e,l)&&!JH.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:y0,type:n.type,key:r,ref:s,props:i,_owner:o}};rn.createContext=function(n){return n={$$typeof:uZ,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:cZ,_context:n},n.Consumer=n};rn.createElement=e6;rn.createFactory=function(n){var e=e6.bind(null,n);return e.type=n,e};rn.createRef=function(){return{current:null}};rn.forwardRef=function(n){return{$$typeof:hZ,render:n}};rn.isValidElement=KI;rn.lazy=function(n){return{$$typeof:pZ,_payload:{_status:-1,_result:n},_init:vZ}};rn.memo=function(n,e){return{$$typeof:fZ,type:n,compare:e===void 0?null:e}};rn.startTransition=function(n){var e=w1.transition;w1.transition={};try{n()}finally{w1.transition=e}};rn.unstable_act=t6;rn.useCallback=function(n,e){return us.current.useCallback(n,e)};rn.useContext=function(n){return us.current.useContext(n)};rn.useDebugValue=function(){};rn.useDeferredValue=function(n){return us.current.useDeferredValue(n)};rn.useEffect=function(n,e){return us.current.useEffect(n,e)};rn.useId=function(){return us.current.useId()};rn.useImperativeHandle=function(n,e,t){return us.current.useImperativeHandle(n,e,t)};rn.useInsertionEffect=function(n,e){return us.current.useInsertionEffect(n,e)};rn.useLayoutEffect=function(n,e){return us.current.useLayoutEffect(n,e)};rn.useMemo=function(n,e){return us.current.useMemo(n,e)};rn.useReducer=function(n,e,t){return us.current.useReducer(n,e,t)};rn.useRef=function(n){return us.current.useRef(n)};rn.useState=function(n){return us.current.useState(n)};rn.useSyncExternalStore=function(n,e,t){return us.current.useSyncExternalStore(n,e,t)};rn.useTransition=function(){return us.current.useTransition()};rn.version="18.3.1";XH.exports=rn;var R=XH.exports;const ae=Ia(R),_Z=iZ({__proto__:null,default:ae},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wZ=R,bZ=Symbol.for("react.element"),SZ=Symbol.for("react.fragment"),EZ=Object.prototype.hasOwnProperty,MZ=wZ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TZ={key:!0,ref:!0,__self:!0,__source:!0};function n6(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)EZ.call(e,i)&&!TZ.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:bZ,type:n,key:s,ref:o,props:r,_owner:MZ.current}}TS.Fragment=SZ;TS.jsx=n6;TS.jsxs=n6;$H.exports=TS;var k=$H.exports;const AZ="modulepreload",CZ=function(n){return"/"+n},LD={},cb=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(t.map(l=>{if(l=CZ(l),l in LD)return;LD[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":AZ,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((d,f)=>{h.addEventListener("load",d),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var Bt=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n))(Bt||{});const NP=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},Yx=(n,e)=>NP(n).priority??e,qs={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(NP).forEach(e=>{e.type.forEach(t=>{var i,r;return(r=(i=this._removeHandlers)[t])==null?void 0:r.call(i,e)})}),this},add(...n){return n.map(NP).forEach(e=>{e.type.forEach(t=>{var s,o;const i=this._addHandlers,r=this._queue;i[t]?(o=i[t])==null||o.call(i,e):(r[t]=r[t]||[],(s=r[t])==null||s.push(e))})}),this},handle(n,e,t){var o;const i=this._addHandlers,r=this._removeHandlers;if(i[n]||r[n])throw new Error(`Extension type ${n} already has a handler`);i[n]=e,r[n]=t;const s=this._queue;return s[n]&&((o=s[n])==null||o.forEach(a=>e(a)),delete s[n]),this},handleByMap(n,e){return this.handle(n,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(n,e,t=-1){return this.handle(n,i=>{e.findIndex(s=>s.name===i.name)>=0||(e.push({name:i.name,value:i.ref}),e.sort((s,o)=>Yx(o.value,t)-Yx(s.value,t)))},i=>{const r=e.findIndex(s=>s.name===i.name);r!==-1&&e.splice(r,1)})},handleByList(n,e,t=-1){return this.handle(n,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((r,s)=>Yx(s,t)-Yx(r,t)))},i=>{const r=e.indexOf(i.ref);r!==-1&&e.splice(r,1)})}},PZ={extension:{type:Bt.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await cb(()=>import("./browserAll-565dN1Wk.js"),__vite__mapDeps([0,1,2,3,4]))}},RZ={extension:{type:Bt.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await cb(()=>import("./webworkerAll-jlsikzaB.js"),__vite__mapDeps([1,2,3,4]))}};let So=class i6{constructor(e,t,i){this._x=t||0,this._y=i||0,this._observer=e}clone(e){return new i6(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}};var r6={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function r(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,h,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new r(u,h||l,d),p=t?t+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new i:delete l._events[c]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)e.call(u,h)&&c.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=t?t+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var d=0,f=h.length,p=new Array(f);d<f;d++)p[d]=h[d].fn;return p},a.prototype.listenerCount=function(c){var u=t?t+c:c,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,u,h,d,f,p){var x=t?t+c:c;if(!this._events[x])return!1;var v=this._events[x],y=arguments.length,w,_;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,h),!0;case 4:return v.fn.call(v.context,u,h,d),!0;case 5:return v.fn.call(v.context,u,h,d,f),!0;case 6:return v.fn.call(v.context,u,h,d,f,p),!0}for(_=1,w=new Array(y-1);_<y;_++)w[_-1]=arguments[_];v.fn.apply(v.context,w)}else{var b=v.length,E;for(_=0;_<b;_++)switch(v[_].once&&this.removeListener(c,v[_].fn,void 0,!0),y){case 1:v[_].fn.call(v[_].context);break;case 2:v[_].fn.call(v[_].context,u);break;case 3:v[_].fn.call(v[_].context,u,h);break;case 4:v[_].fn.call(v[_].context,u,h,d);break;default:if(!w)for(E=1,w=new Array(y-1);E<y;E++)w[E-1]=arguments[E];v[_].fn.apply(v[_].context,w)}}return!0},a.prototype.on=function(c,u,h){return s(this,c,u,h,!1)},a.prototype.once=function(c,u,h){return s(this,c,u,h,!0)},a.prototype.removeListener=function(c,u,h,d){var f=t?t+c:c;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!d||p.once)&&(!h||p.context===h)&&o(this,f);else{for(var x=0,v=[],y=p.length;x<y;x++)(p[x].fn!==u||d&&!p[x].once||h&&p[x].context!==h)&&v.push(p[x]);v.length?this._events[f]=v.length===1?v[0]:v:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&o(this,u)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(r6);var IZ=r6.exports;const Al=Ia(IZ),LZ=Math.PI*2,NZ=180/Math.PI,kZ=Math.PI/180;let qt=class s6{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new s6(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return _T.x=0,_T.y=0,_T}};const _T=new qt;let $n=class o6{constructor(e=1,t=0,i=0,r=1,s=0,o=0){this.array=null,this.a=e,this.b=t,this.c=i,this.d=r,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,i,r,s,o){return this.a=e,this.b=t,this.c=i,this.d=r,this.tx=s,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,t){t=t||new qt;const i=e.x,r=e.y;return t.x=this.a*i+this.c*r+this.tx,t.y=this.b*i+this.d*r+this.ty,t}applyInverse(e,t){t=t||new qt;const i=this.a,r=this.b,s=this.c,o=this.d,a=this.tx,l=this.ty,c=1/(i*o+s*-r),u=e.x,h=e.y;return t.x=o*c*u+-s*c*h+(l*s-a*o)*c,t.y=i*c*h+-r*c*u+(-l*i+a*r)*c,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.a,s=this.c,o=this.tx;return this.a=r*t-this.b*i,this.b=r*i+this.b*t,this.c=s*t-this.d*i,this.d=s*i+this.d*t,this.tx=o*t-this.ty*i,this.ty=o*i+this.ty*t,this}append(e){const t=this.a,i=this.b,r=this.c,s=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*i+e.b*s,this.c=e.c*t+e.d*r,this.d=e.c*i+e.d*s,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*i+e.ty*s+this.ty,this}appendFrom(e,t){const i=e.a,r=e.b,s=e.c,o=e.d,a=e.tx,l=e.ty,c=t.a,u=t.b,h=t.c,d=t.d;return this.a=i*c+r*h,this.b=i*u+r*d,this.c=s*c+o*h,this.d=s*u+o*d,this.tx=a*c+l*h+t.tx,this.ty=a*u+l*d+t.ty,this}setTransform(e,t,i,r,s,o,a,l,c){return this.a=Math.cos(a+c)*s,this.b=Math.sin(a+c)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(i*this.a+r*this.c),this.ty=t-(i*this.b+r*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const i=this.a,r=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,i=this.b,r=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-r,s),l=Math.atan2(i,t),c=Math.abs(a+l);return c<1e-5||Math.abs(LZ-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(r*r+s*s),e.position.x=this.tx+(o.x*t+o.y*r),e.position.y=this.ty+(o.x*i+o.y*s),e}invert(){const e=this.a,t=this.b,i=this.c,r=this.d,s=this.tx,o=e*r-t*i;return this.a=r/o,this.b=-t/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-r*s)/o,this.ty=-(e*this.ty-t*s)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new o6;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return DZ.identity()}static get shared(){return OZ.identity()}};const OZ=new $n,DZ=new $n,Ih=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Lh=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Nh=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],kh=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],kP=[],a6=[],qx=Math.sign;function FZ(){for(let n=0;n<16;n++){const e=[];kP.push(e);for(let t=0;t<16;t++){const i=qx(Ih[n]*Ih[t]+Nh[n]*Lh[t]),r=qx(Lh[n]*Ih[t]+kh[n]*Lh[t]),s=qx(Ih[n]*Nh[t]+Nh[n]*kh[t]),o=qx(Lh[n]*Nh[t]+kh[n]*kh[t]);for(let a=0;a<16;a++)if(Ih[a]===i&&Lh[a]===r&&Nh[a]===s&&kh[a]===o){e.push(a);break}}}for(let n=0;n<16;n++){const e=new $n;e.set(Ih[n],Lh[n],Nh[n],kh[n],0,0),a6.push(e)}}FZ();const ci={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>Ih[n],uY:n=>Lh[n],vX:n=>Nh[n],vY:n=>kh[n],inv:n=>n&8?n&15:-n&7,add:(n,e)=>kP[n][e],sub:(n,e)=>kP[n][ci.inv(e)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,e)=>Math.abs(n)*2<=Math.abs(e)?e>=0?ci.S:ci.N:Math.abs(e)*2<=Math.abs(n)?n>0?ci.E:ci.W:e>0?n>0?ci.SE:ci.SW:n>0?ci.NE:ci.NW,matrixAppendRotationInv:(n,e,t=0,i=0)=>{const r=a6[ci.inv(e)];r.tx=t,r.ty=i,n.append(r)}},Zx=[new qt,new qt,new qt,new qt];let Er=class b1{constructor(e=0,t=0,i=0,r=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new b1(0,0,0,0)}clone(){return new b1(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,i){const{width:r,height:s}=this;if(r<=0||s<=0)return!1;const o=this.x,a=this.y,l=o-i/2,c=o+r+i/2,u=a-i/2,h=a+s+i/2,d=o+i/2,f=o+r-i/2,p=a+i/2,x=a+s-i/2;return e>=l&&e<=c&&t>=u&&t<=h&&!(e>d&&e<f&&t>p&&t<x)}intersects(e,t){if(!t){const P=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=P)return!1;const I=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>I}const i=this.left,r=this.right,s=this.top,o=this.bottom;if(r<=i||o<=s)return!1;const a=Zx[0].set(e.left,e.top),l=Zx[1].set(e.left,e.bottom),c=Zx[2].set(e.right,e.top),u=Zx[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const h=Math.sign(t.a*t.d-t.b*t.c);if(h===0||(t.apply(a,a),t.apply(l,l),t.apply(c,c),t.apply(u,u),Math.max(a.x,l.x,c.x,u.x)<=i||Math.min(a.x,l.x,c.x,u.x)>=r||Math.max(a.y,l.y,c.y,u.y)<=s||Math.min(a.y,l.y,c.y,u.y)>=o))return!1;const d=h*(l.y-a.y),f=h*(a.x-l.x),p=d*i+f*s,x=d*r+f*s,v=d*i+f*o,y=d*r+f*o;if(Math.max(p,x,v,y)<=d*a.x+f*a.y||Math.min(p,x,v,y)>=d*u.x+f*u.y)return!1;const w=h*(a.y-c.y),_=h*(c.x-a.x),b=w*i+_*s,E=w*r+_*s,M=w*i+_*o,C=w*r+_*o;return!(Math.max(b,E,M,C)<=w*a.x+_*a.y||Math.min(b,E,M,C)>=w*u.x+_*u.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(i-t,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(e=1,t=.001){const i=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=r-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=i-t,this.y=r,this.height=s-r,this}getBounds(e){return e=e||new b1,e.copyFrom(this),e}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}};const wT={default:-1};function Mr(n="default"){return wT[n]===void 0&&(wT[n]=-1),++wT[n]}const ND={},_i="8.0.0";function wi(n,e,t=3){if(ND[e])return;let i=new Error().stack;typeof i>"u"||(i=i.split(`
`).splice(t).join(`
`)),ND[e]=!0}const l6=()=>{};function x2e(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function kD(n){return!(n&n-1)&&!!n}function UZ(n){const e={};for(const t in n)n[t]!==void 0&&(e[t]=n[t]);return e}const OD=Object.create(null);function BZ(n){const e=OD[n];return e===void 0&&(OD[n]=Mr("resource")),e}const c6=class u6 extends Al{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,e={...u6.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){wi(_i,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=BZ(e),this._resourceId}destroy(){this.emit("destroy",this),this.removeAllListeners()}};c6.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let zZ=c6;const h6=class d6 extends Al{constructor(e={}){super(),this.options=e,this.uid=Mr("textureSource"),this._resourceType="textureSource",this._resourceId=Mr("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...d6.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new zZ(UZ(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,i;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(i=this._style)==null||i.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Mr("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,i){i=i||this._resolution,e=e||this.width,t=t||this.height;const r=Math.round(e*i),s=Math.round(t*i);return this.width=r/i,this.height=s/i,this._resolution=i,this.pixelWidth===r&&this.pixelHeight===s?!1:(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=s,this.emit("resize",this),this._resourceId=Mr("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=kD(this.pixelWidth)&&kD(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};h6.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Yu=h6;class QI extends Yu{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let i=e.format;i||(t instanceof Float32Array?i="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?i="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?i="rgba16uint":(t instanceof Int8Array,i="bgra8unorm")),super({...e,resource:t,format:i}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}QI.extension=Bt.TextureSource;const DD=new $n;let HZ=class{constructor(e,t){this.mapCoord=new $n,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const i=this.mapCoord;for(let r=0;r<e.length;r+=2){const s=e[r],o=e[r+1];t[r]=s*i.a+o*i.c+i.tx,t[r+1]=s*i.b+o*i.d+i.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const i=e.orig,r=e.trim;r&&(DD.set(i.width/r.width,0,0,i.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(DD));const s=e.source,o=this.uClampFrame,a=this.clampMargin/s._resolution,l=this.clampOffset;return o[0]=(e.frame.x+a+l)/s.width,o[1]=(e.frame.y+a+l)/s.height,o[2]=(e.frame.x+e.frame.width-a+l)/s.width,o[3]=(e.frame.y+e.frame.height-a+l)/s.height,this.uClampOffset[0]=l/s.pixelWidth,this.uClampOffset[1]=l/s.pixelHeight,this.isSimple=e.frame.width===s.width&&e.frame.height===s.height&&e.rotate===0,!0}},On=class extends Al{constructor({source:e,label:t,frame:i,orig:r,trim:s,defaultAnchor:o,defaultBorders:a,rotate:l}={}){if(super(),this.uid=Mr("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Er,this.noFrame=!1,this.isTexture=!0,this.label=t,this.source=(e==null?void 0:e.source)??new Yu,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:c,height:u}=this._source;this.frame.width=c,this.frame.height=u}this.orig=r||this.frame,this.trim=s,this.rotate=l??0,this.defaultAnchor=o,this.defaultBorders=a,this.destroyed=!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new HZ(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:i,height:r}=this._source,s=t.x/i,o=t.y/r,a=t.width/i,l=t.height/r;let c=this.rotate;if(c){const u=a/2,h=l/2,d=s+u,f=o+h;c=ci.add(c,ci.NW),e.x0=d+u*ci.uX(c),e.y0=f+h*ci.uY(c),c=ci.add(c,2),e.x1=d+u*ci.uX(c),e.y1=f+h*ci.uY(c),c=ci.add(c,2),e.x2=d+u*ci.uX(c),e.y2=f+h*ci.uY(c),c=ci.add(c,2),e.x3=d+u*ci.uX(c),e.y3=f+h*ci.uY(c)}else e.x0=s,e.y0=o,e.x1=s+a,e.y1=o,e.x2=s+a,e.y2=o+l,e.x3=s,e.y3=o+l}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return wi(_i,"Texture.baseTexture is now Texture.source"),this._source}};On.EMPTY=new On({label:"EMPTY",source:new Yu({label:"EMPTY"})});On.EMPTY.destroy=l6;On.WHITE=new On({source:new QI({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});On.WHITE.destroy=l6;function WZ(n,e,t,i){const{width:r,height:s}=t.orig,o=t.trim;if(o){const a=o.width,l=o.height;n.minX=o.x-e._x*r-i,n.maxX=n.minX+a,n.minY=o.y-e._y*s-i,n.maxY=n.minY+l}else n.minX=-e._x*r-i,n.maxX=n.minX+r,n.minY=-e._y*s-i,n.maxY=n.minY+s}var VZ={grad:.9,turn:360,rad:360/(2*Math.PI)},Wl=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},ar=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Ao=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},f6=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},FD=function(n){return{r:Ao(n.r,0,255),g:Ao(n.g,0,255),b:Ao(n.b,0,255),a:Ao(n.a)}},bT=function(n){return{r:ar(n.r),g:ar(n.g),b:ar(n.b),a:ar(n.a,3)}},GZ=/^#([0-9a-f]{3,8})$/i,Kx=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},p6=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),a=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:r}},m6=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),a=i*(1-(e-s)*t),l=i*(1-(1-e+s)*t),c=s%6;return{r:255*[i,a,o,o,l,i][c],g:255*[l,i,i,a,o,o][c],b:255*[o,o,l,i,i,a][c],a:r}},UD=function(n){return{h:f6(n.h),s:Ao(n.s,0,100),l:Ao(n.l,0,100),a:Ao(n.a)}},BD=function(n){return{h:ar(n.h),s:ar(n.s),l:ar(n.l),a:ar(n.a,3)}},zD=function(n){return m6((t=(e=n).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},jy=function(n){return{h:(e=p6(n)).h,s:(r=(200-(t=e.s))*(i=e.v)/100)>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,i,r},jZ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,$Z=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,XZ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,YZ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,OP={string:[[function(n){var e=GZ.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?ar(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?ar(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=XZ.exec(n)||YZ.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:FD({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=jZ.exec(n)||$Z.exec(n);if(!e)return null;var t,i,r=UD({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(VZ[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return zD(r)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=r===void 0?1:r;return Wl(e)&&Wl(t)&&Wl(i)?FD({r:Number(e),g:Number(t),b:Number(i),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,i=n.l,r=n.a,s=r===void 0?1:r;if(!Wl(e)||!Wl(t)||!Wl(i))return null;var o=UD({h:Number(e),s:Number(t),l:Number(i),a:Number(s)});return zD(o)},"hsl"],[function(n){var e=n.h,t=n.s,i=n.v,r=n.a,s=r===void 0?1:r;if(!Wl(e)||!Wl(t)||!Wl(i))return null;var o=function(a){return{h:f6(a.h),s:Ao(a.s,0,100),v:Ao(a.v,0,100),a:Ao(a.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(s)});return m6(o)},"hsv"]]},HD=function(n,e){for(var t=0;t<e.length;t++){var i=e[t][0](n);if(i)return[i,e[t][1]]}return[null,void 0]},qZ=function(n){return typeof n=="string"?HD(n.trim(),OP.string):typeof n=="object"&&n!==null?HD(n,OP.object):[null,void 0]},ST=function(n,e){var t=jy(n);return{h:t.h,s:Ao(t.s+100*e,0,100),l:t.l,a:t.a}},ET=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},WD=function(n,e){var t=jy(n);return{h:t.h,s:t.s,l:Ao(t.l+100*e,0,100),a:t.a}},DP=function(){function n(e){this.parsed=qZ(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return ar(ET(this.rgba),2)},n.prototype.isDark=function(){return ET(this.rgba)<.5},n.prototype.isLight=function(){return ET(this.rgba)>=.5},n.prototype.toHex=function(){return e=bT(this.rgba),t=e.r,i=e.g,r=e.b,o=(s=e.a)<1?Kx(ar(255*s)):"","#"+Kx(t)+Kx(i)+Kx(r)+o;var e,t,i,r,s,o},n.prototype.toRgb=function(){return bT(this.rgba)},n.prototype.toRgbString=function(){return e=bT(this.rgba),t=e.r,i=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+i+", "+r+", "+s+")":"rgb("+t+", "+i+", "+r+")";var e,t,i,r,s},n.prototype.toHsl=function(){return BD(jy(this.rgba))},n.prototype.toHslString=function(){return e=BD(jy(this.rgba)),t=e.h,i=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+s+")":"hsl("+t+", "+i+"%, "+r+"%)";var e,t,i,r,s},n.prototype.toHsv=function(){return e=p6(this.rgba),{h:ar(e.h),s:ar(e.s),v:ar(e.v),a:ar(e.a,3)};var e},n.prototype.invert=function(){return ca({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),ca(ST(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),ca(ST(this.rgba,-e))},n.prototype.grayscale=function(){return ca(ST(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),ca(WD(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),ca(WD(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?ca({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):ar(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=jy(this.rgba);return typeof e=="number"?ca({h:e,s:t.s,l:t.l,a:t.a}):ar(t.h)},n.prototype.isEqual=function(e){return this.toHex()===ca(e).toHex()},n}(),ca=function(n){return n instanceof DP?n:new DP(n)},VD=[],g6=function(n){n.forEach(function(e){VD.indexOf(e)<0&&(e(DP,OP),VD.push(e))})};function y6(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in t)i[t[r]]=r;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=i[this.toHex()];if(c)return c;if(o!=null&&o.closest){var u=this.toRgb(),h=1/0,d="black";if(!s.length)for(var f in t)s[f]=new n(t[f]).toRgb();for(var p in t){var x=(a=u,l=s[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));x<h&&(h=x,d=p)}return d}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}g6([y6]);const dm=class Ay{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Ay)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._normalize(e),this._value=this._cloneSource(e))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const i=typeof e;if(i!==typeof t)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((s,o)=>s===t[o]);if(e!==null&&t!==null){const s=Object.keys(e),o=Object.keys(t);return s.length!==o.length?!1:s.every(a=>e[a]===t[a])}return e===t}toRgba(){const[e,t,i,r]=this._components;return{r:e,g:t,b:i,a:r}}toRgb(){const[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){const[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){const[t,i,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e=e||this._arrayRgb,e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(r*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e=e||this._arrayRgba;const[t,i,r,s]=this._components;return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e=e||this._arrayRgb;const[t,i,r]=this._components;return e[0]=t,e[1]=i,e[2]=r,e}toNumber(){return this._int}toBgrNumber(){const[e,t,i]=this.toUint8RgbArray();return(i<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,i,r,s]=Ay._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=i,this._components[2]*=r,this._components[3]*=s,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let i=this._int>>16&255,r=this._int>>8&255,s=this._int&255;return t&&(i=i*e+.5|0,r=r*e+.5|0,s=s*e+.5|0),(e*255<<24)+(i<<16)+(r<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,i,r,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;t=(o>>16&255)/255,i=(o>>8&255)/255,r=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,i,r,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,i,r,s=255]=e,t/=255,i/=255,r/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=Ay.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=ca(e);o.isValid()&&({r:t,g:i,b:r,a:s}=o.rgba,t/=255,i/=255,r/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=i,this._components[2]=r,this._components[3]=s,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,i]=this._components;this._int=(e*255<<16)+(t*255<<8)+(i*255|0)}_clamp(e,t=0,i=1){return typeof e=="number"?Math.min(Math.max(e,t),i):(e.forEach((r,s)=>{e[s]=Math.min(Math.max(r,t),i)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof Ay||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};dm.shared=new dm;dm._temp=new dm;dm.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let _s=dm;const ZZ={cullArea:null,cullable:!1,cullableChildren:!0};function KZ(n,e,t){const i=n.length;let r;if(e>=i||t===0)return;t=e+t>i?i-e:t;const s=i-t;for(r=e;r<s;++r)n[r]=n[r+t];n.length=s}const QZ={allowChildren:!0,removeChildren(n=0,e){const t=e??this.children.length,i=t-n,r=[];if(i>0&&i<=t){for(let s=t-1;s>=n;s--){const o=this.children[s];o&&(this.renderGroup&&this.renderGroup.removeChild(o),r.push(o),o.parent=null)}KZ(this.children,n,t);for(let s=0;s<r.length;++s)this.emit("childRemoved",r[s],this,s),r[s].emit("removed",this);return r}else if(i===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const e=this.getChildAt(n);return this.removeChild(e)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,e)},getChildIndex(n){const e=this.children.indexOf(n);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(n,e){this.allowChildren||wi(_i,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${n}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(n.parent){const i=n.parent.children.indexOf(n);if(n.parent===this&&i===e)return n;i!==-1&&n.parent.children.splice(i,1)}return e===t.length?t.push(n):t.splice(e,0,n),n.parent=this,n.didChange=!0,n.didViewUpdate=!1,n._updateFlags=15,this.renderGroup&&this.renderGroup.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,e),n.emit("added",this),n},swapChildren(n,e){if(n===e)return;const t=this.getChildIndex(n),i=this.getChildIndex(e);this.children[t]=e,this.children[i]=n},removeFromParent(){var n;(n=this.parent)==null||n.removeChild(this)}};class JZ{constructor(e){this.pipe="filter",this.priority=1,this.filters=e==null?void 0:e.filters,this.filterArea=e==null?void 0:e.filterArea}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class JI{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var i;let t;return this._index>0?t=this._pool[--this._index]:t=new this._classType,(i=t.init)==null||i.call(t,e),t}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}}class eK{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new JI(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const i=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[i]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}}const va=new eK;class tK{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const i=this._tests[t];if(i.test(e))return va.get(i.maskClass,e)}return e}returnMaskEffect(e){va.return(e)}}const FP=new tK;qs.handleByList(Bt.MaskEffect,FP._effectClasses);const nK={_mask:null,_filters:null,effects:[],addEffect(n){this.effects.indexOf(n)===-1&&(this.effects.push(n),this.effects.sort((t,i)=>t.priority-i.priority),this.renderGroup&&(this.renderGroup.structureDidChange=!0),this._updateIsSimple())},removeEffect(n){const e=this.effects.indexOf(n);e!==-1&&(this.effects.splice(e,1),!this.isRenderGroupRoot&&this.renderGroup&&(this.renderGroup.structureDidChange=!0),this._updateIsSimple())},set mask(n){if(this._mask||(this._mask={mask:null,effect:null}),this._mask.mask===n||(this._mask.effect&&(this.removeEffect(this._mask.effect),FP.returnMaskEffect(this._mask.effect),this._mask.effect=null),this._mask.mask=n,n==null))return;const e=FP.getMaskEffect(n);this._mask.effect=e,this.addEffect(e)},get mask(){var n;return(n=this._mask)==null?void 0:n.mask},set filters(n){!Array.isArray(n)&&n&&(n=[n]),n=n,this._filters||(this._filters={filters:null,effect:null,filterArea:null});const e=(n==null?void 0:n.length)>0,t=this._filters.effect&&!e||!this._filters.effect&&e;if(n=Array.isArray(n)?n.slice(0):n,this._filters.filters=Object.freeze(n),t)if(e){const i=va.get(JZ);this._filters.effect=i,this.addEffect(i)}else{const i=this._filters.effect;this.removeEffect(i),i.filterArea=null,i.filters=null,this._filters.effect=null,va.return(i)}e&&(this._filters.effect.filters=n,this._filters.effect.filterArea=this.filterArea)},get filters(){var n;return(n=this._filters)==null?void 0:n.filters},set filterArea(n){this._filters||(this._filters={filters:null,effect:null,filterArea:null}),this._filters.filterArea=n},get filterArea(){var n;return(n=this._filters)==null?void 0:n.filterArea}},iK={label:null,get name(){return wi(_i,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){wi(_i,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,e=!1){return this.getChildByLabel(n,e)},getChildByLabel(n,e=!1){const t=this.children;for(let i=0;i<t.length;i++){const r=t[i];if(r.label===n||n instanceof RegExp&&n.test(r.label))return r}if(e)for(let i=0;i<t.length;i++){const s=t[i].getChildByLabel(n,!0);if(s)return s}return null},getChildrenByLabel(n,e=!1,t=[]){const i=this.children;for(let r=0;r<i.length;r++){const s=i[r];(s.label===n||n instanceof RegExp&&n.test(s.label))&&t.push(s)}if(e)for(let r=0;r<i.length;r++)i[r].getChildrenByLabel(n,!0,t);return t}},GD=new $n;let Du=class v6{constructor(e=1/0,t=1/0,i=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=GD,this.minX=e,this.minY=t,this.maxX=i,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Er);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=GD,this}set(e,t,i,r){this.minX=e,this.minY=t,this.maxX=i,this.maxY=r}addFrame(e,t,i,r,s){s||(s=this.matrix);const o=s.a,a=s.b,l=s.c,c=s.d,u=s.tx,h=s.ty;let d=this.minX,f=this.minY,p=this.maxX,x=this.maxY,v=o*e+l*t+u,y=a*e+c*t+h;v<d&&(d=v),y<f&&(f=y),v>p&&(p=v),y>x&&(x=y),v=o*i+l*t+u,y=a*i+c*t+h,v<d&&(d=v),y<f&&(f=y),v>p&&(p=v),y>x&&(x=y),v=o*e+l*r+u,y=a*e+c*r+h,v<d&&(d=v),y<f&&(f=y),v>p&&(p=v),y>x&&(x=y),v=o*i+l*r+u,y=a*i+c*r+h,v<d&&(d=v),y<f&&(f=y),v>p&&(p=v),y>x&&(x=y),this.minX=d,this.minY=f,this.maxX=p,this.maxY=x}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,i=this.minY,r=this.maxX,s=this.maxY,{a:o,b:a,c:l,d:c,tx:u,ty:h}=e;let d=o*t+l*i+u,f=a*t+c*i+h;this.minX=d,this.minY=f,this.maxX=d,this.maxY=f,d=o*r+l*i+u,f=a*r+c*i+h,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY,d=o*t+l*s+u,f=a*t+c*s+h,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY,d=o*r+l*s+u,f=a*r+c*s+h,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new v6(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,i,r){let s=this.minX,o=this.minY,a=this.maxX,l=this.maxY;r||(r=this.matrix);const c=r.a,u=r.b,h=r.c,d=r.d,f=r.tx,p=r.ty;for(let x=t;x<i;x+=2){const v=e[x],y=e[x+1],w=c*v+h*y+f,_=u*v+d*y+p;s=w<s?w:s,o=_<o?_:o,a=w>a?w:a,l=_>l?_:l}this.minX=s,this.minY=o,this.maxX=a,this.maxY=l}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}};const uc=new JI($n),fm=new JI(Du);function x6(n,e,t){t.clear();let i,r;return n.parent?e?i=n.parent.worldTransform:(r=uc.get().identity(),i=ub(n,r)):i=$n.IDENTITY,_6(n,t,i,e),r&&uc.return(r),t.isValid||t.set(0,0,0,0),t}function _6(n,e,t,i){var a,l;if(!n.visible||!n.measurable)return;let r;i?r=n.worldTransform:(n.updateLocalTransform(),r=uc.get(),r.appendFrom(n.localTransform,t));const s=e,o=!!n.effects.length;if(o&&(e=fm.get().clear()),n.boundsArea)e.addRect(n.boundsArea,r);else{n.addBounds&&(e.matrix=r,n.addBounds(e));for(let c=0;c<n.children.length;c++)_6(n.children[c],e,r,i)}if(o){for(let c=0;c<n.effects.length;c++)(l=(a=n.effects[c]).addBounds)==null||l.call(a,e);s.addBounds(e,$n.IDENTITY),fm.return(e)}i||uc.return(r)}function ub(n,e){const t=n.parent;return t&&(ub(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}let MT=0;const jD=500;function Zn(...n){MT!==jD&&MT++}function w6(n,e,t){return e.clear(),t||(t=$n.IDENTITY),b6(n,e,t,n,!0),e.isValid||e.set(0,0,0,0),e}function b6(n,e,t,i,r){var l,c;let s;if(r)s=uc.get(),s=t.copyTo(s);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const u=n.localTransform;s=uc.get(),s.appendFrom(u,t)}const o=e,a=!!n.effects.length;if(a&&(e=fm.get().clear()),n.boundsArea)e.addRect(n.boundsArea,s);else{n.renderPipeId&&(e.matrix=s,n.addBounds(e));const u=n.children;for(let h=0;h<u.length;h++)b6(u[h],e,s,i,!1)}if(a){for(let u=0;u<n.effects.length;u++)(c=(l=n.effects[u]).addLocalBounds)==null||c.call(l,e,i);o.addBounds(e,$n.IDENTITY),fm.return(e)}uc.return(s)}function S6(n,e){const t=n.children;for(let i=0;i<t.length;i++){const r=t[i],s=(r.uid&255)<<24|r._didChangeId&16777215;e.data[e.index]!==s&&(e.data[e.index]=s,e.didChange=!0),e.index++,r.children.length&&S6(r,e)}return e.didChange}const rK=new $n,sK={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=n/e*t:this.scale.x=t},_setHeight(n,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=n/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Du});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didChangeId>>12&&(n.didChange=!0,n.data[0]=this._didChangeId>>12),S6(this,n),n.didChange&&w6(this,n.localBounds,rK),n.localBounds},getBounds(n,e){return x6(this,n,e||new Du)}},oK={_onRender:null,set onRender(n){const e=this.renderGroup;if(!n){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},aK={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(lK))}};function lK(n,e){return n._zIndex-e._zIndex}const cK={getGlobalPosition(n=new qt,e=!1){return this.parent?this.parent.toGlobal(this._position,n,e):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,e,t=!1){if(!t){this.updateLocalTransform();const i=ub(this,new $n);return i.append(this.localTransform),i.apply(n,e)}return this.worldTransform.apply(n,e)},toLocal(n,e,t,i){if(e&&(n=e.toGlobal(n,t,i)),!i){this.updateLocalTransform();const r=ub(this,new $n);return r.append(this.localTransform),r.applyInverse(n,t)}return this.worldTransform.applyInverse(n,t)}};class E6{constructor(){this.uid=Mr("instructionSet"),this.instructions=[],this.instructionSize=0}reset(){this.instructionSize=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize}}class uK{constructor(e){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this._children=[],this.worldTransform=new $n,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new E6,this._onRenderContainers=[],this.root=e,this.addChild(e)}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.onChildUpdate(e.root),this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){e.root.didChange&&this._removeChildFromUpdate(e.root);const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e!==this.root&&(this._children.push(e),e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e._onRender&&this.addOnRender(e)),e.renderGroup){if(e.renderGroup.root===e){this.addRenderGroupChild(e.renderGroup);return}}else e.renderGroup=this,e.didChange=!0;const t=e.children;e.isRenderGroupRoot||this.onChildUpdate(e);for(let i=0;i<t.length;i++)this.addChild(t[i])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&this.removeOnRender(e),e.renderGroup.root!==e){const i=e.children;for(let r=0;r<i.length;r++)this.removeChild(i[r]);e.didChange&&e.renderGroup._removeChildFromUpdate(e),e.renderGroup=null}else this._removeRenderGroupChild(e.renderGroup);const t=this._children.indexOf(e);t>-1&&this._children.splice(t,1)}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(e.didViewUpdate=!1,this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e))}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}_removeChildFromUpdate(e){const t=this.childrenToUpdate[e.relativeRenderGroupDepth];if(!t)return;const i=t.list.indexOf(e);i>-1&&t.list.splice(i,1),t.index--}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender()}}function hK(n,e,t={}){for(const i in e)!t[i]&&e[i]!==void 0&&(n[i]=e[i])}const TT=new So(null),AT=new So(null),CT=new So(null,1,1),$D=1,dK=2,PT=4;let dn=class M6 extends Al{constructor(e={}){var t,i;super(),this.uid=Mr("renderable"),this._updateFlags=15,this.isRenderGroupRoot=!1,this.renderGroup=null,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new $n,this.relativeGroupTransform=new $n,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new So(this,0,0),this._scale=CT,this._pivot=AT,this._skew=TT,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didChangeId=0,this._didLocalTransformChangeId=-1,hK(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(r=>this.addChild(r)),this.effects=[],(i=e.parent)==null||i.addChild(this)}static mixin(e){Object.defineProperties(M6.prototype,Object.getOwnPropertyDescriptors(e))}addChild(...e){if(this.allowChildren||wi(_i,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let i=0;i<e.length;i++)this.addChild(e[i]);return e[0]}const t=e[0];return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t.didViewUpdate=!1,t._updateFlags=15,this.renderGroup&&this.renderGroup.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let r=0;r<e.length;r++)this.removeChild(e[r]);return e[0]}const t=e[0],i=this.children.indexOf(t);return i>-1&&(this.children.splice(i,1),this.renderGroup&&this.renderGroup.removeChild(t),t.parent=null,this.emit("childRemoved",t,this,i),t.emit("removed",this)),t}_onUpdate(e){if(e&&e===this._skew&&this._updateSkew(),this._didChangeId++,!this.didChange)if(this.didChange=!0,this.isRenderGroupRoot){const t=this.renderGroup.renderGroupParent;t&&t.onChildUpdate(this)}else this.renderGroup&&this.renderGroup.onChildUpdate(this)}set isRenderGroup(e){if(this.isRenderGroupRoot&&e===!1)throw new Error("[Pixi] cannot undo a render group just yet");e&&this.enableRenderGroup()}get isRenderGroup(){return this.isRenderGroupRoot}enableRenderGroup(){if(this.renderGroup&&this.renderGroup.root===this)return;this.isRenderGroupRoot=!0;const e=this.renderGroup;if(e&&e.removeChild(this),this.renderGroup=new uK(this),e){for(let t=0;t<e.renderGroupChildren.length;t++){const i=e.renderGroupChildren[t];let r=i.root;for(;r;){if(r===this){this.renderGroup.addRenderGroupChild(i);break}r=r.parent}}e.addRenderGroupChild(this.renderGroup)}this._updateIsSimple(),this.groupTransform=$n.IDENTITY}_updateIsSimple(){this.isSimple=!this.isRenderGroupRoot&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new $n),this.renderGroup&&(this.isRenderGroupRoot?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this._worldTransform.appendFrom(this.relativeGroupTransform,this.renderGroup.worldTransform)),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*NZ}set angle(e){this.rotation=e*kZ}get pivot(){return this._pivot===AT&&(this._pivot=new So(this,0,0)),this._pivot}set pivot(e){this._pivot===AT&&(this._pivot=new So(this,0,0)),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===TT&&(this._skew=new So(this,0,0)),this._skew}set skew(e){this._skew===TT&&(this._skew=new So(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===CT&&(this._scale=new So(this,1,1)),this._scale}set scale(e){this._scale===CT&&(this._scale=new So(this,0,0)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const i=this.getLocalBounds();let r,s;typeof e!="object"?(r=e,s=t??e):(r=e.width,s=e.height??e.width),r!==void 0&&this._setWidth(r,i.width),s!==void 0&&this._setHeight(s,i.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){if((this._didLocalTransformChangeId&15)===this._didChangeId)return;this._didLocalTransformChangeId=this._didChangeId;const e=this.localTransform,t=this._scale,i=this._pivot,r=this._position,s=t._x,o=t._y,a=i._x,l=i._y;e.a=this._cx*s,e.b=this._sx*s,e.c=this._cy*o,e.d=this._sy*o,e.tx=r._x-(a*e.a+l*e.c),e.ty=r._y-(a*e.b+l*e.d)}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=$D,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const i=_s.shared.setValue(e??16777215).toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=$D,this._onUpdate())}get tint(){const e=this.localColor;return((e&255)<<16)+(e&65280)+(e>>16&255)}set blendMode(e){this.localBlendMode!==e&&(this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._updateFlags|=dK,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?1:0;(this.localDisplayStatus&2)>>1!==t&&(this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._updateFlags|=PT,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?1:0;(this.localDisplayStatus&4)>>2!==t&&(this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._updateFlags|=PT,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=PT,this.localDisplayStatus^=1,this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){if(this.destroyed)return;this.destroyed=!0,this.removeFromParent(),this.parent=null,this._mask=null,this._filters=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners();const t=typeof e=="boolean"?e:e==null?void 0:e.children,i=this.removeChildren(0,this.children.length);if(t)for(let r=0;r<i.length;++r)i[r].destroy(e)}};dn.mixin(QZ);dn.mixin(cK);dn.mixin(oK);dn.mixin(sK);dn.mixin(nK);dn.mixin(iK);dn.mixin(aK);dn.mixin(ZZ);let hb=class UP extends dn{constructor(e=On.EMPTY){e instanceof On&&(e={texture:e});const{texture:t,anchor:i,roundPixels:r,width:s,height:o,...a}=e;super({label:"Sprite",...a}),this.renderPipeId="sprite",this.batched=!0,this._didSpriteUpdate=!1,this._bounds={minX:0,maxX:1,minY:0,maxY:0},this._sourceBounds={minX:0,maxX:1,minY:0,maxY:0},this._boundsDirty=!0,this._sourceBoundsDirty=!0,this._roundPixels=0,this._anchor=new So({_onUpdate:()=>{this.onViewUpdate()}}),i&&(this.anchor=i),this.texture=t,this.allowChildren=!1,this.roundPixels=r??!1,s&&(this.width=s),o&&(this.height=o)}static from(e,t=!1){return e instanceof On?new UP(e):new UP(On.from(e,t))}set texture(e){e||(e=On.EMPTY),this._texture!==e&&(this._texture=e,this.onViewUpdate())}get texture(){return this._texture}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get sourceBounds(){return this._sourceBoundsDirty&&(this._updateSourceBounds(),this._sourceBoundsDirty=!1),this._sourceBounds}containsPoint(e){const t=this.sourceBounds;return e.x>=t.maxX&&e.x<=t.minX&&e.y>=t.maxY&&e.y<=t.minY}addBounds(e){const t=this._texture.trim?this.sourceBounds:this.bounds;e.addFrame(t.minX,t.minY,t.maxX,t.maxY)}onViewUpdate(){this._didChangeId+=4096,this._didSpriteUpdate=!0,this._sourceBoundsDirty=this._boundsDirty=!0,!this.didViewUpdate&&(this.didViewUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}_updateBounds(){WZ(this._bounds,this._anchor,this._texture,0)}_updateSourceBounds(){const e=this._anchor,t=this._texture,i=this._sourceBounds,{width:r,height:s}=t.orig;i.maxX=-e._x*r,i.minX=i.maxX+r,i.maxY=-e._y*s,i.minY=i.maxY+s}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const i=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(i)}this._texture=null,this._bounds=null,this._sourceBounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width)}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){let i,r;typeof e!="object"?(i=e,r=t??e):(i=e.width,r=e.height??e.width),i!==void 0&&this._setWidth(i,this._texture.orig.width),r!==void 0&&this._setHeight(r,this._texture.orig.height)}};const fK=new Du;function T6(n,e,t){const i=fK;n.measurable=!0,x6(n,t,i),e.addBoundsMask(i),n.measurable=!1}function A6(n,e,t){const i=fm.get();n.measurable=!0;const r=uc.get().identity(),s=C6(n,t,r);w6(n,i,s),n.measurable=!1,e.addBoundsMask(i),uc.return(r),fm.return(i)}function C6(n,e,t){return n?(n!==e&&(C6(n.parent,e,t),n.updateLocalTransform(),t.append(n.localTransform)),t):(Zn("Mask bounds, renderable is not inside the root container"),t)}class P6{constructor(e){this.priority=0,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof hb),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(e,t){T6(this.mask,e,t)}addLocalBounds(e,t){A6(this.mask,e,t)}containsPoint(e,t){const i=this.mask;return t(i,e)}destroy(){this.reset()}static test(e){return e instanceof hb}}P6.extension=Bt.MaskEffect;class R6{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}R6.extension=Bt.MaskEffect;class I6{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(e,t){T6(this.mask,e,t)}addLocalBounds(e,t){A6(this.mask,e,t)}containsPoint(e,t){const i=this.mask;return t(i,e)}destroy(){this.reset()}static test(e){return e instanceof dn}}I6.extension=Bt.MaskEffect;const pK={createCanvas:(n,e)=>{const t=document.createElement("canvas");return t.width=n,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,e)=>fetch(n,e),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let XD=pK;const Tr={get(){return XD},set(n){XD=n}};class L6 extends Yu{constructor(e){e.resource||(e.resource=Tr.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity;const t=e.resource;(this.pixelWidth!==t.width||this.pixelWidth!==t.height)&&this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,i=this._resolution){const r=super.resize(e,t,i);return r&&this.resizeCanvas(),r}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}}L6.extension=Bt.TextureSource;class v0 extends Yu{constructor(e){if(e.resource&&globalThis.HTMLImageElement&&e.resource instanceof HTMLImageElement){const t=Tr.get().createCanvas(e.resource.width,e.resource.height);t.getContext("2d").drawImage(e.resource,0,0),e.resource=t,Zn("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap}}v0.extension=Bt.TextureSource;var db=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(db||{});let RT=class{constructor(e,t=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=i,this._once=r}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}};const N6=class zs{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new RT(null,null,1/0),this.deltaMS=1/zs.targetFPMS,this.elapsedMS=1/zs.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=db.NORMAL){return this._addListener(new RT(e,t,i))}addOnce(e,t,i=db.NORMAL){return this._addListener(new RT(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*zs.targetFPMS;const i=this._head;let r=i.next;for(;r;)r=r.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,zs.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!zs._shared){const e=zs._shared=new zs;e.autoStart=!0,e._protected=!0}return zs._shared}static get system(){if(!zs._system){const e=zs._system=new zs;e.autoStart=!0,e._protected=!0}return zs._system}};N6.targetFPMS=.06;let sd=N6,IT;async function k6(){return IT??(IT=(async()=>{var o;const e=document.createElement("canvas").getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(a=>{const l=document.createElement("video");l.onloadeddata=()=>a(l),l.onerror=()=>a(null),l.autoplay=!1,l.crossOrigin="anonymous",l.preload="auto",l.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",l.load()});if(!t)return"premultiply-alpha-on-upload";const i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const s=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,s),e.deleteFramebuffer(r),e.deleteTexture(i),(o=e.getExtension("WEBGL_lose_context"))==null||o.loseContext(),s[0]<=s[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),IT}const AS=class O6 extends Yu{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...O6.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=sd.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await k6(),this._load=new Promise((i,r)=>{this.isValid?i(this):(this._resolve=i,this._reject=r,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(sd.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(sd.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(sd.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||globalThis.VideoFrame&&e instanceof VideoFrame}};AS.extension=Bt.TextureSource;AS.defaultOptions={...Yu.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};AS.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let S1=AS;const xa=(n,e,t=!1)=>(Array.isArray(n)||(n=[n]),e?n.map(i=>typeof i=="string"||t?e(i):i):n);class mK{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||Zn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const i=xa(e);let r;for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];if(c.test(t)){r=c.getCacheableAssets(i,t);break}}const s=new Map(Object.entries(r||{}));r||i.forEach(l=>{s.set(l,t)});const o=[...s.keys()],a={cacheKeys:o,keys:i};i.forEach(l=>{this._cacheMap.set(l,a)}),o.forEach(l=>{const c=r?r[l]:t;this._cache.has(l)&&this._cache.get(l)!==c&&Zn("[Cache] already has key:",l),this._cache.set(l,s.get(l))})}remove(e){if(!this._cacheMap.has(e)){Zn(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(r=>{this._cache.delete(r)}),t.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const os=new mK,BP=[];qs.handleByList(Bt.TextureSource,BP);function gK(n={}){const e=n&&n.resource,t=e?n.resource:n,i=e?n:{resource:n};for(let r=0;r<BP.length;r++){const s=BP[r];if(s.test(t))return new s(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function yK(n={},e=!1){const t=n&&n.resource,i=t?n.resource:n,r=t?n:{resource:n};if(!e&&os.has(i))return os.get(i);const s=new On({source:gK(r)});return s.on("destroy",()=>{os.has(i)&&os.remove(i)}),e||os.set(i,s),s}function vK(n,e=!1){return typeof n=="string"?os.get(n):n instanceof Yu?new On({source:n}):yK(n,e)}On.from=vK;qs.add(P6,R6,I6,S1,v0,L6,QI);var Xd=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(Xd||{});function Jo(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function Fg(n){return n.split("?")[0].split("#")[0]}function xK(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _K(n,e,t){return n.replace(new RegExp(xK(e),"g"),t)}function wK(n,e){let t="",i=0,r=-1,s=0,o=-1;for(let a=0;a<=n.length;++a){if(a<n.length)o=n.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(r===a-1||s===1))if(r!==a-1&&s===2){if(t.length<2||i!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const l=t.lastIndexOf("/");if(l!==t.length-1){l===-1?(t="",i=0):(t=t.slice(0,l),i=t.length-1-t.lastIndexOf("/")),r=a,s=0;continue}}else if(t.length===2||t.length===1){t="",i=0,r=a,s=0;continue}}}else t.length>0?t+=`/${n.slice(r+1,a)}`:t=n.slice(r+1,a),i=a-r-1;r=a,s=0}else o===46&&s!==-1?++s:s=-1}return t}const Ml={toPosix(n){return _K(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){Jo(n),n=this.toPosix(n);const e=/^file:\/\/\//.exec(n);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(n);return t?t[0]:""},toAbsolute(n,e,t){if(Jo(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const i=Fg(this.toPosix(e??Tr.get().getBaseUrl())),r=Fg(this.toPosix(t??this.rootname(i)));return n=this.toPosix(n),n.startsWith("/")?Ml.join(r,n.slice(1)):this.isAbsolute(n)?n:this.join(i,n)},normalize(n){if(Jo(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let e="";const t=n.startsWith("/");this.hasProtocol(n)&&(e=this.rootname(n),n=n.slice(e.length));const i=n.endsWith("/");return n=wK(n),n.length>0&&i&&(n+="/"),t?`/${n}`:e+n},isAbsolute(n){return Jo(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const i=n[t];if(Jo(i),i.length>0)if(e===void 0)e=i;else{const r=n[t-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?e+=`/../${i}`:e+=`/${i}`}}return e===void 0?".":this.normalize(e)},dirname(n){if(Jo(n),n.length===0)return".";n=this.toPosix(n);let e=n.charCodeAt(0);const t=e===47;let i=-1,r=!0;const s=this.getProtocol(n),o=n;n=n.slice(s.length);for(let a=n.length-1;a>=1;--a)if(e=n.charCodeAt(a),e===47){if(!r){i=a;break}}else r=!1;return i===-1?t?"/":this.isUrl(o)?s+n:s:t&&i===1?"//":s+n.slice(0,i)},rootname(n){Jo(n),n=this.toPosix(n);let e="";if(n.startsWith("/")?e="/":e=this.getProtocol(n),this.isUrl(n)){const t=n.indexOf("/",e.length);t!==-1?e=n.slice(0,t):e=n,e.endsWith("/")||(e+="/")}return e},basename(n,e){Jo(n),e&&Jo(e),n=Fg(this.toPosix(n));let t=0,i=-1,r=!0,s;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";let o=e.length-1,a=-1;for(s=n.length-1;s>=0;--s){const l=n.charCodeAt(s);if(l===47){if(!r){t=s+1;break}}else a===-1&&(r=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=n.length),n.slice(t,i)}for(s=n.length-1;s>=0;--s)if(n.charCodeAt(s)===47){if(!r){t=s+1;break}}else i===-1&&(r=!1,i=s+1);return i===-1?"":n.slice(t,i)},extname(n){Jo(n),n=Fg(this.toPosix(n));let e=-1,t=0,i=-1,r=!0,s=0;for(let o=n.length-1;o>=0;--o){const a=n.charCodeAt(o);if(a===47){if(!r){t=o+1;break}continue}i===-1&&(r=!1,i=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||i===-1||s===0||s===1&&e===i-1&&e===t+1?"":n.slice(e,i)},parse(n){Jo(n);const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;n=Fg(this.toPosix(n));let t=n.charCodeAt(0);const i=this.isAbsolute(n);let r;e.root=this.rootname(n),i||this.hasProtocol(n)?r=1:r=0;let s=-1,o=0,a=-1,l=!0,c=n.length-1,u=0;for(;c>=r;--c){if(t=n.charCodeAt(c),t===47){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),t===46?s===-1?s=c:u!==1&&(u=1):s!==-1&&(u=-1)}return s===-1||a===-1||u===0||u===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&i?e.base=e.name=n.slice(1,a):e.base=e.name=n.slice(o,a)):(o===0&&i?(e.name=n.slice(1,s),e.base=n.slice(1,a)):(e.name=n.slice(o,s),e.base=n.slice(o,a)),e.ext=n.slice(s,a)),e.dir=this.dirname(n),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function D6(n,e,t,i,r){const s=e[t];for(let o=0;o<s.length;o++){const a=s[o];t<e.length-1?D6(n.replace(i[t],a),e,t+1,i,r):r.push(n.replace(i[t],a))}}function bK(n){const e=/\{(.*?)\}/g,t=n.match(e),i=[];if(t){const r=[];t.forEach(s=>{const o=s.substring(1,s.length-1).split(",");r.push(o)}),D6(n,r,0,t,i)}else i.push(n);return i}const fb=n=>!Array.isArray(n);class zm{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`).join("&")}}getAlias(e){const{alias:t,src:i}=e;return xa(t||i,s=>typeof s=="string"?s:Array.isArray(s)?s.map(o=>(o==null?void 0:o.src)??o):s!=null&&s.src?s.src:s,!0)}addManifest(e){this._manifest&&Zn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const i=[];let r=t;Array.isArray(t)||(r=Object.entries(t).map(([s,o])=>typeof o=="string"||Array.isArray(o)?{alias:s,src:o}:{alias:s,...o})),r.forEach(s=>{const o=s.src,a=s.alias;let l;if(typeof a=="string"){const c=this._createBundleAssetId(e,a);i.push(c),l=[a,c]}else{const c=a.map(u=>this._createBundleAssetId(e,u));i.push(...c),l=[...a,...c]}this.add({...s,alias:l,src:o})}),this._bundles[e]=i}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let i;i=s=>{this.hasKey(s)&&Zn(`[Resolver] already has key: ${s} overwriting`)},xa(t).forEach(s=>{const{src:o}=s;let{data:a,format:l,loadParser:c}=s;const u=xa(o).map(f=>typeof f=="string"?bK(f):Array.isArray(f)?f:[f]),h=this.getAlias(s);Array.isArray(h)?h.forEach(i):i(h);const d=[];u.forEach(f=>{f.forEach(p=>{let x={};if(typeof p!="object"){x.src=p;for(let v=0;v<this._parsers.length;v++){const y=this._parsers[v];if(y.test(p)){x=y.parse(p);break}}}else a=p.data??a,l=p.format??l,c=p.loadParser??c,x={...x,...p};if(!h)throw new Error(`[Resolver] alias is undefined for this asset: ${x.src}`);x=this._buildResolvedAsset(x,{aliases:h,data:a,format:l,loadParser:c}),d.push(x)})}),h.forEach(f=>{this._assetMap[f]=d})})}resolveBundle(e){const t=fb(e);e=xa(e);const i={};return e.forEach(r=>{const s=this._bundles[r];if(s){const o=this.resolve(s),a={};for(const l in o){const c=o[l];a[this._extractAssetIdFromBundle(r,l)]=c}i[r]=a}}),t?i[e[0]]:i}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const i={};for(const r in t)i[r]=t[r].src;return i}return t.src}resolve(e){const t=fb(e);e=xa(e);const i={};return e.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let s=this._assetMap[r];const o=this._getPreferredOrder(s);o==null||o.priority.forEach(a=>{o.params[a].forEach(l=>{const c=s.filter(u=>u[a]?u[a]===l:!1);c.length&&(s=c)})}),this._resolverHash[r]=s[0]}else this._resolverHash[r]=this._buildResolvedAsset({alias:[r],src:r},{});i[r]=this._resolverHash[r]}),t?i[e[0]]:i}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const i=e[0],r=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:i,data:r,loadParser:s,format:o}=t;return(this._basePath||this._rootPath)&&(e.src=Ml.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=i??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...r||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??e.format??SK(e.src),e}}zm.RETINA_PREFIX=/@([0-9\.]+)x/;function SK(n){return n.split(".").pop().split("?").shift().split("#").shift()}const YD=(n,e)=>{const t=e.split("?")[1];return t&&(n+=`?${t}`),n},F6=class Cy{constructor(e,t){this.linkedSheets=[],this._texture=e instanceof On?e:null,this.textureSource=e.source,this.textures={},this.animations={},this.data=t;const i=parseFloat(t.meta.scale);i?(this.resolution=i,e.source.resolution=this.resolution):this.resolution=e.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Cy.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const i=Cy.BATCH_SIZE;for(;t-e<i&&t<this._frameKeys.length;){const r=this._frameKeys[t],s=this._frames[r],o=s.frame;if(o){let a=null,l=null;const c=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,u=new Er(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);s.rotated?a=new Er(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new Er(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new Er(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[r]=new On({source:this.textureSource,frame:a,orig:u,trim:l,rotate:s.rotated?2:0,defaultAnchor:s.anchor,defaultBorders:s.borders,label:r.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){const r=e[t][i];this.animations[t].push(this.textures[r])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Cy.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Cy.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};F6.BATCH_SIZE=1e3;let qD=F6;const EK=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function U6(n,e,t){const i={};if(n.forEach(r=>{i[r]=e}),Object.keys(e.textures).forEach(r=>{i[r]=e.textures[r]}),!t){const r=Ml.dirname(n[0]);e.linkedSheets.forEach((s,o)=>{const a=U6([`${r}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(i,a)})}return i}const MK={extension:Bt.Asset,cache:{test:n=>n instanceof qD,getCacheableAssets:(n,e)=>U6(n,e,!1)},resolver:{test:n=>{const t=n.split("?")[0].split("."),i=t.pop(),r=t.pop();return i==="json"&&EK.includes(r)},parse:n=>{var t;const e=n.split(".");return{resolution:parseFloat(((t=zm.RETINA_PREFIX.exec(n))==null?void 0:t[1])??"1"),format:e[e.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:Bt.LoadParser,priority:Xd.Normal},async testParse(n,e){return Ml.extname(e.src).toLowerCase()===".json"&&!!n.frames},async parse(n,e,t){var c,u;const{texture:i,imageFilename:r}=(e==null?void 0:e.data)??{};let s=Ml.dirname(e.src);s&&s.lastIndexOf("/")!==s.length-1&&(s+="/");let o;if(i instanceof On)o=i;else{const h=YD(s+(r??n.meta.image),e.src);o=(await t.load([h]))[h]}const a=new qD(o.source,n);await a.parse();const l=(c=n==null?void 0:n.meta)==null?void 0:c.related_multi_packs;if(Array.isArray(l)){const h=[];for(const f of l){if(typeof f!="string")continue;let p=s+f;(u=e.data)!=null&&u.ignoreMultiPack||(p=YD(p,e.src),h.push(t.load({src:p,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(h);a.linkedSheets=d,d.forEach(f=>{f.linkedSheets=[a].concat(a.linkedSheets.filter(p=>p!==f))})}return a},unload(n){n.destroy(!0)}}};qs.add(MK);class CS{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=CS.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new qt,this.page=new qt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,i,r,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}var LT=/iPhone/i,ZD=/iPod/i,KD=/iPad/i,QD=/\biOS-universal(?:.+)Mac\b/i,NT=/\bAndroid(?:.+)Mobile\b/i,JD=/Android/i,bf=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Qx=/Silk/i,Vl=/Windows Phone/i,eF=/\bWindows(?:.+)ARM\b/i,tF=/BlackBerry/i,nF=/BB10/i,iF=/Opera Mini/i,rF=/\b(CriOS|Chrome)(?:.+)Mobile/i,sF=/Mobile(?:.+)Firefox\b/i,oF=function(n){return typeof n<"u"&&n.platform==="MacIntel"&&typeof n.maxTouchPoints=="number"&&n.maxTouchPoints>1&&typeof MSStream>"u"};function TK(n){return function(e){return e.test(n)}}function aF(n){var e={userAgent:"",platform:"",maxTouchPoints:0};!n&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof n=="string"?e.userAgent=n:n&&n.userAgent&&(e={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0});var t=e.userAgent,i=t.split("[FBAN");typeof i[1]<"u"&&(t=i[0]),i=t.split("Twitter"),typeof i[1]<"u"&&(t=i[0]);var r=TK(t),s={apple:{phone:r(LT)&&!r(Vl),ipod:r(ZD),tablet:!r(LT)&&(r(KD)||oF(e))&&!r(Vl),universal:r(QD),device:(r(LT)||r(ZD)||r(KD)||r(QD)||oF(e))&&!r(Vl)},amazon:{phone:r(bf),tablet:!r(bf)&&r(Qx),device:r(bf)||r(Qx)},android:{phone:!r(Vl)&&r(bf)||!r(Vl)&&r(NT),tablet:!r(Vl)&&!r(bf)&&!r(NT)&&(r(Qx)||r(JD)),device:!r(Vl)&&(r(bf)||r(Qx)||r(NT)||r(JD))||r(/\bokhttp\b/i)},windows:{phone:r(Vl),tablet:r(eF),device:r(Vl)||r(eF)},other:{blackberry:r(tF),blackberry10:r(nF),opera:r(iF),firefox:r(sF),chrome:r(rF),device:r(tF)||r(nF)||r(iF)||r(sF)||r(rF)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}class AK{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const i in e){const r=e[i];this.setResource(r,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const i in this.resources)e[t++]=this.resources[i]._resourceId;this._key=e.join("|")}setResource(e,t){var r,s;const i=this.resources[t];e!==i&&(i&&((r=e.off)==null||r.call(e,"change",this.onResourceChange,this)),(s=e.on)==null||s.call(e,"change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const t=this.resources;for(const i in t)t[i]._touched=e}destroy(){var t;const e=this.resources;for(const i in e){const r=e[i];(t=r.off)==null||t.call(r,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(){this._dirty=!0,this._updateKey()}}const zP=[];qs.handleByNamedList(Bt.Environment,zP);async function CK(n){if(n)for(let e=0;e<zP.length;e++){const t=zP[e];if(t.value.test()){await t.value.load();return}}}let Ug;function PK(){if(typeof Ug=="boolean")return Ug;try{Ug=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Ug=!1}return Ug}var eL={exports:{}};eL.exports=PS;eL.exports.default=PS;function PS(n,e,t){t=t||2;var i=e&&e.length,r=i?e[0]*t:n.length,s=B6(n,0,r,t,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,c,u,h,d,f;if(i&&(s=kK(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(var p=t;p<r;p+=t)h=n[p],d=n[p+1],h<a&&(a=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);f=Math.max(c-a,u-l),f=f!==0?32767/f:0}return _v(s,o,t,a,l,f,0),o}function B6(n,e,t,i,r){var s,o;if(r===VP(n,e,t,i)>0)for(s=e;s<t;s+=i)o=lF(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=lF(s,n[s],n[s+1],o);return o&&RS(o,o.next)&&(bv(o),o=o.next),o}function Nd(n,e){if(!n)return n;e||(e=n);var t=n,i;do if(i=!1,!t.steiner&&(RS(t,t.next)||fi(t.prev,t,t.next)===0)){if(bv(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function _v(n,e,t,i,r,s,o){if(n){!o&&s&&BK(n,i,r,s);for(var a=n,l,c;n.prev!==n.next;){if(l=n.prev,c=n.next,s?IK(n,i,r,s):RK(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),bv(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=LK(Nd(n),e,t),_v(n,e,t,i,r,s,2)):o===2&&NK(n,e,t,i,r,s):_v(Nd(n),e,t,i,r,s,1);break}}}}function RK(n){var e=n.prev,t=n,i=n.next;if(fi(e,t,i)>=0)return!1;for(var r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=r<s?r<o?r:o:s<o?s:o,h=a<l?a<c?a:c:l<c?l:c,d=r>s?r>o?r:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c,p=i.next;p!==e;){if(p.x>=u&&p.x<=d&&p.y>=h&&p.y<=f&&Tp(r,a,s,l,o,c,p.x,p.y)&&fi(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function IK(n,e,t,i){var r=n.prev,s=n,o=n.next;if(fi(r,s,o)>=0)return!1;for(var a=r.x,l=s.x,c=o.x,u=r.y,h=s.y,d=o.y,f=a<l?a<c?a:c:l<c?l:c,p=u<h?u<d?u:d:h<d?h:d,x=a>l?a>c?a:c:l>c?l:c,v=u>h?u>d?u:d:h>d?h:d,y=HP(f,p,e,t,i),w=HP(x,v,e,t,i),_=n.prevZ,b=n.nextZ;_&&_.z>=y&&b&&b.z<=w;){if(_.x>=f&&_.x<=x&&_.y>=p&&_.y<=v&&_!==r&&_!==o&&Tp(a,u,l,h,c,d,_.x,_.y)&&fi(_.prev,_,_.next)>=0||(_=_.prevZ,b.x>=f&&b.x<=x&&b.y>=p&&b.y<=v&&b!==r&&b!==o&&Tp(a,u,l,h,c,d,b.x,b.y)&&fi(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;_&&_.z>=y;){if(_.x>=f&&_.x<=x&&_.y>=p&&_.y<=v&&_!==r&&_!==o&&Tp(a,u,l,h,c,d,_.x,_.y)&&fi(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=w;){if(b.x>=f&&b.x<=x&&b.y>=p&&b.y<=v&&b!==r&&b!==o&&Tp(a,u,l,h,c,d,b.x,b.y)&&fi(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function LK(n,e,t){var i=n;do{var r=i.prev,s=i.next.next;!RS(r,s)&&z6(r,i,i.next,s)&&wv(r,s)&&wv(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),bv(i),bv(i.next),i=n=s),i=i.next}while(i!==n);return Nd(i)}function NK(n,e,t,i,r,s){var o=n;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&WK(o,a)){var l=H6(o,a);o=Nd(o,o.next),l=Nd(l,l.next),_v(o,e,t,i,r,s,0),_v(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function kK(n,e,t,i){var r=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=B6(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(HK(c));for(r.sort(OK),s=0;s<r.length;s++)t=DK(r[s],t);return t}function OK(n,e){return n.x-e.x}function DK(n,e){var t=FK(n,e);if(!t)return e;var i=H6(t,n);return Nd(i,i.next),Nd(t,t.next)}function FK(n,e){var t=e,i=n.x,r=n.y,s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){var a=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=i&&a>s&&(s=a,o=t.x<t.next.x?t:t.next,a===i))return o}t=t.next}while(t!==e);if(!o)return null;var l=o,c=o.x,u=o.y,h=1/0,d;t=o;do i>=t.x&&t.x>=c&&i!==t.x&&Tp(r<u?i:s,r,c,u,r<u?s:i,r,t.x,t.y)&&(d=Math.abs(r-t.y)/(i-t.x),wv(t,n)&&(d<h||d===h&&(t.x>o.x||t.x===o.x&&UK(o,t)))&&(o=t,h=d)),t=t.next;while(t!==l);return o}function UK(n,e){return fi(n.prev,n,e.prev)<0&&fi(e.next,n,n.next)<0}function BK(n,e,t,i){var r=n;do r.z===0&&(r.z=HP(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,zK(r)}function zK(n){var e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function HP(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function HK(n){var e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Tp(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function WK(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!VK(n,e)&&(wv(n,e)&&wv(e,n)&&GK(n,e)&&(fi(n.prev,n,e.prev)||fi(n,e.prev,e))||RS(n,e)&&fi(n.prev,n,n.next)>0&&fi(e.prev,e,e.next)>0)}function fi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function RS(n,e){return n.x===e.x&&n.y===e.y}function z6(n,e,t,i){var r=e_(fi(n,e,t)),s=e_(fi(n,e,i)),o=e_(fi(t,i,n)),a=e_(fi(t,i,e));return!!(r!==s&&o!==a||r===0&&Jx(n,t,e)||s===0&&Jx(n,i,e)||o===0&&Jx(t,n,i)||a===0&&Jx(t,e,i))}function Jx(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function e_(n){return n>0?1:n<0?-1:0}function VK(n,e){var t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&z6(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function wv(n,e){return fi(n.prev,n,n.next)<0?fi(n,e,n.next)>=0&&fi(n,n.prev,e)>=0:fi(n,e,n.prev)<0||fi(n,n.next,e)<0}function GK(n,e){var t=n,i=!1,r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function H6(n,e){var t=new WP(n.i,n.x,n.y),i=new WP(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function lF(n,e,t,i){var r=new WP(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function bv(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function WP(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}PS.deviation=function(n,e,t,i){var r=e&&e.length,s=r?e[0]*t:n.length,o=Math.abs(VP(n,0,s,t));if(r)for(var a=0,l=e.length;a<l;a++){var c=e[a]*t,u=a<l-1?e[a+1]*t:n.length;o-=Math.abs(VP(n,c,u,t))}var h=0;for(a=0;a<i.length;a+=3){var d=i[a]*t,f=i[a+1]*t,p=i[a+2]*t;h+=Math.abs((n[d]-n[p])*(n[f+1]-n[d+1])-(n[d]-n[f])*(n[p+1]-n[d+1]))}return o===0&&h===0?0:Math.abs((h-o)/o)};function VP(n,e,t,i){for(var r=0,s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}PS.flatten=function(n){for(var e=n[0][0].length,t={vertices:[],holes:[],dimensions:e},i=0,r=0;r<n.length;r++){for(var s=0;s<n[r].length;s++)for(var o=0;o<e;o++)t.vertices.push(n[r][s][o]);r>0&&(i+=n[r-1].length,t.holes.push(i))}return t};var jK=eL.exports;const $K=Ia(jK);var W6=(n=>(n[n.NONE=0]="NONE",n[n.COLOR=16384]="COLOR",n[n.STENCIL=1024]="STENCIL",n[n.DEPTH=256]="DEPTH",n[n.COLOR_DEPTH=16640]="COLOR_DEPTH",n[n.COLOR_STENCIL=17408]="COLOR_STENCIL",n[n.DEPTH_STENCIL=1280]="DEPTH_STENCIL",n[n.ALL=17664]="ALL",n))(W6||{});class XK{constructor(e){this.items=[],this._name=e}emit(e,t,i,r,s,o,a,l){const{name:c,items:u}=this;for(let h=0,d=u.length;h<d;h++)u[h][c](e,t,i,r,s,o,a,l);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const YK=["init","destroy","contextChange","resolutionChange","reset","renderEnd","renderStart","render","update","postrender","prerender"],V6=class G6 extends Al{constructor(e){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name;const t=[...YK,...e.runners??[]];this._addRunners(...t),this._addSystems(e.systems),this._addPipes(e.renderPipes,e.renderPipeAdaptors),this._unsafeEvalCheck()}async init(e={}){for(const t in this._systemsHash)e={...this._systemsHash[t].constructor.defaultOptions,...e};e={...G6.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let t=0;t<this.runners.init.items.length;t++)await this.runners.init.items[t].init(e);this._initOptions=e}render(e,t){let i=e;if(i instanceof dn&&(i={container:i},t&&(wi(_i,"passing a second argument is deprecated, please use render options instead"),i.target=t.renderTexture)),i.target||(i.target=this.view.renderTarget),i.target===this.view.renderTarget&&(this._lastObjectRendered=i.container,i.clearColor=this.background.colorRgba),i.clearColor){const r=Array.isArray(i.clearColor)&&i.clearColor.length===4;i.clearColor=r?i.clearColor:_s.shared.setValue(i.clearColor).toArray()}i.transform||(i.container.updateLocalTransform(),i.transform=i.container.localTransform),this.runners.prerender.emit(i),this.runners.renderStart.emit(i),this.runners.render.emit(i),this.runners.renderEnd.emit(i),this.runners.postrender.emit(i)}resize(e,t,i){this.view.resize(e,t,i),this.emit("resize",this.view.screen.width,this.view.screen.height)}clear(e={}){const t=this;e.target||(e.target=t.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=W6.ALL);const{clear:i,clearColor:r,target:s}=e;_s.shared.setValue(r??this.background.colorRgba),t.renderTarget.clear(s,i,_s.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new XK(t)})}_addSystems(e){let t;for(t in e){const i=e[t];this._addSystem(i.value,i.name)}}_addSystem(e,t){const i=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=i,this._systemsHash[t]=i;for(const r in this.runners)this.runners[r].add(i);return this}_addPipes(e,t){const i=t.reduce((r,s)=>(r[s.name]=s.value,r),{});e.forEach(r=>{const s=r.value,o=r.name,a=i[o];this.renderPipes[o]=new s(this,a?new a:null)})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!PK())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}};V6.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let j6=V6,t_;function qK(n){return t_!==void 0||(t_=(()=>{var t;const e={stencil:!0,failIfMajorPerformanceCaveat:n??j6.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Tr.get().getWebGLRenderingContext())return!1;let r=Tr.get().createCanvas().getContext("webgl",e);const s=!!((t=r==null?void 0:r.getContextAttributes())!=null&&t.stencil);if(r){const o=r.getExtension("WEBGL_lose_context");o&&o.loseContext()}return r=null,s}catch{return!1}})()),t_}let n_;async function ZK(n={}){return n_!==void 0||(n_=await(async()=>{if(!Tr.get().getNavigator().gpu)return!1;try{return await(await navigator.gpu.requestAdapter(n)).requestDevice(),!0}catch{return!1}})()),n_}const cF=["webgpu","webgl","canvas"];async function KK(n){let e=[];n.preference?(e.push(n.preference),cF.forEach(s=>{s!==n.preference&&e.push(s)})):e=cF.slice();let t;await CK(n.manageImports??!0);let i={};for(let s=0;s<e.length;s++){const o=e[s];if(o==="webgpu"&&await ZK()){const{WebGPURenderer:a}=await cb(async()=>{const{WebGPURenderer:l}=await import("./WebGPURenderer-DHDTG2Kt.js");return{WebGPURenderer:l}},__vite__mapDeps([5,2,6,3]));t=a,i={...n,...n.webgpu};break}else if(o==="webgl"&&qK(n.failIfMajorPerformanceCaveat??j6.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:a}=await cb(async()=>{const{WebGLRenderer:l}=await import("./WebGLRenderer-vEA7FTn8.js");return{WebGLRenderer:l}},__vite__mapDeps([7,2,4,6]));t=a,i={...n,...n.webgl};break}else if(o==="canvas"){i={...n};break}}delete i.webgpu,delete i.webgl;const r=new t;return await r.init(i),r}const $6=class GP{constructor(...e){this.stage=new dn,e[0]!==void 0&&wi(_i,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.renderer=await KK(e),GP._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return wi(_i,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){const i=GP._plugins.slice(0);i.reverse(),i.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};$6._plugins=[];let tL=$6;qs.handleByList(Bt.Application,tL._plugins);class QK{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose,this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<t;i++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const JK={extension:Bt.CacheParser,test:n=>Array.isArray(n)&&n.every(e=>e instanceof On),getCacheableAssets:(n,e)=>{const t={};return n.forEach(i=>{e.forEach((r,s)=>{t[i+(s===0?"":s+1)]=r})}),t}};async function X6(n){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(n)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const eQ={extension:{type:Bt.DetectionParser,priority:1},test:async()=>X6("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(e=>e!=="avif")},uF=["png","jpg","jpeg"],tQ={extension:{type:Bt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...uF],remove:async n=>n.filter(e=>!uF.includes(e))},nQ="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function nL(n){return nQ?!1:document.createElement("video").canPlayType(n)!==""}const iQ={extension:{type:Bt.DetectionParser,priority:0},test:async()=>nL("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(e=>e!=="mp4"&&e!=="m4v")},rQ={extension:{type:Bt.DetectionParser,priority:0},test:async()=>nL("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(e=>e!=="ogv")},sQ={extension:{type:Bt.DetectionParser,priority:0},test:async()=>nL("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(e=>e!=="webm")},oQ={extension:{type:Bt.DetectionParser,priority:0},test:async()=>X6("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(e=>e!=="webp")};let aQ=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,i)=>(this._parsersValidated=!1,e[t]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const i={promise:null,parser:null};return i.promise=(async()=>{var o,a;let r=null,s=null;if(t.loadParser&&(s=this._parserHash[t.loadParser],s||Zn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!s){for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];if(c.load&&((o=c.test)!=null&&o.call(c,e,t,this))){s=c;break}}if(!s)return Zn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await s.load(e,t,this),i.parser=s;for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];c.parse&&c.parse&&await((a=c.testParse)==null?void 0:a.call(c,r,t,this))&&(r=await c.parse(r,t,this)||r,i.parser=c)}return r})(),i}async load(e,t){this._parsersValidated||this._validateParsers();let i=0;const r={},s=fb(e),o=xa(e,c=>({alias:[c],src:c})),a=o.length,l=o.map(async c=>{const u=Ml.toAbsolute(c.src);if(!r[c.src])try{this.promiseCache[u]||(this.promiseCache[u]=this._getLoadPromiseAndParser(u,c)),r[c.src]=await this.promiseCache[u].promise,t&&t(++i/a)}catch(h){throw delete this.promiseCache[u],delete r[c.src],new Error(`[Loader.load] Failed to load ${u}.
${h}`)}});return await Promise.all(l),s?r[o[0].src]:r}async unload(e){const i=xa(e,r=>({alias:[r],src:r})).map(async r=>{var a,l;const s=Ml.toAbsolute(r.src),o=this.promiseCache[s];if(o){const c=await o.promise;delete this.promiseCache[s],(l=(a=o.parser)==null?void 0:a.unload)==null||l.call(a,c,r,this)}});await Promise.all(i)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(t.name?e[t.name]&&Zn(`[Assets] loadParser name conflict "${t.name}"`):Zn("[Assets] loadParser should have a name"),{...e,[t.name]:t}),{})}};function Hm(n,e){if(Array.isArray(e)){for(const t of e)if(n.startsWith(`data:${t}`))return!0;return!1}return n.startsWith(`data:${e}`)}function Wm(n,e){const t=n.split("?")[0],i=Ml.extname(t).toLowerCase();return Array.isArray(e)?e.includes(i):i===e}const lQ=".json",cQ="application/json",uQ={extension:{type:Bt.LoadParser,priority:Xd.Low},name:"loadJson",test(n){return Hm(n,cQ)||Wm(n,lQ)},async load(n){return await(await Tr.get().fetch(n)).json()}},hQ=".txt",dQ="text/plain",fQ={name:"loadTxt",extension:{type:Bt.LoadParser,priority:Xd.Low},test(n){return Hm(n,dQ)||Wm(n,hQ)},async load(n){return await(await Tr.get().fetch(n)).text()}},pQ=["normal","bold","100","200","300","400","500","600","700","800","900"],mQ=[".ttf",".otf",".woff",".woff2"],gQ=["font/ttf","font/otf","font/woff","font/woff2"],yQ=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function vQ(n){const e=Ml.extname(n),r=Ml.basename(n,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let s=r.length>0;for(const a of r)if(!a.match(yQ)){s=!1;break}let o=r.join(" ");return s||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const xQ=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function _Q(n){return xQ.test(n)?n:encodeURI(n)}const wQ={extension:{type:Bt.LoadParser,priority:Xd.Low},name:"loadWebFont",test(n){return Hm(n,gQ)||Wm(n,mQ)},async load(n,e){var i,r,s;const t=Tr.get().getFontFaceSet();if(t){const o=[],a=((i=e.data)==null?void 0:i.family)??vQ(n),l=((s=(r=e.data)==null?void 0:r.weights)==null?void 0:s.filter(u=>pQ.includes(u)))??["normal"],c=e.data??{};for(let u=0;u<l.length;u++){const h=l[u],d=new FontFace(a,`url(${_Q(n)})`,{...c,weight:h});await d.load(),t.add(d),o.push(d)}return os.set(a,{url:n,fontFaces:o}),o.length===1?o[0]:o}return Zn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){(Array.isArray(n)?n:[n]).forEach(e=>{os.remove(e.family),Tr.get().getFontFaceSet().delete(e)})}};var bQ=EQ,kT={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},SQ=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function EQ(n){var e=[];return n.replace(SQ,function(t,i,r){var s=i.toLowerCase();for(r=TQ(r),s=="m"&&r.length>2&&(e.push([i].concat(r.splice(0,2))),s="l",i=i=="m"?"l":"L");;){if(r.length==kT[s])return r.unshift(i),e.push(r);if(r.length<kT[s])throw new Error("malformed path data");e.push([i].concat(r.splice(0,kT[s])))}}),e}var MQ=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function TQ(n){var e=n.match(MQ);return e?e.map(Number):[]}const AQ=Ia(bQ);function CQ(n,e){const t=AQ(n),i=[];let r=null,s=0,o=0;for(let a=0;a<t.length;a++){const l=t[a],c=l[0],u=l;switch(c){case"M":s=u[1],o=u[2],e.moveTo(s,o);break;case"m":s+=u[1],o+=u[2],e.moveTo(s,o);break;case"H":s=u[1],e.lineTo(s,o);break;case"h":s+=u[1],e.lineTo(s,o);break;case"V":o=u[1],e.lineTo(s,o);break;case"v":o+=u[1],e.lineTo(s,o);break;case"L":s=u[1],o=u[2],e.lineTo(s,o);break;case"l":s+=u[1],o+=u[2],e.lineTo(s,o);break;case"C":s=u[5],o=u[6],e.bezierCurveTo(u[1],u[2],u[3],u[4],s,o);break;case"c":e.bezierCurveTo(s+u[1],o+u[2],s+u[3],o+u[4],s+u[5],o+u[6]),s+=u[5],o+=u[6];break;case"S":s=u[3],o=u[4],e.bezierCurveToShort(u[1],u[2],s,o);break;case"s":e.bezierCurveToShort(s+u[1],o+u[2],s+u[3],o+u[4]),s+=u[3],o+=u[4];break;case"Q":s=u[3],o=u[4],e.quadraticCurveTo(u[1],u[2],s,o);break;case"q":e.quadraticCurveTo(s+u[1],o+u[2],s+u[3],o+u[4]),s+=u[3],o+=u[4];break;case"T":s=u[1],o=u[2],e.quadraticCurveToShort(s,o);break;case"t":s+=u[1],o+=u[2],e.quadraticCurveToShort(s,o);break;case"A":s=u[6],o=u[7],e.arcToSvg(u[1],u[2],u[3],u[4],u[5],s,o);break;case"a":s+=u[6],o+=u[7],e.arcToSvg(u[1],u[2],u[3],u[4],u[5],s,o);break;case"Z":case"z":e.closePath(),i.length>0&&(r=i.pop(),r?(s=r.startX,o=r.startY):(s=0,o=0)),r=null;break;default:Zn(`Unknown SVG path command: ${c}`)}c!=="Z"&&c!=="z"&&r===null&&(r={startX:s,startY:o},i.push(r))}return e}class iL{constructor(e=0,t=0,i=0){this.type="circle",this.x=e,this.y=t,this.radius=i}clone(){return new iL(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const i=this.radius*this.radius;let r=this.x-e,s=this.y-t;return r*=r,s*=s,r+s<=i}strokeContains(e,t,i){if(this.radius===0)return!1;const r=this.x-e,s=this.y-t,o=this.radius,a=i/2,l=Math.sqrt(r*r+s*s);return l<o+a&&l>o-a}getBounds(e){return e=e||new Er,e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class rL{constructor(e=0,t=0,i=0,r=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=i,this.halfHeight=r}clone(){return new rL(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(e-this.x)/this.halfWidth,r=(t-this.y)/this.halfHeight;return i*=i,r*=r,i+r<=1}strokeContains(e,t,i){const{halfWidth:r,halfHeight:s}=this;if(r<=0||s<=0)return!1;const o=i/2,a=r-o,l=s-o,c=r+o,u=s+o,h=e-this.x,d=t-this.y,f=h*h/(a*a)+d*d/(l*l),p=h*h/(c*c)+d*d/(u*u);return f>1&&p<=1}getBounds(){return new Er(this.x-this.halfWidth,this.y-this.halfHeight,this.halfWidth*2,this.halfHeight*2)}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function PQ(n,e,t,i,r,s){const o=n-t,a=e-i,l=r-t,c=s-i,u=o*l+a*c,h=l*l+c*c;let d=-1;h!==0&&(d=u/h);let f,p;d<0?(f=t,p=i):d>1?(f=r,p=s):(f=t+d*l,p=i+d*c);const x=n-f,v=e-p;return x*x+v*v}class $y{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const i=[];for(let r=0,s=t.length;r<s;r++)i.push(t[r].x,t[r].y);t=i}this.points=t,this.closePath=!0}clone(){const e=this.points.slice(),t=new $y(e);return t.closePath=this.closePath,t}contains(e,t){let i=!1;const r=this.points.length/2;for(let s=0,o=r-1;s<r;o=s++){const a=this.points[s*2],l=this.points[s*2+1],c=this.points[o*2],u=this.points[o*2+1];l>t!=u>t&&e<(c-a)*((t-l)/(u-l))+a&&(i=!i)}return i}strokeContains(e,t,i){const r=i/2,s=r*r,{points:o}=this;for(let a=0;a<o.length;a+=2){const l=o[a],c=o[a+1],u=o[(a+2)%o.length],h=o[(a+3)%o.length];if(PQ(e,t,l,c,u,h)<=s)return!0}return!1}getBounds(e){e=e||new Er;const t=this.points;let i=1/0,r=-1/0,s=1/0,o=-1/0;for(let a=0,l=t.length;a<l;a+=2){const c=t[a],u=t[a+1];i=c<i?c:i,r=c>r?c:r,s=u<s?u:s,o=u>o?u:o}return e.x=i,e.width=r-i,e.y=s,e.height=o-s,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const i_=(n,e,t,i,r,s)=>{const o=n-t,a=e-i,l=Math.sqrt(o*o+a*a);return l>=r-s&&l<=r+s};class sL{constructor(e=0,t=0,i=0,r=0,s=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=i,this.height=r,this.radius=s}getBounds(e){return e=e||new Er,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new sL(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+i&&t<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let r=e-(this.x+i),s=t-(this.y+i);const o=i*i;if(r*r+s*s<=o||(r=e-(this.x+this.width-i),r*r+s*s<=o)||(s=t-(this.y+this.height-i),r*r+s*s<=o)||(r=e-(this.x+i),r*r+s*s<=o))return!0}return!1}strokeContains(e,t,i){const{x:r,y:s,width:o,height:a,radius:l}=this,c=i/2,u=r+l,h=s+l,d=o-l*2,f=a-l*2,p=r+o,x=s+a;return(e>=r-c&&e<=r+c||e>=p-c&&e<=p+c)&&t>=h&&t<=h+f||(t>=s-c&&t<=s+c||t>=x-c&&t<=x+c)&&e>=u&&e<=u+d?!0:e<u&&t<h&&i_(e,t,u,h,l,c)||e>p-l&&t<h&&i_(e,t,p-l,h,l,c)||e>p-l&&t>x-l&&i_(e,t,p-l,x-l,l,c)||e<u&&t>x-l&&i_(e,t,u,x-l,l,c)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}var ys=(n=>(n[n.MAP_READ=1]="MAP_READ",n[n.MAP_WRITE=2]="MAP_WRITE",n[n.COPY_SRC=4]="COPY_SRC",n[n.COPY_DST=8]="COPY_DST",n[n.INDEX=16]="INDEX",n[n.VERTEX=32]="VERTEX",n[n.UNIFORM=64]="UNIFORM",n[n.STORAGE=128]="STORAGE",n[n.INDIRECT=256]="INDIRECT",n[n.QUERY_RESOLVE=512]="QUERY_RESOLVE",n[n.STATIC=1024]="STATIC",n))(ys||{});let Sv=class extends Al{constructor(e){let{data:t,size:i}=e;const{usage:r,label:s,shrinkToFit:o}=e;super(),this.uid=Mr("buffer"),this._resourceType="buffer",this._resourceId=Mr("resource"),this._touched=0,this._updateID=1,this.shrinkToFit=!0,t instanceof Array&&(t=new Float32Array(t)),this._data=t,i=i??(t==null?void 0:t.byteLength);const a=!!t;this.descriptor={size:i,usage:r,mappedAtCreation:a,label:s},this.shrinkToFit=o??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get static(){return!!(this.descriptor.usage&ys.STATIC)}set static(e){e?this.descriptor.usage|=ys.STATIC:this.descriptor.usage&=~ys.STATIC}setDataWithSize(e,t,i){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){i&&this.emit("update",this);return}const r=this._data;if(this._data=e,r.length!==e.length){!this.shrinkToFit&&e.byteLength<r.byteLength?i&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=Mr("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.emit("destroy",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function Y6(n,e){if(!(n instanceof Sv)){let t=e?ys.INDEX:ys.VERTEX;n instanceof Array&&(e?(n=new Uint32Array(n),t=ys.INDEX|ys.COPY_DST):(n=new Float32Array(n),t=ys.VERTEX|ys.COPY_DST)),n=new Sv({data:n,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return n}function RQ(n,e,t){const i=n.getAttribute(e);if(!i)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const r=i.buffer.data;let s=1/0,o=1/0,a=-1/0,l=-1/0;const c=r.BYTES_PER_ELEMENT,u=(i.offset||0)/c,h=(i.stride||2*4)/c;for(let d=u;d<r.length;d+=h){const f=r[d],p=r[d+1];f>a&&(a=f),p>l&&(l=p),f<s&&(s=f),p<o&&(o=p)}return t.minX=s,t.minY=o,t.maxX=a,t.maxY=l,t}function IQ(n){return(n instanceof Sv||Array.isArray(n)||n.BYTES_PER_ELEMENT)&&(n={buffer:n}),n.buffer=Y6(n.buffer,!1),n}let LQ=class extends Al{constructor(e){const{attributes:t,indexBuffer:i,topology:r}=e;super(),this.uid=Mr("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Du,this._boundsDirty=!0,this.attributes=t,this.buffers=[],this.instanceCount=e.instanceCount||1;for(const s in t){const o=t[s]=IQ(t[s]);this.buffers.indexOf(o.buffer)===-1&&(this.buffers.push(o.buffer),o.buffer.on("update",this.onBufferUpdate,this),o.buffer.on("change",this.onBufferUpdate,this))}i&&(this.indexBuffer=Y6(i,!0),this.buffers.push(this.indexBuffer)),this.topology=r||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,RQ(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(t=>t.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}};const NQ=new Float32Array(1),kQ=new Uint32Array(1);let OQ=class extends LQ{constructor(){const t=new Sv({data:NQ,label:"attribute-batch-buffer",usage:ys.VERTEX|ys.COPY_DST,shrinkToFit:!1}),i=new Sv({data:kQ,label:"index-batch-buffer",usage:ys.INDEX|ys.COPY_DST,shrinkToFit:!1}),r=6*4;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:r,offset:0,location:1},aUV:{buffer:t,format:"float32x2",stride:r,offset:2*4,location:3},aColor:{buffer:t,format:"unorm8x4",stride:r,offset:4*4,location:0},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:r,offset:5*4,location:2}},indexBuffer:i})}};const q6=16,Z6={};function DQ(n,e){let t=0;for(let i=0;i<e;i++)t=t*31+n[i].uid>>>0;return Z6[t]||FQ(n,t)}function FQ(n,e){const t={};let i=0;for(let s=0;s<q6;s++){const o=s<n.length?n[s]:On.EMPTY.source;t[i++]=o.source,t[i++]=o.style}const r=new AK(t);return Z6[e]=r,r}let hF=class{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}};function dF(n,e){const t=n.byteLength/8|0,i=new Float64Array(n,0,t);new Float64Array(e,0,t).set(i);const s=n.byteLength-t*8;if(s>0){const o=new Uint8Array(n,t*8,s);new Uint8Array(e,t*8,s).set(o)}}const UQ={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var BQ=(n=>(n[n.DISABLED=0]="DISABLED",n[n.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",n[n.MASK_ACTIVE=2]="MASK_ACTIVE",n[n.RENDERING_MASK_REMOVE=3]="RENDERING_MASK_REMOVE",n[n.NONE=4]="NONE",n))(BQ||{});function fF(n,e){return e.alphaMode==="no-premultiply-alpha"&&UQ[n]||n}let pF=class{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}};class mF{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.blendMode="normal",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}let Bg=0;const K6=class Q6{constructor(e={}){this.uid=Mr("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._vertexSize=6,this._elements=[],this._batchPool=[],this._batchPoolIndex=0,this._textureBatchPool=[],this._textureBatchPoolIndex=0,e={...Q6.defaultOptions,...e};const{vertexSize:t,indexSize:i}=e;this.attributeBuffer=new hF(t*this._vertexSize*4),this.indexBuffer=new Uint16Array(i)}begin(){this.batchIndex=0,this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0,this._batchPoolIndex=0,this._textureBatchPoolIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e.indexStart=this.indexSize,e.location=this.attributeSize,e.batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.vertexSize*this._vertexSize}checkAndUpdateTexture(e,t){const i=e.batch.textures.ids[t._source.uid];return!i&&i!==0?!1:(e.textureId=i,e.texture=t,!0)}updateElement(e){this.dirty=!0,e.packAttributes(this.attributeBuffer.float32View,this.attributeBuffer.uint32View,e.location,e.textureId)}break(e){const t=this._elements;let i=this._textureBatchPool[this._textureBatchPoolIndex++]||new pF;if(i.clear(),!t[this.elementStart])return;const r=t[this.elementStart];let s=fF(r.blendMode,r.texture._source);this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const o=this.attributeBuffer.float32View,a=this.attributeBuffer.uint32View,l=this.indexBuffer;let c=this._batchIndexSize,u=this._batchIndexStart,h="startBatch",d=this._batchPool[this._batchPoolIndex++]||new mF;for(let f=this.elementStart;f<this.elementSize;++f){const p=t[f];t[f]=null;const v=p.texture._source,y=fF(p.blendMode,v),w=s!==y;if(v._batchTick===Bg&&!w){p.textureId=v._textureBindLocation,c+=p.indexSize,p.packAttributes(o,a,p.location,p.textureId),p.packIndex(l,p.indexStart,p.location/this._vertexSize),p.batch=d;continue}v._batchTick=Bg,(i.count>=q6||w)&&(this._finishBatch(d,u,c-u,i,s,e,h),h="renderBatch",u=c,s=y,i=this._textureBatchPool[this._textureBatchPoolIndex++]||new pF,i.clear(),d=this._batchPool[this._batchPoolIndex++]||new mF,++Bg),p.textureId=v._textureBindLocation=i.count,i.ids[v.uid]=i.count,i.textures[i.count++]=v,p.batch=d,c+=p.indexSize,p.packAttributes(o,a,p.location,p.textureId),p.packIndex(l,p.indexStart,p.location/this._vertexSize)}i.count>0&&(this._finishBatch(d,u,c-u,i,s,e,h),u=c,++Bg),this.elementStart=this.elementSize,this._batchIndexStart=u,this._batchIndexSize=c}_finishBatch(e,t,i,r,s,o,a){e.gpuBindGroup=null,e.action=a,e.batcher=this,e.textures=r,e.blendMode=s,e.start=t,e.size=i,++Bg,o.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),i=new hF(t);dF(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(e){const t=this.indexBuffer;let i=Math.max(e,t.length*1.5);i+=i%2;const r=i>65535?new Uint32Array(i):new Uint16Array(i);if(r.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let s=0;s<t.length;s++)r[s]=t[s];else dF(t.buffer,r.buffer);this.indexBuffer=r}destroy(){for(let e=0;e<this.batches.length;e++)this.batches[e].destroy();this.batches=null;for(let e=0;e<this._elements.length;e++)this._elements[e].batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};K6.defaultOptions={vertexSize:4,indexSize:6};let zQ=K6;function HQ(n,e,t,i,r,s,o,a=null){let l=0;t*=e,r*=s;const c=a.a,u=a.b,h=a.c,d=a.d,f=a.tx,p=a.ty;for(;l<o;){const x=n[t],v=n[t+1];i[r]=c*x+h*v+f,i[r+1]=u*x+d*v+p,r+=s,t+=e,l++}}function WQ(n,e,t,i){let r=0;for(e*=t;r<i;)n[e]=0,n[e+1]=0,e+=t,r++}function J6(n,e,t,i,r){const s=e.a,o=e.b,a=e.c,l=e.d,c=e.tx,u=e.ty;t=t||0,i=i||2,r=r||n.length/i-t;let h=t*i;for(let d=0;d<r;d++){const f=n[h],p=n[h+1];n[h]=s*f+a*p+c,n[h+1]=o*f+l*p+u,h+=i}}function VQ(n,e,t){const i=n>>16&255,r=n>>8&255,s=n&255,o=e>>16&255,a=e>>8&255,l=e&255,c=i+(o-i)*t,u=r+(a-r)*t,h=s+(l-s)*t;return(c<<16)+(u<<8)+h}const GQ=33554430;function jQ(n,e){return n+(e<<32)!==GQ?n===16777215?e:e===16777215?n:VQ(n,e,.5):16777215}class eW{constructor(){this.batcher=null,this.batch=null,this.applyTransform=!0,this.roundPixels=0}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}packIndex(e,t,i){const r=this.geometryData.indices;for(let s=0;s<this.indexSize;s++)e[t++]=r[s+this.indexOffset]+i-this.vertexOffset}packAttributes(e,t,i,r){const s=this.geometryData,o=this.renderable,a=s.vertices,l=s.uvs,c=this.vertexOffset*2,u=(this.vertexOffset+this.vertexSize)*2,h=this.color,d=h>>16|h&65280|(h&255)<<16;if(this.applyTransform){const f=jQ(d,o.groupColor)+(this.alpha*o.groupAlpha*255<<24),p=o.groupTransform,x=r<<16|this.roundPixels&65535,v=p.a,y=p.b,w=p.c,_=p.d,b=p.tx,E=p.ty;for(let M=c;M<u;M+=2){const C=a[M],P=a[M+1];e[i]=v*C+w*P+b,e[i+1]=y*C+_*P+E,e[i+2]=l[M],e[i+3]=l[M+1],t[i+4]=f,t[i+5]=x,i+=6}}else{const f=d+(this.alpha*255<<24);for(let p=c;p<u;p+=2)e[i]=a[p],e[i+1]=a[p+1],e[i+2]=l[p],e[i+3]=l[p+1],t[i+4]=f,t[i+5]=r<<16,i+=6}}get vertSize(){return this.vertexSize}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.vertexOffset=this.vertexOffset,e.vertexSize=this.vertexSize,e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData}reset(){this.applyTransform=!0}}const OT={build(n,e){let t,i,r,s,o,a;if(n.type==="circle"){const b=n;t=b.x,i=b.y,o=a=b.radius,r=s=0}else if(n.type==="ellipse"){const b=n;t=b.x,i=b.y,o=b.halfWidth,a=b.halfHeight,r=s=0}else{const b=n,E=b.width/2,M=b.height/2;t=b.x+E,i=b.y+M,o=a=Math.max(0,Math.min(b.radius,Math.min(E,M))),r=E-o,s=M-a}if(!(o>=0&&a>=0&&r>=0&&s>=0))return e;const l=Math.ceil(2.3*Math.sqrt(o+a)),c=l*8+(r?4:0)+(s?4:0);if(c===0)return e;if(l===0)return e[0]=e[6]=t+r,e[1]=e[3]=i+s,e[2]=e[4]=t-r,e[5]=e[7]=i-s,e;let u=0,h=l*4+(r?2:0)+2,d=h,f=c,p=r+o,x=s,v=t+p,y=t-p,w=i+x;if(e[u++]=v,e[u++]=w,e[--h]=w,e[--h]=y,s){const b=i-x;e[d++]=y,e[d++]=b,e[--f]=b,e[--f]=v}for(let b=1;b<l;b++){const E=Math.PI/2*(b/l),M=r+Math.cos(E)*o,C=s+Math.sin(E)*a,P=t+M,T=t-M,I=i+C,U=i-C;e[u++]=P,e[u++]=I,e[--h]=I,e[--h]=T,e[d++]=T,e[d++]=U,e[--f]=U,e[--f]=P}p=r,x=s+a,v=t+p,y=t-p,w=i+x;const _=i-x;return e[u++]=v,e[u++]=w,e[--f]=_,e[--f]=v,r&&(e[u++]=y,e[u++]=w,e[--f]=_,e[--f]=y),e},triangulate(n,e,t,i,r,s){if(n.length===0)return;let o=0,a=0;for(let u=0;u<n.length;u+=2)o+=n[u],a+=n[u+1];o/=n.length/2,a/=n.length/2;let l=i;e[l*t]=o,e[l*t+1]=a;const c=l++;for(let u=0;u<n.length;u+=2)e[l*t]=n[u],e[l*t+1]=n[u+1],u>0&&(r[s++]=l,r[s++]=c,r[s++]=l-1),l++;r[s++]=c+1,r[s++]=c,r[s++]=l-1}},$Q=1e-4,gF=1e-4;function XQ(n){const e=n.length;if(e<6)return 1;let t=0;for(let i=0,r=n[e-2],s=n[e-1];i<e;i+=2){const o=n[i],a=n[i+1];t+=(o-r)*(a+s),r=o,s=a}return t<0?-1:1}function yF(n,e,t,i,r,s,o,a){const l=n-t*r,c=e-i*r,u=n+t*s,h=e+i*s;let d,f;o?(d=i,f=-t):(d=-i,f=t);const p=l+d,x=c+f,v=u+d,y=h+f;return a.push(p,x),a.push(v,y),2}function yh(n,e,t,i,r,s,o,a){const l=t-n,c=i-e;let u=Math.atan2(l,c),h=Math.atan2(r-n,s-e);a&&u<h?u+=Math.PI*2:!a&&u>h&&(h+=Math.PI*2);let d=u;const f=h-u,p=Math.abs(f),x=Math.sqrt(l*l+c*c),v=(15*p*Math.sqrt(x)/Math.PI>>0)+1,y=f/v;if(d+=y,a){o.push(n,e),o.push(t,i);for(let w=1,_=d;w<v;w++,_+=y)o.push(n,e),o.push(n+Math.sin(_)*x,e+Math.cos(_)*x);o.push(n,e),o.push(r,s)}else{o.push(t,i),o.push(n,e);for(let w=1,_=d;w<v;w++,_+=y)o.push(n+Math.sin(_)*x,e+Math.cos(_)*x),o.push(n,e);o.push(r,s),o.push(n,e)}return v*2}function YQ(n,e,t,i,r,s,o,a,l){const c=$Q;if(n.length===0)return;const u=e;let h=u.alignment;if(e.alignment!==.5){let Q=XQ(n);h=(h-.5)*Q+.5}const d=new qt(n[0],n[1]),f=new qt(n[n.length-2],n[n.length-1]),p=i,x=Math.abs(d.x-f.x)<c&&Math.abs(d.y-f.y)<c;if(p){n=n.slice(),x&&(n.pop(),n.pop(),f.set(n[n.length-2],n[n.length-1]));const Q=(d.x+f.x)*.5,re=(f.y+d.y)*.5;n.unshift(Q,re),n.push(Q,re)}const v=r,y=n.length/2;let w=n.length;const _=v.length/2,b=u.width/2,E=b*b,M=u.miterLimit*u.miterLimit;let C=n[0],P=n[1],T=n[2],I=n[3],U=0,j=0,B=-(P-I),z=C-T,$=0,H=0,Z=Math.sqrt(B*B+z*z);B/=Z,z/=Z,B*=b,z*=b;const O=h,W=(1-O)*2,D=O*2;p||(u.cap==="round"?w+=yh(C-B*(W-D)*.5,P-z*(W-D)*.5,C-B*W,P-z*W,C+B*D,P+z*D,v,!0)+2:u.cap==="square"&&(w+=yF(C,P,B,z,W,D,!0,v))),v.push(C-B*W,P-z*W),v.push(C+B*D,P+z*D);for(let Q=1;Q<y-1;++Q){C=n[(Q-1)*2],P=n[(Q-1)*2+1],T=n[Q*2],I=n[Q*2+1],U=n[(Q+1)*2],j=n[(Q+1)*2+1],B=-(P-I),z=C-T,Z=Math.sqrt(B*B+z*z),B/=Z,z/=Z,B*=b,z*=b,$=-(I-j),H=T-U,Z=Math.sqrt($*$+H*H),$/=Z,H/=Z,$*=b,H*=b;const re=T-C,ce=P-I,oe=T-U,he=j-I,Re=re*oe+ce*he,Oe=ce*oe-he*re,Ve=Oe<0;if(Math.abs(Oe)<.001*Math.abs(Re)){v.push(T-B*W,I-z*W),v.push(T+B*D,I+z*D),Re>=0&&(u.join==="round"?w+=yh(T,I,T-B*W,I-z*W,T-$*W,I-H*W,v,!1)+4:w+=2,v.push(T-$*D,I-H*D),v.push(T+$*W,I+H*W));continue}const Je=(-B+C)*(-z+I)-(-B+T)*(-z+P),Fe=(-$+U)*(-H+I)-(-$+T)*(-H+j),J=(re*Fe-oe*Je)/Oe,ge=(he*Je-ce*Fe)/Oe,de=(J-T)*(J-T)+(ge-I)*(ge-I),Ae=T+(J-T)*W,Ie=I+(ge-I)*W,me=T-(J-T)*D,ye=I-(ge-I)*D,ke=Math.min(re*re+ce*ce,oe*oe+he*he),Xe=Ve?W:D,Le=ke+Xe*Xe*E;de<=Le?u.join==="bevel"||de/E>M?(Ve?(v.push(Ae,Ie),v.push(T+B*D,I+z*D),v.push(Ae,Ie),v.push(T+$*D,I+H*D)):(v.push(T-B*W,I-z*W),v.push(me,ye),v.push(T-$*W,I-H*W),v.push(me,ye)),w+=2):u.join==="round"?Ve?(v.push(Ae,Ie),v.push(T+B*D,I+z*D),w+=yh(T,I,T+B*D,I+z*D,T+$*D,I+H*D,v,!0)+4,v.push(Ae,Ie),v.push(T+$*D,I+H*D)):(v.push(T-B*W,I-z*W),v.push(me,ye),w+=yh(T,I,T-B*W,I-z*W,T-$*W,I-H*W,v,!1)+4,v.push(T-$*W,I-H*W),v.push(me,ye)):(v.push(Ae,Ie),v.push(me,ye)):(v.push(T-B*W,I-z*W),v.push(T+B*D,I+z*D),u.join==="round"?Ve?w+=yh(T,I,T+B*D,I+z*D,T+$*D,I+H*D,v,!0)+2:w+=yh(T,I,T-B*W,I-z*W,T-$*W,I-H*W,v,!1)+2:u.join==="miter"&&de/E<=M&&(Ve?(v.push(me,ye),v.push(me,ye)):(v.push(Ae,Ie),v.push(Ae,Ie)),w+=2),v.push(T-$*W,I-H*W),v.push(T+$*D,I+H*D),w+=2)}C=n[(y-2)*2],P=n[(y-2)*2+1],T=n[(y-1)*2],I=n[(y-1)*2+1],B=-(P-I),z=C-T,Z=Math.sqrt(B*B+z*z),B/=Z,z/=Z,B*=b,z*=b,v.push(T-B*W,I-z*W),v.push(T+B*D,I+z*D),p||(u.cap==="round"?w+=yh(T-B*(W-D)*.5,I-z*(W-D)*.5,T-B*W,I-z*W,T+B*D,I+z*D,v,!1)+2:u.cap==="square"&&(w+=yF(T,I,B,z,W,D,!1,v)));const Y=gF*gF;for(let Q=_;Q<w+_-2;++Q)C=v[Q*2],P=v[Q*2+1],T=v[(Q+1)*2],I=v[(Q+1)*2+1],U=v[(Q+2)*2],j=v[(Q+2)*2+1],!(Math.abs(C*(I-j)+T*(j-P)+U*(P-I))<Y)&&a.push(Q,Q+1,Q+2)}function tW(n,e,t,i,r,s,o){const a=$K(n,e,2);if(!a)return;for(let c=0;c<a.length;c+=3)s[o++]=a[c]+r,s[o++]=a[c+1]+r,s[o++]=a[c+2]+r;let l=r*i;for(let c=0;c<n.length;c+=2)t[l]=n[c],t[l+1]=n[c+1],l+=i}const qQ=[],ZQ={build(n,e){for(let t=0;t<n.points.length;t++)e[t]=n.points[t];return e},triangulate(n,e,t,i,r,s){tW(n,qQ,e,t,i,r,s)}},KQ={build(n,e){const t=n,i=t.x,r=t.y,s=t.width,o=t.height;return s>=0&&o>=0&&(e[0]=i,e[1]=r,e[2]=i+s,e[3]=r,e[4]=i+s,e[5]=r+o,e[6]=i,e[7]=r+o),e},triangulate(n,e,t,i,r,s){let o=0;i*=t,e[i+o]=n[0],e[i+o+1]=n[1],o+=t,e[i+o]=n[2],e[i+o+1]=n[3],o+=t,e[i+o]=n[6],e[i+o+1]=n[7],o+=t,e[i+o]=n[4],e[i+o+1]=n[5],o+=t;const a=i/t;r[s++]=a,r[s++]=a+1,r[s++]=a+2,r[s++]=a+1,r[s++]=a+3,r[s++]=a+2}},QQ={build(n,e){return e[0]=n.x,e[1]=n.y,e[2]=n.x2,e[3]=n.y2,e[4]=n.x3,e[5]=n.y3,e},triangulate(n,e,t,i,r,s){let o=0;i*=t,e[i+o]=n[0],e[i+o+1]=n[1],o+=t,e[i+o]=n[2],e[i+o+1]=n[3],o+=t,e[i+o]=n[4],e[i+o+1]=n[5];const a=i/t;r[s++]=a,r[s++]=a+1,r[s++]=a+2}},oL={rectangle:KQ,polygon:ZQ,triangle:QQ,circle:OT,ellipse:OT,roundedRectangle:OT},JQ=new Er;function eJ(n,e){const{geometryData:t,batches:i}=e;i.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let r=0;r<n.instructions.length;r++){const s=n.instructions[r];if(s.action==="texture")tJ(s.data,i,t);else if(s.action==="fill"||s.action==="stroke"){const o=s.action==="stroke",a=s.data.path.shapePath,l=s.data.style,c=s.data.hole;o&&c&&vF(c.shapePath,l,null,!0,i,t),vF(a,l,c,o,i,t)}}}function tJ(n,e,t){const{vertices:i,uvs:r,indices:s}=t,o=s.length,a=i.length/2,l=[],c=oL.rectangle,u=JQ,h=n.image;u.x=n.dx,u.y=n.dy,u.width=n.dw,u.height=n.dh;const d=n.transform;c.build(u,l),d&&J6(l,d),c.triangulate(l,i,2,a,s,o);const f=h.uvs;r.push(f.x0,f.y0,f.x1,f.y1,f.x3,f.y3,f.x2,f.y2);const p=va.get(eW);p.indexOffset=o,p.indexSize=s.length-o,p.vertexOffset=a,p.vertexSize=i.length/2-a,p.color=n.style,p.alpha=n.alpha,p.texture=h,p.geometryData=t,e.push(p)}function vF(n,e,t,i,r,s){const{vertices:o,uvs:a,indices:l}=s,c=n.shapePrimitives.length-1;n.shapePrimitives.forEach(({shape:u,transform:h},d)=>{const f=l.length,p=o.length/2,x=[],v=oL[u.type];if(v.build(u,x),h&&J6(x,h),i){const b=u.closePath??!0;YQ(x,e,!1,b,o,2,p,l)}else if(t&&c===d){const b=[],E=x.slice();nJ(t.shapePath).forEach(C=>{b.push(E.length/2),E.push(...C)}),tW(E,b,o,2,p,l,f)}else v.triangulate(x,o,2,p,l,f);const y=a.length/2,w=e.texture;if(w!==On.WHITE){const b=e.matrix;h&&b.append(h.clone().invert()),HQ(o,2,p,a,y,2,o.length/2-p,b)}else WQ(a,y,2,o.length/2-p);const _=va.get(eW);_.indexOffset=f,_.indexSize=l.length-f,_.vertexOffset=p,_.vertexSize=o.length/2-p,_.color=e.color,_.alpha=e.alpha,_.texture=w,_.geometryData=s,r.push(_)})}function nJ(n){if(!n)return[];const e=n.shapePrimitives,t=[];for(let i=0;i<e.length;i++){const r=e[i].shape,s=[];oL[r.type].build(r,s),t.push(s)}return t}class iJ{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class rJ{constructor(){this.geometry=new OQ,this.instructions=new E6}init(){this.instructions.reset()}}const aL=class jP{constructor(){this._activeBatchers=[],this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._needsContextNeedsRebuild=[]}init(e){jP.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??jP.defaultOptions.bezierSmoothness}prerender(){this._returnActiveBatchers()}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),eJ(e,t);const i=e.batchMode;e.customShader||i==="no-batch"?t.isBatchable=!1:i==="auto"&&(t.isBatchable=t.geometryData.vertices.length<400),e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_returnActiveBatchers(){for(let e=0;e<this._activeBatchers.length;e++)va.return(this._activeBatchers[e]);this._activeBatchers.length=0}_initContextRenderData(e){const t=va.get(rJ),{batches:i,geometryData:r}=this._gpuContextHash[e.uid],s=r.vertices.length,o=r.indices.length;for(let u=0;u<i.length;u++)i[u].applyTransform=!1;const a=va.get(zQ);this._activeBatchers.push(a),a.ensureAttributeBuffer(s),a.ensureIndexBuffer(o),a.begin();for(let u=0;u<i.length;u++){const h=i[u];a.add(h)}a.finish(t.instructions);const l=t.geometry;l.indexBuffer.setDataWithSize(a.indexBuffer,a.indexSize,!0),l.buffers[0].setDataWithSize(a.attributeBuffer.float32View,a.attributeSize,!0);const c=a.batches;for(let u=0;u<c.length;u++){const h=c[u];h.bindGroup=DQ(h.textures.textures,h.textures.count)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){const t=new iJ;return this._gpuContextHash[e.uid]=t,e.on("update",this.onGraphicsContextUpdate,this),e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextUpdate(e){this._needsContextNeedsRebuild.push(e)}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("update",this.onGraphicsContextUpdate,this),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(va.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(i=>{va.return(i)})}destroy(){for(const e of this._needsContextNeedsRebuild)this._gpuContextHash[e.uid]&&this.onGraphicsContextDestroy(e);this._needsContextNeedsRebuild.length=0}};aL.extension={type:[Bt.WebGLSystem,Bt.WebGPUSystem,Bt.CanvasSystem],name:"graphicsContext"};aL.defaultOptions={bezierSmoothness:.5};let nW=aL;const sJ=8,r_=11920929e-14,oJ=1;function iW(n,e,t,i,r,s,o,a,l,c){const h=Math.min(.99,Math.max(0,c??nW.defaultOptions.bezierSmoothness));let d=(oJ-h)/1;return d*=d,aJ(e,t,i,r,s,o,a,l,n,d),n}function aJ(n,e,t,i,r,s,o,a,l,c){$P(n,e,t,i,r,s,o,a,l,c,0),l.push(o,a)}function $P(n,e,t,i,r,s,o,a,l,c,u){if(u>sJ)return;const h=(n+t)/2,d=(e+i)/2,f=(t+r)/2,p=(i+s)/2,x=(r+o)/2,v=(s+a)/2,y=(h+f)/2,w=(d+p)/2,_=(f+x)/2,b=(p+v)/2,E=(y+_)/2,M=(w+b)/2;if(u>0){let C=o-n,P=a-e;const T=Math.abs((t-o)*P-(i-a)*C),I=Math.abs((r-o)*P-(s-a)*C);if(T>r_&&I>r_){if((T+I)*(T+I)<=c*(C*C+P*P)){l.push(E,M);return}}else if(T>r_){if(T*T<=c*(C*C+P*P)){l.push(E,M);return}}else if(I>r_){if(I*I<=c*(C*C+P*P)){l.push(E,M);return}}else if(C=E-(n+o)/2,P=M-(e+a)/2,C*C+P*P<=c){l.push(E,M);return}}$P(n,e,h,d,y,w,E,M,l,c,u+1),$P(E,M,_,b,x,v,o,a,l,c,u+1)}const lJ=8,cJ=11920929e-14,uJ=1;function hJ(n,e,t,i,r,s,o,a){const c=Math.min(.99,Math.max(0,a??nW.defaultOptions.bezierSmoothness));let u=(uJ-c)/1;return u*=u,dJ(e,t,i,r,s,o,n,u),n}function dJ(n,e,t,i,r,s,o,a){XP(o,n,e,t,i,r,s,a,0),o.push(r,s)}function XP(n,e,t,i,r,s,o,a,l){if(l>lJ)return;const c=(e+i)/2,u=(t+r)/2,h=(i+s)/2,d=(r+o)/2,f=(c+h)/2,p=(u+d)/2;let x=s-e,v=o-t;const y=Math.abs((i-s)*v-(r-o)*x);if(y>cJ){if(y*y<=a*(x*x+v*v)){n.push(f,p);return}}else if(x=f-(e+s)/2,v=p-(t+o)/2,x*x+v*v<=a){n.push(f,p);return}XP(n,e,t,c,u,f,p,a,l+1),XP(n,f,p,h,d,s,o,a,l+1)}function rW(n,e,t,i,r,s,o,a){let l=Math.abs(r-s);(!o&&r>s||o&&s>r)&&(l=2*Math.PI-l),a=a||Math.max(6,Math.floor(6*Math.pow(i,1/3)*(l/Math.PI))),a=Math.max(a,3);let c=l/a,u=r;c*=o?-1:1;for(let h=0;h<a+1;h++){const d=Math.cos(u),f=Math.sin(u),p=e+d*i,x=t+f*i;n.push(p,x),u+=c}}function fJ(n,e,t,i,r,s){const o=n[n.length-2],l=n[n.length-1]-t,c=o-e,u=r-t,h=i-e,d=Math.abs(l*h-c*u);if(d<1e-8||s===0){(n[n.length-2]!==e||n[n.length-1]!==t)&&n.push(e,t);return}const f=l*l+c*c,p=u*u+h*h,x=l*u+c*h,v=s*Math.sqrt(f)/d,y=s*Math.sqrt(p)/d,w=v*x/f,_=y*x/p,b=v*h+y*c,E=v*u+y*l,M=c*(y+w),C=l*(y+w),P=h*(v+_),T=u*(v+_),I=Math.atan2(C-E,M-b),U=Math.atan2(T-E,P-b);rW(n,b+e,E+t,s,I,U,c*u>h*l)}const Xy=Math.PI*2,DT={centerX:0,centerY:0,ang1:0,ang2:0},FT=({x:n,y:e},t,i,r,s,o,a,l)=>{n*=t,e*=i;const c=r*n-s*e,u=s*n+r*e;return l.x=c+o,l.y=u+a,l};function pJ(n,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),i=e===1.5707963267948966?.551915024494:t,r=Math.cos(n),s=Math.sin(n),o=Math.cos(n+e),a=Math.sin(n+e);return[{x:r-s*i,y:s+r*i},{x:o+a*i,y:a-o*i},{x:o,y:a}]}const xF=(n,e,t,i)=>{const r=n*i-e*t<0?-1:1;let s=n*t+e*i;return s>1&&(s=1),s<-1&&(s=-1),r*Math.acos(s)},mJ=(n,e,t,i,r,s,o,a,l,c,u,h,d)=>{const f=Math.pow(r,2),p=Math.pow(s,2),x=Math.pow(u,2),v=Math.pow(h,2);let y=f*p-f*v-p*x;y<0&&(y=0),y/=f*v+p*x,y=Math.sqrt(y)*(o===a?-1:1);const w=y*r/s*h,_=y*-s/r*u,b=c*w-l*_+(n+t)/2,E=l*w+c*_+(e+i)/2,M=(u-w)/r,C=(h-_)/s,P=(-u-w)/r,T=(-h-_)/s,I=xF(1,0,M,C);let U=xF(M,C,P,T);a===0&&U>0&&(U-=Xy),a===1&&U<0&&(U+=Xy),d.centerX=b,d.centerY=E,d.ang1=I,d.ang2=U};function gJ(n,e,t,i,r,s,o,a=0,l=0,c=0){if(s===0||o===0)return;const u=Math.sin(a*Xy/360),h=Math.cos(a*Xy/360),d=h*(e-i)/2+u*(t-r)/2,f=-u*(e-i)/2+h*(t-r)/2;if(d===0&&f===0)return;s=Math.abs(s),o=Math.abs(o);const p=Math.pow(d,2)/Math.pow(s,2)+Math.pow(f,2)/Math.pow(o,2);p>1&&(s*=Math.sqrt(p),o*=Math.sqrt(p)),mJ(e,t,i,r,s,o,l,c,u,h,d,f,DT);let{ang1:x,ang2:v}=DT;const{centerX:y,centerY:w}=DT;let _=Math.abs(v)/(Xy/4);Math.abs(1-_)<1e-7&&(_=1);const b=Math.max(Math.ceil(_),1);v/=b;let E=n[n.length-2],M=n[n.length-1];const C={x:0,y:0};for(let P=0;P<b;P++){const T=pJ(x,v),{x:I,y:U}=FT(T[0],s,o,h,u,y,w,C),{x:j,y:B}=FT(T[1],s,o,h,u,y,w,C),{x:z,y:$}=FT(T[2],s,o,h,u,y,w,C);iW(n,E,M,I,U,j,B,z,$),E=z,M=$,x+=v}}function yJ(n,e,t){const i=(o,a)=>{const l=a.x-o.x,c=a.y-o.y,u=Math.sqrt(l*l+c*c),h=l/u,d=c/u;return{len:u,nx:h,ny:d}},r=(o,a)=>{o===0?n.moveTo(a.x,a.y):n.lineTo(a.x,a.y)};let s=e[e.length-1];for(let o=0;o<e.length;o++){const a=e[o%e.length],l=a.radius??t;if(l<=0){r(o,a),s=a;continue}const c=e[(o+1)%e.length],u=i(a,s),h=i(a,c);if(u.len<1e-4||h.len<1e-4){r(o,a),s=a;continue}let d=Math.asin(u.nx*h.ny-u.ny*h.nx),f=1,p=!1;u.nx*h.nx-u.ny*-h.ny<0?d<0?d=Math.PI+d:(d=Math.PI-d,f=-1,p=!0):d>0&&(f=-1,p=!0);const x=d/2;let v,y=Math.abs(Math.cos(x)*l/Math.sin(x));y>Math.min(u.len/2,h.len/2)?(y=Math.min(u.len/2,h.len/2),v=Math.abs(y*Math.sin(x)/Math.cos(x))):v=l;const w=a.x+h.nx*y+-h.ny*v*f,_=a.y+h.ny*y+h.nx*v*f,b=Math.atan2(u.ny,u.nx)+Math.PI/2*f,E=Math.atan2(h.ny,h.nx)-Math.PI/2*f;o===0&&n.moveTo(w+Math.cos(b)*v,_+Math.sin(b)*v),n.arc(w,_,v,b,E,p),s=a}}function vJ(n,e,t,i){const r=(a,l)=>Math.sqrt((a.x-l.x)**2+(a.y-l.y)**2),s=(a,l,c)=>({x:a.x+(l.x-a.x)*c,y:a.y+(l.y-a.y)*c}),o=e.length;for(let a=0;a<o;a++){const l=e[(a+1)%o],c=l.radius??t;if(c<=0){a===0?n.moveTo(l.x,l.y):n.lineTo(l.x,l.y);continue}const u=e[a],h=e[(a+2)%o],d=r(u,l);let f;if(d<1e-4)f=l;else{const v=Math.min(d/2,c);f=s(l,u,v/d)}const p=r(h,l);let x;if(p<1e-4)x=l;else{const v=Math.min(p/2,c);x=s(l,h,v/p)}a===0?n.moveTo(f.x,f.y):n.lineTo(f.x,f.y),n.quadraticCurveTo(l.x,l.y,x.x,x.y,i)}}const xJ=new Er;let _J=class{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Du,this._graphicsPath2D=e}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const i=this._currentPoly.points,r=i[i.length-2],s=i[i.length-1];return(r!==e||s!==t)&&i.push(e,t),this}arc(e,t,i,r,s,o){this._ensurePoly(!1);const a=this._currentPoly.points;return rW(a,e,t,i,r,s,o),this}arcTo(e,t,i,r,s){this._ensurePoly();const o=this._currentPoly.points;return fJ(o,e,t,i,r,s),this}arcToSvg(e,t,i,r,s,o,a){const l=this._currentPoly.points;return gJ(l,this._currentPoly.lastX,this._currentPoly.lastY,o,a,e,t,i,r,s),this}bezierCurveTo(e,t,i,r,s,o,a){this._ensurePoly();const l=this._currentPoly;return iW(this._currentPoly.points,l.lastX,l.lastY,e,t,i,r,s,o,a),this}quadraticCurveTo(e,t,i,r,s){this._ensurePoly();const o=this._currentPoly;return hJ(this._currentPoly.points,o.lastX,o.lastY,e,t,i,r,s),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));for(let i=0;i<e.instructions.length;i++){const r=e.instructions[i];this[r.action](...r.data)}return this}finish(e=!1){this.endPoly(e)}rect(e,t,i,r,s){return this.drawShape(new Er(e,t,i,r),s),this}circle(e,t,i,r){return this.drawShape(new iL(e,t,i),r),this}poly(e,t,i){const r=new $y(e);return r.closePath=t,this.drawShape(r,i),this}regularPoly(e,t,i,r,s=0,o){r=Math.max(r|0,3);const a=-1*Math.PI/2+s,l=Math.PI*2/r,c=[];for(let u=0;u<r;u++){const h=u*l+a;c.push(e+i*Math.cos(h),t+i*Math.sin(h))}return this.poly(c,!0,o),this}roundPoly(e,t,i,r,s,o=0,a){if(r=Math.max(r|0,3),s<=0)return this.regularPoly(e,t,i,r,o);const l=i*Math.sin(Math.PI/r)-.001;s=Math.min(s,l);const c=-1*Math.PI/2+o,u=Math.PI*2/r,h=(r-2)*Math.PI/r/2;for(let d=0;d<r;d++){const f=d*u+c,p=e+i*Math.cos(f),x=t+i*Math.sin(f),v=f+Math.PI+h,y=f-Math.PI-h,w=p+s*Math.cos(v),_=x+s*Math.sin(v),b=p+s*Math.cos(y),E=x+s*Math.sin(y);d===0?this.moveTo(w,_):this.lineTo(w,_),this.quadraticCurveTo(p,x,b,E,a)}return this.closePath()}roundShape(e,t,i=!1,r){return e.length<3?this:(i?vJ(this,e,t,r):yJ(this,e,t),this.closePath())}filletRect(e,t,i,r,s){if(s===0)return this.rect(e,t,i,r);const o=Math.min(i,r)/2,a=Math.min(o,Math.max(-o,s)),l=e+i,c=t+r,u=a<0?-a:0,h=Math.abs(a);return this.moveTo(e,t+h).arcTo(e+u,t+u,e+h,t,h).lineTo(l-h,t).arcTo(l-u,t+u,l,t+h,h).lineTo(l,c-h).arcTo(l-u,c-u,e+i-h,c,h).lineTo(e+h,c).arcTo(e+u,c-u,e,c-h,h).closePath()}chamferRect(e,t,i,r,s,o){if(s<=0)return this.rect(e,t,i,r);const a=Math.min(s,Math.min(i,r)/2),l=e+i,c=t+r,u=[e+a,t,l-a,t,l,t+a,l,c-a,l-a,c,e+a,c,e,c-a,e,t+a];for(let h=u.length-1;h>=2;h-=2)u[h]===u[h-2]&&u[h-1]===u[h-3]&&u.splice(h-1,2);return this.poly(u,!0,o)}ellipse(e,t,i,r,s){return this.drawShape(new rL(e,t,i,r),s),this}roundRect(e,t,i,r,s,o){return this.drawShape(new sL(e,t,i,r,s),o),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let i=this._currentPoly;return i&&this.endPoly(),i=new $y,i.points.push(e,t),this._currentPoly=i,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new $y,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let i=t.shape.x,r=t.shape.y;if(!t.transform.isIdentity()){const s=t.transform,o=i;i=s.a*i+s.c*r+s.tx,r=s.b*o+s.d*r+s.ty}this._currentPoly.points.push(i,r)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const i=e.instructions[t];this[i.action](...i.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let i=0;i<t.length;i++){const r=t[i],s=r.shape.getBounds(xJ);r.transform?e.addRect(s,r.transform):e.addRect(s)}return e}};class pm{constructor(e){this.instructions=[],this.uid=Mr("graphicsPath"),this._dirty=!0,typeof e=="string"?CQ(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new _J(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,i,r,s){const o=this.instructions[this.instructions.length-1],a=this.getLastPoint(qt.shared);let l=0,c=0;if(!o||o.action!=="bezierCurveTo")l=a.x,c=a.y;else{l=o.data[2],c=o.data[3];const u=a.x,h=a.y;l=u+(u-l),c=h+(h-c)}return this.instructions.push({action:"bezierCurveTo",data:[l,c,e,t,i,r,s]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,i){const r=this.instructions[this.instructions.length-1],s=this.getLastPoint(qt.shared);let o=0,a=0;if(!r||r.action!=="quadraticCurveTo")o=s.x,a=s.y;else{o=r.data[0],a=r.data[1];const l=s.x,c=s.y;o=l+(l-o),a=c+(c-a)}return this.instructions.push({action:"quadraticCurveTo",data:[o,a,e,t,i]}),this._dirty=!0,this}rect(e,t,i,r,s){return this.instructions.push({action:"rect",data:[e,t,i,r,s]}),this._dirty=!0,this}circle(e,t,i,r){return this.instructions.push({action:"circle",data:[e,t,i,r]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,i,r,s,o,a){s=s||r/2;const l=-1*Math.PI/2+o,c=i*2,u=Math.PI*2/c,h=[];for(let d=0;d<c;d++){const f=d%2?s:r,p=d*u+l;h.push(e+f*Math.cos(p),t+f*Math.sin(p))}return this.poly(h,!0,a),this}clone(e=!1){const t=new pm;if(!e)t.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){const r=this.instructions[i];t.instructions.push({action:r.action,data:r.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,i=e.b,r=e.c,s=e.d,o=e.tx,a=e.ty;let l=0,c=0,u=0,h=0,d=0,f=0,p=0,x=0;for(let v=0;v<this.instructions.length;v++){const y=this.instructions[v],w=y.data;switch(y.action){case"moveTo":case"lineTo":l=w[0],c=w[1],w[0]=t*l+r*c+o,w[1]=i*l+s*c+a;break;case"bezierCurveTo":u=w[0],h=w[1],d=w[2],f=w[3],l=w[4],c=w[5],w[0]=t*u+r*h+o,w[1]=i*u+s*h+a,w[2]=t*d+r*f+o,w[3]=i*d+s*f+a,w[4]=t*l+r*c+o,w[5]=i*l+s*c+a;break;case"quadraticCurveTo":u=w[0],h=w[1],l=w[2],c=w[3],w[0]=t*u+r*h+o,w[1]=i*u+s*h+a,w[2]=t*l+r*c+o,w[3]=i*l+s*c+a;break;case"arcToSvg":l=w[5],c=w[6],p=w[0],x=w[1],w[0]=t*p+r*x,w[1]=i*p+s*x,w[5]=t*l+r*c+o,w[6]=i*l+s*c+a;break;case"circle":w[4]=zg(w[3],e);break;case"rect":w[4]=zg(w[4],e);break;case"ellipse":w[8]=zg(w[8],e);break;case"roundRect":w[5]=zg(w[5],e);break;case"addPath":w[0].transform(e);break;case"poly":w[2]=zg(w[2],e);break;default:Zn("unknown transform action",y.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,i=this.instructions[t];if(!i)return e.x=0,e.y=0,e;for(;i.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;i=this.instructions[t]}switch(i.action){case"moveTo":case"lineTo":e.x=i.data[0],e.y=i.data[1];break;case"quadraticCurveTo":e.x=i.data[2],e.y=i.data[3];break;case"bezierCurveTo":e.x=i.data[4],e.y=i.data[5];break;case"arc":case"arcToSvg":e.x=i.data[5],e.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(e);break}return e}}function zg(n,e){return n?n.prepend(e):e.clone()}function wJ(n,e){if(typeof n=="string"){const i=document.createElement("div");i.innerHTML=n.trim(),n=i.querySelector("svg")}const t={context:e,path:new pm};return sW(n,t,null,null),e}function sW(n,e,t,i){const r=n.children,{fillStyle:s,strokeStyle:o}=bJ(n);s&&t?t={...t,...s}:s&&(t=s),o&&i?i={...i,...o}:o&&(i=o),e.context.fillStyle=t,e.context.strokeStyle=i;let a,l,c,u,h,d,f,p,x,v,y,w,_,b,E,M,C;switch(n.nodeName.toLowerCase()){case"path":b=n.getAttribute("d"),E=new pm(b),e.context.path(E),t&&e.context.fill(),i&&e.context.stroke();break;case"circle":f=rr(n,"cx",0),p=rr(n,"cy",0),x=rr(n,"r",0),e.context.ellipse(f,p,x,x),t&&e.context.fill(),i&&e.context.stroke();break;case"rect":a=rr(n,"x",0),l=rr(n,"y",0),M=rr(n,"width",0),C=rr(n,"height",0),v=rr(n,"rx",0),y=rr(n,"ry",0),v||y?e.context.roundRect(a,l,M,C,v||y):e.context.rect(a,l,M,C),t&&e.context.fill(),i&&e.context.stroke();break;case"ellipse":f=rr(n,"cx",0),p=rr(n,"cy",0),v=rr(n,"rx",0),y=rr(n,"ry",0),e.context.beginPath(),e.context.ellipse(f,p,v,y),t&&e.context.fill(),i&&e.context.stroke();break;case"line":c=rr(n,"x1",0),u=rr(n,"y1",0),h=rr(n,"x2",0),d=rr(n,"y2",0),e.context.beginPath(),e.context.moveTo(c,u),e.context.lineTo(h,d),i&&e.context.stroke();break;case"polygon":_=n.getAttribute("points"),w=_.match(/\d+/g).map(P=>parseInt(P,10)),e.context.poly(w,!0),t&&e.context.fill(),i&&e.context.stroke();break;case"polyline":_=n.getAttribute("points"),w=_.match(/\d+/g).map(P=>parseInt(P,10)),e.context.poly(w,!1),i&&e.context.stroke();break;case"g":case"svg":break;default:break}for(let P=0;P<r.length;P++)sW(r[P],e,t,i)}function rr(n,e,t){const i=n.getAttribute(e);return i?Number(i):t}function bJ(n){const e=n.getAttribute("style"),t={},i={};let r=!1,s=!1;if(e){const o=e.split(";");for(let a=0;a<o.length;a++){const l=o[a],[c,u]=l.split(":");switch(c){case"stroke":u!=="none"&&(t.color=_s.shared.setValue(u).toNumber(),s=!0);break;case"stroke-width":t.width=Number(u);break;case"fill":u!=="none"&&(r=!0,i.color=_s.shared.setValue(u).toNumber());break;case"fill-opacity":i.alpha=Number(u);break;case"stroke-opacity":t.alpha=Number(u);break;case"opacity":i.alpha=Number(u),t.alpha=Number(u);break}}}else{const o=n.getAttribute("stroke");o&&o!=="none"&&(s=!0,t.color=_s.shared.setValue(o).toNumber(),t.width=rr(n,"stroke-width",1));const a=n.getAttribute("fill");a&&a!=="none"&&(r=!0,i.color=_s.shared.setValue(a).toNumber())}return{strokeStyle:s?t:null,fillStyle:r?i:null}}const oW=class YP{constructor(e,t,i,r){this.uid=Mr("fillGradient"),this.type="linear",this.gradientStops=[],this.x0=e,this.y0=t,this.x1=i,this.y1=r}addColorStop(e,t){return this.gradientStops.push({offset:e,color:_s.shared.setValue(t).toHex()}),this}buildLinearGradient(){const e=YP.defaultTextureSize,{gradientStops:t}=this,i=Tr.get().createCanvas();i.width=e,i.height=e;const r=i.getContext("2d"),s=r.createLinearGradient(0,0,YP.defaultTextureSize,1);for(let x=0;x<t.length;x++){const v=t[x];s.addColorStop(v.offset,v.color)}r.fillStyle=s,r.fillRect(0,0,e,e),this.texture=new On({source:new v0({resource:i,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});const{x0:o,y0:a,x1:l,y1:c}=this,u=new $n,h=l-o,d=c-a,f=Math.sqrt(h*h+d*d),p=Math.atan2(d,h);u.translate(-o,-a),u.scale(1/e,1/e),u.rotate(-p),u.scale(256/f,1),this.transform=u}};oW.defaultTextureSize=256;let aW=oW;const _F={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class SJ{constructor(e,t){this.uid=Mr("fillPattern"),this.transform=new $n,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=_F[t].addressModeU,e.source.style.addressModeV=_F[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height)}}function tu(n,e){var o;if(n==null)return null;let t,i;if(n!=null&&n.fill?(i=n.fill,t={...e,...n}):(i=n,t=e),_s.isColorLike(i)){const a=_s.shared.setValue(i??0);return{...t,color:a.toNumber(),alpha:a.alpha===1?t.alpha:a.alpha,texture:On.WHITE}}else if(i instanceof SJ){const a=i;return{...t,color:16777215,texture:a.texture,matrix:a.transform,fill:t.fill??null}}else if(i instanceof aW){const a=i;return a.buildLinearGradient(),{...t,color:16777215,texture:a.texture,matrix:a.transform}}const r={...e,...n};if(r.texture){if(r.texture!==On.WHITE){const l=((o=r.matrix)==null?void 0:o.invert())||new $n;l.scale(1/r.texture.frame.width,1/r.texture.frame.height),r.matrix=l}const a=r.texture.source.style;a.addressMode==="clamp-to-edge"&&(a.addressMode="repeat")}const s=_s.shared.setValue(r.color);return r.alpha*=s.alpha,r.color=s.toNumber(),r.matrix=r.matrix?r.matrix.clone():null,r}const EJ=new qt,wF=new $n,lL=class el extends Al{constructor(){super(...arguments),this.uid=Mr("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new pm,this._transform=new $n,this._fillStyle={...el.defaultFillStyle},this._strokeStyle={...el.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Du,this._boundsDirty=!0}clone(){const e=new el;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=tu(e,el.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=tu(e,el.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=tu(e,el.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=tu(e,el.defaultStrokeStyle),this}texture(e,t,i,r,s,o){return this.instructions.push({action:"texture",data:{image:e,dx:i||0,dy:r||0,dw:s||e.frame.width,dh:o||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?_s.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new pm,this}fill(e,t){let i;const r=this.instructions[this.instructions.length-1];return this._tick===0&&r&&r.action==="stroke"?i=r.data.path:i=this._activePath.clone(),i?(e&&(t!==void 0&&typeof e=="number"&&(wi(_i,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=tu(e,el.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(qt.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?t=i.data.path:t=this._activePath.clone(),t?(e&&(this._strokeStyle=tu(e,el.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],i=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(i);else{t.data.hole=i;break}}return this._initNextPathLocation(),this}arc(e,t,i,r,s,o){this._tick++;const a=this._transform;return this._activePath.arc(a.a*e+a.c*t+a.tx,a.b*e+a.d*t+a.ty,i,r,s,o),this}arcTo(e,t,i,r,s){this._tick++;const o=this._transform;return this._activePath.arcTo(o.a*e+o.c*t+o.tx,o.b*e+o.d*t+o.ty,o.a*i+o.c*r+o.tx,o.b*i+o.d*r+o.ty,s),this}arcToSvg(e,t,i,r,s,o,a){this._tick++;const l=this._transform;return this._activePath.arcToSvg(e,t,i,r,s,l.a*o+l.c*a+l.tx,l.b*o+l.d*a+l.ty),this}bezierCurveTo(e,t,i,r,s,o,a){this._tick++;const l=this._transform;return this._activePath.bezierCurveTo(l.a*e+l.c*t+l.tx,l.b*e+l.d*t+l.ty,l.a*i+l.c*r+l.tx,l.b*i+l.d*r+l.ty,l.a*s+l.c*o+l.tx,l.b*s+l.d*o+l.ty,a),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,t,i,r){return this._tick++,this._activePath.ellipse(e,t,i,r,this._transform.clone()),this}circle(e,t,i){return this._tick++,this._activePath.circle(e,t,i,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*e+i.c*t+i.tx,i.b*e+i.d*t+i.ty),this}moveTo(e,t){this._tick++;const i=this._transform,r=this._activePath.instructions,s=i.a*e+i.c*t+i.tx,o=i.b*e+i.d*t+i.ty;return r.length===1&&r[0].action==="moveTo"?(r[0].data[0]=s,r[0].data[1]=o,this):(this._activePath.moveTo(s,o),this)}quadraticCurveTo(e,t,i,r,s){this._tick++;const o=this._transform;return this._activePath.quadraticCurveTo(o.a*e+o.c*t+o.tx,o.b*e+o.d*t+o.ty,o.a*i+o.c*r+o.tx,o.b*i+o.d*r+o.ty,s),this}rect(e,t,i,r){return this._tick++,this._activePath.rect(e,t,i,r,this._transform.clone()),this}roundRect(e,t,i,r,s){return this._tick++,this._activePath.roundRect(e,t,i,r,s,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,i,r,s=0,o){return this._tick++,this._activePath.regularPoly(e,t,i,r,s,o),this}roundPoly(e,t,i,r,s,o){return this._tick++,this._activePath.roundPoly(e,t,i,r,s,o),this}roundShape(e,t,i,r){return this._tick++,this._activePath.roundShape(e,t,i,r),this}filletRect(e,t,i,r,s){return this._tick++,this._activePath.filletRect(e,t,i,r,s),this}chamferRect(e,t,i,r,s,o){return this._tick++,this._activePath.chamferRect(e,t,i,r,s,o),this}star(e,t,i,r,s=0,o=0){return this._tick++,this._activePath.star(e,t,i,r,s,o,this._transform.clone()),this}svg(e){return this._tick++,wJ(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,i,r,s,o){return e instanceof $n?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,i,r,s,o),this)}transform(e,t,i,r,s,o){return e instanceof $n?(this._transform.append(e),this):(wF.set(e,t,i,r,s,o),this._transform.append(wF),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const i=this.instructions[t],r=i.action;if(r==="fill"){const s=i.data;e.addBounds(s.path.bounds)}else if(r==="texture"){const s=i.data;e.addFrame(s.dx,s.dy,s.dx+s.dw,s.dy+s.dh,s.transform)}if(r==="stroke"){const s=i.data,o=s.style.width/2,a=s.path.bounds;e.addFrame(a.minX-o,a.minY-o,a.maxX+o,a.maxY+o)}}return e}containsPoint(e){var r;if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let i=!1;for(let s=0;s<t.length;s++){const o=t[s],a=o.data,l=a.path;if(!o.action||!l)continue;const c=a.style,u=l.shapePath.shapePrimitives;for(let h=0;h<u.length;h++){const d=u[h].shape;if(!c||!d)continue;const f=u[h].transform,p=f?f.applyInverse(e,EJ):e;o.action==="fill"?i=d.contains(p.x,p.y):i=d.strokeContains(p.x,p.y,c.width);const x=a.hole;if(x){const v=(r=x.shapePath)==null?void 0:r.shapePrimitives;if(v)for(let y=0;y<v.length;y++)v[y].shape.contains(p.x,p.y)&&(i=!1)}if(i)return!0}}return i}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const i=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(i),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(i)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};lL.defaultFillStyle={color:16777215,alpha:1,texture:On.WHITE,matrix:null,fill:null};lL.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:On.WHITE,matrix:null,fill:null};let cu=lL;function cL(n,e=1){var i;const t=(i=zm.RETINA_PREFIX)==null?void 0:i.exec(n);return t?parseFloat(t[1]):e}function uL(n,e,t){n.label=t;const i=new On({source:n,label:t}),r=()=>{delete e.promiseCache[t],os.has(t)&&os.remove(t)};return i.once("destroy",()=>{t in e.promiseCache&&(Zn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),r())}),i.source.once("destroy",()=>{n.destroyed||(Zn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),r())}),i}const MJ=".svg",TJ="image/svg+xml",AJ={extension:{type:Bt.LoadParser,priority:Xd.Low},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(n){return Hm(n,TJ)||Wm(n,MJ)},async load(n,e,t){return e.data.parseAsGraphicsContext??this.config.parseAsGraphicsContext?PJ(n):CJ(n,e,t,this.config.crossOrigin)},unload(n){n.destroy(!0)}};async function CJ(n,e,t,i){var v,y,w;const s=await(await Tr.get().fetch(n)).blob(),o=URL.createObjectURL(s),a=new Image;a.src=o,a.crossOrigin=i,await a.decode(),URL.revokeObjectURL(o);const l=document.createElement("canvas"),c=l.getContext("2d"),u=((v=e.data)==null?void 0:v.resolution)||cL(n),h=((y=e.data)==null?void 0:y.width)??a.width,d=((w=e.data)==null?void 0:w.height)??a.height;l.width=h*u,l.height=d*u,c.drawImage(a,0,0,h*u,d*u);const{parseAsGraphicsContext:f,...p}=e.data,x=new v0({resource:l,alphaMode:"premultiply-alpha-on-upload",resolution:u,...p});return uL(x,t,n)}async function PJ(n){const t=await(await Tr.get().fetch(n)).text(),i=new cu;return i.svg(t),i}const RJ=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Yp=null,qP=class{constructor(){Yp||(Yp=URL.createObjectURL(new Blob([RJ],{type:"application/javascript"}))),this.worker=new Worker(Yp)}};qP.revokeObjectURL=function(){Yp&&(URL.revokeObjectURL(Yp),Yp=null)};const IJ=`(function () {
    'use strict';

    async function loadImageBitmap(url) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      const imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap;
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let qp=null;class lW{constructor(){qp||(qp=URL.createObjectURL(new Blob([IJ],{type:"application/javascript"}))),this.worker=new Worker(qp)}}lW.revokeObjectURL=function(){qp&&(URL.revokeObjectURL(qp),qp=null)};let bF=0,UT;class LJ{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new qP;t.addEventListener("message",i=>{t.terminate(),qP.revokeObjectURL(),e(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){UT===void 0&&(UT=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<UT&&(this._createdWorkers++,e=new lW().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),this._resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const i=new Promise((r,s)=>{this._queue.push({id:e,arguments:t,resolve:r,reject:s})});return this._next(),i}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),i=t.id;this._resolveHash[bF]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:bF++,id:i})}}const SF=new LJ,NJ=[".jpeg",".jpg",".png",".webp",".avif"],kJ=["image/jpeg","image/png","image/webp","image/avif"];async function OJ(n){const e=await Tr.get().fetch(n);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${e.status} ${e.statusText}`);const t=await e.blob();return await createImageBitmap(t)}const cW={name:"loadTextures",extension:{type:Bt.LoadParser,priority:Xd.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return Hm(n,kJ)||Wm(n,NJ)},async load(n,e,t){var s;let i=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await SF.isImageBitmapSupported()?i=await SF.loadImageBitmap(n):i=await OJ(n):i=await new Promise(o=>{i=new Image,i.crossOrigin=this.config.crossOrigin,i.src=n,i.complete?o(i):i.onload=()=>{o(i)}});const r=new v0({resource:i,alphaMode:"premultiply-alpha-on-upload",resolution:((s=e.data)==null?void 0:s.resolution)||cL(n),...e.data});return uL(r,t,n)},unload(n){n.destroy(!0)}},uW=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],DJ=uW.map(n=>`video/${n.substring(1)}`);function FJ(n,e,t){t===void 0&&!e.startsWith("data:")?n.crossOrigin=BJ(e):t!==!1&&(n.crossOrigin=typeof t=="string"?t:"anonymous")}function UJ(n){return new Promise((e,t)=>{n.addEventListener("canplaythrough",i),n.addEventListener("error",r),n.load();function i(){s(),e()}function r(o){s(),t(o)}function s(){n.removeEventListener("canplaythrough",i),n.removeEventListener("error",r)}})}function BJ(n,e=globalThis.location){if(n.startsWith("data:"))return"";e=e||globalThis.location;const t=new URL(n,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}const zJ={name:"loadVideo",extension:{type:Bt.LoadParser},config:null,test(n){const e=Hm(n,DJ),t=Wm(n,uW);return e||t},async load(n,e,t){var l,c;const i={...S1.defaultOptions,resolution:((l=e.data)==null?void 0:l.resolution)||cL(n),alphaMode:((c=e.data)==null?void 0:c.alphaMode)||await k6(),...e.data},r=document.createElement("video"),s={preload:i.autoLoad!==!1?"auto":void 0,"webkit-playsinline":i.playsinline!==!1?"":void 0,playsinline:i.playsinline!==!1?"":void 0,muted:i.muted===!0?"":void 0,loop:i.loop===!0?"":void 0,autoplay:i.autoPlay!==!1?"":void 0};Object.keys(s).forEach(u=>{const h=s[u];h!==void 0&&r.setAttribute(u,h)}),i.muted===!0&&(r.muted=!0),FJ(r,n,i.crossorigin);const o=document.createElement("source");let a;if(n.startsWith("data:"))a=n.slice(5,n.indexOf(";"));else if(!n.startsWith("blob:")){const u=n.split("?")[0].slice(n.lastIndexOf(".")+1).toLowerCase();a=S1.MIME_TYPES[u]||`video/${u}`}return o.src=n,a&&(o.type=a),new Promise(u=>{const h=async()=>{const d=new S1({...i,resource:r});r.removeEventListener("canplay",h),e.data.preload&&await UJ(r),u(uL(d,t,n))};r.addEventListener("canplay",h),r.appendChild(o)})},unload(n){n.destroy(!0)}},hW={extension:Bt.ResolveParser,test:cW.test,parse:n=>{var e;return{resolution:parseFloat(((e=zm.RETINA_PREFIX.exec(n))==null?void 0:e[1])??"1"),format:n.split(".").pop(),src:n}}},HJ={extension:Bt.ResolveParser,test:n=>zm.RETINA_PREFIX.test(n)&&n.endsWith(".json"),parse:hW.parse};class WJ{constructor(){this._detections=[],this._initialized=!1,this.resolver=new zm,this.loader=new aQ,this.cache=os,this._backgroundLoader=new QK(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){Zn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const t=((s=e.texturePreference)==null?void 0:s.resolution)??1,i=typeof t=="number"?[t]:t,r=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:r,resolution:i}}),e.preferences&&this.setPreferences(e.preferences)}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const i=fb(e),r=xa(e).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(c=>!this.resolver.hasKey(c))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(r),o=await this._mapLoadToResolve(s,t);return i?o[r[0]]:o}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let i=!1;typeof e=="string"&&(i=!0,e=[e]);const r=this.resolver.resolveBundle(e),s={},o=Object.keys(r);let a=0,l=0;const c=()=>{t==null||t(++a/l)},u=o.map(h=>{const d=r[h];return l+=Object.keys(d).length,this._mapLoadToResolve(d,c).then(f=>{s[h]=f})});return await Promise.all(u),i?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return os.get(e);const t={};for(let i=0;i<e.length;i++)t[i]=os.get(e[i]);return t}async _mapLoadToResolve(e,t){const i=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const r=await this.loader.load(i,t);this._backgroundLoader.active=!0;const s={};return i.forEach(o=>{const a=r[o.src],l=[o.src];o.alias&&l.push(...o.alias),l.forEach(c=>{s[c]=a}),os.set(l,a)}),s}async unload(e){this._initialized||await this.init();const t=xa(e).map(r=>typeof r!="string"?r.src:r),i=this.resolver.resolve(t);await this._unloadFromResolved(i)}async unloadBundle(e){this._initialized||await this.init(),e=xa(e);const t=this.resolver.resolveBundle(e),i=Object.keys(t).map(r=>this._unloadFromResolved(t[r]));await Promise.all(i)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(i=>{os.remove(i.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const i of e.detections)e.skipDetections||await i.test()?t=await i.add(t):e.skipDetections||(t=await i.remove(t));return t=t.filter((i,r)=>t.indexOf(i)===r),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(i=>i in e).forEach(i=>{t.config[i]=e[i]})})}}const Py=new WJ;qs.handleByList(Bt.LoadParser,Py.loader.parsers).handleByList(Bt.ResolveParser,Py.resolver.parsers).handleByList(Bt.CacheParser,Py.cache.parsers).handleByList(Bt.DetectionParser,Py.detections);qs.add(JK,tQ,eQ,oQ,iQ,rQ,sQ,uQ,fQ,wQ,AJ,cW,zJ,hW,HJ);const EF={loader:Bt.LoadParser,resolver:Bt.ResolveParser,cache:Bt.CacheParser,detection:Bt.DetectionParser};qs.handle(Bt.Asset,n=>{const e=n.ref;Object.entries(EF).filter(([t])=>!!e[t]).forEach(([t,i])=>qs.add(Object.assign(e[t],{extension:e[t].extension??i})))},n=>{const e=n.ref;Object.keys(EF).filter(t=>!!e[t]).forEach(t=>qs.remove(e[t]))});class VJ{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this._tickerAdded||!this.domElement||(sd.system.add(this._tickerUpdate,this,db.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(sd.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events._rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}_tickerUpdate(e){this._deltaTime+=e.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}}const uu=new VJ;class pb extends CS{constructor(){super(...arguments),this.client=new qt,this.movement=new qt,this.offset=new qt,this.global=new qt,this.screen=new qt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,i,r,s,o,a,l,c,u,h,d,f,p,x){throw new Error("Method not implemented.")}}class sa extends pb{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class mm extends pb{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}mm.DOM_DELTA_PIXEL=0;mm.DOM_DELTA_LINE=1;mm.DOM_DELTA_PAGE=2;const GJ=2048,jJ=new qt,Hg=new qt;class $J{constructor(e){this.dispatch=new Al,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((i,r)=>i.priority-r.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let i=0,r=t.length;i<r;i++)t[i].fn(e);else Zn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){uu.pauseUpdate=!0;const r=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[r](this.rootTarget,this.rootTarget.eventMode,jJ.set(e,t),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,t){if(!e.target)return;const i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let r=0,s=i.length-1;r<s;r++)if(e.currentTarget=i[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let r=i.length-2;r>=0;r--)if(e.currentTarget=i[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,i=this._allInteractiveElements){if(i.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const r=Array.isArray(t)?t:[t];for(let s=i.length-1;s>=0;s--)r.forEach(o=>{e.currentTarget=i[s],this.notifyTarget(e,o)})}propagationPath(e){const t=[e];for(let i=0;i<GJ&&e!==this.rootTarget&&e.parent;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,i,r,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(uu.pauseUpdate=!1),e.interactiveChildren&&e.children){const u=e.children;for(let h=u.length-1;h>=0;h--){const d=u[h],f=this.hitTestMoveRecursive(d,this._isInteractive(t)?t:d.eventMode,i,r,s,o||s(e,i));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=e.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(t),c=e.isInteractive();return c&&c&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,i)&&r(e,i)?c?[e]:[]:null}hitTestRecursive(e,t,i,r,s){if(this._interactivePrune(e)||s(e,i))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(uu.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children,c=i;for(let u=l.length-1;u>=0;u--){const h=l[u],d=this.hitTestRecursive(h,this._isInteractive(t)?t:h.eventMode,c,r,s);if(d){if(d.length>0&&!d[d.length-1].parent)continue;const f=e.isInteractive();return(d.length>0||f)&&d.push(e),d}}}const o=this._isInteractive(t),a=e.isInteractive();return o&&r(e,i)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!e||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,Hg),!e.hitArea.contains(Hg.x,Hg.y)))return!0;if(e.effects&&e.effects.length)for(let i=0;i<e.effects.length;i++){const r=e.effects[i];if(r.containsPoint&&!r.containsPoint(t,this.hitTestFn))return!0}return!1}hitTestFn(e,t){return e.hitArea?!0:e!=null&&e.containsPoint?(e.worldTransform.applyInverse(t,Hg),e.containsPoint(Hg)):!1}notifyTarget(e,t){var s,o;t=t??e.type;const i=`on${t}`;(o=(s=e.currentTarget)[i])==null||o.call(s,e);const r=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this._notifyListeners(e,r),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof sa)){Zn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const r=t.button===2;this.dispatchEvent(t,r?"rightdown":"mousedown")}const i=this.trackingData(e.pointerId);i.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){var l,c;if(!(e instanceof sa)){Zn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const i=t.pointerType==="mouse"||t.pointerType==="pen",r=this.trackingData(e.pointerId),s=this.findMountedTarget(r.overTargets);if(((l=r.overTargets)==null?void 0:l.length)>0&&s!==t.target){const u=e.type==="mousemove"?"mouseout":"pointerout",h=this.createPointerEvent(e,u,s);if(this.dispatchEvent(h,"pointerout"),i&&this.dispatchEvent(h,"mouseout"),!t.composedPath().includes(s)){const d=this.createPointerEvent(e,"pointerleave",s);for(d.eventPhase=d.AT_TARGET;d.target&&!t.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),i&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(h)}if(s!==t.target){const u=e.type==="mousemove"?"mouseover":"pointerover",h=this.clonePointerEvent(t,u);this.dispatchEvent(h,"pointerover"),i&&this.dispatchEvent(h,"mouseover");let d=s==null?void 0:s.parent;for(;d&&d!==this.rootTarget.parent&&d!==t.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const p=this.clonePointerEvent(t,"pointerenter");for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==s&&p.target!==this.rootTarget.parent;)p.currentTarget=p.target,this.notifyTarget(p),i&&this.notifyTarget(p,"mouseenter"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(h)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(t,"pointermove"),a&&o.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),a&&o.push("globaltouchmove")),i&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(c=t.target)==null?void 0:c.cursor),o.length>0&&this.all(t,o),this._allInteractiveElements.length=0,this._hitElements.length=0,r.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){var o;if(!(e instanceof sa)){Zn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),i=this.createPointerEvent(e),r=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),r&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(o=i.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(i,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),r&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;t.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof sa)){Zn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const i=e.pointerType==="mouse"||e.pointerType==="pen",r=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",r);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",r);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof sa)){Zn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const a=i.button===2;this.dispatchEvent(i,a?"rightup":"mouseup")}const r=this.trackingData(e.pointerId),s=this.findMountedTarget(r.pressTargetsByButton[e.button]);let o=s;if(s&&!i.composedPath().includes(s)){let a=s;for(;a&&!i.composedPath().includes(a);){if(i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const l=i.button===2;this.notifyTarget(i,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete r.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,r.clicksByButton[e.button]||(r.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:t});const l=r.clicksByButton[e.button];if(l.target===a.target&&t-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=t,a.detail=l.clickCount,a.pointerType==="mouse"){const c=a.button===2;this.dispatchEvent(a,c?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof sa)){Zn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),i=this.findMountedTarget(t.pressTargetsByButton[e.button]),r=this.createPointerEvent(e);if(i){let s=i;for(;s;)r.currentTarget=s,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch"?this.notifyTarget(r,"touchendoutside"):(r.pointerType==="mouse"||r.pointerType==="pen")&&this.notifyTarget(r,r.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(r)}mapWheel(e){if(!(e instanceof mm)){Zn("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let i=1;i<e.length&&e[i].parent===t;i++)t=e[i];return t}createPointerEvent(e,t,i){const r=this.allocateEvent(sa);return this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=i??this.hitTest(r.global.x,r.global.y)??this._hitElements[0],typeof t=="string"&&(r.type=t),r}createWheelEvent(e){const t=this.allocateEvent(mm);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const i=this.allocateEvent(sa);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=t??i.type,i}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof sa&&t instanceof sa&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof pb&&t instanceof pb&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}_notifyListeners(e,t){const i=e.currentTarget._events[t];if(i&&e.currentTarget.isInteractive())if("fn"in i)i.once&&e.currentTarget.removeListener(t,i.fn,void 0,!0),i.fn.call(i.context,e);else for(let r=0,s=i.length;r<s&&!e.propagationImmediatelyStopped;r++)i[r].once&&e.currentTarget.removeListener(t,i[r].fn,void 0,!0),i[r].fn.call(i[r].context,e)}}const XJ=1,YJ={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},hL=class ZP{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new $J(null),uu.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new sa(null),this._rootWheelEvent=new mm(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...ZP.defaultEventFeatures},{set:(t,i,r)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=r),t[i]=r,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{canvas:t,resolution:i}=this.renderer;this.setTargetElement(t),this.resolution=i,ZP._defaultEventMode=e.eventMode??"passive",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this._currentCursor===e)return;this._currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this._rootPointerEvent}_onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this._normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,r=t.length;i<r;i++){const s=t[i],o=this._bootstrapEvent(this._rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,uu.pointerMoved();const t=this._normalizeToPointerData(e);for(let i=0,r=t.length;i<r;i++){const s=this._bootstrapEvent(this._rootPointerEvent,t[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const i=t!==this.domElement?"outside":"",r=this._normalizeToPointerData(e);for(let s=0,o=r.length;s<o;s++){const a=this._bootstrapEvent(this._rootPointerEvent,r[s]);a.type+=i,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this._normalizeToPointerData(e);for(let i=0,r=t.length;i<r;i++){const s=this._bootstrapEvent(this._rootPointerEvent,t[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this._removeEvents(),this.domElement=e,uu.domElement=e,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;uu.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;uu.removeTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(e,t,i){const r=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-r.left)*(this.domElement.width/r.width)*s,e.y=(i-r.top)*(this.domElement.height/r.height)*s}_normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,r=e.changedTouches.length;i<r;i++){const s=e.changedTouches[i];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=XJ),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){const t=this._rootWheelEvent;return this._transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}_bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this._transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=YJ[e.type]||e.type),e}_transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};hL.extension={name:"events",type:[Bt.WebGLSystem,Bt.CanvasSystem,Bt.WebGPUSystem],priority:-1};hL.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let dW=hL;const qJ={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(n){this.eventMode=n?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??dW.defaultEventMode},set eventMode(n){this._internalEventMode=n},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(n,e,t){const i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,r=typeof t=="object"?t.signal:void 0,s=typeof t=="object"?t.once===!0:!1,o=typeof e=="function"?void 0:e;n=i?`${n}capture`:n;const a=typeof e=="function"?e:e.handleEvent,l=this;r&&r.addEventListener("abort",()=>{l.off(n,a,o)}),s?l.once(n,a,o):l.on(n,a,o)},removeEventListener(n,e,t){const i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,r=typeof e=="function"?void 0:e;n=i?`${n}capture`:n,e=typeof e=="function"?e:e.handleEvent,this.off(n,e,r)},dispatchEvent(n){if(!(n instanceof CS))throw new Error("Container cannot propagate events outside of the Federated Events API");return n.defaultPrevented=!1,n.path=null,n.target=this,n.manager.dispatchEvent(n),!n.defaultPrevented}};class Vn extends dn{constructor(e){e instanceof cu&&(e={context:e});const{context:t,roundPixels:i,...r}=e||{};super({label:"Graphics",...r}),this.canBundle=!0,this.renderPipeId="graphics",this._roundPixels=0,t?this._context=t:this._context=this._ownedContext=new cu,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=i??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}addBounds(e){e.addBounds(this._context.bounds)}containsPoint(e){return this._context.containsPoint(e)}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}onViewUpdate(){this._didChangeId+=4096,this._didGraphicsUpdate=!0,!this.didViewUpdate&&(this.didViewUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new Vn(this._context.clone()):(this._ownedContext=null,new Vn(this._context))}lineStyle(e,t,i){wi(_i,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const r={};return e&&(r.width=e),t&&(r.color=t),i&&(r.alpha=i),this.context.strokeStyle=r,this}beginFill(e,t){wi(_i,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return e&&(i.color=e),t&&(i.alpha=t),this.context.fillStyle=i,this}endFill(){wi(_i,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==cu.defaultStrokeStyle.width||e.color!==cu.defaultStrokeStyle.color||e.alpha!==cu.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return wi(_i,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return wi(_i,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return wi(_i,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return wi(_i,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return wi(_i,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return wi(_i,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}class ZJ extends dn{constructor(e,t){const{text:i,resolution:r,style:s,anchor:o,width:a,height:l,roundPixels:c,...u}=e;super({...u}),this.batched=!0,this.resolution=null,this._didTextUpdate=!0,this._roundPixels=0,this._bounds=new Du,this._boundsDirty=!0,this._styleClass=t,this.text=i??"",this.style=s,this.resolution=r??null,this.allowChildren=!1,this._anchor=new So({_onUpdate:()=>{this.onViewUpdate()}}),o&&(this.anchor=o),this.roundPixels=c??!1,a&&(this.width=a),l&&(this.height=l)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}get style(){return this._style}set style(e){var t;e=e||{},(t=this._style)==null||t.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){let i,r;typeof e!="object"?(i=e,r=t??e):(i=e.width,r=e.height??e.width),i!==void 0&&this._setWidth(i,this.bounds.width),r!==void 0&&this._setHeight(r,this.bounds.height)}addBounds(e){const t=this.bounds;e.addFrame(t.minX,t.minY,t.maxX,t.maxY)}containsPoint(e){const t=this.bounds.maxX,i=this.bounds.maxY,r=-t*this.anchor.x;let s=0;return e.x>=r&&e.x<=r+t&&(s=-i*this.anchor.y,e.y>=s&&e.y<=s+i)}onViewUpdate(){this._didChangeId+=4096,this._boundsDirty=!0,!this.didViewUpdate&&(this.didViewUpdate=!0,this._didTextUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}_getKey(){return`${this.text}:${this._style.styleKey}`}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,this._style.destroy(e),this._style=null,this._text=null}}function KJ(n,e){let t=n[0]??{};return(typeof t=="string"||n[1])&&(wi(_i,`use new ${e}({ text: "hi!", style }) instead`),t={text:t,style:n[1]}),t}const QJ=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function JJ(n){const e=typeof n.fontSize=="number"?`${n.fontSize}px`:n.fontSize;let t=n.fontFamily;Array.isArray(n.fontFamily)||(t=n.fontFamily.split(","));for(let i=t.length-1;i>=0;i--){let r=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!QJ.includes(r)&&(r=`"${r}"`),t[i]=r}return`${n.fontStyle} ${n.fontVariant} ${n.fontWeight} ${e} ${t.join(",")}`}const BT={willReadFrequently:!0},La=class Mt{static get experimentalLetterSpacingSupported(){let e=Mt._experimentalLetterSpacingSupported;if(e!==void 0){const t=Tr.get().getCanvasRenderingContext2D().prototype;e=Mt._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,i,r,s,o,a,l,c){this.text=e,this.style=t,this.width=i,this.height=r,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=c}static measureText(e=" ",t,i=Mt._canvas,r=t.wordWrap){var w;const s=`${e}:${t.styleKey}`;if(Mt._measurementCache[s])return Mt._measurementCache[s];const o=JJ(t),a=Mt.measureFont(o);a.fontSize===0&&(a.fontSize=t.fontSize,a.ascent=t.fontSize);const l=Mt.__context;l.font=o;const u=(r?Mt._wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),h=new Array(u.length);let d=0;for(let _=0;_<u.length;_++){const b=Mt._measureText(u[_],t.letterSpacing,l);h[_]=b,d=Math.max(d,b)}const f=((w=t._stroke)==null?void 0:w.width)||0;let p=d+f;t.dropShadow&&(p+=t.dropShadow.distance);const x=t.lineHeight||a.fontSize+f;let v=Math.max(x,a.fontSize+f*2)+(u.length-1)*(x+t.leading);return t.dropShadow&&(v+=t.dropShadow.distance),new Mt(e,t,p,v,u,h,x+t.leading,d,a)}static _measureText(e,t,i){let r=!1;Mt.experimentalLetterSpacingSupported&&(Mt.experimentalLetterSpacing?(i.letterSpacing=`${t}px`,i.textLetterSpacing=`${t}px`,r=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let s=i.measureText(e).width;return s>0&&(r?s-=t:s+=(Mt.graphemeSegmenter(e).length-1)*t),s}static _wordWrap(e,t,i=Mt._canvas){const r=i.getContext("2d",BT);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:c,whiteSpace:u}=t,h=Mt._collapseSpaces(u),d=Mt._collapseNewlines(u);let f=!h;const p=t.wordWrapWidth+c,x=Mt._tokenize(e);for(let v=0;v<x.length;v++){let y=x[v];if(Mt._isNewline(y)){if(!d){a+=Mt._addLine(o),f=!h,o="",s=0;continue}y=" "}if(h){const _=Mt.isBreakingSpace(y),b=Mt.isBreakingSpace(o[o.length-1]);if(_&&b)continue}const w=Mt._getFromCache(y,c,l,r);if(w>p)if(o!==""&&(a+=Mt._addLine(o),o="",s=0),Mt.canBreakWords(y,t.breakWords)){const _=Mt.wordWrapSplit(y);for(let b=0;b<_.length;b++){let E=_[b],M=E,C=1;for(;_[b+C];){const T=_[b+C];if(!Mt.canBreakChars(M,T,y,b,t.breakWords))E+=T;else break;M=T,C++}b+=C-1;const P=Mt._getFromCache(E,c,l,r);P+s>p&&(a+=Mt._addLine(o),f=!1,o="",s=0),o+=E,s+=P}}else{o.length>0&&(a+=Mt._addLine(o),o="",s=0);const _=v===x.length-1;a+=Mt._addLine(y,!_),f=!1,o="",s=0}else w+s>p&&(f=!1,a+=Mt._addLine(o),o="",s=0),(o.length>0||!Mt.isBreakingSpace(y)||f)&&(o+=y,s+=w)}return a+=Mt._addLine(o,!1),a}static _addLine(e,t=!0){return e=Mt._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,i,r){let s=i[e];return typeof s!="number"&&(s=Mt._measureText(e,t,r)+t,i[e]=s),s}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const i=e[t];if(!Mt.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:Mt._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:Mt._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const t=[];let i="";if(typeof e!="string")return t;for(let r=0;r<e.length;r++){const s=e[r],o=e[r+1];if(Mt.isBreakingSpace(s,o)||Mt._isNewline(s)){i!==""&&(t.push(i),i=""),t.push(s);continue}i+=s}return i!==""&&t.push(i),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,r,s){return!0}static wordWrapSplit(e){return Mt.graphemeSegmenter(e)}static measureFont(e){if(Mt._fonts[e])return Mt._fonts[e];const t=Mt._context;t.font=e;const i=t.measureText(Mt.METRICS_STRING+Mt.BASELINE_SYMBOL),r={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return Mt._fonts[e]=r,r}static clearMetrics(e=""){e?delete Mt._fonts[e]:Mt._fonts={}}static get _canvas(){if(!Mt.__canvas){let e;try{const t=new OffscreenCanvas(0,0),i=t.getContext("2d",BT);if(i!=null&&i.measureText)return Mt.__canvas=t,t;e=Tr.get().createCanvas()}catch{e=Tr.get().createCanvas()}e.width=e.height=10,Mt.__canvas=e}return Mt.__canvas}static get _context(){return Mt.__context||(Mt.__context=Mt._canvas.getContext("2d",BT)),Mt.__context}};La.METRICS_STRING="|ÉqÅ";La.BASELINE_SYMBOL="M";La.BASELINE_MULTIPLIER=1.4;La.HEIGHT_MULTIPLIER=2;La.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const n=new Intl.Segmenter;return e=>[...n.segment(e)].map(t=>t.segment)}return n=>[...n]})();La.experimentalLetterSpacing=!1;La._fonts={};La._newlines=[10,13];La._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];La._measurementCache={};let eee=La;const MF=["_fontFamily","_fontStyle","_fontSize","_fontVariant","_fontWeight","_breakWords","_align","_leading","_letterSpacing","_lineHeight","_textBaseline","_whiteSpace","_wordWrap","_wordWrapWidth","_padding","_cssOverrides","_trim"];function tee(n){const e=[];let t=0;for(let i=0;i<MF.length;i++){const r=MF[i];e[t++]=n[r]}return t=fW(n._fill,e,t),t=nee(n._stroke,e,t),e.join("-")}function fW(n,e,t){var i;return n&&(e[t++]=n.color,e[t++]=n.alpha,e[t++]=(i=n.fill)==null?void 0:i.uid),t}function nee(n,e,t){return n&&(t=fW(n,e,t),e[t++]=n.width,e[t++]=n.alignment,e[t++]=n.cap,e[t++]=n.join,e[t++]=n.miterLimit),t}const dL=class yp extends Al{constructor(e={}){super(),iee(e);const t={...yp.defaultTextStyle,...e};for(const i in t){const r=i;this[r]=t[i]}this.update()}get align(){return this._align}set align(e){this._align=e,this.update()}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords=e,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){e!==null&&typeof e=="object"?this._dropShadow={...yp.defaultDropShadow,...e}:this._dropShadow=e?{...yp.defaultDropShadow}:null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.update()}get fontSize(){return this._fontSize}set fontSize(e){typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e,this.update()}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e,this.update()}get leading(){return this._leading}set leading(e){this._leading=e,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing=e,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e,this.update()}get padding(){return this._padding}set padding(e){this._padding=e,this.update()}get trim(){return this._trim}set trim(e){this._trim=e,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace=e,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap=e,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth=e,this.update()}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._fill=tu(e===0?"black":e,cu.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._stroke=tu(e,cu.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=tee(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const e=yp.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new yp({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(e=!1){var i,r,s,o;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const a=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(i=this._fill)!=null&&i.texture&&this._fill.texture.destroy(a),(r=this._originalFill)!=null&&r.texture&&this._originalFill.texture.destroy(a),(s=this._stroke)!=null&&s.texture&&this._stroke.texture.destroy(a),(o=this._originalStroke)!=null&&o.texture&&this._originalStroke.texture.destroy(a)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}};dL.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};dL.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let IS=dL;function iee(n){const e=n;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=IS.defaultDropShadow;n.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness){wi(_i,"strokeThickness is now a part of stroke");const t=e.stroke;n.stroke={color:t,width:e.strokeThickness}}if(Array.isArray(e.fill)){wi(_i,"gradient fill is now a fill pattern: `new FillGradient(...)`");const t=new aW(0,0,0,n.fontSize*1.7),i=e.fill.map(r=>_s.shared.setValue(r).toNumber());i.forEach((r,s)=>{const o=e.fillGradientStops[s]??s/i.length;t.addColorStop(o,r)}),n.fill={fill:t}}}let pW=class extends ZJ{constructor(...e){const t=KJ(e,"Text");super(t,IS),this.renderPipeId="text"}_updateBounds(){const e=this._bounds,t=this._style.padding,i=this._anchor,r=eee.measureText(this._text,this._style),{width:s,height:o}=r;e.minX=-i._x*s-t,e.maxX=e.minX+s,e.minY=-i._y*o-t,e.maxY=e.minY+o}};qs.add(PZ,RZ);const ree={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},TF=n=>{let e;const t=new Set,i=(u,h)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const f=e;e=h??(typeof d!="object"||d===null)?d:Object.assign({},e,d),t.forEach(p=>p(e,f))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>c,subscribe:u=>(t.add(u),()=>t.delete(u)),destroy:()=>{t.clear()}},c=e=n(i,r,l);return l},see=n=>n?TF(n):TF;var mW={exports:{}},gW={},yW={exports:{}},vW={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gm=R;function oee(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var aee=typeof Object.is=="function"?Object.is:oee,lee=gm.useState,cee=gm.useEffect,uee=gm.useLayoutEffect,hee=gm.useDebugValue;function dee(n,e){var t=e(),i=lee({inst:{value:t,getSnapshot:e}}),r=i[0].inst,s=i[1];return uee(function(){r.value=t,r.getSnapshot=e,zT(r)&&s({inst:r})},[n,t,e]),cee(function(){return zT(r)&&s({inst:r}),n(function(){zT(r)&&s({inst:r})})},[n]),hee(t),t}function zT(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!aee(n,t)}catch{return!0}}function fee(n,e){return e()}var pee=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fee:dee;vW.useSyncExternalStore=gm.useSyncExternalStore!==void 0?gm.useSyncExternalStore:pee;yW.exports=vW;var mee=yW.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LS=R,gee=mee;function yee(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var vee=typeof Object.is=="function"?Object.is:yee,xee=gee.useSyncExternalStore,_ee=LS.useRef,wee=LS.useEffect,bee=LS.useMemo,See=LS.useDebugValue;gW.useSyncExternalStoreWithSelector=function(n,e,t,i,r){var s=_ee(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=bee(function(){function l(f){if(!c){if(c=!0,u=f,f=i(f),r!==void 0&&o.hasValue){var p=o.value;if(r(p,f))return h=p}return h=f}if(p=h,vee(u,f))return p;var x=i(f);return r!==void 0&&r(p,x)?p:(u=f,h=x)}var c=!1,u,h,d=t===void 0?null:t;return[function(){return l(e())},d===null?void 0:function(){return l(d())}]},[e,t,i,r]);var a=xee(n,s[0],s[1]);return wee(function(){o.hasValue=!0,o.value=a},[a]),See(a),a};mW.exports=gW;var Eee=mW.exports;const Mee=Ia(Eee),xW={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:Tee}=ae,{useSyncExternalStoreWithSelector:Aee}=Mee;let AF=!1;const Cee=n=>n;function Pee(n,e=Cee,t){(xW?"production":void 0)!=="production"&&t&&!AF&&(AF=!0);const i=Aee(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return Tee(i),i}const CF=n=>{const e=typeof n=="function"?see(n):n,t=(i,r)=>Pee(e,i,r);return Object.assign(t,e),t},_W=n=>n?CF(n):CF;function Fu(n,e,t,i){return Math.hypot(n-e,t-i)}const Fo=100,Ree=.2*Fo,Iee=.2*Fo,s_=Ree+Iee,PF=10,fL="#EBEBEB";var Wi=(n=>(n[n.NE=0]="NE",n[n.E=1]="E",n[n.SE=2]="SE",n[n.S=3]="S",n[n.C=4]="C",n[n.Horizontal=5]="Horizontal",n[n.Vertical=6]="Vertical",n))(Wi||{}),oa=(n=>(n[n.Horizontal=0]="Horizontal",n[n.Vertical=1]="Vertical",n))(oa||{}),mt=(n=>(n[n.None=0]="None",n[n.WallAdd=1]="WallAdd",n[n.FurnitureAdd=2]="FurnitureAdd",n[n.Edit=3]="Edit",n[n.Remove=4]="Remove",n[n.Measure=5]="Measure",n[n.FurnitureAddWindow=6]="FurnitureAddWindow",n[n.FurnitureAddDoor=7]="FurnitureAddDoor",n))(mt||{}),bs=(n=>(n[n.Edit=0]="Edit",n[n.View2d=1]="View2d",n[n.View3d=2]="View3d",n))(bs||{});class RF{constructor(){ve(this,"furnitureArray");ve(this,"wallNodes");ve(this,"wallNodeLinks");this.furnitureArray=[],this.wallNodes=[],this.wallNodeLinks=[]}}var Yd=(n=>(n[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2",n))(Yd||{}),wW=(n=>(n[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS",n))(wW||{}),KP=(n=>(n[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL",n))(KP||{}),Ft=(n=>(n[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR",n))(Ft||{}),mb=(n=>(n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n))(mb||{}),ut=(n=>(n[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n))(ut||{}),Zp=(n=>(n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n))(Zp||{}),tn=(n=>(n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT",n))(tn||{}),vt=(n=>(n[n.FLOAT=0]="FLOAT",n[n.INT=1]="INT",n[n.UINT=2]="UINT",n))(vt||{}),oc=(n=>(n[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR",n))(oc||{}),pL=(n=>(n[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n))(pL||{}),kd=(n=>(n[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",n[n.ON_MANUAL=3]="ON_MANUAL",n))(kd||{}),qd=(n=>(n[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",n))(qd||{}),Oh=(n=>(n[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT",n))(Oh||{}),mL=(n=>(n[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",n))(mL||{}),Co=(n=>(n.LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp",n))(Co||{}),Gi=(n=>(n[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",n[n.COLOR=4]="COLOR",n))(Gi||{}),Di=(n=>(n[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH",n))(Di||{}),gl=(n=>(n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",n))(gl||{});const Lee={createCanvas:(n,e)=>{const t=document.createElement("canvas");return t.width=n,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,e)=>fetch(n,e),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")},xn={ADAPTER:Lee,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Nee=aF.default??aF,Ap=Nee(globalThis.navigator);xn.RETINA_PREFIX=/@([0-9\.]+)x/;xn.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var bW={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function r(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,h,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new r(u,h||l,d),p=t?t+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new i:delete l._events[c]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)e.call(u,h)&&c.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=t?t+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var d=0,f=h.length,p=new Array(f);d<f;d++)p[d]=h[d].fn;return p},a.prototype.listenerCount=function(c){var u=t?t+c:c,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,u,h,d,f,p){var x=t?t+c:c;if(!this._events[x])return!1;var v=this._events[x],y=arguments.length,w,_;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,h),!0;case 4:return v.fn.call(v.context,u,h,d),!0;case 5:return v.fn.call(v.context,u,h,d,f),!0;case 6:return v.fn.call(v.context,u,h,d,f,p),!0}for(_=1,w=new Array(y-1);_<y;_++)w[_-1]=arguments[_];v.fn.apply(v.context,w)}else{var b=v.length,E;for(_=0;_<b;_++)switch(v[_].once&&this.removeListener(c,v[_].fn,void 0,!0),y){case 1:v[_].fn.call(v[_].context);break;case 2:v[_].fn.call(v[_].context,u);break;case 3:v[_].fn.call(v[_].context,u,h);break;case 4:v[_].fn.call(v[_].context,u,h,d);break;default:if(!w)for(E=1,w=new Array(y-1);E<y;E++)w[E-1]=arguments[E];v[_].fn.apply(v[_].context,w)}}return!0},a.prototype.on=function(c,u,h){return s(this,c,u,h,!1)},a.prototype.once=function(c,u,h){return s(this,c,u,h,!0)},a.prototype.removeListener=function(c,u,h,d){var f=t?t+c:c;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!d||p.once)&&(!h||p.context===h)&&o(this,f);else{for(var x=0,v=[],y=p.length;x<y;x++)(p[x].fn!==u||d&&!p[x].once||h&&p[x].context!==h)&&v.push(p[x]);v.length?this._events[f]=v.length===1?v[0]:v:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&o(this,u)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(bW);var kee=bW.exports;const x0=Ia(kee);var gb={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */gb.exports;(function(n,e){(function(t){var i=e&&!e.nodeType&&e,r=n&&!n.nodeType&&n,s=typeof ya=="object"&&ya;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,l=36,c=1,u=26,h=38,d=700,f=72,p=128,x="-",v=/^xn--/,y=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=l-c,E=Math.floor,M=String.fromCharCode,C;function P(D){throw new RangeError(_[D])}function T(D,Y){for(var Q=D.length,re=[];Q--;)re[Q]=Y(D[Q]);return re}function I(D,Y){var Q=D.split("@"),re="";Q.length>1&&(re=Q[0]+"@",D=Q[1]),D=D.replace(w,".");var ce=D.split("."),oe=T(ce,Y).join(".");return re+oe}function U(D){for(var Y=[],Q=0,re=D.length,ce,oe;Q<re;)ce=D.charCodeAt(Q++),ce>=55296&&ce<=56319&&Q<re?(oe=D.charCodeAt(Q++),(oe&64512)==56320?Y.push(((ce&1023)<<10)+(oe&1023)+65536):(Y.push(ce),Q--)):Y.push(ce);return Y}function j(D){return T(D,function(Y){var Q="";return Y>65535&&(Y-=65536,Q+=M(Y>>>10&1023|55296),Y=56320|Y&1023),Q+=M(Y),Q}).join("")}function B(D){return D-48<10?D-22:D-65<26?D-65:D-97<26?D-97:l}function z(D,Y){return D+22+75*(D<26)-((Y!=0)<<5)}function $(D,Y,Q){var re=0;for(D=Q?E(D/d):D>>1,D+=E(D/Y);D>b*u>>1;re+=l)D=E(D/b);return E(re+(b+1)*D/(D+h))}function H(D){var Y=[],Q=D.length,re,ce=0,oe=p,he=f,Re,Oe,Ve,Je,Fe,J,ge,de,Ae;for(Re=D.lastIndexOf(x),Re<0&&(Re=0),Oe=0;Oe<Re;++Oe)D.charCodeAt(Oe)>=128&&P("not-basic"),Y.push(D.charCodeAt(Oe));for(Ve=Re>0?Re+1:0;Ve<Q;){for(Je=ce,Fe=1,J=l;Ve>=Q&&P("invalid-input"),ge=B(D.charCodeAt(Ve++)),(ge>=l||ge>E((a-ce)/Fe))&&P("overflow"),ce+=ge*Fe,de=J<=he?c:J>=he+u?u:J-he,!(ge<de);J+=l)Ae=l-de,Fe>E(a/Ae)&&P("overflow"),Fe*=Ae;re=Y.length+1,he=$(ce-Je,re,Je==0),E(ce/re)>a-oe&&P("overflow"),oe+=E(ce/re),ce%=re,Y.splice(ce++,0,oe)}return j(Y)}function Z(D){var Y,Q,re,ce,oe,he,Re,Oe,Ve,Je,Fe,J=[],ge,de,Ae,Ie;for(D=U(D),ge=D.length,Y=p,Q=0,oe=f,he=0;he<ge;++he)Fe=D[he],Fe<128&&J.push(M(Fe));for(re=ce=J.length,ce&&J.push(x);re<ge;){for(Re=a,he=0;he<ge;++he)Fe=D[he],Fe>=Y&&Fe<Re&&(Re=Fe);for(de=re+1,Re-Y>E((a-Q)/de)&&P("overflow"),Q+=(Re-Y)*de,Y=Re,he=0;he<ge;++he)if(Fe=D[he],Fe<Y&&++Q>a&&P("overflow"),Fe==Y){for(Oe=Q,Ve=l;Je=Ve<=oe?c:Ve>=oe+u?u:Ve-oe,!(Oe<Je);Ve+=l)Ie=Oe-Je,Ae=l-Je,J.push(M(z(Je+Ie%Ae,0))),Oe=E(Ie/Ae);J.push(M(z(Oe,0))),oe=$(Q,de,re==ce),Q=0,++re}++Q,++Y}return J.join("")}function O(D){return I(D,function(Y){return v.test(Y)?H(Y.slice(4).toLowerCase()):Y})}function W(D){return I(D,function(Y){return y.test(Y)?"xn--"+Z(Y):Y})}if(o={version:"1.4.1",ucs2:{decode:U,encode:j},decode:H,encode:Z,toASCII:W,toUnicode:O},i&&r)if(n.exports==i)r.exports=o;else for(C in o)o.hasOwnProperty(C)&&(i[C]=o[C]);else t.punycode=o})(ya)})(gb,gb.exports);var Oee=gb.exports,Dee=Error,Fee=EvalError,Uee=RangeError,Bee=ReferenceError,SW=SyntaxError,_0=TypeError,zee=URIError,Hee=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;e[t]=r;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==r||o.enumerable!==!0)return!1}return!0},IF=typeof Symbol<"u"&&Symbol,Wee=Hee,Vee=function(){return typeof IF!="function"||typeof Symbol!="function"||typeof IF("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Wee()},HT={__proto__:null,foo:{}},Gee=Object,jee=function(){return{__proto__:HT}.foo===HT.foo&&!(HT instanceof Gee)},$ee="Function.prototype.bind called on incompatible ",Xee=Object.prototype.toString,Yee=Math.max,qee="[object Function]",LF=function(e,t){for(var i=[],r=0;r<e.length;r+=1)i[r]=e[r];for(var s=0;s<t.length;s+=1)i[s+e.length]=t[s];return i},Zee=function(e,t){for(var i=[],r=t,s=0;r<e.length;r+=1,s+=1)i[s]=e[r];return i},Kee=function(n,e){for(var t="",i=0;i<n.length;i+=1)t+=n[i],i+1<n.length&&(t+=e);return t},Qee=function(e){var t=this;if(typeof t!="function"||Xee.apply(t)!==qee)throw new TypeError($ee+t);for(var i=Zee(arguments,1),r,s=function(){if(this instanceof r){var u=t.apply(this,LF(i,arguments));return Object(u)===u?u:this}return t.apply(e,LF(i,arguments))},o=Yee(0,t.length-i.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(r=Function("binder","return function ("+Kee(a,",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var c=function(){};c.prototype=t.prototype,r.prototype=new c,c.prototype=null}return r},Jee=Qee,gL=Function.prototype.bind||Jee,ete=Function.prototype.call,tte=Object.prototype.hasOwnProperty,nte=gL,ite=nte.call(ete,tte),sn,rte=Dee,ste=Fee,ote=Uee,ate=Bee,ym=SW,Kp=_0,lte=zee,EW=Function,WT=function(n){try{return EW('"use strict"; return ('+n+").constructor;")()}catch{}},_d=Object.getOwnPropertyDescriptor;if(_d)try{_d({},"")}catch{_d=null}var VT=function(){throw new Kp},cte=_d?function(){try{return arguments.callee,VT}catch{try{return _d(arguments,"callee").get}catch{return VT}}}():VT,Sf=Vee(),ute=jee(),or=Object.getPrototypeOf||(ute?function(n){return n.__proto__}:null),vp={},hte=typeof Uint8Array>"u"||!or?sn:or(Uint8Array),wd={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?sn:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?sn:ArrayBuffer,"%ArrayIteratorPrototype%":Sf&&or?or([][Symbol.iterator]()):sn,"%AsyncFromSyncIteratorPrototype%":sn,"%AsyncFunction%":vp,"%AsyncGenerator%":vp,"%AsyncGeneratorFunction%":vp,"%AsyncIteratorPrototype%":vp,"%Atomics%":typeof Atomics>"u"?sn:Atomics,"%BigInt%":typeof BigInt>"u"?sn:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?sn:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?sn:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?sn:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":rte,"%eval%":eval,"%EvalError%":ste,"%Float32Array%":typeof Float32Array>"u"?sn:Float32Array,"%Float64Array%":typeof Float64Array>"u"?sn:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?sn:FinalizationRegistry,"%Function%":EW,"%GeneratorFunction%":vp,"%Int8Array%":typeof Int8Array>"u"?sn:Int8Array,"%Int16Array%":typeof Int16Array>"u"?sn:Int16Array,"%Int32Array%":typeof Int32Array>"u"?sn:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Sf&&or?or(or([][Symbol.iterator]())):sn,"%JSON%":typeof JSON=="object"?JSON:sn,"%Map%":typeof Map>"u"?sn:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Sf||!or?sn:or(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?sn:Promise,"%Proxy%":typeof Proxy>"u"?sn:Proxy,"%RangeError%":ote,"%ReferenceError%":ate,"%Reflect%":typeof Reflect>"u"?sn:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?sn:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Sf||!or?sn:or(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?sn:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Sf&&or?or(""[Symbol.iterator]()):sn,"%Symbol%":Sf?Symbol:sn,"%SyntaxError%":ym,"%ThrowTypeError%":cte,"%TypedArray%":hte,"%TypeError%":Kp,"%Uint8Array%":typeof Uint8Array>"u"?sn:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?sn:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?sn:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?sn:Uint32Array,"%URIError%":lte,"%WeakMap%":typeof WeakMap>"u"?sn:WeakMap,"%WeakRef%":typeof WeakRef>"u"?sn:WeakRef,"%WeakSet%":typeof WeakSet>"u"?sn:WeakSet};if(or)try{null.error}catch(n){var dte=or(or(n));wd["%Error.prototype%"]=dte}var fte=function n(e){var t;if(e==="%AsyncFunction%")t=WT("async function () {}");else if(e==="%GeneratorFunction%")t=WT("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=WT("async function* () {}");else if(e==="%AsyncGenerator%"){var i=n("%AsyncGeneratorFunction%");i&&(t=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var r=n("%AsyncGenerator%");r&&or&&(t=or(r.prototype))}return wd[e]=t,t},NF={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},w0=gL,yb=ite,pte=w0.call(Function.call,Array.prototype.concat),mte=w0.call(Function.apply,Array.prototype.splice),kF=w0.call(Function.call,String.prototype.replace),vb=w0.call(Function.call,String.prototype.slice),gte=w0.call(Function.call,RegExp.prototype.exec),yte=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,vte=/\\(\\)?/g,xte=function(e){var t=vb(e,0,1),i=vb(e,-1);if(t==="%"&&i!=="%")throw new ym("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&t!=="%")throw new ym("invalid intrinsic syntax, expected opening `%`");var r=[];return kF(e,yte,function(s,o,a,l){r[r.length]=a?kF(l,vte,"$1"):o||s}),r},_te=function(e,t){var i=e,r;if(yb(NF,i)&&(r=NF[i],i="%"+r[0]+"%"),yb(wd,i)){var s=wd[i];if(s===vp&&(s=fte(i)),typeof s>"u"&&!t)throw new Kp("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:s}}throw new ym("intrinsic "+e+" does not exist!")},Vm=function(e,t){if(typeof e!="string"||e.length===0)throw new Kp("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Kp('"allowMissing" argument must be a boolean');if(gte(/^%?[^%]*%?$/,e)===null)throw new ym("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=xte(e),r=i.length>0?i[0]:"",s=_te("%"+r+"%",t),o=s.name,a=s.value,l=!1,c=s.alias;c&&(r=c[0],mte(i,pte([0,1],c)));for(var u=1,h=!0;u<i.length;u+=1){var d=i[u],f=vb(d,0,1),p=vb(d,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new ym("property names with quotes must have matching quotes");if((d==="constructor"||!h)&&(l=!0),r+="."+d,o="%"+r+"%",yb(wd,o))a=wd[o];else if(a!=null){if(!(d in a)){if(!t)throw new Kp("base intrinsic for "+e+" exists, but the property is not available.");return}if(_d&&u+1>=i.length){var x=_d(a,d);h=!!x,h&&"get"in x&&!("originalValue"in x.get)?a=x.get:a=a[d]}else h=yb(a,d),a=a[d];h&&!l&&(wd[o]=a)}}return a},MW={exports:{}},GT,OF;function yL(){if(OF)return GT;OF=1;var n=Vm,e=n("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return GT=e,GT}var wte=Vm,E1=wte("%Object.getOwnPropertyDescriptor%",!0);if(E1)try{E1([],"length")}catch{E1=null}var TW=E1,DF=yL(),bte=SW,Ef=_0,FF=TW,Ste=function(e,t,i){if(!e||typeof e!="object"&&typeof e!="function")throw new Ef("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new Ef("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Ef("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Ef("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Ef("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Ef("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!FF&&FF(e,t);if(DF)DF(e,t,{configurable:o===null&&l?l.configurable:!o,enumerable:r===null&&l?l.enumerable:!r,value:i,writable:s===null&&l?l.writable:!s});else if(a||!r&&!s&&!o)e[t]=i;else throw new bte("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},QP=yL(),AW=function(){return!!QP};AW.hasArrayLengthDefineBug=function(){if(!QP)return null;try{return QP([],"length",{value:1}).length!==1}catch{return!0}};var Ete=AW,Mte=Vm,UF=Ste,Tte=Ete(),BF=TW,zF=_0,Ate=Mte("%Math.floor%"),Cte=function(e,t){if(typeof e!="function")throw new zF("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||Ate(t)!==t)throw new zF("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],r=!0,s=!0;if("length"in e&&BF){var o=BF(e,"length");o&&!o.configurable&&(r=!1),o&&!o.writable&&(s=!1)}return(r||s||!i)&&(Tte?UF(e,"length",t,!0,!0):UF(e,"length",t)),e};(function(n){var e=gL,t=Vm,i=Cte,r=_0,s=t("%Function.prototype.apply%"),o=t("%Function.prototype.call%"),a=t("%Reflect.apply%",!0)||e.call(o,s),l=yL(),c=t("%Math.max%");n.exports=function(d){if(typeof d!="function")throw new r("a function is required");var f=a(e,o,arguments);return i(f,1+c(0,d.length-(arguments.length-1)),!0)};var u=function(){return a(e,s,arguments)};l?l(n.exports,"apply",{value:u}):n.exports.apply=u})(MW);var Pte=MW.exports,CW=Vm,PW=Pte,Rte=PW(CW("String.prototype.indexOf")),Ite=function(e,t){var i=CW(e,!!t);return typeof i=="function"&&Rte(e,".prototype.")>-1?PW(i):i};const Lte={},Nte=Object.freeze(Object.defineProperty({__proto__:null,default:Lte},Symbol.toStringTag,{value:"Module"})),kte=rZ(Nte);var vL=typeof Map=="function"&&Map.prototype,jT=Object.getOwnPropertyDescriptor&&vL?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,xb=vL&&jT&&typeof jT.get=="function"?jT.get:null,HF=vL&&Map.prototype.forEach,xL=typeof Set=="function"&&Set.prototype,$T=Object.getOwnPropertyDescriptor&&xL?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,_b=xL&&$T&&typeof $T.get=="function"?$T.get:null,WF=xL&&Set.prototype.forEach,Ote=typeof WeakMap=="function"&&WeakMap.prototype,Yy=Ote?WeakMap.prototype.has:null,Dte=typeof WeakSet=="function"&&WeakSet.prototype,qy=Dte?WeakSet.prototype.has:null,Fte=typeof WeakRef=="function"&&WeakRef.prototype,VF=Fte?WeakRef.prototype.deref:null,Ute=Boolean.prototype.valueOf,Bte=Object.prototype.toString,zte=Function.prototype.toString,Hte=String.prototype.match,_L=String.prototype.slice,gu=String.prototype.replace,Wte=String.prototype.toUpperCase,GF=String.prototype.toLowerCase,RW=RegExp.prototype.test,jF=Array.prototype.concat,sl=Array.prototype.join,Vte=Array.prototype.slice,$F=Math.floor,JP=typeof BigInt=="function"?BigInt.prototype.valueOf:null,XT=Object.getOwnPropertySymbols,e2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,vm=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Yr=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===vm||!0)?Symbol.toStringTag:null,IW=Object.prototype.propertyIsEnumerable,XF=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(n){return n.__proto__}:null);function YF(n,e){if(n===1/0||n===-1/0||n!==n||n&&n>-1e3&&n<1e3||RW.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof n=="number"){var i=n<0?-$F(-n):$F(n);if(i!==n){var r=String(i),s=_L.call(e,r.length+1);return gu.call(r,t,"$&_")+"."+gu.call(gu.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return gu.call(e,t,"$&_")}var t2=kte,qF=t2.custom,ZF=NW(qF)?qF:null,Gte=function n(e,t,i,r){var s=t||{};if(nu(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(nu(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=nu(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(nu(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(nu(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return OW(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?YF(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?YF(e,c):c}var u=typeof s.depth>"u"?5:s.depth;if(typeof i>"u"&&(i=0),i>=u&&u>0&&typeof e=="object")return n2(e)?"[Array]":"[Object]";var h=lne(s,i);if(typeof r>"u")r=[];else if(kW(r,e)>=0)return"[Circular]";function d(B,z,$){if(z&&(r=Vte.call(r),r.push(z)),$){var H={depth:s.depth};return nu(s,"quoteStyle")&&(H.quoteStyle=s.quoteStyle),n(B,H,i+1,r)}return n(B,s,i+1,r)}if(typeof e=="function"&&!KF(e)){var f=Jte(e),p=o_(e,d);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+sl.call(p,", ")+" }":"")}if(NW(e)){var x=vm?gu.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):e2.call(e);return typeof e=="object"&&!vm?Wg(x):x}if(sne(e)){for(var v="<"+GF.call(String(e.nodeName)),y=e.attributes||[],w=0;w<y.length;w++)v+=" "+y[w].name+"="+LW(jte(y[w].value),"double",s);return v+=">",e.childNodes&&e.childNodes.length&&(v+="..."),v+="</"+GF.call(String(e.nodeName))+">",v}if(n2(e)){if(e.length===0)return"[]";var _=o_(e,d);return h&&!ane(_)?"["+i2(_,h)+"]":"[ "+sl.call(_,", ")+" ]"}if(Xte(e)){var b=o_(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!IW.call(e,"cause")?"{ ["+String(e)+"] "+sl.call(jF.call("[cause]: "+d(e.cause),b),", ")+" }":b.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+sl.call(b,", ")+" }"}if(typeof e=="object"&&o){if(ZF&&typeof e[ZF]=="function"&&t2)return t2(e,{depth:u-i});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(ene(e)){var E=[];return HF&&HF.call(e,function(B,z){E.push(d(z,e,!0)+" => "+d(B,e))}),QF("Map",xb.call(e),E,h)}if(ine(e)){var M=[];return WF&&WF.call(e,function(B){M.push(d(B,e))}),QF("Set",_b.call(e),M,h)}if(tne(e))return YT("WeakMap");if(rne(e))return YT("WeakSet");if(nne(e))return YT("WeakRef");if(qte(e))return Wg(d(Number(e)));if(Kte(e))return Wg(d(JP.call(e)));if(Zte(e))return Wg(Ute.call(e));if(Yte(e))return Wg(d(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof ya<"u"&&e===ya)return"{ [object globalThis] }";if(!$te(e)&&!KF(e)){var C=o_(e,d),P=XF?XF(e)===Object.prototype:e instanceof Object||e.constructor===Object,T=e instanceof Object?"":"null prototype",I=!P&&Yr&&Object(e)===e&&Yr in e?_L.call(qu(e),8,-1):T?"Object":"",U=P||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",j=U+(I||T?"["+sl.call(jF.call([],I||[],T||[]),": ")+"] ":"");return C.length===0?j+"{}":h?j+"{"+i2(C,h)+"}":j+"{ "+sl.call(C,", ")+" }"}return String(e)};function LW(n,e,t){var i=(t.quoteStyle||e)==="double"?'"':"'";return i+n+i}function jte(n){return gu.call(String(n),/"/g,"&quot;")}function n2(n){return qu(n)==="[object Array]"&&(!Yr||!(typeof n=="object"&&Yr in n))}function $te(n){return qu(n)==="[object Date]"&&(!Yr||!(typeof n=="object"&&Yr in n))}function KF(n){return qu(n)==="[object RegExp]"&&(!Yr||!(typeof n=="object"&&Yr in n))}function Xte(n){return qu(n)==="[object Error]"&&(!Yr||!(typeof n=="object"&&Yr in n))}function Yte(n){return qu(n)==="[object String]"&&(!Yr||!(typeof n=="object"&&Yr in n))}function qte(n){return qu(n)==="[object Number]"&&(!Yr||!(typeof n=="object"&&Yr in n))}function Zte(n){return qu(n)==="[object Boolean]"&&(!Yr||!(typeof n=="object"&&Yr in n))}function NW(n){if(vm)return n&&typeof n=="object"&&n instanceof Symbol;if(typeof n=="symbol")return!0;if(!n||typeof n!="object"||!e2)return!1;try{return e2.call(n),!0}catch{}return!1}function Kte(n){if(!n||typeof n!="object"||!JP)return!1;try{return JP.call(n),!0}catch{}return!1}var Qte=Object.prototype.hasOwnProperty||function(n){return n in this};function nu(n,e){return Qte.call(n,e)}function qu(n){return Bte.call(n)}function Jte(n){if(n.name)return n.name;var e=Hte.call(zte.call(n),/^function\s*([\w$]+)/);return e?e[1]:null}function kW(n,e){if(n.indexOf)return n.indexOf(e);for(var t=0,i=n.length;t<i;t++)if(n[t]===e)return t;return-1}function ene(n){if(!xb||!n||typeof n!="object")return!1;try{xb.call(n);try{_b.call(n)}catch{return!0}return n instanceof Map}catch{}return!1}function tne(n){if(!Yy||!n||typeof n!="object")return!1;try{Yy.call(n,Yy);try{qy.call(n,qy)}catch{return!0}return n instanceof WeakMap}catch{}return!1}function nne(n){if(!VF||!n||typeof n!="object")return!1;try{return VF.call(n),!0}catch{}return!1}function ine(n){if(!_b||!n||typeof n!="object")return!1;try{_b.call(n);try{xb.call(n)}catch{return!0}return n instanceof Set}catch{}return!1}function rne(n){if(!qy||!n||typeof n!="object")return!1;try{qy.call(n,qy);try{Yy.call(n,Yy)}catch{return!0}return n instanceof WeakSet}catch{}return!1}function sne(n){return!n||typeof n!="object"?!1:typeof HTMLElement<"u"&&n instanceof HTMLElement?!0:typeof n.nodeName=="string"&&typeof n.getAttribute=="function"}function OW(n,e){if(n.length>e.maxStringLength){var t=n.length-e.maxStringLength,i="... "+t+" more character"+(t>1?"s":"");return OW(_L.call(n,0,e.maxStringLength),e)+i}var r=gu.call(gu.call(n,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,one);return LW(r,"single",e)}function one(n){var e=n.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+Wte.call(e.toString(16))}function Wg(n){return"Object("+n+")"}function YT(n){return n+" { ? }"}function QF(n,e,t,i){var r=i?i2(t,i):sl.call(t,", ");return n+" ("+e+") {"+r+"}"}function ane(n){for(var e=0;e<n.length;e++)if(kW(n[e],`
`)>=0)return!1;return!0}function lne(n,e){var t;if(n.indent==="	")t="	";else if(typeof n.indent=="number"&&n.indent>0)t=sl.call(Array(n.indent+1)," ");else return null;return{base:t,prev:sl.call(Array(e+1),t)}}function i2(n,e){if(n.length===0)return"";var t=`
`+e.prev+e.base;return t+sl.call(n,","+t)+`
`+e.prev}function o_(n,e){var t=n2(n),i=[];if(t){i.length=n.length;for(var r=0;r<n.length;r++)i[r]=nu(n,r)?e(n[r],n):""}var s=typeof XT=="function"?XT(n):[],o;if(vm){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in n)nu(n,l)&&(t&&String(Number(l))===l&&l<n.length||vm&&o["$"+l]instanceof Symbol||(RW.call(/[^\w$]/,l)?i.push(e(l,n)+": "+e(n[l],n)):i.push(l+": "+e(n[l],n))));if(typeof XT=="function")for(var c=0;c<s.length;c++)IW.call(n,s[c])&&i.push("["+e(s[c])+"]: "+e(n[s[c]],n));return i}var DW=Vm,Gm=Ite,cne=Gte,une=_0,a_=DW("%WeakMap%",!0),l_=DW("%Map%",!0),hne=Gm("WeakMap.prototype.get",!0),dne=Gm("WeakMap.prototype.set",!0),fne=Gm("WeakMap.prototype.has",!0),pne=Gm("Map.prototype.get",!0),mne=Gm("Map.prototype.set",!0),gne=Gm("Map.prototype.has",!0),wL=function(n,e){for(var t=n,i;(i=t.next)!==null;t=i)if(i.key===e)return t.next=i.next,i.next=n.next,n.next=i,i},yne=function(n,e){var t=wL(n,e);return t&&t.value},vne=function(n,e,t){var i=wL(n,e);i?i.value=t:n.next={key:e,next:n.next,value:t}},xne=function(n,e){return!!wL(n,e)},_ne=function(){var e,t,i,r={assert:function(s){if(!r.has(s))throw new une("Side channel does not contain "+cne(s))},get:function(s){if(a_&&s&&(typeof s=="object"||typeof s=="function")){if(e)return hne(e,s)}else if(l_){if(t)return pne(t,s)}else if(i)return yne(i,s)},has:function(s){if(a_&&s&&(typeof s=="object"||typeof s=="function")){if(e)return fne(e,s)}else if(l_){if(t)return gne(t,s)}else if(i)return xne(i,s);return!1},set:function(s,o){a_&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new a_),dne(e,s,o)):l_?(t||(t=new l_),mne(t,s,o)):(i||(i={key:{},next:null}),vne(i,s,o))}};return r},wne=String.prototype.replace,bne=/%20/g,qT={RFC1738:"RFC1738",RFC3986:"RFC3986"},bL={default:qT.RFC3986,formatters:{RFC1738:function(n){return wne.call(n,bne,"+")},RFC3986:function(n){return String(n)}},RFC1738:qT.RFC1738,RFC3986:qT.RFC3986},Sne=bL,ZT=Object.prototype.hasOwnProperty,Qh=Array.isArray,qa=function(){for(var n=[],e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n}(),Ene=function(e){for(;e.length>1;){var t=e.pop(),i=t.obj[t.prop];if(Qh(i)){for(var r=[],s=0;s<i.length;++s)typeof i[s]<"u"&&r.push(i[s]);t.obj[t.prop]=r}}},FW=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)typeof e[r]<"u"&&(i[r]=e[r]);return i},Mne=function n(e,t,i){if(!t)return e;if(typeof t!="object"){if(Qh(e))e.push(t);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!ZT.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var r=e;return Qh(e)&&!Qh(t)&&(r=FW(e,i)),Qh(e)&&Qh(t)?(t.forEach(function(s,o){if(ZT.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=n(a,s,i):e.push(s)}else e[o]=s}),e):Object.keys(t).reduce(function(s,o){var a=t[o];return ZT.call(s,o)?s[o]=n(s[o],a,i):s[o]=a,s},r)},Tne=function(e,t){return Object.keys(t).reduce(function(i,r){return i[r]=t[r],i},e)},Ane=function(n,e,t){var i=n.replace(/\+/g," ");if(t==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},KT=1024,Cne=function(e,t,i,r,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),i==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;l+=KT){for(var c=o.length>=KT?o.slice(l,l+KT):o,u=[],h=0;h<c.length;++h){var d=c.charCodeAt(h);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||s===Sne.RFC1738&&(d===40||d===41)){u[u.length]=c.charAt(h);continue}if(d<128){u[u.length]=qa[d];continue}if(d<2048){u[u.length]=qa[192|d>>6]+qa[128|d&63];continue}if(d<55296||d>=57344){u[u.length]=qa[224|d>>12]+qa[128|d>>6&63]+qa[128|d&63];continue}h+=1,d=65536+((d&1023)<<10|c.charCodeAt(h)&1023),u[u.length]=qa[240|d>>18]+qa[128|d>>12&63]+qa[128|d>>6&63]+qa[128|d&63]}a+=u.join("")}return a},Pne=function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],r=0;r<t.length;++r)for(var s=t[r],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var c=a[l],u=o[c];typeof u=="object"&&u!==null&&i.indexOf(u)===-1&&(t.push({obj:o,prop:c}),i.push(u))}return Ene(t),e},Rne=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Ine=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Lne=function(e,t){return[].concat(e,t)},Nne=function(e,t){if(Qh(e)){for(var i=[],r=0;r<e.length;r+=1)i.push(t(e[r]));return i}return t(e)},UW={arrayToObject:FW,assign:Tne,combine:Lne,compact:Pne,decode:Ane,encode:Cne,isBuffer:Ine,isRegExp:Rne,maybeMap:Nne,merge:Mne},BW=_ne,M1=UW,Zy=bL,kne=Object.prototype.hasOwnProperty,zW={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},rl=Array.isArray,One=Array.prototype.push,HW=function(n,e){One.apply(n,rl(e)?e:[e])},Dne=Date.prototype.toISOString,JF=Zy.default,Vi={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:M1.encode,encodeValuesOnly:!1,format:JF,formatter:Zy.formatters[JF],indices:!1,serializeDate:function(e){return Dne.call(e)},skipNulls:!1,strictNullHandling:!1},Fne=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},QT={},Une=function n(e,t,i,r,s,o,a,l,c,u,h,d,f,p,x,v,y,w){for(var _=e,b=w,E=0,M=!1;(b=b.get(QT))!==void 0&&!M;){var C=b.get(e);if(E+=1,typeof C<"u"){if(C===E)throw new RangeError("Cyclic object value");M=!0}typeof b.get(QT)>"u"&&(E=0)}if(typeof u=="function"?_=u(t,_):_ instanceof Date?_=f(_):i==="comma"&&rl(_)&&(_=M1.maybeMap(_,function(D){return D instanceof Date?f(D):D})),_===null){if(o)return c&&!v?c(t,Vi.encoder,y,"key",p):t;_=""}if(Fne(_)||M1.isBuffer(_)){if(c){var P=v?t:c(t,Vi.encoder,y,"key",p);return[x(P)+"="+x(c(_,Vi.encoder,y,"value",p))]}return[x(t)+"="+x(String(_))]}var T=[];if(typeof _>"u")return T;var I;if(i==="comma"&&rl(_))v&&c&&(_=M1.maybeMap(_,c)),I=[{value:_.length>0?_.join(",")||null:void 0}];else if(rl(u))I=u;else{var U=Object.keys(_);I=h?U.sort(h):U}var j=l?t.replace(/\./g,"%2E"):t,B=r&&rl(_)&&_.length===1?j+"[]":j;if(s&&rl(_)&&_.length===0)return B+"[]";for(var z=0;z<I.length;++z){var $=I[z],H=typeof $=="object"&&typeof $.value<"u"?$.value:_[$];if(!(a&&H===null)){var Z=d&&l?$.replace(/\./g,"%2E"):$,O=rl(_)?typeof i=="function"?i(B,Z):B:B+(d?"."+Z:"["+Z+"]");w.set(e,E);var W=BW();W.set(QT,w),HW(T,n(H,O,i,r,s,o,a,l,i==="comma"&&v&&rl(_)?null:c,u,h,d,f,p,x,v,y,W))}}return T},Bne=function(e){if(!e)return Vi;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||Vi.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=Zy.default;if(typeof e.format<"u"){if(!kne.call(Zy.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var r=Zy.formatters[i],s=Vi.filter;(typeof e.filter=="function"||rl(e.filter))&&(s=e.filter);var o;if(e.arrayFormat in zW?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=Vi.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:Vi.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Vi.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Vi.allowEmptyArrays,arrayFormat:o,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Vi.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Vi.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Vi.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Vi.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Vi.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Vi.encodeValuesOnly,filter:s,format:i,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Vi.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Vi.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Vi.strictNullHandling}},zne=function(n,e){var t=n,i=Bne(e),r,s;typeof i.filter=="function"?(s=i.filter,t=s("",t)):rl(i.filter)&&(s=i.filter,r=s);var o=[];if(typeof t!="object"||t===null)return"";var a=zW[i.arrayFormat],l=a==="comma"&&i.commaRoundTrip;r||(r=Object.keys(t)),i.sort&&r.sort(i.sort);for(var c=BW(),u=0;u<r.length;++u){var h=r[u];i.skipNulls&&t[h]===null||HW(o,Une(t[h],h,a,l,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,c))}var d=o.join(i.delimiter),f=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),d.length>0?f+d:""},xm=UW,r2=Object.prototype.hasOwnProperty,Hne=Array.isArray,xi={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:xm.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},Wne=function(n){return n.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},WW=function(n,e){return n&&typeof n=="string"&&e.comma&&n.indexOf(",")>-1?n.split(","):n},Vne="utf8=%26%2310003%3B",Gne="utf8=%E2%9C%93",jne=function(e,t){var i={__proto__:null},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;r=r.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=t.parameterLimit===1/0?void 0:t.parameterLimit,o=r.split(t.delimiter,s),a=-1,l,c=t.charset;if(t.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===Gne?c="utf-8":o[l]===Vne&&(c="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var u=o[l],h=u.indexOf("]="),d=h===-1?u.indexOf("="):h+1,f,p;d===-1?(f=t.decoder(u,xi.decoder,c,"key"),p=t.strictNullHandling?null:""):(f=t.decoder(u.slice(0,d),xi.decoder,c,"key"),p=xm.maybeMap(WW(u.slice(d+1),t),function(v){return t.decoder(v,xi.decoder,c,"value")})),p&&t.interpretNumericEntities&&c==="iso-8859-1"&&(p=Wne(p)),u.indexOf("[]=")>-1&&(p=Hne(p)?[p]:p);var x=r2.call(i,f);x&&t.duplicates==="combine"?i[f]=xm.combine(i[f],p):(!x||t.duplicates==="last")&&(i[f]=p)}return i},$ne=function(n,e,t,i){for(var r=i?e:WW(e,t),s=n.length-1;s>=0;--s){var o,a=n[s];if(a==="[]"&&t.parseArrays)o=t.allowEmptyArrays&&(r===""||t.strictNullHandling&&r===null)?[]:[].concat(r);else{o=t.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=t.decodeDotInKeys?l.replace(/%2E/g,"."):l,u=parseInt(c,10);!t.parseArrays&&c===""?o={0:r}:!isNaN(u)&&a!==c&&String(u)===c&&u>=0&&t.parseArrays&&u<=t.arrayLimit?(o=[],o[u]=r):c!=="__proto__"&&(o[c]=r)}r=o}return r},Xne=function(e,t,i,r){if(e){var s=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=i.depth>0&&o.exec(s),c=l?s.slice(0,l.index):s,u=[];if(c){if(!i.plainObjects&&r2.call(Object.prototype,c)&&!i.allowPrototypes)return;u.push(c)}for(var h=0;i.depth>0&&(l=a.exec(s))!==null&&h<i.depth;){if(h+=1,!i.plainObjects&&r2.call(Object.prototype,l[1].slice(1,-1))&&!i.allowPrototypes)return;u.push(l[1])}if(l){if(i.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+i.depth+" and strictDepth is true");u.push("["+s.slice(l.index)+"]")}return $ne(u,t,i,r)}},Yne=function(e){if(!e)return xi;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?xi.charset:e.charset,i=typeof e.duplicates>"u"?xi.duplicates:e.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var r=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:xi.allowDots:!!e.allowDots;return{allowDots:r,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:xi.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:xi.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:xi.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:xi.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:xi.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:xi.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:xi.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:xi.decoder,delimiter:typeof e.delimiter=="string"||xm.isRegExp(e.delimiter)?e.delimiter:xi.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:xi.depth,duplicates:i,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:xi.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:xi.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:xi.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:xi.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:xi.strictNullHandling}},qne=function(n,e){var t=Yne(e);if(n===""||n===null||typeof n>"u")return t.plainObjects?Object.create(null):{};for(var i=typeof n=="string"?jne(n,t):n,r=t.plainObjects?Object.create(null):{},s=Object.keys(i),o=0;o<s.length;++o){var a=s[o],l=Xne(a,i[a],t,typeof n=="string");r=xm.merge(r,l,t)}return t.allowSparse===!0?r:xm.compact(r)},Zne=zne,Kne=qne,Qne=bL,Jne={formats:Qne,parse:Kne,stringify:Zne},eie=Oee;function hc(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var tie=/^([a-z0-9.+-]+:)/i,nie=/:[0-9]*$/,iie=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,rie=["<",">",'"',"`"," ","\r",`
`,"	"],sie=["{","}","|","\\","^","`"].concat(rie),s2=["'"].concat(sie),eU=["%","/","?",";","#"].concat(s2),tU=["/","?","#"],oie=255,nU=/^[+a-z0-9A-Z_-]{0,63}$/,aie=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,lie={javascript:!0,"javascript:":!0},o2={javascript:!0,"javascript:":!0},Qp={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},a2=Jne;function cie(n,e,t){if(n&&typeof n=="object"&&n instanceof hc)return n;var i=new hc;return i.parse(n,e,t),i}hc.prototype.parse=function(n,e,t){if(typeof n!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var i=n.indexOf("?"),r=i!==-1&&i<n.indexOf("#")?"?":"#",s=n.split(r),o=/\\/g;s[0]=s[0].replace(o,"/"),n=s.join(r);var a=n;if(a=a.trim(),!t&&n.split("#").length===1){var l=iie.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=a2.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=tie.exec(a);if(c){c=c[0];var u=c.toLowerCase();this.protocol=u,a=a.substr(c.length)}if(t||c||a.match(/^\/\/[^@/]+@[^@/]+/)){var h=a.substr(0,2)==="//";h&&!(c&&o2[c])&&(a=a.substr(2),this.slashes=!0)}if(!o2[c]&&(h||c&&!Qp[c])){for(var d=-1,f=0;f<tU.length;f++){var p=a.indexOf(tU[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var x,v;d===-1?v=a.lastIndexOf("@"):v=a.lastIndexOf("@",d),v!==-1&&(x=a.slice(0,v),a=a.slice(v+1),this.auth=decodeURIComponent(x)),d=-1;for(var f=0;f<eU.length;f++){var p=a.indexOf(eU[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var w=this.hostname.split(/\./),f=0,_=w.length;f<_;f++){var b=w[f];if(b&&!b.match(nU)){for(var E="",M=0,C=b.length;M<C;M++)b.charCodeAt(M)>127?E+="x":E+=b[M];if(!E.match(nU)){var P=w.slice(0,f),T=w.slice(f+1),I=b.match(aie);I&&(P.push(I[1]),T.unshift(I[2])),T.length&&(a="/"+T.join(".")+a),this.hostname=P.join(".");break}}}this.hostname.length>oie?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=eie.toASCII(this.hostname));var U=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+U,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!lie[u])for(var f=0,_=s2.length;f<_;f++){var B=s2[f];if(a.indexOf(B)!==-1){var z=encodeURIComponent(B);z===B&&(z=escape(B)),a=a.split(B).join(z)}}var $=a.indexOf("#");$!==-1&&(this.hash=a.substr($),a=a.slice(0,$));var H=a.indexOf("?");if(H!==-1?(this.search=a.substr(H),this.query=a.substr(H+1),e&&(this.query=a2.parse(this.query)),a=a.slice(0,H)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Qp[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",Z=this.search||"";this.path=U+Z}return this.href=this.format(),this};hc.prototype.format=function(){var n=this.auth||"";n&&(n=encodeURIComponent(n),n=n.replace(/%3A/i,":"),n+="@");var e=this.protocol||"",t=this.pathname||"",i=this.hash||"",r=!1,s="";this.host?r=n+this.host:this.hostname&&(r=n+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=a2.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Qp[e])&&r!==!1?(r="//"+(r||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):r||(r=""),i&&i.charAt(0)!=="#"&&(i="#"+i),o&&o.charAt(0)!=="?"&&(o="?"+o),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+r+t+o+i};hc.prototype.resolve=function(n){return this.resolveObject(cie(n,!1,!0)).format()};hc.prototype.resolveObject=function(n){if(typeof n=="string"){var e=new hc;e.parse(n,!1,!0),n=e}for(var t=new hc,i=Object.keys(this),r=0;r<i.length;r++){var s=i[r];t[s]=this[s]}if(t.hash=n.hash,n.href==="")return t.href=t.format(),t;if(n.slashes&&!n.protocol){for(var o=Object.keys(n),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(t[l]=n[l])}return Qp[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(n.protocol&&n.protocol!==t.protocol){if(!Qp[n.protocol]){for(var c=Object.keys(n),u=0;u<c.length;u++){var h=c[u];t[h]=n[h]}return t.href=t.format(),t}if(t.protocol=n.protocol,!n.host&&!o2[n.protocol]){for(var _=(n.pathname||"").split("/");_.length&&!(n.host=_.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),t.pathname=_.join("/")}else t.pathname=n.pathname;if(t.search=n.search,t.query=n.query,t.host=n.host||"",t.auth=n.auth,t.hostname=n.hostname||n.host,t.port=n.port,t.pathname||t.search){var d=t.pathname||"",f=t.search||"";t.path=d+f}return t.slashes=t.slashes||n.slashes,t.href=t.format(),t}var p=t.pathname&&t.pathname.charAt(0)==="/",x=n.host||n.pathname&&n.pathname.charAt(0)==="/",v=x||p||t.host&&n.pathname,y=v,w=t.pathname&&t.pathname.split("/")||[],_=n.pathname&&n.pathname.split("/")||[],b=t.protocol&&!Qp[t.protocol];if(b&&(t.hostname="",t.port=null,t.host&&(w[0]===""?w[0]=t.host:w.unshift(t.host)),t.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(_[0]===""?_[0]=n.host:_.unshift(n.host)),n.host=null),v=v&&(_[0]===""||w[0]==="")),x)t.host=n.host||n.host===""?n.host:t.host,t.hostname=n.hostname||n.hostname===""?n.hostname:t.hostname,t.search=n.search,t.query=n.query,w=_;else if(_.length)w||(w=[]),w.pop(),w=w.concat(_),t.search=n.search,t.query=n.query;else if(n.search!=null){if(b){t.host=w.shift(),t.hostname=t.host;var E=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;E&&(t.auth=E.shift(),t.hostname=E.shift(),t.host=t.hostname)}return t.search=n.search,t.query=n.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!w.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var M=w.slice(-1)[0],C=(t.host||n.host||w.length>1)&&(M==="."||M==="..")||M==="",P=0,T=w.length;T>=0;T--)M=w[T],M==="."?w.splice(T,1):M===".."?(w.splice(T,1),P++):P&&(w.splice(T,1),P--);if(!v&&!y)for(;P--;P)w.unshift("..");v&&w[0]!==""&&(!w[0]||w[0].charAt(0)!=="/")&&w.unshift(""),C&&w.join("/").substr(-1)!=="/"&&w.push("");var I=w[0]===""||w[0]&&w[0].charAt(0)==="/";if(b){t.hostname=I?"":w.length?w.shift():"",t.host=t.hostname;var E=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;E&&(t.auth=E.shift(),t.hostname=E.shift(),t.host=t.hostname)}return v=v||t.host&&w.length,v&&!I&&w.unshift(""),w.length>0?t.pathname=w.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=n.auth||t.auth,t.slashes=t.slashes||n.slashes,t.href=t.format(),t};hc.prototype.parseHost=function(){var n=this.host,e=nie.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};const iU={};function Pn(n,e,t=3){if(iU[e])return;let i=new Error().stack;typeof i>"u"||(i=i.split(`
`).splice(t).join(`
`)),iU[e]=!0}let JT;function uie(){return typeof JT>"u"&&(JT=function(){var e;const n={stencil:!0,failIfMajorPerformanceCaveat:xn.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!xn.ADAPTER.getWebGLRenderingContext())return!1;const t=xn.ADAPTER.createCanvas();let i=t.getContext("webgl",n)||t.getContext("experimental-webgl",n);const r=!!((e=i==null?void 0:i.getContextAttributes())!=null&&e.stencil);if(i){const s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,r}catch{return!1}}()),JT}g6([y6]);const xp=class T1{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof T1)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const i=typeof e;if(i!==typeof t)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((r,s)=>r===t[s]);if(e!==null&&t!==null){const r=Object.keys(e),s=Object.keys(t);return r.length!==s.length?!1:r.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,i,r]=this._components;return{r:e,g:t,b:i,a:r}}toRgb(){const[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){const[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){const[t,i,r]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(r*255),e}toRgbArray(e){e=e??[];const[t,i,r]=this._components;return e[0]=t,e[1]=i,e[2]=r,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,i,r,s]=T1.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=i,this._components[2]*=r,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let i=this._int>>16&255,r=this._int>>8&255,s=this._int&255;return t&&(i=i*e+.5|0,r=r*e+.5|0,s=s*e+.5|0),(e*255<<24)+(i<<16)+(r<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,i,r]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(i*e)/e,this._components[2]=Math.round(r*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,i,r,s]=this._components;return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}normalize(e){let t,i,r,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;t=(o>>16&255)/255,i=(o>>8&255)/255,r=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,i,r,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,i,r,s=255]=e,t/=255,i/=255,r/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=T1.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=ca(e);o.isValid()&&({r:t,g:i,b:r,a:s}=o.rgba,t/=255,i/=255,r/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=i,this._components[2]=r,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,i]=this._components;this._int=(e*255<<16)+(t*255<<8)+(i*255|0)}_clamp(e,t=0,i=1){return typeof e=="number"?Math.min(Math.max(e,t),i):(e.forEach((r,s)=>{e[s]=Math.min(Math.max(r,t),i)}),e)}};xp.shared=new xp,xp.temp=new xp,xp.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let NS=xp;function hie(){const n=[],e=[];for(let i=0;i<32;i++)n[i]=i,e[i]=i;n[Ft.NORMAL_NPM]=Ft.NORMAL,n[Ft.ADD_NPM]=Ft.ADD,n[Ft.SCREEN_NPM]=Ft.SCREEN,e[Ft.NORMAL]=Ft.NORMAL_NPM,e[Ft.ADD]=Ft.ADD_NPM,e[Ft.SCREEN]=Ft.SCREEN_NPM;const t=[];return t.push(e),t.push(n),t}const die=hie();function VW(n){if(n.BYTES_PER_ELEMENT===4)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(n.BYTES_PER_ELEMENT===2){if(n instanceof Uint16Array)return"Uint16Array"}else if(n.BYTES_PER_ELEMENT===1&&n instanceof Uint8Array)return"Uint8Array";return null}function wb(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function rU(n){return!(n&n-1)&&!!n}function sU(n){let e=(n>65535?1:0)<<4;n>>>=e;let t=(n>255?1:0)<<3;return n>>>=t,e|=t,t=(n>15?1:0)<<2,n>>>=t,e|=t,t=(n>3?1:0)<<1,n>>>=t,e|=t,e|n>>1}function A1(n,e,t){const i=n.length;let r;if(e>=i||t===0)return;t=e+t>i?i-e:t;const s=i-t;for(r=e;r<s;++r)n[r]=n[r+t];n.length=s}let fie=0;function Ev(){return++fie}const oU={},tl=Object.create(null),Wc=Object.create(null);function pie(n,e=globalThis.location){if(n.startsWith("data:"))return"";e=e||globalThis.location;const t=new URL(n,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function aU(n,e=1){var i;const t=(i=xn.RETINA_PREFIX)==null?void 0:i.exec(n);return t?parseFloat(t[1]):e}var nn=(n=>(n.Renderer="renderer",n.Application="application",n.RendererSystem="renderer-webgl-system",n.RendererPlugin="renderer-webgl-plugin",n.CanvasRendererSystem="renderer-canvas-system",n.CanvasRendererPlugin="renderer-canvas-plugin",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n))(nn||{});const l2=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},lU=(n,e)=>l2(n).priority??e,Cn={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(l2).forEach(e=>{e.type.forEach(t=>{var i,r;return(r=(i=this._removeHandlers)[t])==null?void 0:r.call(i,e)})}),this},add(...n){return n.map(l2).forEach(e=>{e.type.forEach(t=>{var s,o;const i=this._addHandlers,r=this._queue;i[t]?(s=i[t])==null||s.call(i,e):(r[t]=r[t]||[],(o=r[t])==null||o.push(e))})}),this},handle(n,e,t){var o;const i=this._addHandlers,r=this._removeHandlers;if(i[n]||r[n])throw new Error(`Extension type ${n} already has a handler`);i[n]=e,r[n]=t;const s=this._queue;return s[n]&&((o=s[n])==null||o.forEach(a=>e(a)),delete s[n]),this},handleByMap(n,e){return this.handle(n,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByList(n,e,t=-1){return this.handle(n,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((r,s)=>lU(s,t)-lU(r,t)))},i=>{const r=e.indexOf(i.ref);r!==-1&&e.splice(r,1)})}};class mie{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const gie=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function yie(n){let e="";for(let t=0;t<n;++t)t>0&&(e+=`
else `),t<n-1&&(e+=`if(test == ${t}.0){}`);return e}function vie(n,e){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);for(;;){const i=gie.replace(/%forloop%/gi,yie(n));if(e.shaderSource(t,i),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))n=n/2|0;else break}return n}const eA=0,tA=1,nA=2,iA=3,rA=4,sA=5;class jm{constructor(){this.data=0,this.blendMode=Ft.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<eA)}set blend(e){!!(this.data&1<<eA)!==e&&(this.data^=1<<eA)}get offsets(){return!!(this.data&1<<tA)}set offsets(e){!!(this.data&1<<tA)!==e&&(this.data^=1<<tA)}get culling(){return!!(this.data&1<<nA)}set culling(e){!!(this.data&1<<nA)!==e&&(this.data^=1<<nA)}get depthTest(){return!!(this.data&1<<iA)}set depthTest(e){!!(this.data&1<<iA)!==e&&(this.data^=1<<iA)}get depthMask(){return!!(this.data&1<<sA)}set depthMask(e){!!(this.data&1<<sA)!==e&&(this.data^=1<<sA)}get clockwiseFrontFace(){return!!(this.data&1<<rA)}set clockwiseFrontFace(e){!!(this.data&1<<rA)!==e&&(this.data^=1<<rA)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Ft.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new jm;return e.depthTest=!1,e.blend=!0,e}}jm.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const c2=[];function GW(n,e){if(!n)return null;let t="";if(typeof n=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(n);i&&(t=i[1].toLowerCase())}for(let i=c2.length-1;i>=0;--i){const r=c2[i];if(r.test&&r.test(n,t))return new r(n,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class ba{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,i,r,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:u}=this;this._aliasCount++;for(let h=0,d=u.length;h<d;h++)u[h][c](e,t,i,r,s,o,a,l);return u===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(ba.prototype,{dispatch:{value:ba.prototype.emit},run:{value:ba.prototype.emit}});class Mv{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new ba("setRealSize"),this.onUpdate=new ba("update"),this.onError=new ba("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class jW extends Mv{constructor(e,t){const{width:i,height:r}=t||{};if(!i||!r)throw new Error("BufferResource width or height invalid");super(i,r),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,i){const r=e.gl;r.pixelStorei(r.UNPACK_ALIGNMENT,this.unpackAlignment),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===qd.UNPACK);const s=t.realWidth,o=t.realHeight;return i.width===s&&i.height===o?r.texSubImage2D(t.target,0,0,0,s,o,t.format,i.type,this.data):(i.width=s,i.height=o,r.texImage2D(t.target,0,i.internalFormat,s,o,0,t.format,i.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const xie={scaleMode:oc.NEAREST,alphaMode:qd.NPM},u2=class _p extends x0{constructor(e=null,t=null){super(),t=Object.assign({},_p.defaultOptions,t);const{alphaMode:i,mipmap:r,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:c,format:u,type:h,target:d,resolution:f,resourceOptions:p}=t;e&&!(e instanceof Mv)&&(e=GW(e,p),e.internal=!0),this.resolution=f||xn.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=r,this.anisotropicLevel=s,this._wrapMode=c,this._scaleMode=o,this.format=u,this.type=h,this.target=d,this.alphaMode=i,this.uid=Ev(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let i;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,i=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,i=!0),i&&this.dirtyStyleId++,this}setSize(e,t,i){return i=i||this.resolution,this.setRealSize(e*i,t*i,i)}setRealSize(e,t,i){return this.resolution=i||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=rU(this.realWidth)&&rU(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Wc[this.cacheId],delete tl[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),_p.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,i=xn.STRICT_TEXTURE_CACHE){const r=typeof e=="string";let s=null;if(r)s=e;else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${Ev()}`}s=e._pixiId}let o=Wc[s];if(r&&i&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new _p(e,t),o.cacheId=s,_p.addToCache(o,s)),o}static fromBuffer(e,t,i,r){e=e||new Float32Array(t*i*4);const s=new jW(e,{width:t,height:i,...r==null?void 0:r.resourceOptions});let o,a;return e instanceof Float32Array?(o=ut.RGBA,a=tn.FLOAT):e instanceof Int32Array?(o=ut.RGBA_INTEGER,a=tn.INT):e instanceof Uint32Array?(o=ut.RGBA_INTEGER,a=tn.UNSIGNED_INT):e instanceof Int16Array?(o=ut.RGBA_INTEGER,a=tn.SHORT):e instanceof Uint16Array?(o=ut.RGBA_INTEGER,a=tn.UNSIGNED_SHORT):e instanceof Int8Array?(o=ut.RGBA,a=tn.BYTE):(o=ut.RGBA,a=tn.UNSIGNED_BYTE),s.internal=!0,new _p(s,Object.assign({},xie,{type:a,format:o},r))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Wc[t]&&Wc[t],Wc[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Wc[e];if(t){const i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete Wc[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete Wc[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};u2.defaultOptions={mipmap:kd.POW2,anisotropicLevel:0,scaleMode:oc.LINEAR,wrapMode:pL.CLAMP,alphaMode:qd.UNPACK,target:Zp.TEXTURE_2D,format:ut.RGBA,type:tn.UNSIGNED_BYTE},u2._globalBatch=0;let kn=u2;class _ie{constructor(){this.texArray=null,this.blend=0,this.type=mb.TRIANGLES,this.start=0,this.size=0,this.data=null}}let wie=0;class rs{constructor(e,t=!0,i=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=t,this.id=wie++,this.disposeRunner=new ba("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?gl.ELEMENT_ARRAY_BUFFER:gl.ARRAY_BUFFER}get index(){return this.type===gl.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new rs(e)}}class bb{constructor(e,t=0,i=!1,r=tn.FLOAT,s,o,a,l=1){this.buffer=e,this.size=t,this.normalized=i,this.type=r,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,t,i,r,s){return new bb(e,t,i,r,s)}}const bie={Float32Array,Uint32Array,Int32Array,Uint8Array};function Sie(n,e){let t=0,i=0;const r={};for(let l=0;l<n.length;l++)i+=e[l],t+=n[l].length;const s=new ArrayBuffer(t*4);let o=null,a=0;for(let l=0;l<n.length;l++){const c=e[l],u=n[l],h=VW(u);r[h]||(r[h]=new bie[h](s)),o=r[h];for(let d=0;d<u.length;d++){const f=(d/c|0)*i+a,p=d%c;o[f+p]=u[d]}a+=c}return new Float32Array(s)}const cU={5126:4,5123:2,5121:1};let Eie=0;const Mie={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};let SL=class h2{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=Eie++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new ba("disposeGeometry"),this.refCount=0}addAttribute(e,t,i=0,r=!1,s,o,a,l=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof rs||(t instanceof Array&&(t=new Float32Array(t)),t=new rs(t));const c=e.split("|");if(c.length>1){for(let h=0;h<c.length;h++)this.addAttribute(c[h],t,i,r,s);return this}let u=this.buffers.indexOf(t);return u===-1&&(this.buffers.push(t),u=this.buffers.length-1),this.attributes[e]=new bb(u,i,r,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof rs||(e instanceof Array&&(e=new Uint16Array(e)),e=new rs(e)),e.type=gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],t=[],i=new rs;let r;for(r in this.attributes){const s=this.attributes[r],o=this.buffers[s.buffer];e.push(o.data),t.push(s.size*cU[s.type]/4),s.buffer=0}for(i.data=Sie(e,t),r=0;r<this.buffers.length;r++)this.buffers[r]!==this.indexBuffer&&this.buffers[r].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new h2;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new rs(this.buffers[t].data.slice(0));for(const t in this.attributes){const i=this.attributes[t];e.attributes[t]=new bb(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=gl.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new h2,i=[],r=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)r[l]=r[l]||0,r[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new Mie[VW(o.buffers[a].data)](r[a]),t.buffers[a]=new rs(i[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=gl.ELEMENT_ARRAY_BUFFER;let a=0,l=0,c=0,u=0;for(let h=0;h<o.buffers.length;h++)if(o.buffers[h]!==o.indexBuffer){u=h;break}for(const h in o.attributes){const d=o.attributes[h];(d.buffer|0)===u&&(l+=d.size*cU[d.type]/4)}for(let h=0;h<e.length;h++){const d=e[h].indexBuffer.data;for(let f=0;f<d.length;f++)t.indexBuffer.data[f+c]+=a;a+=e[h].buffers[u].data.length/l,c+=d.length}}return t}};class Tie extends SL{constructor(e=!1){super(),this._buffer=new rs(null,e,!1),this._indexBuffer=new rs(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,tn.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,tn.FLOAT).addAttribute("aColor",this._buffer,4,!0,tn.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,tn.FLOAT).addIndex(this._indexBuffer)}}const Aie=Math.PI*2,Cie=180/Math.PI,Pie=Math.PI/180;var $W=(n=>(n[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC",n))($W||{});class Gn{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Gn(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}Gn.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const c_=[new Gn,new Gn,new Gn,new Gn];class vn{constructor(e=0,t=0,i=0,r=0){this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(r),this.type=$W.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new vn(0,0,0,0)}clone(){return new vn(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const P=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=P)return!1;const T=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>T}const i=this.left,r=this.right,s=this.top,o=this.bottom;if(r<=i||o<=s)return!1;const a=c_[0].set(e.left,e.top),l=c_[1].set(e.left,e.bottom),c=c_[2].set(e.right,e.top),u=c_[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const h=Math.sign(t.a*t.d-t.b*t.c);if(h===0||(t.apply(a,a),t.apply(l,l),t.apply(c,c),t.apply(u,u),Math.max(a.x,l.x,c.x,u.x)<=i||Math.min(a.x,l.x,c.x,u.x)>=r||Math.max(a.y,l.y,c.y,u.y)<=s||Math.min(a.y,l.y,c.y,u.y)>=o))return!1;const d=h*(l.y-a.y),f=h*(a.x-l.x),p=d*i+f*s,x=d*r+f*s,v=d*i+f*o,y=d*r+f*o;if(Math.max(p,x,v,y)<=d*a.x+f*a.y||Math.min(p,x,v,y)>=d*u.x+f*u.y)return!1;const w=h*(a.y-c.y),_=h*(c.x-a.x),b=w*i+_*s,E=w*r+_*s,M=w*i+_*o,C=w*r+_*o;return!(Math.max(b,E,M,C)<=w*a.x+_*a.y||Math.min(b,E,M,C)>=w*u.x+_*u.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(i-t,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(e=1,t=.001){const i=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=r-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=i-t,this.y=r,this.height=s-r,this}}vn.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Yi{constructor(e=1,t=0,i=0,r=1,s=0,o=0){this.array=null,this.a=e,this.b=t,this.c=i,this.d=r,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,i,r,s,o){return this.a=e,this.b=t,this.c=i,this.d=r,this.tx=s,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,t){t=t||new Gn;const i=e.x,r=e.y;return t.x=this.a*i+this.c*r+this.tx,t.y=this.b*i+this.d*r+this.ty,t}applyInverse(e,t){t=t||new Gn;const i=1/(this.a*this.d+this.c*-this.b),r=e.x,s=e.y;return t.x=this.d*i*r+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*s+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.a,s=this.c,o=this.tx;return this.a=r*t-this.b*i,this.b=r*i+this.b*t,this.c=s*t-this.d*i,this.d=s*i+this.d*t,this.tx=o*t-this.ty*i,this.ty=o*i+this.ty*t,this}append(e){const t=this.a,i=this.b,r=this.c,s=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*i+e.b*s,this.c=e.c*t+e.d*r,this.d=e.c*i+e.d*s,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*i+e.ty*s+this.ty,this}setTransform(e,t,i,r,s,o,a,l,c){return this.a=Math.cos(a+c)*s,this.b=Math.sin(a+c)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(i*this.a+r*this.c),this.ty=t-(i*this.b+r*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const i=this.a,r=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,i=this.b,r=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-r,s),l=Math.atan2(i,t),c=Math.abs(a+l);return c<1e-5||Math.abs(Aie-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(r*r+s*s),e.position.x=this.tx+(o.x*t+o.y*r),e.position.y=this.ty+(o.x*i+o.y*s),e}invert(){const e=this.a,t=this.b,i=this.c,r=this.d,s=this.tx,o=e*r-t*i;return this.a=r/o,this.b=-t/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-r*s)/o,this.ty=-(e*this.ty-t*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Yi;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new Yi}static get TEMP_MATRIX(){return new Yi}}Yi.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Dh=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Fh=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Uh=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Bh=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],d2=[],XW=[],u_=Math.sign;function Rie(){for(let n=0;n<16;n++){const e=[];d2.push(e);for(let t=0;t<16;t++){const i=u_(Dh[n]*Dh[t]+Uh[n]*Fh[t]),r=u_(Fh[n]*Dh[t]+Bh[n]*Fh[t]),s=u_(Dh[n]*Uh[t]+Uh[n]*Bh[t]),o=u_(Fh[n]*Uh[t]+Bh[n]*Bh[t]);for(let a=0;a<16;a++)if(Dh[a]===i&&Fh[a]===r&&Uh[a]===s&&Bh[a]===o){e.push(a);break}}}for(let n=0;n<16;n++){const e=new Yi;e.set(Dh[n],Fh[n],Uh[n],Bh[n],0,0),XW.push(e)}}Rie();const ui={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>Dh[n],uY:n=>Fh[n],vX:n=>Uh[n],vY:n=>Bh[n],inv:n=>n&8?n&15:-n&7,add:(n,e)=>d2[n][e],sub:(n,e)=>d2[n][ui.inv(e)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,e)=>Math.abs(n)*2<=Math.abs(e)?e>=0?ui.S:ui.N:Math.abs(e)*2<=Math.abs(n)?n>0?ui.E:ui.W:e>0?n>0?ui.SE:ui.SW:n>0?ui.NE:ui.NW,matrixAppendRotationInv:(n,e,t=0,i=0)=>{const r=XW[ui.inv(e)];r.tx=t,r.ty=i,n.append(r)}};class yu{constructor(e,t,i=0,r=0){this._x=i,this._y=r,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new yu(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}yu.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const f2=class{constructor(){this.worldTransform=new Yi,this.localTransform=new Yi,this.position=new yu(this.onChange,this,0,0),this.scale=new yu(this.onChange,this,1,1),this.pivot=new yu(this.onChange,this,0,0),this.skew=new yu(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const n=this.localTransform;this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(n){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==n._worldID){const t=n.worldTransform,i=this.worldTransform;i.a=e.a*t.a+e.b*t.c,i.b=e.a*t.b+e.b*t.d,i.c=e.c*t.a+e.d*t.c,i.d=e.c*t.b+e.d*t.d,i.tx=e.tx*t.a+e.ty*t.c+t.tx,i.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=n._worldID,this._worldID++}}setFromMatrix(n){n.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(n){this._rotation!==n&&(this._rotation=n,this.updateSkew())}};f2.IDENTITY=new f2;let EL=f2;EL.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var Iie=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Lie=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function uU(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}function oA(n){const e=new Array(n);for(let t=0;t<e.length;t++)e[t]=!1;return e}function YW(n,e){switch(n){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return oA(2*e);case"bvec3":return oA(3*e);case"bvec4":return oA(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Jp=[{test:n=>n.type==="float"&&n.size===1&&!n.isArray,code:n=>`
            if(uv["${n}"] !== ud["${n}"].value)
            {
                ud["${n}"].value = uv["${n}"]
                gl.uniform1f(ud["${n}"].location, uv["${n}"])
            }
            `},{test:(n,e)=>(n.type==="sampler2D"||n.type==="samplerCube"||n.type==="sampler2DArray")&&n.size===1&&!n.isArray&&(e==null||e.castToBaseTexture!==void 0),code:n=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${n}"], t);

            if(ud["${n}"].value !== t)
            {
                ud["${n}"].value = t;
                gl.uniform1i(ud["${n}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(n,e)=>n.type==="mat3"&&n.size===1&&!n.isArray&&e.a!==void 0,code:n=>`
            gl.uniformMatrix3fv(ud["${n}"].location, false, uv["${n}"].toArray(true));
            `,codeUbo:n=>`
                var ${n}_matrix = uv.${n}.toArray(true);

                data[offset] = ${n}_matrix[0];
                data[offset+1] = ${n}_matrix[1];
                data[offset+2] = ${n}_matrix[2];
        
                data[offset + 4] = ${n}_matrix[3];
                data[offset + 5] = ${n}_matrix[4];
                data[offset + 6] = ${n}_matrix[5];
        
                data[offset + 8] = ${n}_matrix[6];
                data[offset + 9] = ${n}_matrix[7];
                data[offset + 10] = ${n}_matrix[8];
            `},{test:(n,e)=>n.type==="vec2"&&n.size===1&&!n.isArray&&e.x!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${n}"].location, v.x, v.y);
                }`,codeUbo:n=>`
                v = uv.${n};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:n=>n.type==="vec2"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${n}"].location, v[0], v[1]);
                }
            `},{test:(n,e)=>n.type==="vec4"&&n.size===1&&!n.isArray&&e.width!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${n}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(n,e)=>n.type==="vec4"&&n.size===1&&!n.isArray&&e.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${n}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(n,e)=>n.type==="vec3"&&n.size===1&&!n.isArray&&e.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${n}"].location, v.red, v.green, v.blue)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:n=>n.type==="vec4"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${n}"].location, v[0], v[1], v[2], v[3])
                }`}],Nie={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},kie={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Oie(n,e){var i;const t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const r in n.uniforms){const s=e[r];if(!s){((i=n.uniforms[r])==null?void 0:i.group)===!0&&(n.uniforms[r].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${r}, '${r}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${r}, syncData);
                    `));continue}const o=n.uniforms[r];let a=!1;for(let l=0;l<Jp.length;l++)if(Jp[l].test(s,o)){t.push(Jp[l].code(r,o)),a=!0;break}if(!a){const l=(s.size===1&&!s.isArray?Nie:kie)[s.type].replace("location",`ud["${r}"].location`);t.push(`
            cu = ud["${r}"];
            cv = cu.value;
            v = uv["${r}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}const qW={};let Mf=qW;function Die(){if(Mf===qW||Mf!=null&&Mf.isContextLost()){const n=xn.ADAPTER.createCanvas();let e;xn.PREFER_ENV>=Yd.WEBGL2&&(e=n.getContext("webgl2",{})),e||(e=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Mf=e}return Mf}let h_;function Fie(){if(!h_){h_=Co.MEDIUM;const n=Die();if(n&&n.getShaderPrecisionFormat){const e=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);e&&(h_=e.precision?Co.HIGH:Co.MEDIUM)}}return h_}function hU(n,e){const t=n.getShaderSource(e).split(`
`).map((c,u)=>`${u}: ${c}`),i=n.getShaderInfoLog(e),r=i.split(`
`),s={},o=r.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!s[c]?(s[c]=!0,!0):!1),a=[""];o.forEach(c=>{t[c-1]=`%c${t[c-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=t.join(`
`);a[0]=l}function Uie(n,e,t,i){n.getProgramParameter(e,n.LINK_STATUS)||(n.getShaderParameter(t,n.COMPILE_STATUS)||hU(n,t),n.getShaderParameter(i,n.COMPILE_STATUS)||hU(n,i),n.getProgramInfoLog(e))}const Bie={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function ZW(n){return Bie[n]}let d_=null;const dU={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function KW(n,e){if(!d_){const t=Object.keys(dU);d_={};for(let i=0;i<t.length;++i){const r=t[i];d_[n[r]]=dU[r]}}return d_[e]}function fU(n,e,t){if(n.substring(0,9)!=="precision"){let i=e;return e===Co.HIGH&&t!==Co.HIGH&&(i=Co.MEDIUM),`precision ${i} float;
${n}`}else if(t!==Co.HIGH&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}let Vg;function zie(){if(typeof Vg=="boolean")return Vg;try{Vg=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Vg=!1}return Vg}let Hie=0;const f_={},p2=class wp{constructor(e,t,i="pixi-shader",r={}){this.extra={},this.id=Hie++,this.vertexSrc=e||wp.defaultVertexSrc,this.fragmentSrc=t||wp.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=r,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),f_[i]?(f_[i]++,i+=`-${f_[i]}`):f_[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=fU(this.vertexSrc,wp.defaultVertexPrecision,Co.HIGH),this.fragmentSrc=fU(this.fragmentSrc,wp.defaultFragmentPrecision,Fie())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return Lie}static get defaultFragmentSrc(){return Iie}static from(e,t,i){const r=e+t;let s=oU[r];return s||(oU[r]=s=new wp(e,t,i)),s}};p2.defaultVertexPrecision=Co.HIGH,p2.defaultFragmentPrecision=Ap.apple.device?Co.HIGH:Co.MEDIUM;let od=p2,Wie=0;class yl{constructor(e,t,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Wie++,this.static=!!t,this.ubo=!!i,e instanceof rs?(this.buffer=e,this.buffer.type=gl.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new rs(new Float32Array(1)),this.buffer.type=gl.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,i){if(!this.ubo)this.uniforms[e]=new yl(t,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,i){return new yl(e,t,i)}static uboFrom(e,t){return new yl(e,t??!0,!0)}}class kS{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof yl?this.uniformGroup=t:this.uniformGroup=new yl(t):this.uniformGroup=new yl({}),this.disposeRunner=new ba("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const i in t.uniforms){const r=t.uniforms[i];if(r.group===!0&&this.checkUniformExists(e,r))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,i){const r=od.from(e,t);return new kS(r,i)}}class Vie{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const i=new Int32Array(e);for(let s=0;s<e;s++)i[s]=s;this.defaultGroupCache[e]=yl.from({uSamplers:i},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${e}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new od(this.vertexSrc,r)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new Yi,default:this.defaultGroupCache[e]};return new kS(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let i=0;i<e;i++)i>0&&(t+=`
else `),i<e-1&&(t+=`if(vTextureId < ${i}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}}class Gie{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function jie(){return!Ap.apple.device}function $ie(n){let e=!0;const t=xn.ADAPTER.getNavigator();if(Ap.tablet||Ap.phone){if(Ap.apple.device){const i=t.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(e=!1)}if(Ap.android.device){const i=t.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(e=!1)}}return e?n:4}class QW{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var Xie=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Yie=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Ry=class aa extends QW{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=Tie,this.vertexSize=6,this.state=jm.for2d(),this.size=aa.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??$ie(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??jie(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return Pn("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return Yie}static get defaultFragmentTemplate(){return Xie}setShaderGenerator({vertex:e=aa.defaultVertexSrc,fragment:t=aa.defaultFragmentTemplate}={}){this.shaderGenerator=new Vie(e,t)}contextChange(){const e=this.renderer.gl;xn.PREFER_ENV===Yd.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),aa.defaultMaxTextures),this.maxTextures=vie(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=aa,i=this.size/4,r=Math.floor(i/this.maxTextures)+1;for(;e.length<i;)e.push(new _ie);for(;t.length<r;)t.push(new Gie);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,i=aa._textureArrayPool,r=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++kn._globalBatch,l=0,c=i[0],u=0;r.copyBoundTextures(s,t);for(let h=0;h<this._bufferSize;++h){const d=e[h];e[h]=null,d._batchEnabled!==a&&(c.count>=t&&(r.boundArray(c,s,a,t),this.buildDrawCalls(c,u,h),u=h,c=i[++l],++a),d._batchEnabled=a,d.touched=o,c.elements[c.count++]=d)}c.count>0&&(r.boundArray(c,s,a,t),this.buildDrawCalls(c,u,this._bufferSize),++l,++a);for(let h=0;h<s.length;h++)s[h]=null;kn._globalBatch=a}buildDrawCalls(e,t,i){const{_bufferedElements:r,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=aa._drawCallPool;let c=this._dcIndex,u=this._aIndex,h=this._iIndex,d=l[c];d.start=this._iIndex,d.texArray=e;for(let f=t;f<i;++f){const p=r[f],x=p._texture.baseTexture,v=die[x.alphaMode?1:0][p.blendMode];r[f]=null,t<f&&d.blend!==v&&(d.size=h-d.start,t=f,d=l[++c],d.texArray=e,d.start=h),this.packInterleavedGeometry(p,s,o,u,h),u+=p.vertexData.length/2*a,h+=p.indices.length,d.blend=v}t<i&&(d.size=h-d.start,++c),this._dcIndex=c,this._aIndex=u,this._iIndex=h}bindAndClearTexArray(e){const t=this.renderer.texture;for(let i=0;i<e.count;i++)t.bind(e.elements[i],e.ids[i]),e.elements[i]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:i}=this;aa.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:i}=this.renderer,r=aa._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:a,type:l,size:c,start:u,blend:h}=r[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=h,i.set(this.state),t.drawElements(l,c,t.UNSIGNED_SHORT,u*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),aa.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=wb(Math.ceil(e/8)),i=sU(t),r=t*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._aBuffers[r];return s||(this._aBuffers[r]=s=new mie(r*this.vertexSize*4)),s}getIndexBuffer(e){const t=wb(Math.ceil(e/12)),i=sU(t),r=t*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._iBuffers[i];return s||(this._iBuffers[i]=s=new Uint16Array(r)),s}packInterleavedGeometry(e,t,i,r,s){const{uint32View:o,float32View:a}=t,l=r/this.vertexSize,c=e.uvs,u=e.indices,h=e.vertexData,d=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),p=NS.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let x=0;x<h.length;x+=2)a[r++]=h[x],a[r++]=h[x+1],a[r++]=c[x],a[r++]=c[x+1],o[r++]=p,a[r++]=d;for(let x=0;x<u.length;x++)i[s++]=l+u[x]}};Ry.defaultBatchSize=4096,Ry.extension={name:"batch",type:nn.RendererPlugin},Ry._drawCallPool=[],Ry._textureArrayPool=[];let zh=Ry;Cn.add(zh);var qie=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Zie=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const m2=class Iy extends kS{constructor(e,t,i){const r=od.from(e||Iy.defaultVertexSrc,t||Iy.defaultFragmentSrc);super(r,i),this.padding=0,this.resolution=Iy.defaultResolution,this.multisample=Iy.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new jm}apply(e,t,i,r,s){e.applyFilter(this,t,i,r)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return Zie}static get defaultFragmentSrc(){return qie}};m2.defaultResolution=1,m2.defaultMultisample=Di.NONE;let Cp=m2;class Sb{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new NS(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:i,backgroundAlpha:r}=e,s=i??t;s!==void 0&&(this.color=s),this.alpha=r}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}Sb.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Sb.extension={type:[nn.RendererSystem,nn.CanvasRendererSystem],name:"background"};Cn.add(Sb);class JW{constructor(e){this.renderer=e,this.emptyRenderer=new QW(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:i}=this.renderer.texture;for(let r=t-1;r>=0;--r)e[r]=i[r]||null,e[r]&&(e[r]._batchLocation=r)}boundArray(e,t,i,r){const{elements:s,ids:o,count:a}=e;let l=0;for(let c=0;c<a;c++){const u=s[c],h=u._batchLocation;if(h>=0&&h<r&&t[h]===u){o[c]=h;continue}for(;l<r;){const d=t[l];if(d&&d._batchEnabled===i&&d._batchLocation===l){l++;continue}o[c]=l,u._batchLocation=l,t[l]=u;break}}}destroy(){this.renderer=null}}JW.extension={type:nn.RendererSystem,name:"batch"};Cn.add(JW);let pU=0;class Eb{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=pU++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,i=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:i,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=pU++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let i;if(xn.PREFER_ENV>=Yd.WEBGL2&&(i=e.getContext("webgl2",t)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),t&&t.stencil;const r=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=r}}Eb.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Eb.extension={type:nn.RendererSystem,name:"context"};Cn.add(Eb);class g2{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new ba("disposeFramebuffer"),this.multisample=Di.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new kn(null,{scaleMode:oc.NEAREST,resolution:1,mipmap:kd.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new kn(null,{scaleMode:oc.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:kd.OFF,format:ut.DEPTH_COMPONENT,type:tn.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const r=this.colorTextures[i],s=r.resolution;r.setSize(e/s,t/s)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(e/i,t/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class eV extends kn{constructor(e={}){if(typeof e=="number"){const t=arguments[0],i=arguments[1],r=arguments[2],s=arguments[3];e={width:t,height:i,scaleMode:r,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=Di.NONE),super(null,e),this.mipmap=kd.OFF,this.valid=!0,this._clear=new NS([0,0,0,0]),this.framebuffer=new g2(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class gc extends Mv{constructor(e){const t=e,i=t.naturalWidth||t.videoWidth||t.displayWidth||t.width,r=t.naturalHeight||t.videoHeight||t.displayHeight||t.height;super(i,r),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,i){i===void 0&&!t.startsWith("data:")?e.crossOrigin=pie(t):i!==!1&&(e.crossOrigin=typeof i=="string"?i:"anonymous")}upload(e,t,i,r){const s=e.gl,o=t.realWidth,a=t.realHeight;if(r=r||this.source,typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement){if(!r.complete||r.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement&&r.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===qd.UNPACK),!this.noSubImage&&t.target===s.TEXTURE_2D&&i.width===o&&i.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,t.format,i.type,r):(i.width=o,i.height=a,s.texImage2D(t.target,0,i.internalFormat,t.format,i.type,r)),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;this.resize(t,i),super.update()}dispose(){this.source=null}}class tV extends gc{constructor(e,t){if(t=t||{},typeof e=="string"){const i=new Image;gc.crossOrigin(i,e,t.crossorigin),i.src=e,e=i}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??xn.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,i)=>{const r=this.source;this.url=r.src;const s=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};r.complete&&r.src?s():(r.onload=s,r.onerror=o=>{i(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,i=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:i?"cors":"no-cors"}).then(r=>r.blob()).then(r=>t(r,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===qd.UNPACK?"premultiply":"none"})).then(r=>this.destroyed?Promise.reject():(this.bitmap=r,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,i){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,i,this.bitmap),!this.preserveBitmap){let r=!0;const s=t._glTextures;for(const o in s){const a=s[o];if(a!==i&&a.dirtyId!==t.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class ML{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,i){const r=t.width,s=t.height;if(i){const o=e.width/2/r,a=e.height/2/s,l=e.x/r+o,c=e.y/s+a;i=ui.add(i,ui.NW),this.x0=l+o*ui.uX(i),this.y0=c+a*ui.uY(i),i=ui.add(i,2),this.x1=l+o*ui.uX(i),this.y1=c+a*ui.uY(i),i=ui.add(i,2),this.x2=l+o*ui.uX(i),this.y2=c+a*ui.uY(i),i=ui.add(i,2),this.x3=l+o*ui.uX(i),this.y3=c+a*ui.uY(i)}else this.x0=e.x/r,this.y0=e.y/s,this.x1=(e.x+e.width)/r,this.y1=e.y/s,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/s,this.x3=e.x/r,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}ML.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const mU=new ML;function p_(n){n.destroy=function(){},n.on=function(){},n.once=function(){},n.emit=function(){}}let Kie=class zn extends x0{constructor(e,t,i,r,s,o,a){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new vn(0,0,1,1)),e instanceof zn&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=r,this.valid=!1,this.destroyed=!1,this._uvs=mU,this.uvMatrix=null,this.orig=i||t,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Gn(o.x,o.y):new Gn(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:t}=this.baseTexture;t!=null&&t.url&&tl[t.url]&&zn.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,zn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var r;const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),i=new zn(this.baseTexture,!this.noFrame&&e,t,(r=this.trim)==null?void 0:r.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=e),i}updateUvs(){this._uvs===mU&&(this._uvs=new ML),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},i=xn.STRICT_TEXTURE_CACHE){const r=typeof e=="string";let s=null;if(r)s=e;else if(e instanceof kn){if(!e.cacheId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${Ev()}`,kn.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${Ev()}`}s=e._pixiId}let o=tl[s];if(r&&i&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof kn)?(t.resolution||(t.resolution=aU(e)),o=new zn(new kn(e,t)),o.baseTexture.cacheId=s,kn.addToCache(o.baseTexture,s),zn.addToCache(o,s)):!o&&e instanceof kn&&(o=new zn(e),zn.addToCache(o,s)),o}static fromURL(e,t){const i=Object.assign({autoLoad:!1},t==null?void 0:t.resourceOptions),r=zn.from(e,Object.assign({resourceOptions:i},t),!1),s=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):s.load().then(()=>Promise.resolve(r))}static fromBuffer(e,t,i,r){return new zn(kn.fromBuffer(e,t,i,r))}static fromLoader(e,t,i,r){const s=new kn(e,Object.assign({scaleMode:kn.defaultOptions.scaleMode,resolution:aU(t)},r)),{resource:o}=s;o instanceof tV&&(o.url=t);const a=new zn(s);return i||(i=t),kn.addToCache(a.baseTexture,i),zn.addToCache(a,i),i!==t&&(kn.addToCache(a.baseTexture,t),zn.addToCache(a,t)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),tl[t]&&tl[t],tl[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=tl[e];if(t){const i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete tl[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)tl[e.textureCacheIds[t]]===e&&delete tl[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:i,width:r,height:s}=e,o=t+r>this.baseTexture.width,a=i+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",c=`X: ${t} + ${r} = ${t+r} > ${this.baseTexture.width}`,u=`Y: ${i} + ${s} = ${i+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${l} ${u}`)}this.valid=r&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return zn._EMPTY||(zn._EMPTY=new zn(new kn),p_(zn._EMPTY),p_(zn._EMPTY.baseTexture)),zn._EMPTY}static get WHITE(){if(!zn._WHITE){const e=xn.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),zn._WHITE=new zn(kn.from(e)),p_(zn._WHITE),p_(zn._WHITE.baseTexture)}return zn._WHITE}};class OS extends Kie{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,i=!0){const r=this.baseTexture.resolution,s=Math.round(e*r)/r,o=Math.round(t*r)/r;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new OS(new eV(e))}}class nV{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,i=Di.NONE){const r=new eV(Object.assign({width:e,height:t,resolution:1,multisample:i},this.textureOptions));return new OS(r)}getOptimalTexture(e,t,i=1,r=Di.NONE){let s;e=Math.max(Math.ceil(e*i-1e-6),1),t=Math.max(Math.ceil(t*i-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=wb(e),t=wb(t),s=((e&65535)<<16|t&65535)>>>0,r>1&&(s+=r*4294967296)):s=r>1?-r:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,t,r)),o.filterPoolKey=s,o.setResolution(i),o}getFilterTexture(e,t,i){const r=this.getOptimalTexture(e.width,e.height,t||e.resolution,i||Di.NONE);return r.filterFrame=e.filterFrame,r}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const t in this.texturePool){const i=this.texturePool[t];if(i)for(let r=0;r<i.length;r++)i[r].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const i=this.texturePool[t];if(i)for(let r=0;r<i.length;r++)i[r].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}nV.SCREEN_KEY=-1;class Qie extends SL{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Jie extends SL{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new rs(this.vertices),this.uvBuffer=new rs(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+t.width/e.width,this.uvs[3]=r,this.uvs[4]=i+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=i,this.uvs[7]=r+t.height/e.height,i=t.x,r=t.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+t.width,this.vertices[3]=r,this.vertices[4]=i+t.width,this.vertices[5]=r+t.height,this.vertices[6]=i,this.vertices[7]=r+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class ere{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Di.NONE,this.sourceFrame=new vn,this.destinationFrame=new vn,this.bindingSourceFrame=new vn,this.bindingDestinationFrame=new vn,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const m_=[new Gn,new Gn,new Gn,new Gn],aA=new Yi;class iV{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new nV,this.statePool=[],this.quad=new Qie,this.quadUv=new Jie,this.tempRect=new vn,this.activeState={},this.globalUniforms=new yl({outputFrame:new vn,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const i=this.renderer,r=this.defaultFilterStack,s=this.statePool.pop()||new ere,o=i.renderTexture;let a,l;if(o.current){const v=o.current;a=v.resolution,l=v.multisample}else a=i.resolution,l=i.multisample;let c=t[0].resolution||a,u=t[0].multisample??l,h=t[0].padding,d=t[0].autoFit,f=t[0].legacy??!0;for(let v=1;v<t.length;v++){const y=t[v];c=Math.min(c,y.resolution||a),u=Math.min(u,y.multisample??l),h=this.useMaxPadding?Math.max(h,y.padding):h+y.padding,d=d&&y.autoFit,f=f||(y.legacy??!0)}r.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),r.push(s),s.resolution=c,s.multisample=u,s.legacy=f,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(h);const p=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(aA.copyFrom(i.projection.transform).invert(),p),d?(s.sourceFrame.fit(p),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(p)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,c,u),s.filters=t,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const x=this.tempRect;x.x=0,x.y=0,x.width=s.sourceFrame.width,x.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,x),i.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),i=t.filters;this.activeState=t;const r=this.globalUniforms.uniforms;r.outputFrame=t.sourceFrame,r.resolution=t.resolution;const s=r.inputSize,o=r.inputPixel,a=r.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*t.resolution),o[1]=Math.round(s[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*s[2]-.5*o[2],a[3]=t.sourceFrame.height*s[3]-.5*o[3],t.legacy){const c=r.filterArea;c[0]=t.destinationFrame.width,c[1]=t.destinationFrame.height,c[2]=t.sourceFrame.x,c[3]=t.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,t.renderTexture,l.renderTexture,Oh.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let c=t.renderTexture,u=this.getOptimalFilterTexture(c.width,c.height,t.resolution);u.filterFrame=c.filterFrame;let h=0;for(h=0;h<i.length-1;++h){h===1&&t.multisample>1&&(u=this.getOptimalFilterTexture(c.width,c.height,t.resolution),u.filterFrame=c.filterFrame),i[h].apply(this,c,u,Oh.CLEAR,t);const d=c;c=u,u=d}i[h].apply(this,c,l.renderTexture,Oh.BLEND,t),h>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(u)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=Oh.CLEAR){const{renderTexture:i,state:r}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,i.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=r.stateId&1||this.forceClear;(t===Oh.CLEAR||t===Oh.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,i,r){const s=this.renderer;s.state.set(e.state),this.bindAndClear(i,r),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(mb.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(mb.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:i,destinationFrame:r}=this.activeState,{orig:s}=t._texture,o=e.set(r.width,0,0,r.height,i.x,i.y),a=t.worldTransform.copyTo(Yi.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(t.anchor.x,t.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,i=1,r=Di.NONE){return this.texturePool.getOptimalTexture(e,t,i,r)}getFilterTexture(e,t,i){if(typeof e=="number"){const s=e;e=t,t=s}e=e||this.activeState.renderTexture;const r=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,i||Di.NONE);return r.filterFrame=e.filterFrame,r}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const i=m_[0],r=m_[1],s=m_[2],o=m_[3];i.set(t.left,t.top),r.set(t.left,t.bottom),s.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(i,i),e.apply(r,r),e.apply(s,s),e.apply(o,o);const a=Math.min(i.x,r.x,s.x,o.x),l=Math.min(i.y,r.y,s.y,o.y),c=Math.max(i.x,r.x,s.x,o.x),u=Math.max(i.y,r.y,s.y,o.y);t.x=a,t.y=l,t.width=c-a,t.height=u-l}roundFrame(e,t,i,r,s){if(!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)){if(s){const{a:o,b:a,c:l,d:c}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}s=s?aA.copyFrom(s):aA.identity(),s.translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.transformAABB(s,e),e.ceil(t),this.transformAABB(s.invert(),e)}}}iV.extension={type:nn.RendererSystem,name:"filter"};Cn.add(iV);class tre{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Di.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const nre=new vn;class rV{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new g2(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new vn,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;xn.PREFER_ENV===Yd.WEBGL_LEGACY&&(t=null,i=null),t?e.drawBuffers=r=>t.drawBuffersWEBGL(r):(this.hasMRT=!1,e.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,i=0){const{gl:r}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,r.bindFramebuffer(r.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=i),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const o=t.width>>i,a=t.height>>i,l=o/t.width;this.setViewport(t.x*l,t.y*l,o,a)}else{const o=e.width>>i,a=e.height>>i;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,i,r){const s=this.viewport;e=Math.round(e),t=Math.round(t),i=Math.round(i),r=Math.round(r),(s.width!==i||s.height!==r||s.x!==e||s.y!==t)&&(s.x=e,s.y=t,s.width=i,s.height=r,this.gl.viewport(e,t,i,r))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,i,r,s=KP.COLOR|KP.DEPTH){const{gl:o}=this;o.clearColor(e,t,i,r),o.clear(s)}initFramebuffer(e){const{gl:t}=this,i=new tre(t.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i}resizeFramebuffer(e){const{gl:t}=this,i=e.glFramebuffers[this.CONTEXT_UID];if(i.stencil){t.bindRenderbuffer(t.RENDERBUFFER,i.stencil);let o;this.renderer.context.webGLVersion===1?o=t.DEPTH_STENCIL:e.depth&&e.stencil?o=t.DEPTH24_STENCIL8:e.depth?o=t.DEPTH_COMPONENT24:o=t.STENCIL_INDEX8,i.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,i.multisample,o,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,o,e.width,e.height)}const r=e.colorTextures;let s=r.length;t.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=r[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&i.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,i.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:i}=this,r=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;i.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(e)?r.msaaBuffer=r.msaaBuffer||i.createRenderbuffer():r.msaaBuffer&&(i.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const c=s[l],u=c.parentTextureArray||c;this.renderer.texture.bind(u,0),l===0&&r.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,r.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,r.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,c.target,u._glTextures[this.CONTEXT_UID].texture,t),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const l=e.depthTexture;this.renderer.texture.bind(l,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){r.stencil=r.stencil||i.createRenderbuffer();let l,c;this.renderer.context.webGLVersion===1?(l=i.DEPTH_STENCIL_ATTACHMENT,c=i.DEPTH_STENCIL):e.depth&&e.stencil?(l=i.DEPTH_STENCIL_ATTACHMENT,c=i.DEPTH24_STENCIL8):e.depth?(l=i.DEPTH_ATTACHMENT,c=i.DEPTH_COMPONENT24):(l=i.STENCIL_ATTACHMENT,c=i.STENCIL_INDEX8),i.bindRenderbuffer(i.RENDERBUFFER,r.stencil),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,c,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,c,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,l,i.RENDERBUFFER,r.stencil)}else r.stencil&&(i.deleteRenderbuffer(r.stencil),r.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let i=Di.NONE;if(e<=1||t===null)return i;for(let r=0;r<t.length;r++)if(t[r]<=e){i=t[r];break}return i===1&&(i=Di.NONE),i}blit(e,t,i){const{current:r,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!r)return;const l=r.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const u=r.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new g2(r.width,r.height),l.blitFramebuffer.addColorTexture(0,u)),e=l.blitFramebuffer,e.colorTextures[0]!==u&&(e.colorTextures[0]=u,e.dirtyId++,e.dirtyFormat++),(e.width!==r.width||e.height!==r.height)&&(e.width=r.width,e.height=r.height,e.dirtyId++,e.dirtySize++)}t||(t=nre,t.width=r.width,t.height=r.height),i||(i=t);const c=t.width===i.width&&t.height===i.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const i=e.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(!i)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),t||(r.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&r.deleteRenderbuffer(i.msaaBuffer),i.stencil&&r.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<t.length;i++)this.disposeFramebuffer(t[i],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const i=e.width,r=e.height,s=this.gl,o=t.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),t.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,t.multisample,l,i,r):s.renderbufferStorage(s.RENDERBUFFER,l,i,r),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new vn}destroy(){this.renderer=null}}rV.extension={type:nn.RendererSystem,name:"framebuffer"};Cn.add(rV);const lA={5126:4,5123:2,5121:1};class sV{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;xn.PREFER_ENV===Yd.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=()=>i.createVertexArrayOES(),e.bindVertexArray=r=>i.bindVertexArrayOES(r),e.deleteVertexArray=r=>i.deleteVertexArrayOES(r)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){const i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=(r,s)=>i.vertexAttribDivisorANGLE(r,s),e.drawElementsInstanced=(r,s,o,a,l)=>i.drawElementsInstancedANGLE(r,s,o,a,l),e.drawArraysInstanced=(r,s,o,a)=>i.drawArraysInstancedANGLE(r,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:i}=this;let r=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;r||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=r={},s=!0);const o=r[t.program.id]||this.initGeometryVao(e,t,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let i=0;i<e.buffers.length;i++){const r=e.buffers[i];t.update(r)}}checkCompatibility(e,t){const i=e.attributes,r=t.attributeData;for(const s in r)if(!i[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,t){const i=e.attributes,r=t.attributeData,s=["g",e.id];for(const o in i)r[o]&&s.push(o,r[o].location);return s.join("-")}initGeometryVao(e,t,i=!0){const r=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[s]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);const l=this.getSignature(e,a),c=e.glVertexArrayObjects[this.CONTEXT_UID];let u=c[l];if(u)return c[a.id]=u,u;const h=e.buffers,d=e.attributes,f={},p={};for(const x in h)f[x]=0,p[x]=0;for(const x in d)!d[x].size&&a.attributeData[x]?d[x].size=a.attributeData[x].size:d[x].size,f[d[x].buffer]+=d[x].size*lA[d[x].type];for(const x in d){const v=d[x],y=v.size;v.stride===void 0&&(f[v.buffer]===y*lA[v.type]?v.stride=0:v.stride=f[v.buffer]),v.start===void 0&&(v.start=p[v.buffer],p[v.buffer]+=y*lA[v.type])}u=r.createVertexArray(),r.bindVertexArray(u);for(let x=0;x<h.length;x++){const v=h[x];o.bind(v),i&&v._glBuffers[s].refCount++}return this.activateVao(e,a),c[a.id]=u,c[l]=u,r.bindVertexArray(null),o.unbind(gl.ARRAY_BUFFER),u}disposeGeometry(e,t){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const i=e.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!i){if(o)for(let l=0;l<s.length;l++){const c=s[l]._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!t&&o.dispose(s[l],t))}if(!t){for(const l in i)if(l[0]==="g"){const c=i[l];this._activeVao===c&&this.unbind(),r.deleteVertexArray(c)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let i=0;i<t.length;i++)this.disposeGeometry(this.managedGeometries[t[i]],e)}activateVao(e,t){const i=this.gl,r=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const c in a){const u=a[c],h=o[u.buffer],d=h._glBuffers[r];if(t.attributeData[c]){l!==d&&(s.bind(h),l=d);const f=t.attributeData[c].location;if(i.enableVertexAttribArray(f),i.vertexAttribPointer(f,u.size,u.type||i.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)i.vertexAttribDivisor(f,u.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,i,r){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;(a===2||a===4&&this.canUseUInt32ElementIndex)&&(o.instanced?s.drawElementsInstanced(e,t||o.indexBuffer.data.length,l,(i||0)*a,r||1):s.drawElements(e,t||o.indexBuffer.data.length,l,(i||0)*a))}else o.instanced?s.drawArraysInstanced(e,i,t||o.getSize(),r||1):s.drawArrays(e,i,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}sV.extension={type:nn.RendererSystem,name:"geometry"};Cn.add(sV);const gU=new Yi;class ire{constructor(e,t){this._texture=e,this.mapCoord=new Yi,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);const i=this.mapCoord;for(let r=0;r<e.length;r+=2){const s=e[r],o=e[r+1];t[r]=s*i.a+o*i.c+i.tx,t[r+1]=s*i.b+o*i.d+i.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const i=t._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const r=t.orig,s=t.trim;s&&(gU.set(r.width/s.width,0,0,r.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(gU));const o=t.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(t._frame.x+l+c)/o.width,a[1]=(t._frame.y+l+c)/o.height,a[2]=(t._frame.x+t._frame.width-l+c)/o.width,a[3]=(t._frame.y+t._frame.height-l+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&t.rotate===0,!0}}var rre=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,sre=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class ore extends Cp{constructor(e,t,i){let r=null;typeof e!="string"&&t===void 0&&i===void 0&&(r=e,e=void 0,t=void 0,i=void 0),super(e||sre,t||rre,i),this.maskSprite=r,this.maskMatrix=new Yi}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,i,r){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new ire(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,i,r))}}class are{constructor(e=null){this.type=Gi.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Cp.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Gi.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class oV{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let i=t;if(!i.isMaskData){const s=this.maskDataPool.pop()||new are;s.pooled=!0,s.maskObject=t,i=s}const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(r),i._colorMask=r?r._colorMask:15,i.autoDetect&&this.detect(i),i._target=e,i.type!==Gi.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case Gi.SCISSOR:this.renderer.scissor.push(i);break;case Gi.STENCIL:this.renderer.stencil.push(i);break;case Gi.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case Gi.COLOR:this.pushColorMask(i);break}i.type===Gi.SPRITE&&this.maskStack.push(i)}pop(e){const t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case Gi.SCISSOR:this.renderer.scissor.pop(t);break;case Gi.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case Gi.SPRITE:this.popSpriteMask(t);break;case Gi.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===Gi.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=Gi.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Gi.SCISSOR:e.type=Gi.STENCIL:e.type=Gi.COLOR}pushSpriteMask(e){const{maskObject:t}=e,i=e._target;let r=e._filters;r||(r=this.alphaMaskPool[this.alphaMaskIndex],r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new ore])),r[0].resolution=e.resolution,r[0].multisample=e.multisample,r[0].maskSprite=t;const s=i.filterArea;i.filterArea=t.getBounds(!0),this.renderer.filter.push(i,r),i.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,i=e._colorMask=t&e.colorMask;i!==t&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(e){const t=e._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==t&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}}oV.extension={type:nn.RendererSystem,name:"mask"};Cn.add(oV);class aV{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,i=this.getStackLength();this.maskStack=e;const r=this.getStackLength();r!==i&&(r===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const yU=new Yi,vU=[],lV=class C1 extends aV{constructor(e){super(e),this.glConst=xn.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:i}=e,{renderer:r}=this,s=r.renderTexture,o=i.getBounds(!0,vU.pop()??new vn);this.roundFrameToPixels(o,s.current?s.current.resolution:r.resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),t&&o.fit(t),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:i,c:r,d:s}=e;return(Math.abs(i)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||C1.isMatrixRotated(t.worldTransform)||C1.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const i=e._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(e,t,i,r,s){C1.isMatrixRotated(s)||(s=s?yU.copyFrom(s):yU.identity(),s.translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.renderer.filter.transformAABB(s,e),e.fit(r),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&vU.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};lV.extension={type:nn.RendererSystem,name:"scissor"};let lre=lV;Cn.add(lre);class cV extends aV{constructor(e){super(e),this.glConst=xn.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:i}=this.renderer,r=e._stencilCounter;r===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,r,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(e._colorMask=s,i.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,r=i?i._colorMask:15;r!==0&&(i._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,r!==0&&(i._colorMask=r,t.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}cV.extension={type:nn.RendererSystem,name:"stencil"};Cn.add(cV);class uV{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Pn("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return Pn("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return Pn("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}uV.extension={type:[nn.RendererSystem,nn.CanvasRendererSystem],name:"_plugin"};Cn.add(uV);class hV{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Yi,this.transform=null}update(e,t,i,r){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,t,i,r){const s=this.projectionMatrix,o=r?-1:1;s.identity(),s.a=1/t.width*2,s.d=o*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-o-t.y*s.d}setTransform(e){}destroy(){this.renderer=null}}hV.extension={type:nn.RendererSystem,name:"projection"};Cn.add(hV);const cre=new EL,xU=new vn;class dV{constructor(e){this.renderer=e,this._tempMatrix=new Yi}generateTexture(e,t){const{region:i,...r}=t||{},s=(i==null?void 0:i.copyTo(xU))||e.getLocalBounds(xU,!0),o=r.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),r.width=s.width,r.height=s.height,r.resolution=o,r.multisample??(r.multisample=this.renderer.multisample);const a=OS.create(r);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const l=e.transform;return e.transform=cre,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}}dV.extension={type:[nn.RendererSystem,nn.CanvasRendererSystem],name:"textureGenerator"};Cn.add(dV);const vh=new vn,Gg=new vn;class fV{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new vn,this.destinationFrame=new vn,this.viewportFrame=new vn}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,i){const r=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,t||(vh.width=e.frame.width,vh.height=e.frame.height,t=vh),i||(Gg.x=e.frame.x,Gg.y=e.frame.y,Gg.width=t.width,Gg.height=t.height,i=Gg),o=s.framebuffer):(a=r.resolution,t||(vh.width=r._view.screen.width,vh.height=r._view.screen.height,t=vh),i||(i=vh,i.width=t.width,i.height=t.height));const l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,e||(l.y=r.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,t,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(i)}clear(e,t){const i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,r=NS.shared.setValue(e||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&r.premultiply(r.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:c,width:u,height:h}=this.viewportFrame;l=Math.round(l),c=Math.round(c),u=Math.round(u),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,c,u,h)}this.renderer.framebuffer.clear(r.red,r.green,r.blue,r.alpha,t),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}fV.extension={type:nn.RendererSystem,name:"renderTexture"};Cn.add(fV);class ure{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function hre(n,e){const t={},i=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=e.getActiveAttrib(n,r);if(s.name.startsWith("gl_"))continue;const o=KW(e,s.type),a={type:o,name:s.name,size:ZW(o),location:e.getAttribLocation(n,s.name)};t[s.name]=a}return t}function dre(n,e){const t={},i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<i;r++){const s=e.getActiveUniform(n,r),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=KW(e,s.type);t[o]={name:o,index:r,type:l,size:s.size,isArray:a,value:YW(l,s.size)}}return t}function fre(n,e){var a;const t=uU(n,n.VERTEX_SHADER,e.vertexSrc),i=uU(n,n.FRAGMENT_SHADER,e.fragmentSrc),r=n.createProgram();n.attachShader(r,t),n.attachShader(r,i);const s=(a=e.extra)==null?void 0:a.transformFeedbackVaryings;if(s&&(typeof n.transformFeedbackVaryings!="function"||n.transformFeedbackVaryings(r,s.names,s.bufferMode==="separate"?n.SEPARATE_ATTRIBS:n.INTERLEAVED_ATTRIBS)),n.linkProgram(r),n.getProgramParameter(r,n.LINK_STATUS)||Uie(n,r,t,i),e.attributeData=hre(r,n),e.uniformData=dre(r,n),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((c,u)=>c>u?1:-1);for(let c=0;c<l.length;c++)e.attributeData[l[c]].location=c,n.bindAttribLocation(r,c,l[c]);n.linkProgram(r)}n.deleteShader(t),n.deleteShader(i);const o={};for(const l in e.uniformData){const c=e.uniformData[l];o[l]={location:n.getUniformLocation(r,l),value:YW(c.type,c.size)}}return new ure(r,o)}function pre(n,e,t,i,r){t.buffer.update(r)}const mre={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},pV={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function gre(n){const e=n.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let t=0,i=0,r=0;for(let s=0;s<e.length;s++){const o=e[s];if(t=pV[o.data.type],o.data.size>1&&(t=Math.max(t,16)*o.data.size),o.dataLen=t,i%t!==0&&i<16){const a=i%t%16;i+=a,r+=a}i+t>16?(r=Math.ceil(r/16)*16,o.offset=r,r+=t,i=t):(o.offset=r,i+=t,r+=t)}return r=Math.ceil(r/16)*16,{uboElements:e,size:r}}function yre(n,e){const t=[];for(const i in n)e[i]&&t.push(e[i]);return t.sort((i,r)=>i.index-r.index),t}function vre(n,e){if(!n.autoManage)return{size:0,syncFunc:pre};const t=yre(n.uniforms,e),{uboElements:i,size:r}=gre(t),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<i.length;o++){const a=i[o],l=n.uniforms[a.data.name],c=a.data.name;let u=!1;for(let h=0;h<Jp.length;h++){const d=Jp[h];if(d.codeUbo&&d.test(a.data,l)){s.push(`offset = ${a.offset/4};`,Jp[h].codeUbo(a.data.name,l)),u=!0;break}}if(!u)if(a.data.size>1){const h=ZW(a.data.type),d=Math.max(pV[a.data.type]/16,1),f=h/d,p=(4-f%4)%4;s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const h=mre[a.data.type];s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};
                ${h};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:r,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let xre=0;const g_={textureCount:0,uboCount:0};class mV{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=xre++}systemCheck(){if(!zie())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const i=e.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),t||(g_.textureCount=0,g_.uboCount=0,this.syncUniformGroup(e.uniformGroup,g_)),r}setUniforms(e){const t=this.shader.program,i=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(i.uniformData,e,this.renderer)}syncUniformGroup(e,t){const i=this.getGlProgram();(!e.static||e.dirtyId!==i.uniformDirtyGroups[e.id])&&(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,t))}syncUniforms(e,t,i){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,i)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=Oie(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const i=this.getGlProgram();if(!e.static||e.dirtyId!==0||!i.uniformGroups[e.id]){e.dirtyId=0;const r=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,t);e.buffer.update(),r(i.uniformData,e.uniforms,this.renderer,g_,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[t])}createSyncBufferGroup(e,t,i){const{gl:r}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(t.program,i);t.uniformBufferBindings[i]=this.shader.uniformBindCount,r.uniformBlockBinding(t.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=vre(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,i){const r=e.uniforms,s=[`${i}-`];for(const o in r)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,i=e.program,r=fre(t,i);return i.glPrograms[this.renderer.CONTEXT_UID]=r,r}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}mV.extension={type:nn.RendererSystem,name:"shader"};Cn.add(mV);class Mb{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello,t.resize(t.screen.width,t.screen.height)}destroy(){}}Mb.defaultOptions={hello:!1},Mb.extension={type:[nn.RendererSystem,nn.CanvasRendererSystem],name:"startup"};Cn.add(Mb);function _re(n,e=[]){return e[Ft.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.ADD]=[n.ONE,n.ONE],e[Ft.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.NONE]=[0,0],e[Ft.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.ADD_NPM]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],e[Ft.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ft.SRC_IN]=[n.DST_ALPHA,n.ZERO],e[Ft.SRC_OUT]=[n.ONE_MINUS_DST_ALPHA,n.ZERO],e[Ft.SRC_ATOP]=[n.DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[Ft.DST_OVER]=[n.ONE_MINUS_DST_ALPHA,n.ONE],e[Ft.DST_IN]=[n.ZERO,n.SRC_ALPHA],e[Ft.DST_OUT]=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],e[Ft.DST_ATOP]=[n.ONE_MINUS_DST_ALPHA,n.SRC_ALPHA],e[Ft.XOR]=[n.ONE_MINUS_DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[Ft.SUBTRACT]=[n.ONE,n.ONE,n.ONE,n.ONE,n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD],e}const wre=0,bre=1,Sre=2,Ere=3,Mre=4,Tre=5,gV=class y2{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Ft.NONE,this._blendEq=!1,this.map=[],this.map[wre]=this.setBlend,this.map[bre]=this.setOffset,this.map[Sre]=this.setCullFace,this.map[Ere]=this.setDepthTest,this.map[Mre]=this.setFrontFace,this.map[Tre]=this.setDepthMask,this.checks=[],this.defaultState=new jm,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=_re(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,i=0;for(;t;)t&1&&this.map[i].call(this,!!(e.data&1<<i)),t=t>>1,i++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(y2.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(y2.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],i=this.gl;t.length===2?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const i=this.checks.indexOf(e);t&&i===-1?this.checks.push(e):!t&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};gV.extension={type:nn.RendererSystem,name:"state"};let Are=gV;Cn.add(Are);class Cre extends x0{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(r=>e.systems[r]),i=[...t,...Object.keys(e.systems).filter(r=>!t.includes(r))];for(const r of i)this.addSystem(e.systems[r],r)}addRunners(...e){e.forEach(t=>{this.runners[t]=new ba(t)})}addSystem(e,t){const i=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=i,this._systemsHash[t]=i;for(const r in this.runners)this.runners[r].add(i);return this}emitWithCustomOptions(e,t){const i=Object.keys(this._systemsHash);e.items.forEach(r=>{const s=i.find(o=>this._systemsHash[o]===r);r[e.name](t[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Ly=class P1{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=P1.defaultMaxIdle,this.checkCountMax=P1.defaultCheckCountMax,this.mode=P1.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==mL.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let i=!1;for(let r=0;r<t.length;r++){const s=t[r];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[r]=null,i=!0)}if(i){let r=0;for(let s=0;s<t.length;s++)t[s]!==null&&(t[r++]=t[s]);t.length=r}}unload(e){const t=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&t.destroyTexture(i);for(let r=e.children.length-1;r>=0;r--)this.unload(e.children[r])}destroy(){this.renderer=null}};Ly.defaultMode=mL.AUTO,Ly.defaultMaxIdle=60*60,Ly.defaultCheckCountMax=60*10,Ly.extension={type:nn.RendererSystem,name:"textureGC"};let Hh=Ly;Cn.add(Hh);class cA{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=tn.UNSIGNED_BYTE,this.internalFormat=ut.RGBA,this.samplerType=0}}function Pre(n){let e;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?e={[n.RGB]:vt.FLOAT,[n.RGBA]:vt.FLOAT,[n.ALPHA]:vt.FLOAT,[n.LUMINANCE]:vt.FLOAT,[n.LUMINANCE_ALPHA]:vt.FLOAT,[n.R8]:vt.FLOAT,[n.R8_SNORM]:vt.FLOAT,[n.RG8]:vt.FLOAT,[n.RG8_SNORM]:vt.FLOAT,[n.RGB8]:vt.FLOAT,[n.RGB8_SNORM]:vt.FLOAT,[n.RGB565]:vt.FLOAT,[n.RGBA4]:vt.FLOAT,[n.RGB5_A1]:vt.FLOAT,[n.RGBA8]:vt.FLOAT,[n.RGBA8_SNORM]:vt.FLOAT,[n.RGB10_A2]:vt.FLOAT,[n.RGB10_A2UI]:vt.FLOAT,[n.SRGB8]:vt.FLOAT,[n.SRGB8_ALPHA8]:vt.FLOAT,[n.R16F]:vt.FLOAT,[n.RG16F]:vt.FLOAT,[n.RGB16F]:vt.FLOAT,[n.RGBA16F]:vt.FLOAT,[n.R32F]:vt.FLOAT,[n.RG32F]:vt.FLOAT,[n.RGB32F]:vt.FLOAT,[n.RGBA32F]:vt.FLOAT,[n.R11F_G11F_B10F]:vt.FLOAT,[n.RGB9_E5]:vt.FLOAT,[n.R8I]:vt.INT,[n.R8UI]:vt.UINT,[n.R16I]:vt.INT,[n.R16UI]:vt.UINT,[n.R32I]:vt.INT,[n.R32UI]:vt.UINT,[n.RG8I]:vt.INT,[n.RG8UI]:vt.UINT,[n.RG16I]:vt.INT,[n.RG16UI]:vt.UINT,[n.RG32I]:vt.INT,[n.RG32UI]:vt.UINT,[n.RGB8I]:vt.INT,[n.RGB8UI]:vt.UINT,[n.RGB16I]:vt.INT,[n.RGB16UI]:vt.UINT,[n.RGB32I]:vt.INT,[n.RGB32UI]:vt.UINT,[n.RGBA8I]:vt.INT,[n.RGBA8UI]:vt.UINT,[n.RGBA16I]:vt.INT,[n.RGBA16UI]:vt.UINT,[n.RGBA32I]:vt.INT,[n.RGBA32UI]:vt.UINT,[n.DEPTH_COMPONENT16]:vt.FLOAT,[n.DEPTH_COMPONENT24]:vt.FLOAT,[n.DEPTH_COMPONENT32F]:vt.FLOAT,[n.DEPTH_STENCIL]:vt.FLOAT,[n.DEPTH24_STENCIL8]:vt.FLOAT,[n.DEPTH32F_STENCIL8]:vt.FLOAT}:e={[n.RGB]:vt.FLOAT,[n.RGBA]:vt.FLOAT,[n.ALPHA]:vt.FLOAT,[n.LUMINANCE]:vt.FLOAT,[n.LUMINANCE_ALPHA]:vt.FLOAT,[n.DEPTH_STENCIL]:vt.FLOAT},e}function Rre(n){let e;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?e={[tn.UNSIGNED_BYTE]:{[ut.RGBA]:n.RGBA8,[ut.RGB]:n.RGB8,[ut.RG]:n.RG8,[ut.RED]:n.R8,[ut.RGBA_INTEGER]:n.RGBA8UI,[ut.RGB_INTEGER]:n.RGB8UI,[ut.RG_INTEGER]:n.RG8UI,[ut.RED_INTEGER]:n.R8UI,[ut.ALPHA]:n.ALPHA,[ut.LUMINANCE]:n.LUMINANCE,[ut.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[tn.BYTE]:{[ut.RGBA]:n.RGBA8_SNORM,[ut.RGB]:n.RGB8_SNORM,[ut.RG]:n.RG8_SNORM,[ut.RED]:n.R8_SNORM,[ut.RGBA_INTEGER]:n.RGBA8I,[ut.RGB_INTEGER]:n.RGB8I,[ut.RG_INTEGER]:n.RG8I,[ut.RED_INTEGER]:n.R8I},[tn.UNSIGNED_SHORT]:{[ut.RGBA_INTEGER]:n.RGBA16UI,[ut.RGB_INTEGER]:n.RGB16UI,[ut.RG_INTEGER]:n.RG16UI,[ut.RED_INTEGER]:n.R16UI,[ut.DEPTH_COMPONENT]:n.DEPTH_COMPONENT16},[tn.SHORT]:{[ut.RGBA_INTEGER]:n.RGBA16I,[ut.RGB_INTEGER]:n.RGB16I,[ut.RG_INTEGER]:n.RG16I,[ut.RED_INTEGER]:n.R16I},[tn.UNSIGNED_INT]:{[ut.RGBA_INTEGER]:n.RGBA32UI,[ut.RGB_INTEGER]:n.RGB32UI,[ut.RG_INTEGER]:n.RG32UI,[ut.RED_INTEGER]:n.R32UI,[ut.DEPTH_COMPONENT]:n.DEPTH_COMPONENT24},[tn.INT]:{[ut.RGBA_INTEGER]:n.RGBA32I,[ut.RGB_INTEGER]:n.RGB32I,[ut.RG_INTEGER]:n.RG32I,[ut.RED_INTEGER]:n.R32I},[tn.FLOAT]:{[ut.RGBA]:n.RGBA32F,[ut.RGB]:n.RGB32F,[ut.RG]:n.RG32F,[ut.RED]:n.R32F,[ut.DEPTH_COMPONENT]:n.DEPTH_COMPONENT32F},[tn.HALF_FLOAT]:{[ut.RGBA]:n.RGBA16F,[ut.RGB]:n.RGB16F,[ut.RG]:n.RG16F,[ut.RED]:n.R16F},[tn.UNSIGNED_SHORT_5_6_5]:{[ut.RGB]:n.RGB565},[tn.UNSIGNED_SHORT_4_4_4_4]:{[ut.RGBA]:n.RGBA4},[tn.UNSIGNED_SHORT_5_5_5_1]:{[ut.RGBA]:n.RGB5_A1},[tn.UNSIGNED_INT_2_10_10_10_REV]:{[ut.RGBA]:n.RGB10_A2,[ut.RGBA_INTEGER]:n.RGB10_A2UI},[tn.UNSIGNED_INT_10F_11F_11F_REV]:{[ut.RGB]:n.R11F_G11F_B10F},[tn.UNSIGNED_INT_5_9_9_9_REV]:{[ut.RGB]:n.RGB9_E5},[tn.UNSIGNED_INT_24_8]:{[ut.DEPTH_STENCIL]:n.DEPTH24_STENCIL8},[tn.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[ut.DEPTH_STENCIL]:n.DEPTH32F_STENCIL8}}:e={[tn.UNSIGNED_BYTE]:{[ut.RGBA]:n.RGBA,[ut.RGB]:n.RGB,[ut.ALPHA]:n.ALPHA,[ut.LUMINANCE]:n.LUMINANCE,[ut.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[tn.UNSIGNED_SHORT_5_6_5]:{[ut.RGB]:n.RGB},[tn.UNSIGNED_SHORT_4_4_4_4]:{[ut.RGBA]:n.RGBA},[tn.UNSIGNED_SHORT_5_5_5_1]:{[ut.RGBA]:n.RGBA}},e}class yV{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new kn,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Rre(e),this.samplerTypes=Pre(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let r=0;r<t;r++)this.boundTextures[r]=null;this.emptyTextures={};const i=new cA(e.createTexture());e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new cA(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let r=0;r<6;r++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let r=0;r<this.boundTextures.length;r++)this.bind(null,r)}bind(e,t=0){const{gl:i}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const r=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(e.target,r.texture)),r.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),this.updateTexture(e)):r.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(let r=0;r<i.length;r++)i[r]===e&&(this.currentLocation!==r&&(t.activeTexture(t.TEXTURE0+r),this.currentLocation=r),t.bindTexture(e.target,this.emptyTextures[e.target].texture),i[r]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:i,CONTEXT_UID:r}=this;if(i)for(let s=e-1;s>=0;--s){const o=t[s];o&&o._glTextures[r].samplerType!==vt.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const t=new cA(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){var i;t.internalFormat=((i=this.internalFormats[e.type])==null?void 0:i[e.format])??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??vt.FLOAT,this.webGLVersion===2&&e.type===tn.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){var r;const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const i=this.renderer;if(this.initTextureType(e,t),(r=e.resource)==null?void 0:r.upload(i,e,t))t.samplerType!==vt.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=i.gl;(t.width!==s||t.height!==o||t.dirtyId<0)&&(t.width=s,t.height=o,a.texImage2D(e.target,0,t.internalFormat,s,o,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:i}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const r=this.managedTextures.indexOf(e);r!==-1&&A1(this.managedTextures,r,1)}}updateTextureStyle(e){var i;const t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===kd.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=pL.CLAMP:t.wrapMode=e.wrapMode,(i=e.resource)!=null&&i.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const i=this.gl;if(t.mipmap&&e.mipmap!==kd.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,t.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===oc.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const r=this.renderer.context.extensions.anisotropicFiltering;if(r&&e.anisotropicLevel>0&&e.scaleMode===oc.LINEAR){const s=Math.min(e.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,r.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===oc.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===oc.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}yV.extension={type:nn.RendererSystem,name:"texture"};Cn.add(yV);class vV{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:i}=this,r=e._glTransformFeedbacks[i]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,r)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:i,renderer:r}=this;t&&r.shader.bind(t),i.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:i,CONTEXT_UID:r}=this,s=t.createTransformFeedback();e._glTransformFeedbacks[r]=s,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(i.buffer.update(a),a._glBuffers[r].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[r].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,t){const i=e._glTransformFeedbacks[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&s.dispose(a,t))}i&&(t||r.deleteTransformFeedback(i),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}vV.extension={type:nn.RendererSystem,name:"transformFeedback"};Cn.add(vV);class Tb{constructor(e){this.renderer=e}init(e){this.screen=new vn(0,0,e.width,e.height),this.element=e.view||xn.ADAPTER.createCanvas(),this.resolution=e.resolution||xn.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const i=this.element.width/this.resolution,r=this.element.height/this.resolution;this.screen.width=i,this.screen.height=r,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${r}px`),this.renderer.emit("resize",i,r),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var t;e&&((t=this.element.parentNode)==null||t.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Tb.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Tb.extension={type:[nn.RendererSystem,nn.CanvasRendererSystem],name:"_view"};Cn.add(Tb);xn.PREFER_ENV=Yd.WEBGL2;xn.STRICT_TEXTURE_CACHE=!1;xn.RENDER_OPTIONS={...Eb.defaultOptions,...Sb.defaultOptions,...Tb.defaultOptions,...Mb.defaultOptions};Object.defineProperties(xn,{WRAP_MODE:{get(){return kn.defaultOptions.wrapMode},set(n){Pn("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),kn.defaultOptions.wrapMode=n}},SCALE_MODE:{get(){return kn.defaultOptions.scaleMode},set(n){Pn("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),kn.defaultOptions.scaleMode=n}},MIPMAP_TEXTURES:{get(){return kn.defaultOptions.mipmap},set(n){Pn("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),kn.defaultOptions.mipmap=n}},ANISOTROPIC_LEVEL:{get(){return kn.defaultOptions.anisotropicLevel},set(n){Pn("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),kn.defaultOptions.anisotropicLevel=n}},FILTER_RESOLUTION:{get(){return Pn("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Cp.defaultResolution},set(n){Cp.defaultResolution=n}},FILTER_MULTISAMPLE:{get(){return Pn("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Cp.defaultMultisample},set(n){Cp.defaultMultisample=n}},SPRITE_MAX_TEXTURES:{get(){return zh.defaultMaxTextures},set(n){Pn("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),zh.defaultMaxTextures=n}},SPRITE_BATCH_SIZE:{get(){return zh.defaultBatchSize},set(n){Pn("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),zh.defaultBatchSize=n}},CAN_UPLOAD_SAME_BUFFER:{get(){return zh.canUploadSameBuffer},set(n){Pn("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),zh.canUploadSameBuffer=n}},GC_MODE:{get(){return Hh.defaultMode},set(n){Pn("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Hh.defaultMode=n}},GC_MAX_IDLE:{get(){return Hh.defaultMaxIdle},set(n){Pn("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Hh.defaultMaxIdle=n}},GC_MAX_CHECK_COUNT:{get(){return Hh.defaultCheckCountMax},set(n){Pn("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Hh.defaultCheckCountMax=n}},PRECISION_VERTEX:{get(){return od.defaultVertexPrecision},set(n){Pn("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),od.defaultVertexPrecision=n}},PRECISION_FRAGMENT:{get(){return od.defaultFragmentPrecision},set(n){Pn("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),od.defaultFragmentPrecision=n}}});var Tv=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Tv||{});class uA{constructor(e,t=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=i,this.once=r}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const xV=class Hs{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new uA(null,null,1/0),this.deltaMS=1/Hs.targetFPMS,this.elapsedMS=1/Hs.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=Tv.NORMAL){return this._addListener(new uA(e,t,i))}addOnce(e,t,i=Tv.NORMAL){return this._addListener(new uA(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Hs.targetFPMS;const i=this._head;let r=i.next;for(;r;)r=r.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,Hs.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Hs._shared){const e=Hs._shared=new Hs;e.autoStart=!0,e._protected=!0}return Hs._shared}static get system(){if(!Hs._system){const e=Hs._system=new Hs;e.autoStart=!0,e._protected=!0}return Hs._system}};xV.targetFPMS=.06;let hl=xV;Object.defineProperties(xn,{TARGET_FPMS:{get(){return hl.targetFPMS},set(n){Pn("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),hl.targetFPMS=n}}});class _V{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Tv.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?hl.shared:new hl,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}_V.extension=nn.Application;Cn.add(_V);const Ire=[];Cn.handleByList(nn.Renderer,Ire);class wV{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){const i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else{const i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i)}t>=Di.HIGH?this.multisample=Di.HIGH:t>=Di.MEDIUM?this.multisample=Di.MEDIUM:t>=Di.LOW?this.multisample=Di.LOW:this.multisample=Di.NONE}destroy(){}}wV.extension={type:nn.RendererSystem,name:"_multisample"};Cn.add(wV);class Lre{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class bV{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:i}=this,r=e._glBuffers[i]||this.createGLBuffer(e);t.bindBuffer(e.type,r.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:i,CONTEXT_UID:r}=this;if(this.boundBufferBases[t]!==e){const s=e._glBuffers[r]||this.createGLBuffer(e);this.boundBufferBases[t]=e,i.bindBufferBase(i.UNIFORM_BUFFER,t,s.buffer)}}bindBufferRange(e,t,i){const{gl:r,CONTEXT_UID:s}=this;i=i||0;const o=e._glBuffers[s]||this.createGLBuffer(e);r.bindBufferRange(r.UNIFORM_BUFFER,t||0,o.buffer,i*256,256)}update(e){const{gl:t,CONTEXT_UID:i}=this,r=e._glBuffers[i]||this.createGLBuffer(e);if(e._updateID!==r.updateID)if(r.updateID=e._updateID,t.bindBuffer(e.type,r.buffer),r.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const s=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;r.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,s)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const i=e._glBuffers[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this),i&&(t||r.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let i=0;i<t.length;i++)this.dispose(this.managedBuffers[t[i]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:i}=this;return e._glBuffers[t]=new Lre(i.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}bV.extension={type:nn.RendererSystem,name:"buffer"};Cn.add(bV);class SV{constructor(e){this.renderer=e}render(e,t){const i=this.renderer;let r,s,o,a;if(t&&(r=t.renderTexture,s=t.clear,o=t.transform,a=t.skipUpdateTransform),this.renderingToScreen=!r,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(r||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}i.renderTexture.bind(r),i.batch.currentRenderer.start(),(s??i.background.clearBeforeRender)&&i.renderTexture.clear(),e.render(i),i.batch.currentRenderer.flush(),r&&(t.blit&&i.framebuffer.blit(),r.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}SV.extension={type:nn.RendererSystem,name:"objectRenderer"};Cn.add(SV);const R1=class v2 extends Cre{constructor(e){super(),this.type=wW.WEBGL,e=Object.assign({},xn.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new yl({projectionMatrix:new Yi},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:v2.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(Pn("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=v2.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:uie()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Pn("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Pn("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Pn("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Pn("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){Pn("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return Pn("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){Pn("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return Pn("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};R1.extension={type:nn.Renderer,priority:1},R1.__plugins={},R1.__systems={};let TL=R1;Cn.handleByMap(nn.RendererPlugin,TL.__plugins);Cn.handleByMap(nn.RendererSystem,TL.__systems);Cn.add(TL);class EV extends Mv{constructor(e,t){const{width:i,height:r}=t||{};super(i,r),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new kn;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let i=0;i<this.length;i++)e[i]&&(e[i].castToBaseTexture?this.addBaseTextureAt(e[i].castToBaseTexture(),i):e[i]instanceof Mv?this.addResourceAt(e[i],i):this.addResourceAt(GW(e[i],t),i))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{const{realWidth:t,realHeight:i}=this.items[0];return this.resize(t,i),this.update(),Promise.resolve(this)}),this._load}}class Nre extends EV{constructor(e,t){const{width:i,height:r}=t||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:i,height:r}),s&&this.initFromArray(s,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=Zp.TEXTURE_2D_ARRAY}upload(e,t,i){const{length:r,itemDirtyIds:s,items:o}=this,{gl:a}=e;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,r,0,t.format,i.type,null);for(let l=0;l<r;l++){const c=o[l];s[l]<c.dirtyId&&(s[l]=c.dirtyId,c.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,t.format,i.type,c.resource.source))}return!0}}class kre extends gc{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const MV=class Ny extends EV{constructor(e,t){const{width:i,height:r,autoLoad:s,linkBaseTexture:o}=t||{};if(e&&e.length!==Ny.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:i,height:r});for(let a=0;a<Ny.SIDES;a++)this.items[a].target=Zp.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,t),s!==!1&&this.load()}bind(e){super.bind(e),e.target=Zp.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Zp.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,i){const r=this.itemDirtyIds;for(let s=0;s<Ny.SIDES;s++){const o=this.items[s];(r[s]<o.dirtyId||i.dirtyId<t.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,i),r[s]=o.dirtyId):r[s]<-1&&(e.gl.texImage2D(o.target,0,i.internalFormat,t.realWidth,t.realHeight,0,t.format,i.type,null),r[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Ny.SIDES}};MV.SIDES=6;let Ore=MV;class Pp extends gc{constructor(e,t){t=t||{};let i,r,s;typeof e=="string"?(i=Pp.EMPTY,r=e,s=!0):(i=e,r=null,s=!1),super(i),this.url=r,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??s,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,t)=>{if(this.url===null){e(this);return}try{const i=await xn.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await i.blob();if(this.destroyed)return;const s=await createImageBitmap(r,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===qd.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(i){if(this.destroyed)return;t(i),this.onError.emit(i)}}),this._load)}upload(e,t,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,i)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return Pp._EMPTY=Pp._EMPTY??xn.ADAPTER.createCanvas(0,0),Pp._EMPTY}}const x2=class I1 extends gc{constructor(e,t){t=t||{},super(xn.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},I1.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;gc.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,i=e.height;if(!t||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let r=t*this.scale,s=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(r=this._overrideWidth||this._overrideHeight/i*t,s=this._overrideHeight||this._overrideWidth/t*i),r=Math.round(r),s=Math.round(s);const o=this.source;o.width=r,o.height=s,o._pixiId=`canvas_${Ev()}`,o.getContext("2d").drawImage(e,0,0,t,i,0,0,r,s),this._resolve(),this._resolve=null}}static getSize(e){const t=I1.SVG_SIZE.exec(e),i={};return t&&(i[t[1]]=Math.round(parseFloat(t[3])),i[t[5]]=Math.round(parseFloat(t[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&I1.SVG_XML.test(e)}};x2.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,x2.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let Dre=x2;class Fre extends gc{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const _2=class w2 extends gc{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const i=document.createElement("video");t.autoLoad!==!1&&i.setAttribute("preload","auto"),t.playsinline!==!1&&(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","")),t.muted===!0&&(i.setAttribute("muted",""),i.muted=!0),t.loop===!0&&i.setAttribute("loop",""),t.autoPlay!==!1&&i.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const r=e[0].src||e[0];gc.crossOrigin(i,r,t.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:a,mime:l}=e[s];if(a=a||e[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const c=a.split("?").shift().toLowerCase(),u=c.slice(c.lastIndexOf(".")+1);l=l||w2.MIME_TYPES[u]||`video/${u}`}o.src=a,l&&(o.type=l),i.appendChild(o)}e=i}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const t=hl.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,i)=>{this.valid?t(this):(this._resolve=t,this._reject=i,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(hl.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(hl.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(hl.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||w2.TYPES.includes(t)}};_2.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],_2.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Ure=_2;c2.push(Pp,tV,kre,Ure,Fre,Dre,jW,Ore,Nre);const TV={add(n,e){return e||(e=new Gn),e.x=this.x+n.x,e.y=this.y+n.y,e},subtract(n,e){return e||(e=new Gn),e.x=this.x-n.x,e.y=this.y-n.y,e},multiply(n,e){return e||(e=new Gn),e.x=this.x*n.x,e.y=this.y*n.y,e},multiplyScalar(n,e){return e||(e=new Gn),e.x=this.x*n,e.y=this.y*n,e},dot(n){return this.x*n.x+this.y*n.y},cross(n){return this.x*n.y-this.y*n.x},normalize(n){n||(n=new Gn);const e=Math.sqrt(this.x*this.x+this.y*this.y);return n.x=this.x/e,n.y=this.y/e,n},magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)},magnitudeSquared(){return this.x*this.x+this.y*this.y},project(n,e){e||(e=new Gn);const t=(this.x*n.x+this.y*n.y)/(n.x*n.x+n.y*n.y);return e.x=n.x*t,e.y=n.y*t,e},reflect(n,e){e||(e=new Gn);const t=this.x*n.x+this.y*n.y;return e.x=this.x-2*t*n.x,e.y=this.y-2*t*n.y,e}};Object.assign(Gn.prototype,TV);Object.assign(yu.prototype,TV);vn.prototype.containsRect=function(n){return n.width<=0||n.height<=0?n.x>this.x&&n.y>this.y&&n.right<this.right&&n.bottom<this.bottom:n.x>=this.x&&n.y>=this.y&&n.right<=this.right&&n.bottom<=this.bottom};vn.prototype.equals=function(n){return n===this?!0:n&&this.x===n.x&&this.y===n.y&&this.width===n.width&&this.height===n.height};vn.prototype.intersection=function(n,e){e||(e=new vn);const t=this.x<n.x?n.x:this.x,i=this.right>n.right?n.right:this.right;if(i<=t)return e.x=e.y=e.width=e.height=0,e;const r=this.y<n.y?n.y:this.y,s=this.bottom>n.bottom?n.bottom:this.bottom;return s<=r?(e.x=e.y=e.width=e.height=0,e):(e.x=t,e.y=r,e.width=i-t,e.height=s-r,e)};vn.prototype.union=function(n,e){e||(e=new vn);const t=Math.min(this.x,n.x),i=Math.max(this.x+this.width,n.x+n.width),r=Math.min(this.y,n.y),s=Math.max(this.y+this.height,n.y+n.height);return e.x=t,e.y=r,e.width=i-t,e.height=s-r,e};function Bre(n,e,t=Number.EPSILON){return n===e?!0:Math.abs(n-e)<t}function zre(n,e,t,i,r,s){s||(s=new Gn);const o=e.x-n.x,a=e.y-n.y,l=i.x-t.x,c=i.y-t.y,u=c*o-l*a;if(Bre(u,0))return s.x=NaN,s.y=NaN,s;const h=(l*(n.y-t.y)-c*(n.x-t.x))/u,d=(o*(n.y-t.y)-a*(n.x-t.x))/u;return!r&&(h<0||h>1||d<0||d>1)?(s.x=NaN,s.y=NaN,s):(s.x=n.x+h*o,s.y=t.y+d*c,s)}function y_(n,e,t,i,r){return zre(n,e,t,i,!0,r)}function $m(n,e){let t=n/jr.scale.x+jr.corner.x;return(e??Lt.getState().snap)&&(t=Tl(t)),Math.trunc(t)}function Xm(n,e){let t=n/jr.scale.y+jr.corner.y;return(e??Lt.getState().snap)&&(t=Tl(t)),Math.trunc(t)}function Tl(n){const e=n%10,t=n-e;return e<5?t:t+10}class AV{constructor(e,t){ve(this,"wall");ve(this,"coords");ve(this,"receiver");e&&(this.wall=e),t&&(this.coords=t),this.receiver=cs.Instance}execute(){let e;if(Lt.getState().snap==!0&&(this.coords.x=Tl(this.coords.x),this.coords.y=Tl(this.coords.y)),this.wall){if(e=this.receiver.addNodeToWall(this.wall,this.coords),!e)return}else{if(!Wd.Instance.checkStep(this.coords))return;e=this.receiver.addNode(this.coords.x,this.coords.y)}Wd.Instance.step(e),this.receiver.actions.push(this)}}class Hre{constructor(e){ve(this,"wall");ve(this,"receiver");this.wall=e,this.receiver=cs.Instance}execute(){this.receiver.actions.push(this),this.receiver.removeWall(this.wall)}}class b2{constructor(e){ve(this,"id");ve(this,"receiver");this.id=e,this.receiver=cs.Instance}execute(){this.receiver.actions.push(this),this.receiver.removeWallNode(this.id)}}function ln(){return ln=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ln.apply(this,arguments)}function Wre(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function fn(n,e){if(n==null)return{};var t=Wre(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}var Vre=["size","color"];function Gre(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,Vre);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-armchair",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M5 11a2 2 0 0 1 2 2v2h10v-2a2 2 0 1 1 4 0v4a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-4a2 2 0 0 1 2 -2z"}),ae.createElement("path",{d:"M5 11v-5a3 3 0 0 1 3 -3h8a3 3 0 0 1 3 3v5"}),ae.createElement("path",{d:"M6 19v2"}),ae.createElement("path",{d:"M18 19v2"}))}var jre=["size","color"];function $re(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,jre);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrow-autofit-height",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M12 20h-6a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h6"}),ae.createElement("path",{d:"M18 14v7"}),ae.createElement("path",{d:"M18 3v7"}),ae.createElement("path",{d:"M15 18l3 3l3 -3"}),ae.createElement("path",{d:"M15 6l3 -3l3 3"}))}var Xre=["size","color"];function Yre(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,Xre);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrow-autofit-width",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M4 12v-6a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v6"}),ae.createElement("path",{d:"M10 18h-7"}),ae.createElement("path",{d:"M21 18h-7"}),ae.createElement("path",{d:"M6 15l-3 3l3 3"}),ae.createElement("path",{d:"M18 15l3 3l-3 3"}))}var qre=["size","color"];function Zre(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,qre);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrow-move-up",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M12 13v-10"}),ae.createElement("path",{d:"M9 6l3 -3l3 3"}),ae.createElement("path",{d:"M12 17a2 2 0 1 1 0 4a2 2 0 0 1 0 -4z"}))}var Kre=["size","color"];function Qre(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,Kre);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-badge-3d",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2"}),ae.createElement("path",{d:"M7 9.5a0.5 .5 0 0 1 .5 -.5h1a1.5 1.5 0 0 1 0 3h-.5h.5a1.5 1.5 0 0 1 0 3h-1a0.5 .5 0 0 1 -.5 -.5"}),ae.createElement("path",{d:"M14 9v6h1a2 2 0 0 0 2 -2v-2a2 2 0 0 0 -2 -2h-1z"}))}var Jre=["size","color"];function CV(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,Jre);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-border-horizontal",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),ae.createElement("line",{x1:"4",y1:"4",x2:"4",y2:"4.01"}),ae.createElement("line",{x1:"8",y1:"4",x2:"8",y2:"4.01"}),ae.createElement("line",{x1:"12",y1:"4",x2:"12",y2:"4.01"}),ae.createElement("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),ae.createElement("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),ae.createElement("line",{x1:"4",y1:"8",x2:"4",y2:"8.01"}),ae.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"8.01"}),ae.createElement("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),ae.createElement("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),ae.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"16.01"}),ae.createElement("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),ae.createElement("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),ae.createElement("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),ae.createElement("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),ae.createElement("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),ae.createElement("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"}))}var ese=["size","color"];function PV(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,ese);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-border-inner",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),ae.createElement("line",{x1:"12",y1:"4",x2:"12",y2:"20"}),ae.createElement("line",{x1:"4",y1:"4",x2:"4",y2:"4.01"}),ae.createElement("line",{x1:"8",y1:"4",x2:"8",y2:"4.01"}),ae.createElement("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),ae.createElement("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),ae.createElement("line",{x1:"4",y1:"8",x2:"4",y2:"8.01"}),ae.createElement("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),ae.createElement("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),ae.createElement("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),ae.createElement("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),ae.createElement("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),ae.createElement("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),ae.createElement("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"}))}var tse=["size","color"];function S2(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,tse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-border-left",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("line",{x1:"4",y1:"20",x2:"4",y2:"4"}),ae.createElement("line",{x1:"8",y1:"4",x2:"8",y2:"4.01"}),ae.createElement("line",{x1:"12",y1:"4",x2:"12",y2:"4.01"}),ae.createElement("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),ae.createElement("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),ae.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"8.01"}),ae.createElement("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),ae.createElement("line",{x1:"8",y1:"12",x2:"8",y2:"12.01"}),ae.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"12.01"}),ae.createElement("line",{x1:"16",y1:"12",x2:"16",y2:"12.01"}),ae.createElement("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),ae.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"16.01"}),ae.createElement("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),ae.createElement("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),ae.createElement("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),ae.createElement("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),ae.createElement("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"}))}var nse=["size","color"];function ise(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,nse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-brand-github",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"}))}var rse=["size","color"];function sse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,rse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-building-warehouse",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M3 21v-13l9 -4l9 4v13"}),ae.createElement("path",{d:"M13 13h4v8h-10v-6h6"}),ae.createElement("path",{d:"M13 21v-9a1 1 0 0 0 -1 -1h-2a1 1 0 0 0 -1 1v3"}))}var ose=["size","color"];function ase(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,ose);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-device-floppy",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"}),ae.createElement("circle",{cx:"12",cy:"14",r:"2"}),ae.createElement("polyline",{points:"14 4 14 8 8 8 8 4"}))}var lse=["size","color"];function cse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,lse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-door",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M14 12v.01"}),ae.createElement("path",{d:"M3 21h18"}),ae.createElement("path",{d:"M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"}))}var use=["size","color"];function hse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,use);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-eraser",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),ae.createElement("path",{d:"M18 13.3l-6.3 -6.3"}))}var dse=["size","color"];function fse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,dse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-eye-off",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("line",{x1:"3",y1:"3",x2:"21",y2:"21"}),ae.createElement("path",{d:"M10.584 10.587a2 2 0 0 0 2.828 2.83"}),ae.createElement("path",{d:"M9.363 5.365a9.466 9.466 0 0 1 2.637 -.365c4 0 7.333 2.333 10 7c-.778 1.361 -1.612 2.524 -2.503 3.488m-2.14 1.861c-1.631 1.1 -3.415 1.651 -5.357 1.651c-4 0 -7.333 -2.333 -10 -7c1.369 -2.395 2.913 -4.175 4.632 -5.341"}))}var pse=["size","color"];function mse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,pse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-eye",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("circle",{cx:"12",cy:"12",r:"2"}),ae.createElement("path",{d:"M22 12c-2.667 4.667 -6 7 -10 7s-7.333 -2.333 -10 -7c2.667 -4.667 6 -7 10 -7s7.333 2.333 10 7"}))}var gse=["size","color"];function yse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,gse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-file-upload",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),ae.createElement("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}),ae.createElement("path",{d:"M12 11v6"}),ae.createElement("path",{d:"M9.5 13.5l2.5 -2.5l2.5 2.5"}))}var vse=["size","color"];function xse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,vse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-grid-dots",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("circle",{cx:"5",cy:"5",r:"1"}),ae.createElement("circle",{cx:"12",cy:"5",r:"1"}),ae.createElement("circle",{cx:"19",cy:"5",r:"1"}),ae.createElement("circle",{cx:"5",cy:"12",r:"1"}),ae.createElement("circle",{cx:"12",cy:"12",r:"1"}),ae.createElement("circle",{cx:"19",cy:"12",r:"1"}),ae.createElement("circle",{cx:"5",cy:"19",r:"1"}),ae.createElement("circle",{cx:"12",cy:"19",r:"1"}),ae.createElement("circle",{cx:"19",cy:"19",r:"1"}))}var _se=["size","color"];function wse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,_se);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-heart",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M19.5 12.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"}))}var bse=["size","color"];function Sse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,bse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-help",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("circle",{cx:"12",cy:"12",r:"9"}),ae.createElement("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),ae.createElement("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"}))}var Ese=["size","color"];function Mse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,Ese);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-home-plus",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M19 12h2l-9 -9l-9 9h2v7a2 2 0 0 0 2 2h5.5"}),ae.createElement("path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2"}),ae.createElement("path",{d:"M16 19h6"}),ae.createElement("path",{d:"M19 16v6"}))}var Tse=["size","color"];function Ase(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,Tse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-menu-2",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),ae.createElement("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),ae.createElement("line",{x1:"4",y1:"18",x2:"20",y2:"18"}))}var Cse=["size","color"];function Pse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,Cse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-pencil",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4"}),ae.createElement("line",{x1:"13.5",y1:"6.5",x2:"17.5",y2:"10.5"}))}var Rse=["size","color"];function Ise(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,Rse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-photo",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("line",{x1:"15",y1:"8",x2:"15.01",y2:"8"}),ae.createElement("rect",{x:"4",y:"4",width:"16",height:"16",rx:"3"}),ae.createElement("path",{d:"M4 15l4 -4a3 5 0 0 1 3 0l5 5"}),ae.createElement("path",{d:"M14 14l1 -1a3 5 0 0 1 3 0l2 2"}))}var Lse=["size","color"];function Nse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,Lse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-plus",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),ae.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))}var kse=["size","color"];function Ose(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,kse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-pointer",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M7.904 17.563a1.2 1.2 0 0 0 2.228 .308l2.09 -3.093l4.907 4.907a1.067 1.067 0 0 0 1.509 0l1.047 -1.047a1.067 1.067 0 0 0 0 -1.509l-4.907 -4.907l3.113 -2.09a1.2 1.2 0 0 0 -.309 -2.228l-13.582 -3.904l3.904 13.563z"}))}var Dse=["size","color"];function Fse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,Dse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-rotate",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M19.95 11a8 8 0 1 0 -.5 4m.5 5v-5h-5"}))}var Use=["size","color"];function Bse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,Use);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-ruler-2",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M17 3l4 4l-14 14l-4 -4z"}),ae.createElement("path",{d:"M16 7l-1.5 -1.5"}),ae.createElement("path",{d:"M13 10l-1.5 -1.5"}),ae.createElement("path",{d:"M10 13l-1.5 -1.5"}),ae.createElement("path",{d:"M7 16l-1.5 -1.5"}))}var zse=["size","color"];function Hse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,zse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-table-off",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M8 4h10a2 2 0 0 1 2 2v10m-.588 3.417c-.362 .36 -.86 .583 -1.412 .583h-12a2 2 0 0 1 -2 -2v-12c0 -.552 .224 -1.053 .586 -1.414"}),ae.createElement("path",{d:"M4 10h6m4 0h6"}),ae.createElement("path",{d:"M10 4v2m0 4v10"}),ae.createElement("line",{x1:"3",y1:"3",x2:"21",y2:"21"}))}var Wse=["size","color"];function Vse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,Wse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-table",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),ae.createElement("line",{x1:"4",y1:"10",x2:"20",y2:"10"}),ae.createElement("line",{x1:"10",y1:"4",x2:"10",y2:"20"}))}var Gse=["size","color"];function AL(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,Gse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-trash",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("line",{x1:"4",y1:"7",x2:"20",y2:"7"}),ae.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),ae.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}),ae.createElement("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),ae.createElement("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}))}var jse=["size","color"];function RV(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,jse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-upload",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),ae.createElement("polyline",{points:"7 9 12 4 17 9"}),ae.createElement("line",{x1:"12",y1:"4",x2:"12",y2:"16"}))}var $se=["size","color"];function Xse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,$se);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-window",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("path",{d:"M12 3c-3.866 0 -7 3.272 -7 7v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1 -1v-10c0 -3.728 -3.134 -7 -7 -7z"}),ae.createElement("line",{x1:"5",y1:"13",x2:"19",y2:"13"}),ae.createElement("line",{x1:"12",y1:"3",x2:"12",y2:"21"}))}var Yse=["size","color"];function qse(n){var e=n.size,t=e===void 0?24:e,i=n.color,r=i===void 0?"currentColor":i,s=fn(n,Yse);return ae.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-x",width:t,height:t,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},s),ae.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ae.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ae.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))}var Vs=(n=>(n[n.Exterior=0]="Exterior",n[n.LoadBearing=1]="LoadBearing",n[n.Partition=2]="Partition",n))(Vs||{});const CL=Object.freeze({0:{type:0,label:"Zewnętrzna",thickness:40,icon:S2},1:{type:1,label:"Nośna",thickness:25,icon:CV},2:{type:2,label:"Działowa",thickness:15,icon:PV}});var xr=[];for(var hA=0;hA<256;++hA)xr.push((hA+256).toString(16).slice(1));function Zse(n,e=0){return(xr[n[e+0]]+xr[n[e+1]]+xr[n[e+2]]+xr[n[e+3]]+"-"+xr[n[e+4]]+xr[n[e+5]]+"-"+xr[n[e+6]]+xr[n[e+7]]+"-"+xr[n[e+8]]+xr[n[e+9]]+"-"+xr[n[e+10]]+xr[n[e+11]]+xr[n[e+12]]+xr[n[e+13]]+xr[n[e+14]]+xr[n[e+15]]).toLowerCase()}var v_,Kse=new Uint8Array(16);function Qse(){if(!v_&&(v_=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!v_))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return v_(Kse)}var Jse=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const _U={randomUUID:Jse};function IV(n,e,t){if(_U.randomUUID&&!e&&!n)return _U.randomUUID();n=n||{};var i=n.random||(n.rng||Qse)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Zse(i)}const dA={width:1,color:"#1C7ED6"};class wU extends dn{constructor(t){super();ve(this,"text");ve(this,"textStyle",new IS({fontSize:14,fill:0,align:"center",fontFamily:"Arial",letterSpacing:0}));ve(this,"lineContainer",new dn);ve(this,"textContainer",new dn);ve(this,"lineGraphic");ve(this,"lineAGraphic");ve(this,"lineBGraphic");this.eventMode="none",this.visible=!1,this.text=new pW({text:"",style:this.textStyle,resolution:3}),this.textContainer.addChild(this.text),this.addChild(this.textContainer),this.pivot.set(this.width/2,this.height/2),this.lineGraphic=new Vn,this.lineAGraphic=new Vn,this.lineBGraphic=new Vn,this.lineContainer.addChild(this.lineAGraphic),this.lineContainer.addChild(this.lineBGraphic),this.lineContainer.addChild(this.lineGraphic),this.addChild(this.lineContainer),this.watchStoreChanges()}watchStoreChanges(){}checkVisibility(){const t=Lt.getState().focusedElement;if(!t)return this.hide();t instanceof O0||this.show()}show(){this.visible=!0}hide(){this.visible=!1}updateText(t,i,r){i<=90||i>=270?(this.textContainer.scale.y=1,this.textContainer.scale.x=1,this.textContainer.position.x=r.x-this.textContainer.width/2,this.textContainer.position.y=r.y-24):(this.textContainer.scale.y=-1,this.textContainer.scale.x=-1,this.textContainer.position.x=r.x+this.textContainer.width/2,this.textContainer.position.y=r.y-10),this.textContainer.zIndex=998,this.text.text=this.toMeter(t)}update({length:t,angle:i,thickness:r,startX:s,endX:o,offsetY:a}){this.lineAGraphic.clear().moveTo(s,a-6).lineTo(s,a+6).stroke(dA),this.lineBGraphic.clear().moveTo(o,a-6).lineTo(o,a+6).stroke(dA),this.lineGraphic.clear().moveTo(s,a).lineTo(o,a).stroke(dA);const l=a<0,c=l?o+t/2:o-t/2,u=l?0:r+48;this.updateText(t,i,{x:c,y:u})}toMeter(t){return t=Math.abs(t)/Fo,(Math.round(t*100)/100).toFixed(2)+"m"}}var Wh=(n=>(n[n.Left=0]="Left",n[n.Right=1]="Right",n))(Wh||{});const eoe=Object.freeze({0:{type:0,label:"Lewe"},1:{type:1,label:"Prawe"}}),toe=Object.freeze({70:{width:70,label:"70cm"},80:{width:80,label:"80cm"},90:{width:90,label:"90cm"},100:{width:100,label:"100cm"},120:{width:120,label:"120cm"}});var ky=(n=>(n[n.West=0]="West",n[n.East=1]="East",n))(ky||{});const noe=Object.freeze({0:{type:0,label:"Na zewnątrz"},1:{type:1,label:"Do wewnątrz"}});function ac(n,e,t){return e===void 0&&t===void 0?n:e!==void 0&&t===void 0?Math.max(n,e):Math.min(e===void 0&&t!==void 0?n:Math.max(n,e),t)}function PL(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function bU(n){return typeof n!="string"?"":n.charAt(0).toUpperCase()+n.slice(1)}function Jh(n){const e=R.useRef(n);return R.useEffect(()=>{e.current=n}),R.useMemo(()=>(...t)=>{var i;return(i=e.current)==null?void 0:i.call(e,...t)},[])}function DS(n,e){const t=Jh(n),i=R.useRef(0);return R.useEffect(()=>()=>window.clearTimeout(i.current),[]),R.useCallback((...r)=>{window.clearTimeout(i.current),i.current=window.setTimeout(()=>t(...r),e)},[t,e])}const SU=["mousedown","touchstart"];function ioe(n,e,t){const i=R.useRef();return R.useEffect(()=>{const r=s=>{const{target:o}=s??{};if(Array.isArray(t)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";t.every(c=>!!c&&!s.composedPath().includes(c))&&!a&&n()}else i.current&&!i.current.contains(o)&&n()};return(e||SU).forEach(s=>document.addEventListener(s,r)),()=>{(e||SU).forEach(s=>document.removeEventListener(s,r))}},[i,n,t]),i}function roe(n,e){try{return n.addEventListener("change",e),()=>n.removeEventListener("change",e)}catch{return n.addListener(e),()=>n.removeListener(e)}}function soe(n,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(n).matches:!1}function ooe(n,e,{getInitialValueInEffect:t}={getInitialValueInEffect:!0}){const[i,r]=R.useState(t?e:soe(n)),s=R.useRef();return R.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(n),r(s.current.matches),roe(s.current,o=>r(o.matches))},[n]),i}const Ym=typeof document<"u"?R.useLayoutEffect:R.useEffect;function yc(n,e){const t=R.useRef(!1);R.useEffect(()=>()=>{t.current=!1},[]),R.useEffect(()=>{if(t.current)return n();t.current=!0},e)}function LV({opened:n,shouldReturnFocus:e=!0}){const t=R.useRef(),i=()=>{var r;t.current&&"focus"in t.current&&typeof t.current.focus=="function"&&((r=t.current)==null||r.focus({preventScroll:!0}))};return yc(()=>{let r=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(r)};return document.addEventListener("keydown",s),n?t.current=document.activeElement:e&&(r=window.setTimeout(i,10)),()=>{window.clearTimeout(r),document.removeEventListener("keydown",s)}},[n,e]),i}function aoe(n,e="body > :not(script)"){const t=PL(),i=Array.from(document.querySelectorAll(e)).map(r=>{var l;if((l=r==null?void 0:r.shadowRoot)!=null&&l.contains(n)||r.contains(n))return;const s=r.getAttribute("aria-hidden"),o=r.getAttribute("data-hidden"),a=r.getAttribute("data-focus-id");return r.setAttribute("data-focus-id",t),s===null||s==="false"?r.setAttribute("aria-hidden","true"):!o&&!a&&r.setAttribute("data-hidden",s),{node:r,ariaHidden:o||null}});return()=>{i.forEach(r=>{!r||t!==r.node.getAttribute("data-focus-id")||(r.ariaHidden===null?r.node.removeAttribute("aria-hidden"):r.node.setAttribute("aria-hidden",r.ariaHidden),r.node.removeAttribute("data-focus-id"),r.node.removeAttribute("data-hidden"))})}}const loe=/input|select|textarea|button|object/,NV="a, input, select, textarea, button, object, [tabindex]";function coe(n){return n.style.display==="none"}function uoe(n){if(n.getAttribute("aria-hidden")||n.getAttribute("hidden")||n.getAttribute("type")==="hidden")return!1;let t=n;for(;t&&!(t===document.body||t.nodeType===11);){if(coe(t))return!1;t=t.parentNode}return!0}function kV(n){let e=n.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function E2(n){const e=n.nodeName.toLowerCase(),t=!Number.isNaN(kV(n));return(loe.test(e)&&!n.disabled||n instanceof HTMLAnchorElement&&n.href||t)&&uoe(n)}function OV(n){const e=kV(n);return(Number.isNaN(e)||e>=0)&&E2(n)}function hoe(n){return Array.from(n.querySelectorAll(NV)).filter(OV)}function doe(n,e){const t=hoe(n);if(!t.length){e.preventDefault();return}const i=t[e.shiftKey?0:t.length-1],r=n.getRootNode();let s=i===r.activeElement||n===r.activeElement;const o=r.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=t.filter(u=>u.getAttribute("type")==="radio"&&u.getAttribute("name")===o.getAttribute("name")).includes(i)),!s)return;e.preventDefault();const l=t[e.shiftKey?t.length-1:0];l&&l.focus()}function foe(n=!0){const e=R.useRef(),t=R.useRef(null),i=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(NV));o=a.find(OV)||a.find(E2)||null,!o&&E2(s)&&(o=s)}o&&o.focus({preventScroll:!0})},r=R.useCallback(s=>{if(n){if(s===null){t.current&&(t.current(),t.current=null);return}t.current=aoe(s),e.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&i(s)}),e.current=s):e.current=null)}},[n]);return R.useEffect(()=>{if(!n)return;e.current&&setTimeout(()=>i(e.current));const s=o=>{o.key==="Tab"&&e.current&&doe(e.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),t.current&&t.current()}},[n]),r}const poe=n=>(n+1)%1e6;function moe(){const[,n]=R.useReducer(poe,0);return n}const goe=ae.useId||(()=>{});function yoe(){const n=goe();return n?`mantine-${n.replace(/:/g,"")}`:""}function qm(n){const e=yoe(),[t,i]=R.useState(e);return Ym(()=>{i(PL())},[]),typeof n=="string"?n:typeof window>"u"?e:t}function DV(n,e,t){R.useEffect(()=>(window.addEventListener(n,e,t),()=>window.removeEventListener(n,e,t)),[n,e])}function FS(n,e){typeof n=="function"?n(e):typeof n=="object"&&n!==null&&"current"in n&&(n.current=e)}function voe(...n){return e=>{n.forEach(t=>FS(t,e))}}function mr(...n){return R.useCallback(voe(...n),n)}function xoe(n,e,t="ltr"){const i=R.useRef(null),r=R.useRef(!1),s=R.useRef(!1),o=R.useRef(0),[a,l]=R.useState(!1);return R.useEffect(()=>{r.current=!0},[]),R.useEffect(()=>{var w,_;const c=({x:b,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(r.current&&i.current){i.current.style.userSelect="none";const M=i.current.getBoundingClientRect();if(M.width&&M.height){const C=ac((b-M.left)/M.width,0,1);n({x:t==="ltr"?C:1-C,y:ac((E-M.top)/M.height,0,1)})}}})},u=()=>{document.addEventListener("mousemove",x),document.addEventListener("mouseup",f),document.addEventListener("touchmove",y),document.addEventListener("touchend",f)},h=()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",f),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",f)},d=()=>{!s.current&&r.current&&(s.current=!0,typeof(e==null?void 0:e.onScrubStart)=="function"&&e.onScrubStart(),l(!0),u())},f=()=>{s.current&&r.current&&(s.current=!1,l(!1),h(),setTimeout(()=>{typeof(e==null?void 0:e.onScrubEnd)=="function"&&e.onScrubEnd()},0))},p=b=>{d(),b.preventDefault(),x(b)},x=b=>c({x:b.clientX,y:b.clientY}),v=b=>{b.cancelable&&b.preventDefault(),d(),y(b)},y=b=>{b.cancelable&&b.preventDefault(),c({x:b.changedTouches[0].clientX,y:b.changedTouches[0].clientY})};return(w=i.current)==null||w.addEventListener("mousedown",p),(_=i.current)==null||_.addEventListener("touchstart",v,{passive:!1}),()=>{i.current&&(i.current.removeEventListener("mousedown",p),i.current.removeEventListener("touchstart",v))}},[t,n]),{ref:i,active:a}}function Od({value:n,defaultValue:e,finalValue:t,onChange:i=()=>{}}){const[r,s]=R.useState(e!==void 0?e:t),o=(a,...l)=>{s(a),i==null||i(a,...l)};return n!==void 0?[n,i,!0]:[r,o,!1]}function RL(n,e){return ooe("(prefers-reduced-motion: reduce)",n,e)}function _oe(n=!1,e){const{onOpen:t,onClose:i}={},[r,s]=R.useState(n),o=R.useCallback(()=>{s(c=>c||(t==null||t(),!0))},[t]),a=R.useCallback(()=>{s(c=>c&&(i==null||i(),!1))},[i]),l=R.useCallback(()=>{r?a():o()},[a,o,r]);return[r,{open:o,close:a,toggle:l}]}function woe(n){const e=R.useRef();return R.useEffect(()=>{e.current=n},[n]),e.current}function boe(n){let e=n,t=!1;const i=new Set;return{getState(){return e},updateState(r){e=typeof r=="function"?r(e):r},setState(r){this.updateState(r),i.forEach(s=>s(e))},initialize(r){t||(e=r,t=!0)},subscribe(r){return i.add(r),()=>i.delete(r)}}}function Soe(n){return R.useSyncExternalStore(n.subscribe,()=>n.getState(),()=>n.getState())}function Eoe(n,e,t){const i=[],r=[],s={};for(const o of n){const a=o.position||e;s[a]=s[a]||0,s[a]+=1,s[a]<=t?r.push(o):i.push(o)}return{notifications:r,queue:i}}const Moe=()=>boe({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),Zd=Moe(),Toe=(n=Zd)=>Soe(n);function Zm(n,e){const t=n.getState(),i=e([...t.notifications,...t.queue]),r=Eoe(i,t.defaultPosition,t.limit);n.setState({notifications:r.notifications,queue:r.queue,limit:t.limit,defaultPosition:t.defaultPosition})}function vl(n,e=Zd){const t=n.id||PL();return Zm(e,i=>n.id&&i.some(r=>r.id===n.id)?i:[...i,{...n,id:t}]),t}function FV(n,e=Zd){return Zm(e,t=>t.filter(i=>{var r;return i.id===n?((r=i.onClose)==null||r.call(i,i),!1):!0})),n}function Aoe(n,e=Zd){return Zm(e,t=>t.map(i=>i.id===n.id?{...i,...n}:i)),n.id}function dc(n=Zd){Zm(n,()=>[])}function Coe(n=Zd){Zm(n,e=>e.slice(0,n.getState().limit))}const Wr={show:vl,hide:FV,update:Aoe,clean:dc,cleanQueue:Coe,updateState:Zm};function Ta(){return Ta=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ta.apply(null,arguments)}function UV(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;t[i]=n[i]}return t}function M2(n,e){return M2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},M2(n,e)}function BV(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,M2(n,e)}var zV={exports:{}},Poe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Roe=Poe,Ioe=Roe;function HV(){}function WV(){}WV.resetWarningCache=HV;var Loe=function(){function n(i,r,s,o,a,l){if(l!==Ioe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:WV,resetWarningCache:HV};return t.PropTypes=t,t};zV.exports=Loe();var Noe=zV.exports;const Un=Ia(Noe);var VV={exports:{}},io={},GV={exports:{}},jV={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,W){var D=O.length;O.push(W);e:for(;0<D;){var Y=D-1>>>1,Q=O[Y];if(0<r(Q,W))O[Y]=W,O[D]=Q,D=Y;else break e}}function t(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var W=O[0],D=O.pop();if(D!==W){O[0]=D;e:for(var Y=0,Q=O.length,re=Q>>>1;Y<re;){var ce=2*(Y+1)-1,oe=O[ce],he=ce+1,Re=O[he];if(0>r(oe,D))he<Q&&0>r(Re,oe)?(O[Y]=Re,O[he]=D,Y=he):(O[Y]=oe,O[ce]=D,Y=ce);else if(he<Q&&0>r(Re,D))O[Y]=Re,O[he]=D,Y=he;else break e}}return W}function r(O,W){var D=O.sortIndex-W.sortIndex;return D!==0?D:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,p=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(O){for(var W=t(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=O)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function b(O){if(x=!1,_(O),!p)if(t(l)!==null)p=!0,H(E);else{var W=t(c);W!==null&&Z(b,W.startTime-O)}}function E(O,W){p=!1,x&&(x=!1,y(P),P=-1),f=!0;var D=d;try{for(_(W),h=t(l);h!==null&&(!(h.expirationTime>W)||O&&!U());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,d=h.priorityLevel;var Q=Y(h.expirationTime<=W);W=n.unstable_now(),typeof Q=="function"?h.callback=Q:h===t(l)&&i(l),_(W)}else i(l);h=t(l)}if(h!==null)var re=!0;else{var ce=t(c);ce!==null&&Z(b,ce.startTime-W),re=!1}return re}finally{h=null,d=D,f=!1}}var M=!1,C=null,P=-1,T=5,I=-1;function U(){return!(n.unstable_now()-I<T)}function j(){if(C!==null){var O=n.unstable_now();I=O;var W=!0;try{W=C(!0,O)}finally{W?B():(M=!1,C=null)}}else M=!1}var B;if(typeof w=="function")B=function(){w(j)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,$=z.port2;z.port1.onmessage=j,B=function(){$.postMessage(null)}}else B=function(){v(j,0)};function H(O){C=O,M||(M=!0,B())}function Z(O,W){P=v(function(){O(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){p||f||(p=!0,H(E))},n.unstable_forceFrameRate=function(O){0>O||125<O||(T=0<O?Math.floor(1e3/O):5)},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(d){case 1:case 2:case 3:var W=3;break;default:W=d}var D=d;d=W;try{return O()}finally{d=D}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var D=d;d=O;try{return W()}finally{d=D}},n.unstable_scheduleCallback=function(O,W,D){var Y=n.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?Y+D:Y):D=Y,O){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=D+Q,O={id:u++,callback:W,priorityLevel:O,startTime:D,expirationTime:Q,sortIndex:-1},D>Y?(O.sortIndex=D,e(c,O),t(l)===null&&O===t(c)&&(x?(y(P),P=-1):x=!0,Z(b,D-Y))):(O.sortIndex=Q,e(l,O),p||f||(p=!0,H(E))),O},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(O){var W=d;return function(){var D=d;d=W;try{return O.apply(this,arguments)}finally{d=D}}}})(jV);GV.exports=jV;var koe=GV.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ooe=R,eo=koe;function Ke(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $V=new Set,Av={};function Kd(n,e){_m(n,e),_m(n+"Capture",e)}function _m(n,e){for(Av[n]=e,n=0;n<e.length;n++)$V.add(e[n])}var vc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),T2=Object.prototype.hasOwnProperty,Doe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,EU={},MU={};function Foe(n){return T2.call(MU,n)?!0:T2.call(EU,n)?!1:Doe.test(n)?MU[n]=!0:(EU[n]=!0,!1)}function Uoe(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Boe(n,e,t,i){if(e===null||typeof e>"u"||Uoe(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hs(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Pr[n]=new hs(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Pr[e]=new hs(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Pr[n]=new hs(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Pr[n]=new hs(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Pr[n]=new hs(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Pr[n]=new hs(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Pr[n]=new hs(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Pr[n]=new hs(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Pr[n]=new hs(n,5,!1,n.toLowerCase(),null,!1,!1)});var IL=/[\-:]([a-z])/g;function LL(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(IL,LL);Pr[e]=new hs(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(IL,LL);Pr[e]=new hs(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(IL,LL);Pr[e]=new hs(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Pr[n]=new hs(n,1,!1,n.toLowerCase(),null,!1,!1)});Pr.xlinkHref=new hs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Pr[n]=new hs(n,1,!1,n.toLowerCase(),null,!0,!0)});function NL(n,e,t,i){var r=Pr.hasOwnProperty(e)?Pr[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Boe(e,t,r,i)&&(t=null),i||r===null?Foe(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Ac=Ooe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x_=Symbol.for("react.element"),Rp=Symbol.for("react.portal"),Ip=Symbol.for("react.fragment"),kL=Symbol.for("react.strict_mode"),A2=Symbol.for("react.profiler"),XV=Symbol.for("react.provider"),YV=Symbol.for("react.context"),OL=Symbol.for("react.forward_ref"),C2=Symbol.for("react.suspense"),P2=Symbol.for("react.suspense_list"),DL=Symbol.for("react.memo"),iu=Symbol.for("react.lazy"),qV=Symbol.for("react.offscreen"),TU=Symbol.iterator;function jg(n){return n===null||typeof n!="object"?null:(n=TU&&n[TU]||n["@@iterator"],typeof n=="function"?n:null)}var gi=Object.assign,fA;function Oy(n){if(fA===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);fA=e&&e[1]||""}return`
`+fA+n}var pA=!1;function mA(n,e){if(!n||pA)return"";pA=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{pA=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Oy(n):""}function zoe(n){switch(n.tag){case 5:return Oy(n.type);case 16:return Oy("Lazy");case 13:return Oy("Suspense");case 19:return Oy("SuspenseList");case 0:case 2:case 15:return n=mA(n.type,!1),n;case 11:return n=mA(n.type.render,!1),n;case 1:return n=mA(n.type,!0),n;default:return""}}function R2(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ip:return"Fragment";case Rp:return"Portal";case A2:return"Profiler";case kL:return"StrictMode";case C2:return"Suspense";case P2:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case YV:return(n.displayName||"Context")+".Consumer";case XV:return(n._context.displayName||"Context")+".Provider";case OL:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case DL:return e=n.displayName||null,e!==null?e:R2(n.type)||"Memo";case iu:e=n._payload,n=n._init;try{return R2(n(e))}catch{}}return null}function Hoe(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R2(e);case 8:return e===kL?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Uu(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ZV(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Woe(n){var e=ZV(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function __(n){n._valueTracker||(n._valueTracker=Woe(n))}function KV(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=ZV(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Ab(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function I2(n,e){var t=e.checked;return gi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function AU(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Uu(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function QV(n,e){e=e.checked,e!=null&&NL(n,"checked",e,!1)}function L2(n,e){QV(n,e);var t=Uu(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?N2(n,e.type,t):e.hasOwnProperty("defaultValue")&&N2(n,e.type,Uu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function CU(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function N2(n,e,t){(e!=="number"||Ab(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Dy=Array.isArray;function em(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Uu(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function k2(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ke(91));return gi({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function PU(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ke(92));if(Dy(t)){if(1<t.length)throw Error(Ke(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Uu(t)}}function JV(n,e){var t=Uu(e.value),i=Uu(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function RU(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function eG(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function O2(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?eG(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var w_,tG=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(w_=w_||document.createElement("div"),w_.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=w_.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Cv(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ky={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Voe=["Webkit","ms","Moz","O"];Object.keys(Ky).forEach(function(n){Voe.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ky[e]=Ky[n]})});function nG(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ky.hasOwnProperty(n)&&Ky[n]?(""+e).trim():e+"px"}function iG(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=nG(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var Goe=gi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function D2(n,e){if(e){if(Goe[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ke(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ke(62))}}function F2(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var U2=null;function FL(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var B2=null,tm=null,nm=null;function IU(n){if(n=E0(n)){if(typeof B2!="function")throw Error(Ke(280));var e=n.stateNode;e&&(e=WS(e),B2(n.stateNode,n.type,e))}}function rG(n){tm?nm?nm.push(n):nm=[n]:tm=n}function sG(){if(tm){var n=tm,e=nm;if(nm=tm=null,IU(n),e)for(n=0;n<e.length;n++)IU(e[n])}}function oG(n,e){return n(e)}function aG(){}var gA=!1;function lG(n,e,t){if(gA)return n(e,t);gA=!0;try{return oG(n,e,t)}finally{gA=!1,(tm!==null||nm!==null)&&(aG(),sG())}}function Pv(n,e){var t=n.stateNode;if(t===null)return null;var i=WS(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ke(231,e,typeof t));return t}var z2=!1;if(vc)try{var $g={};Object.defineProperty($g,"passive",{get:function(){z2=!0}}),window.addEventListener("test",$g,$g),window.removeEventListener("test",$g,$g)}catch{z2=!1}function joe(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Qy=!1,Cb=null,Pb=!1,H2=null,$oe={onError:function(n){Qy=!0,Cb=n}};function Xoe(n,e,t,i,r,s,o,a,l){Qy=!1,Cb=null,joe.apply($oe,arguments)}function Yoe(n,e,t,i,r,s,o,a,l){if(Xoe.apply(this,arguments),Qy){if(Qy){var c=Cb;Qy=!1,Cb=null}else throw Error(Ke(198));Pb||(Pb=!0,H2=c)}}function Qd(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function cG(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function LU(n){if(Qd(n)!==n)throw Error(Ke(188))}function qoe(n){var e=n.alternate;if(!e){if(e=Qd(n),e===null)throw Error(Ke(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return LU(r),n;if(s===i)return LU(r),e;s=s.sibling}throw Error(Ke(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Ke(189))}}if(t.alternate!==i)throw Error(Ke(190))}if(t.tag!==3)throw Error(Ke(188));return t.stateNode.current===t?n:e}function uG(n){return n=qoe(n),n!==null?hG(n):null}function hG(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=hG(n);if(e!==null)return e;n=n.sibling}return null}var dG=eo.unstable_scheduleCallback,NU=eo.unstable_cancelCallback,Zoe=eo.unstable_shouldYield,Koe=eo.unstable_requestPaint,Ii=eo.unstable_now,Qoe=eo.unstable_getCurrentPriorityLevel,UL=eo.unstable_ImmediatePriority,fG=eo.unstable_UserBlockingPriority,Rb=eo.unstable_NormalPriority,Joe=eo.unstable_LowPriority,pG=eo.unstable_IdlePriority,US=null,xl=null;function eae(n){if(xl&&typeof xl.onCommitFiberRoot=="function")try{xl.onCommitFiberRoot(US,n,void 0,(n.current.flags&128)===128)}catch{}}var Sa=Math.clz32?Math.clz32:iae,tae=Math.log,nae=Math.LN2;function iae(n){return n>>>=0,n===0?32:31-(tae(n)/nae|0)|0}var b_=64,S_=4194304;function Fy(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ib(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Fy(a):(s&=o,s!==0&&(i=Fy(s)))}else o=t&~r,o!==0?i=Fy(o):s!==0&&(i=Fy(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Sa(e),r=1<<t,i|=n[t],e&=~r;return i}function rae(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sae(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Sa(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=rae(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function W2(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function mG(){var n=b_;return b_<<=1,!(b_&4194240)&&(b_=64),n}function yA(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function b0(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Sa(e),n[e]=t}function oae(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Sa(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function BL(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Sa(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var In=0;function gG(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var yG,zL,vG,xG,_G,V2=!1,E_=[],Eu=null,Mu=null,Tu=null,Rv=new Map,Iv=new Map,hu=[],aae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kU(n,e){switch(n){case"focusin":case"focusout":Eu=null;break;case"dragenter":case"dragleave":Mu=null;break;case"mouseover":case"mouseout":Tu=null;break;case"pointerover":case"pointerout":Rv.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Iv.delete(e.pointerId)}}function Xg(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=E0(e),e!==null&&zL(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function lae(n,e,t,i,r){switch(e){case"focusin":return Eu=Xg(Eu,n,e,t,i,r),!0;case"dragenter":return Mu=Xg(Mu,n,e,t,i,r),!0;case"mouseover":return Tu=Xg(Tu,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Rv.set(s,Xg(Rv.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Iv.set(s,Xg(Iv.get(s)||null,n,e,t,i,r)),!0}return!1}function wG(n){var e=ad(n.target);if(e!==null){var t=Qd(e);if(t!==null){if(e=t.tag,e===13){if(e=cG(t),e!==null){n.blockedOn=e,_G(n.priority,function(){vG(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function L1(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=G2(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);U2=i,t.target.dispatchEvent(i),U2=null}else return e=E0(t),e!==null&&zL(e),n.blockedOn=t,!1;e.shift()}return!0}function OU(n,e,t){L1(n)&&t.delete(e)}function cae(){V2=!1,Eu!==null&&L1(Eu)&&(Eu=null),Mu!==null&&L1(Mu)&&(Mu=null),Tu!==null&&L1(Tu)&&(Tu=null),Rv.forEach(OU),Iv.forEach(OU)}function Yg(n,e){n.blockedOn===e&&(n.blockedOn=null,V2||(V2=!0,eo.unstable_scheduleCallback(eo.unstable_NormalPriority,cae)))}function Lv(n){function e(r){return Yg(r,n)}if(0<E_.length){Yg(E_[0],n);for(var t=1;t<E_.length;t++){var i=E_[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Eu!==null&&Yg(Eu,n),Mu!==null&&Yg(Mu,n),Tu!==null&&Yg(Tu,n),Rv.forEach(e),Iv.forEach(e),t=0;t<hu.length;t++)i=hu[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<hu.length&&(t=hu[0],t.blockedOn===null);)wG(t),t.blockedOn===null&&hu.shift()}var im=Ac.ReactCurrentBatchConfig,Lb=!0;function uae(n,e,t,i){var r=In,s=im.transition;im.transition=null;try{In=1,HL(n,e,t,i)}finally{In=r,im.transition=s}}function hae(n,e,t,i){var r=In,s=im.transition;im.transition=null;try{In=4,HL(n,e,t,i)}finally{In=r,im.transition=s}}function HL(n,e,t,i){if(Lb){var r=G2(n,e,t,i);if(r===null)AA(n,e,i,Nb,t),kU(n,i);else if(lae(r,n,e,t,i))i.stopPropagation();else if(kU(n,i),e&4&&-1<aae.indexOf(n)){for(;r!==null;){var s=E0(r);if(s!==null&&yG(s),s=G2(n,e,t,i),s===null&&AA(n,e,i,Nb,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else AA(n,e,i,null,t)}}var Nb=null;function G2(n,e,t,i){if(Nb=null,n=FL(i),n=ad(n),n!==null)if(e=Qd(n),e===null)n=null;else if(t=e.tag,t===13){if(n=cG(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Nb=n,null}function bG(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qoe()){case UL:return 1;case fG:return 4;case Rb:case Joe:return 16;case pG:return 536870912;default:return 16}default:return 16}}var vu=null,WL=null,N1=null;function SG(){if(N1)return N1;var n,e=WL,t=e.length,i,r="value"in vu?vu.value:vu.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return N1=r.slice(n,1<i?1-i:void 0)}function k1(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function M_(){return!0}function DU(){return!1}function ro(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?M_:DU,this.isPropagationStopped=DU,this}return gi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=M_)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=M_)},persist:function(){},isPersistent:M_}),e}var Km={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},VL=ro(Km),S0=gi({},Km,{view:0,detail:0}),dae=ro(S0),vA,xA,qg,BS=gi({},S0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:GL,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==qg&&(qg&&n.type==="mousemove"?(vA=n.screenX-qg.screenX,xA=n.screenY-qg.screenY):xA=vA=0,qg=n),vA)},movementY:function(n){return"movementY"in n?n.movementY:xA}}),FU=ro(BS),fae=gi({},BS,{dataTransfer:0}),pae=ro(fae),mae=gi({},S0,{relatedTarget:0}),_A=ro(mae),gae=gi({},Km,{animationName:0,elapsedTime:0,pseudoElement:0}),yae=ro(gae),vae=gi({},Km,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),xae=ro(vae),_ae=gi({},Km,{data:0}),UU=ro(_ae),wae={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bae={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sae={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eae(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Sae[n])?!!e[n]:!1}function GL(){return Eae}var Mae=gi({},S0,{key:function(n){if(n.key){var e=wae[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=k1(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?bae[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:GL,charCode:function(n){return n.type==="keypress"?k1(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?k1(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Tae=ro(Mae),Aae=gi({},BS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),BU=ro(Aae),Cae=gi({},S0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:GL}),Pae=ro(Cae),Rae=gi({},Km,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iae=ro(Rae),Lae=gi({},BS,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Nae=ro(Lae),kae=[9,13,27,32],jL=vc&&"CompositionEvent"in window,Jy=null;vc&&"documentMode"in document&&(Jy=document.documentMode);var Oae=vc&&"TextEvent"in window&&!Jy,EG=vc&&(!jL||Jy&&8<Jy&&11>=Jy),zU=" ",HU=!1;function MG(n,e){switch(n){case"keyup":return kae.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TG(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Lp=!1;function Dae(n,e){switch(n){case"compositionend":return TG(e);case"keypress":return e.which!==32?null:(HU=!0,zU);case"textInput":return n=e.data,n===zU&&HU?null:n;default:return null}}function Fae(n,e){if(Lp)return n==="compositionend"||!jL&&MG(n,e)?(n=SG(),N1=WL=vu=null,Lp=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return EG&&e.locale!=="ko"?null:e.data;default:return null}}var Uae={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function WU(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Uae[n.type]:e==="textarea"}function AG(n,e,t,i){rG(i),e=kb(e,"onChange"),0<e.length&&(t=new VL("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var ev=null,Nv=null;function Bae(n){UG(n,0)}function zS(n){var e=Op(n);if(KV(e))return n}function zae(n,e){if(n==="change")return e}var CG=!1;if(vc){var wA;if(vc){var bA="oninput"in document;if(!bA){var VU=document.createElement("div");VU.setAttribute("oninput","return;"),bA=typeof VU.oninput=="function"}wA=bA}else wA=!1;CG=wA&&(!document.documentMode||9<document.documentMode)}function GU(){ev&&(ev.detachEvent("onpropertychange",PG),Nv=ev=null)}function PG(n){if(n.propertyName==="value"&&zS(Nv)){var e=[];AG(e,Nv,n,FL(n)),lG(Bae,e)}}function Hae(n,e,t){n==="focusin"?(GU(),ev=e,Nv=t,ev.attachEvent("onpropertychange",PG)):n==="focusout"&&GU()}function Wae(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return zS(Nv)}function Vae(n,e){if(n==="click")return zS(e)}function Gae(n,e){if(n==="input"||n==="change")return zS(e)}function jae(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Aa=typeof Object.is=="function"?Object.is:jae;function kv(n,e){if(Aa(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!T2.call(e,r)||!Aa(n[r],e[r]))return!1}return!0}function jU(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function $U(n,e){var t=jU(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=jU(t)}}function RG(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?RG(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function IG(){for(var n=window,e=Ab();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Ab(n.document)}return e}function $L(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function $ae(n){var e=IG(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&RG(t.ownerDocument.documentElement,t)){if(i!==null&&$L(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=$U(t,s);var o=$U(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Xae=vc&&"documentMode"in document&&11>=document.documentMode,Np=null,j2=null,tv=null,$2=!1;function XU(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;$2||Np==null||Np!==Ab(i)||(i=Np,"selectionStart"in i&&$L(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),tv&&kv(tv,i)||(tv=i,i=kb(j2,"onSelect"),0<i.length&&(e=new VL("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Np)))}function T_(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var kp={animationend:T_("Animation","AnimationEnd"),animationiteration:T_("Animation","AnimationIteration"),animationstart:T_("Animation","AnimationStart"),transitionend:T_("Transition","TransitionEnd")},SA={},LG={};vc&&(LG=document.createElement("div").style,"AnimationEvent"in window||(delete kp.animationend.animation,delete kp.animationiteration.animation,delete kp.animationstart.animation),"TransitionEvent"in window||delete kp.transitionend.transition);function HS(n){if(SA[n])return SA[n];if(!kp[n])return n;var e=kp[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in LG)return SA[n]=e[t];return n}var NG=HS("animationend"),kG=HS("animationiteration"),OG=HS("animationstart"),DG=HS("transitionend"),FG=new Map,YU="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zu(n,e){FG.set(n,e),Kd(e,[n])}for(var EA=0;EA<YU.length;EA++){var MA=YU[EA],Yae=MA.toLowerCase(),qae=MA[0].toUpperCase()+MA.slice(1);Zu(Yae,"on"+qae)}Zu(NG,"onAnimationEnd");Zu(kG,"onAnimationIteration");Zu(OG,"onAnimationStart");Zu("dblclick","onDoubleClick");Zu("focusin","onFocus");Zu("focusout","onBlur");Zu(DG,"onTransitionEnd");_m("onMouseEnter",["mouseout","mouseover"]);_m("onMouseLeave",["mouseout","mouseover"]);_m("onPointerEnter",["pointerout","pointerover"]);_m("onPointerLeave",["pointerout","pointerover"]);Kd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zae=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uy));function qU(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,Yoe(i,e,void 0,n),n.currentTarget=null}function UG(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;qU(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;qU(r,a,c),s=l}}}if(Pb)throw n=H2,Pb=!1,H2=null,n}function qn(n,e){var t=e[K2];t===void 0&&(t=e[K2]=new Set);var i=n+"__bubble";t.has(i)||(BG(e,n,2,!1),t.add(i))}function TA(n,e,t){var i=0;e&&(i|=4),BG(t,n,i,e)}var A_="_reactListening"+Math.random().toString(36).slice(2);function Ov(n){if(!n[A_]){n[A_]=!0,$V.forEach(function(t){t!=="selectionchange"&&(Zae.has(t)||TA(t,!1,n),TA(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[A_]||(e[A_]=!0,TA("selectionchange",!1,e))}}function BG(n,e,t,i){switch(bG(e)){case 1:var r=uae;break;case 4:r=hae;break;default:r=HL}t=r.bind(null,e,t,n),r=void 0,!z2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function AA(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ad(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}lG(function(){var c=s,u=FL(t),h=[];e:{var d=FG.get(n);if(d!==void 0){var f=VL,p=n;switch(n){case"keypress":if(k1(t)===0)break e;case"keydown":case"keyup":f=Tae;break;case"focusin":p="focus",f=_A;break;case"focusout":p="blur",f=_A;break;case"beforeblur":case"afterblur":f=_A;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=FU;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=pae;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Pae;break;case NG:case kG:case OG:f=yae;break;case DG:f=Iae;break;case"scroll":f=dae;break;case"wheel":f=Nae;break;case"copy":case"cut":case"paste":f=xae;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=BU}var x=(e&4)!==0,v=!x&&n==="scroll",y=x?d!==null?d+"Capture":null:d;x=[];for(var w=c,_;w!==null;){_=w;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,y!==null&&(b=Pv(w,y),b!=null&&x.push(Dv(w,b,_)))),v)break;w=w.return}0<x.length&&(d=new f(d,p,null,t,u),h.push({event:d,listeners:x}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",d&&t!==U2&&(p=t.relatedTarget||t.fromElement)&&(ad(p)||p[xc]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=t.relatedTarget||t.toElement,f=c,p=p?ad(p):null,p!==null&&(v=Qd(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(x=FU,b="onMouseLeave",y="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(x=BU,b="onPointerLeave",y="onPointerEnter",w="pointer"),v=f==null?d:Op(f),_=p==null?d:Op(p),d=new x(b,w+"leave",f,t,u),d.target=v,d.relatedTarget=_,b=null,ad(u)===c&&(x=new x(y,w+"enter",p,t,u),x.target=_,x.relatedTarget=v,b=x),v=b,f&&p)t:{for(x=f,y=p,w=0,_=x;_;_=Tf(_))w++;for(_=0,b=y;b;b=Tf(b))_++;for(;0<w-_;)x=Tf(x),w--;for(;0<_-w;)y=Tf(y),_--;for(;w--;){if(x===y||y!==null&&x===y.alternate)break t;x=Tf(x),y=Tf(y)}x=null}else x=null;f!==null&&ZU(h,d,f,x,!1),p!==null&&v!==null&&ZU(h,v,p,x,!0)}}e:{if(d=c?Op(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var E=zae;else if(WU(d))if(CG)E=Gae;else{E=Wae;var M=Hae}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=Vae);if(E&&(E=E(n,c))){AG(h,E,t,u);break e}M&&M(n,d,c),n==="focusout"&&(M=d._wrapperState)&&M.controlled&&d.type==="number"&&N2(d,"number",d.value)}switch(M=c?Op(c):window,n){case"focusin":(WU(M)||M.contentEditable==="true")&&(Np=M,j2=c,tv=null);break;case"focusout":tv=j2=Np=null;break;case"mousedown":$2=!0;break;case"contextmenu":case"mouseup":case"dragend":$2=!1,XU(h,t,u);break;case"selectionchange":if(Xae)break;case"keydown":case"keyup":XU(h,t,u)}var C;if(jL)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Lp?MG(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(EG&&t.locale!=="ko"&&(Lp||P!=="onCompositionStart"?P==="onCompositionEnd"&&Lp&&(C=SG()):(vu=u,WL="value"in vu?vu.value:vu.textContent,Lp=!0)),M=kb(c,P),0<M.length&&(P=new UU(P,n,null,t,u),h.push({event:P,listeners:M}),C?P.data=C:(C=TG(t),C!==null&&(P.data=C)))),(C=Oae?Dae(n,t):Fae(n,t))&&(c=kb(c,"onBeforeInput"),0<c.length&&(u=new UU("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=C))}UG(h,e)})}function Dv(n,e,t){return{instance:n,listener:e,currentTarget:t}}function kb(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Pv(n,t),s!=null&&i.unshift(Dv(n,s,r)),s=Pv(n,e),s!=null&&i.push(Dv(n,s,r))),n=n.return}return i}function Tf(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ZU(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Pv(t,s),l!=null&&o.unshift(Dv(t,l,a))):r||(l=Pv(t,s),l!=null&&o.push(Dv(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Kae=/\r\n?/g,Qae=/\u0000|\uFFFD/g;function KU(n){return(typeof n=="string"?n:""+n).replace(Kae,`
`).replace(Qae,"")}function C_(n,e,t){if(e=KU(e),KU(n)!==e&&t)throw Error(Ke(425))}function Ob(){}var X2=null,Y2=null;function q2(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Z2=typeof setTimeout=="function"?setTimeout:void 0,Jae=typeof clearTimeout=="function"?clearTimeout:void 0,QU=typeof Promise=="function"?Promise:void 0,ele=typeof queueMicrotask=="function"?queueMicrotask:typeof QU<"u"?function(n){return QU.resolve(null).then(n).catch(tle)}:Z2;function tle(n){setTimeout(function(){throw n})}function CA(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Lv(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Lv(e)}function Au(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function JU(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Qm=Math.random().toString(36).slice(2),al="__reactFiber$"+Qm,Fv="__reactProps$"+Qm,xc="__reactContainer$"+Qm,K2="__reactEvents$"+Qm,nle="__reactListeners$"+Qm,ile="__reactHandles$"+Qm;function ad(n){var e=n[al];if(e)return e;for(var t=n.parentNode;t;){if(e=t[xc]||t[al]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=JU(n);n!==null;){if(t=n[al])return t;n=JU(n)}return e}n=t,t=n.parentNode}return null}function E0(n){return n=n[al]||n[xc],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Op(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ke(33))}function WS(n){return n[Fv]||null}var Q2=[],Dp=-1;function Ku(n){return{current:n}}function Jn(n){0>Dp||(n.current=Q2[Dp],Q2[Dp]=null,Dp--)}function jn(n,e){Dp++,Q2[Dp]=n.current,n.current=e}var Bu={},qr=Ku(Bu),Ss=Ku(!1),Dd=Bu;function wm(n,e){var t=n.type.contextTypes;if(!t)return Bu;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Es(n){return n=n.childContextTypes,n!=null}function Db(){Jn(Ss),Jn(qr)}function eB(n,e,t){if(qr.current!==Bu)throw Error(Ke(168));jn(qr,e),jn(Ss,t)}function zG(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ke(108,Hoe(n)||"Unknown",r));return gi({},t,i)}function Fb(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Bu,Dd=qr.current,jn(qr,n),jn(Ss,Ss.current),!0}function tB(n,e,t){var i=n.stateNode;if(!i)throw Error(Ke(169));t?(n=zG(n,e,Dd),i.__reactInternalMemoizedMergedChildContext=n,Jn(Ss),Jn(qr),jn(qr,n)):Jn(Ss),jn(Ss,t)}var rc=null,VS=!1,PA=!1;function HG(n){rc===null?rc=[n]:rc.push(n)}function rle(n){VS=!0,HG(n)}function Qu(){if(!PA&&rc!==null){PA=!0;var n=0,e=In;try{var t=rc;for(In=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}rc=null,VS=!1}catch(r){throw rc!==null&&(rc=rc.slice(n+1)),dG(UL,Qu),r}finally{In=e,PA=!1}}return null}var Fp=[],Up=0,Ub=null,Bb=0,Eo=[],Mo=0,Fd=null,lc=1,cc="";function Vh(n,e){Fp[Up++]=Bb,Fp[Up++]=Ub,Ub=n,Bb=e}function WG(n,e,t){Eo[Mo++]=lc,Eo[Mo++]=cc,Eo[Mo++]=Fd,Fd=n;var i=lc;n=cc;var r=32-Sa(i)-1;i&=~(1<<r),t+=1;var s=32-Sa(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,lc=1<<32-Sa(e)+r|t<<r|i,cc=s+n}else lc=1<<s|t<<r|i,cc=n}function XL(n){n.return!==null&&(Vh(n,1),WG(n,1,0))}function YL(n){for(;n===Ub;)Ub=Fp[--Up],Fp[Up]=null,Bb=Fp[--Up],Fp[Up]=null;for(;n===Fd;)Fd=Eo[--Mo],Eo[Mo]=null,cc=Eo[--Mo],Eo[Mo]=null,lc=Eo[--Mo],Eo[Mo]=null}var Zs=null,js=null,ii=!1,fa=null;function VG(n,e){var t=Po(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function nB(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Zs=n,js=Au(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Zs=n,js=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Fd!==null?{id:lc,overflow:cc}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Po(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Zs=n,js=null,!0):!1;default:return!1}}function J2(n){return(n.mode&1)!==0&&(n.flags&128)===0}function eR(n){if(ii){var e=js;if(e){var t=e;if(!nB(n,e)){if(J2(n))throw Error(Ke(418));e=Au(t.nextSibling);var i=Zs;e&&nB(n,e)?VG(i,t):(n.flags=n.flags&-4097|2,ii=!1,Zs=n)}}else{if(J2(n))throw Error(Ke(418));n.flags=n.flags&-4097|2,ii=!1,Zs=n}}}function iB(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Zs=n}function P_(n){if(n!==Zs)return!1;if(!ii)return iB(n),ii=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!q2(n.type,n.memoizedProps)),e&&(e=js)){if(J2(n))throw GG(),Error(Ke(418));for(;e;)VG(n,e),e=Au(e.nextSibling)}if(iB(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ke(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){js=Au(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}js=null}}else js=Zs?Au(n.stateNode.nextSibling):null;return!0}function GG(){for(var n=js;n;)n=Au(n.nextSibling)}function bm(){js=Zs=null,ii=!1}function qL(n){fa===null?fa=[n]:fa.push(n)}var sle=Ac.ReactCurrentBatchConfig;function Zg(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ke(309));var i=t.stateNode}if(!i)throw Error(Ke(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ke(284));if(!t._owner)throw Error(Ke(290,n))}return n}function R_(n,e){throw n=Object.prototype.toString.call(e),Error(Ke(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function rB(n){var e=n._init;return e(n._payload)}function jG(n){function e(y,w){if(n){var _=y.deletions;_===null?(y.deletions=[w],y.flags|=16):_.push(w)}}function t(y,w){if(!n)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function i(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function r(y,w){return y=Iu(y,w),y.index=0,y.sibling=null,y}function s(y,w,_){return y.index=_,n?(_=y.alternate,_!==null?(_=_.index,_<w?(y.flags|=2,w):_):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,w,_,b){return w===null||w.tag!==6?(w=DA(_,y.mode,b),w.return=y,w):(w=r(w,_),w.return=y,w)}function l(y,w,_,b){var E=_.type;return E===Ip?u(y,w,_.props.children,b,_.key):w!==null&&(w.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===iu&&rB(E)===w.type)?(b=r(w,_.props),b.ref=Zg(y,w,_),b.return=y,b):(b=H1(_.type,_.key,_.props,null,y.mode,b),b.ref=Zg(y,w,_),b.return=y,b)}function c(y,w,_,b){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=FA(_,y.mode,b),w.return=y,w):(w=r(w,_.children||[]),w.return=y,w)}function u(y,w,_,b,E){return w===null||w.tag!==7?(w=Sd(_,y.mode,b,E),w.return=y,w):(w=r(w,_),w.return=y,w)}function h(y,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return w=DA(""+w,y.mode,_),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case x_:return _=H1(w.type,w.key,w.props,null,y.mode,_),_.ref=Zg(y,null,w),_.return=y,_;case Rp:return w=FA(w,y.mode,_),w.return=y,w;case iu:var b=w._init;return h(y,b(w._payload),_)}if(Dy(w)||jg(w))return w=Sd(w,y.mode,_,null),w.return=y,w;R_(y,w)}return null}function d(y,w,_,b){var E=w!==null?w.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:a(y,w,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case x_:return _.key===E?l(y,w,_,b):null;case Rp:return _.key===E?c(y,w,_,b):null;case iu:return E=_._init,d(y,w,E(_._payload),b)}if(Dy(_)||jg(_))return E!==null?null:u(y,w,_,b,null);R_(y,_)}return null}function f(y,w,_,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(_)||null,a(w,y,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case x_:return y=y.get(b.key===null?_:b.key)||null,l(w,y,b,E);case Rp:return y=y.get(b.key===null?_:b.key)||null,c(w,y,b,E);case iu:var M=b._init;return f(y,w,_,M(b._payload),E)}if(Dy(b)||jg(b))return y=y.get(_)||null,u(w,y,b,E,null);R_(w,b)}return null}function p(y,w,_,b){for(var E=null,M=null,C=w,P=w=0,T=null;C!==null&&P<_.length;P++){C.index>P?(T=C,C=null):T=C.sibling;var I=d(y,C,_[P],b);if(I===null){C===null&&(C=T);break}n&&C&&I.alternate===null&&e(y,C),w=s(I,w,P),M===null?E=I:M.sibling=I,M=I,C=T}if(P===_.length)return t(y,C),ii&&Vh(y,P),E;if(C===null){for(;P<_.length;P++)C=h(y,_[P],b),C!==null&&(w=s(C,w,P),M===null?E=C:M.sibling=C,M=C);return ii&&Vh(y,P),E}for(C=i(y,C);P<_.length;P++)T=f(C,y,P,_[P],b),T!==null&&(n&&T.alternate!==null&&C.delete(T.key===null?P:T.key),w=s(T,w,P),M===null?E=T:M.sibling=T,M=T);return n&&C.forEach(function(U){return e(y,U)}),ii&&Vh(y,P),E}function x(y,w,_,b){var E=jg(_);if(typeof E!="function")throw Error(Ke(150));if(_=E.call(_),_==null)throw Error(Ke(151));for(var M=E=null,C=w,P=w=0,T=null,I=_.next();C!==null&&!I.done;P++,I=_.next()){C.index>P?(T=C,C=null):T=C.sibling;var U=d(y,C,I.value,b);if(U===null){C===null&&(C=T);break}n&&C&&U.alternate===null&&e(y,C),w=s(U,w,P),M===null?E=U:M.sibling=U,M=U,C=T}if(I.done)return t(y,C),ii&&Vh(y,P),E;if(C===null){for(;!I.done;P++,I=_.next())I=h(y,I.value,b),I!==null&&(w=s(I,w,P),M===null?E=I:M.sibling=I,M=I);return ii&&Vh(y,P),E}for(C=i(y,C);!I.done;P++,I=_.next())I=f(C,y,P,I.value,b),I!==null&&(n&&I.alternate!==null&&C.delete(I.key===null?P:I.key),w=s(I,w,P),M===null?E=I:M.sibling=I,M=I);return n&&C.forEach(function(j){return e(y,j)}),ii&&Vh(y,P),E}function v(y,w,_,b){if(typeof _=="object"&&_!==null&&_.type===Ip&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case x_:e:{for(var E=_.key,M=w;M!==null;){if(M.key===E){if(E=_.type,E===Ip){if(M.tag===7){t(y,M.sibling),w=r(M,_.props.children),w.return=y,y=w;break e}}else if(M.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===iu&&rB(E)===M.type){t(y,M.sibling),w=r(M,_.props),w.ref=Zg(y,M,_),w.return=y,y=w;break e}t(y,M);break}else e(y,M);M=M.sibling}_.type===Ip?(w=Sd(_.props.children,y.mode,b,_.key),w.return=y,y=w):(b=H1(_.type,_.key,_.props,null,y.mode,b),b.ref=Zg(y,w,_),b.return=y,y=b)}return o(y);case Rp:e:{for(M=_.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){t(y,w.sibling),w=r(w,_.children||[]),w.return=y,y=w;break e}else{t(y,w);break}else e(y,w);w=w.sibling}w=FA(_,y.mode,b),w.return=y,y=w}return o(y);case iu:return M=_._init,v(y,w,M(_._payload),b)}if(Dy(_))return p(y,w,_,b);if(jg(_))return x(y,w,_,b);R_(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,w!==null&&w.tag===6?(t(y,w.sibling),w=r(w,_),w.return=y,y=w):(t(y,w),w=DA(_,y.mode,b),w.return=y,y=w),o(y)):t(y,w)}return v}var Sm=jG(!0),$G=jG(!1),zb=Ku(null),Hb=null,Bp=null,ZL=null;function KL(){ZL=Bp=Hb=null}function QL(n){var e=zb.current;Jn(zb),n._currentValue=e}function tR(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function rm(n,e){Hb=n,ZL=Bp=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ws=!0),n.firstContext=null)}function Uo(n){var e=n._currentValue;if(ZL!==n)if(n={context:n,memoizedValue:e,next:null},Bp===null){if(Hb===null)throw Error(Ke(308));Bp=n,Hb.dependencies={lanes:0,firstContext:n}}else Bp=Bp.next=n;return e}var ld=null;function JL(n){ld===null?ld=[n]:ld.push(n)}function XG(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,JL(e)):(t.next=r.next,r.next=t),e.interleaved=t,_c(n,i)}function _c(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ru=!1;function eN(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function YG(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function fc(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Cu(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,hn&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,_c(n,t)}return r=i.interleaved,r===null?(e.next=e,JL(i)):(e.next=r.next,r.next=e),i.interleaved=e,_c(n,t)}function O1(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,BL(n,t)}}function sB(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Wb(n,e,t,i){var r=n.updateQueue;ru=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((i&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=n,x=a;switch(d=e,f=t,x.tag){case 1:if(p=x.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=x.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=gi({},h,d);break e;case 2:ru=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=r.effects,d===null?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;d=a,a=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(!0);if(u===null&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Bd|=o,n.lanes=o,n.memoizedState=h}}function oB(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Ke(191,r));r.call(i)}}}var M0={},_l=Ku(M0),Uv=Ku(M0),Bv=Ku(M0);function cd(n){if(n===M0)throw Error(Ke(174));return n}function tN(n,e){switch(jn(Bv,e),jn(Uv,n),jn(_l,M0),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:O2(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=O2(e,n)}Jn(_l),jn(_l,e)}function Em(){Jn(_l),Jn(Uv),Jn(Bv)}function qG(n){cd(Bv.current);var e=cd(_l.current),t=O2(e,n.type);e!==t&&(jn(Uv,n),jn(_l,t))}function nN(n){Uv.current===n&&(Jn(_l),Jn(Uv))}var di=Ku(0);function Vb(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var RA=[];function iN(){for(var n=0;n<RA.length;n++)RA[n]._workInProgressVersionPrimary=null;RA.length=0}var D1=Ac.ReactCurrentDispatcher,IA=Ac.ReactCurrentBatchConfig,Ud=0,mi=null,ji=null,lr=null,Gb=!1,nv=!1,zv=0,ole=0;function Dr(){throw Error(Ke(321))}function rN(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Aa(n[t],e[t]))return!1;return!0}function sN(n,e,t,i,r,s){if(Ud=s,mi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,D1.current=n===null||n.memoizedState===null?ule:hle,n=t(i,r),nv){s=0;do{if(nv=!1,zv=0,25<=s)throw Error(Ke(301));s+=1,lr=ji=null,e.updateQueue=null,D1.current=dle,n=t(i,r)}while(nv)}if(D1.current=jb,e=ji!==null&&ji.next!==null,Ud=0,lr=ji=mi=null,Gb=!1,e)throw Error(Ke(300));return n}function oN(){var n=zv!==0;return zv=0,n}function nl(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lr===null?mi.memoizedState=lr=n:lr=lr.next=n,lr}function Bo(){if(ji===null){var n=mi.alternate;n=n!==null?n.memoizedState:null}else n=ji.next;var e=lr===null?mi.memoizedState:lr.next;if(e!==null)lr=e,ji=n;else{if(n===null)throw Error(Ke(310));ji=n,n={memoizedState:ji.memoizedState,baseState:ji.baseState,baseQueue:ji.baseQueue,queue:ji.queue,next:null},lr===null?mi.memoizedState=lr=n:lr=lr.next=n}return lr}function Hv(n,e){return typeof e=="function"?e(n):e}function LA(n){var e=Bo(),t=e.queue;if(t===null)throw Error(Ke(311));t.lastRenderedReducer=n;var i=ji,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Ud&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,mi.lanes|=u,Bd|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Aa(i,e.memoizedState)||(ws=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,mi.lanes|=s,Bd|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function NA(n){var e=Bo(),t=e.queue;if(t===null)throw Error(Ke(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Aa(s,e.memoizedState)||(ws=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function ZG(){}function KG(n,e){var t=mi,i=Bo(),r=e(),s=!Aa(i.memoizedState,r);if(s&&(i.memoizedState=r,ws=!0),i=i.queue,aN(e8.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||lr!==null&&lr.memoizedState.tag&1){if(t.flags|=2048,Wv(9,JG.bind(null,t,i,r,e),void 0,null),dr===null)throw Error(Ke(349));Ud&30||QG(t,e,r)}return r}function QG(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=mi.updateQueue,e===null?(e={lastEffect:null,stores:null},mi.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function JG(n,e,t,i){e.value=t,e.getSnapshot=i,t8(e)&&n8(n)}function e8(n,e,t){return t(function(){t8(e)&&n8(n)})}function t8(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Aa(n,t)}catch{return!0}}function n8(n){var e=_c(n,1);e!==null&&Ea(e,n,1,-1)}function aB(n){var e=nl();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hv,lastRenderedState:n},e.queue=n,n=n.dispatch=cle.bind(null,mi,n),[e.memoizedState,n]}function Wv(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=mi.updateQueue,e===null?(e={lastEffect:null,stores:null},mi.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function i8(){return Bo().memoizedState}function F1(n,e,t,i){var r=nl();mi.flags|=n,r.memoizedState=Wv(1|e,t,void 0,i===void 0?null:i)}function GS(n,e,t,i){var r=Bo();i=i===void 0?null:i;var s=void 0;if(ji!==null){var o=ji.memoizedState;if(s=o.destroy,i!==null&&rN(i,o.deps)){r.memoizedState=Wv(e,t,s,i);return}}mi.flags|=n,r.memoizedState=Wv(1|e,t,s,i)}function lB(n,e){return F1(8390656,8,n,e)}function aN(n,e){return GS(2048,8,n,e)}function r8(n,e){return GS(4,2,n,e)}function s8(n,e){return GS(4,4,n,e)}function o8(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function a8(n,e,t){return t=t!=null?t.concat([n]):null,GS(4,4,o8.bind(null,e,n),t)}function lN(){}function l8(n,e){var t=Bo();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&rN(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function c8(n,e){var t=Bo();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&rN(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function u8(n,e,t){return Ud&21?(Aa(t,e)||(t=mG(),mi.lanes|=t,Bd|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ws=!0),n.memoizedState=t)}function ale(n,e){var t=In;In=t!==0&&4>t?t:4,n(!0);var i=IA.transition;IA.transition={};try{n(!1),e()}finally{In=t,IA.transition=i}}function h8(){return Bo().memoizedState}function lle(n,e,t){var i=Ru(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},d8(n))f8(e,t);else if(t=XG(n,e,t,i),t!==null){var r=as();Ea(t,n,i,r),p8(t,e,i)}}function cle(n,e,t){var i=Ru(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(d8(n))f8(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Aa(a,o)){var l=e.interleaved;l===null?(r.next=r,JL(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=XG(n,e,r,i),t!==null&&(r=as(),Ea(t,n,i,r),p8(t,e,i))}}function d8(n){var e=n.alternate;return n===mi||e!==null&&e===mi}function f8(n,e){nv=Gb=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function p8(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,BL(n,t)}}var jb={readContext:Uo,useCallback:Dr,useContext:Dr,useEffect:Dr,useImperativeHandle:Dr,useInsertionEffect:Dr,useLayoutEffect:Dr,useMemo:Dr,useReducer:Dr,useRef:Dr,useState:Dr,useDebugValue:Dr,useDeferredValue:Dr,useTransition:Dr,useMutableSource:Dr,useSyncExternalStore:Dr,useId:Dr,unstable_isNewReconciler:!1},ule={readContext:Uo,useCallback:function(n,e){return nl().memoizedState=[n,e===void 0?null:e],n},useContext:Uo,useEffect:lB,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,F1(4194308,4,o8.bind(null,e,n),t)},useLayoutEffect:function(n,e){return F1(4194308,4,n,e)},useInsertionEffect:function(n,e){return F1(4,2,n,e)},useMemo:function(n,e){var t=nl();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=nl();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=lle.bind(null,mi,n),[i.memoizedState,n]},useRef:function(n){var e=nl();return n={current:n},e.memoizedState=n},useState:aB,useDebugValue:lN,useDeferredValue:function(n){return nl().memoizedState=n},useTransition:function(){var n=aB(!1),e=n[0];return n=ale.bind(null,n[1]),nl().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=mi,r=nl();if(ii){if(t===void 0)throw Error(Ke(407));t=t()}else{if(t=e(),dr===null)throw Error(Ke(349));Ud&30||QG(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,lB(e8.bind(null,i,s,n),[n]),i.flags|=2048,Wv(9,JG.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=nl(),e=dr.identifierPrefix;if(ii){var t=cc,i=lc;t=(i&~(1<<32-Sa(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=zv++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=ole++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},hle={readContext:Uo,useCallback:l8,useContext:Uo,useEffect:aN,useImperativeHandle:a8,useInsertionEffect:r8,useLayoutEffect:s8,useMemo:c8,useReducer:LA,useRef:i8,useState:function(){return LA(Hv)},useDebugValue:lN,useDeferredValue:function(n){var e=Bo();return u8(e,ji.memoizedState,n)},useTransition:function(){var n=LA(Hv)[0],e=Bo().memoizedState;return[n,e]},useMutableSource:ZG,useSyncExternalStore:KG,useId:h8,unstable_isNewReconciler:!1},dle={readContext:Uo,useCallback:l8,useContext:Uo,useEffect:aN,useImperativeHandle:a8,useInsertionEffect:r8,useLayoutEffect:s8,useMemo:c8,useReducer:NA,useRef:i8,useState:function(){return NA(Hv)},useDebugValue:lN,useDeferredValue:function(n){var e=Bo();return ji===null?e.memoizedState=n:u8(e,ji.memoizedState,n)},useTransition:function(){var n=NA(Hv)[0],e=Bo().memoizedState;return[n,e]},useMutableSource:ZG,useSyncExternalStore:KG,useId:h8,unstable_isNewReconciler:!1};function ua(n,e){if(n&&n.defaultProps){e=gi({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function nR(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:gi({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var jS={isMounted:function(n){return(n=n._reactInternals)?Qd(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=as(),r=Ru(n),s=fc(i,r);s.payload=e,t!=null&&(s.callback=t),e=Cu(n,s,r),e!==null&&(Ea(e,n,r,i),O1(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=as(),r=Ru(n),s=fc(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Cu(n,s,r),e!==null&&(Ea(e,n,r,i),O1(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=as(),i=Ru(n),r=fc(t,i);r.tag=2,e!=null&&(r.callback=e),e=Cu(n,r,i),e!==null&&(Ea(e,n,i,t),O1(e,n,i))}};function cB(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!kv(t,i)||!kv(r,s):!0}function m8(n,e,t){var i=!1,r=Bu,s=e.contextType;return typeof s=="object"&&s!==null?s=Uo(s):(r=Es(e)?Dd:qr.current,i=e.contextTypes,s=(i=i!=null)?wm(n,r):Bu),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jS,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function uB(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&jS.enqueueReplaceState(e,e.state,null)}function iR(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},eN(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Uo(s):(s=Es(e)?Dd:qr.current,r.context=wm(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(nR(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&jS.enqueueReplaceState(r,r.state,null),Wb(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Mm(n,e){try{var t="",i=e;do t+=zoe(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function kA(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function rR(n,e){try{}catch(t){setTimeout(function(){throw t})}}var fle=typeof WeakMap=="function"?WeakMap:Map;function g8(n,e,t){t=fc(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Xb||(Xb=!0,pR=i),rR(n,e)},t}function y8(n,e,t){t=fc(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){rR(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){rR(n,e),typeof i!="function"&&(Pu===null?Pu=new Set([this]):Pu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function hB(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new fle;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=Ale.bind(null,n,e,t),e.then(n,n))}function dB(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function fB(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=fc(-1,1),e.tag=2,Cu(t,e,1))),t.lanes|=1),n)}var ple=Ac.ReactCurrentOwner,ws=!1;function is(n,e,t,i){e.child=n===null?$G(e,null,t,i):Sm(e,n.child,t,i)}function pB(n,e,t,i,r){t=t.render;var s=e.ref;return rm(e,r),i=sN(n,e,t,i,s,r),t=oN(),n!==null&&!ws?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,wc(n,e,r)):(ii&&t&&XL(e),e.flags|=1,is(n,e,i,r),e.child)}function mB(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!gN(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,v8(n,e,s,i,r)):(n=H1(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:kv,t(o,i)&&n.ref===e.ref)return wc(n,e,r)}return e.flags|=1,n=Iu(s,i),n.ref=e.ref,n.return=e,e.child=n}function v8(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(kv(s,i)&&n.ref===e.ref)if(ws=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(ws=!0);else return e.lanes=n.lanes,wc(n,e,r)}return sR(n,e,t,i,r)}function x8(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},jn(Hp,Ws),Ws|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,jn(Hp,Ws),Ws|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,jn(Hp,Ws),Ws|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,jn(Hp,Ws),Ws|=i;return is(n,e,r,t),e.child}function _8(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function sR(n,e,t,i,r){var s=Es(t)?Dd:qr.current;return s=wm(e,s),rm(e,r),t=sN(n,e,t,i,s,r),i=oN(),n!==null&&!ws?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,wc(n,e,r)):(ii&&i&&XL(e),e.flags|=1,is(n,e,t,r),e.child)}function gB(n,e,t,i,r){if(Es(t)){var s=!0;Fb(e)}else s=!1;if(rm(e,r),e.stateNode===null)U1(n,e),m8(e,t,i),iR(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Uo(c):(c=Es(t)?Dd:qr.current,c=wm(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&uB(e,o,i,c),ru=!1;var d=e.memoizedState;o.state=d,Wb(e,i,o,r),l=e.memoizedState,a!==i||d!==l||Ss.current||ru?(typeof u=="function"&&(nR(e,t,u,i),l=e.memoizedState),(a=ru||cB(e,t,a,i,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,YG(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:ua(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Uo(l):(l=Es(t)?Dd:qr.current,l=wm(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&uB(e,o,i,l),ru=!1,d=e.memoizedState,o.state=d,Wb(e,i,o,r);var p=e.memoizedState;a!==h||d!==p||Ss.current||ru?(typeof f=="function"&&(nR(e,t,f,i),p=e.memoizedState),(c=ru||cB(e,t,c,i,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),i=!1)}return oR(n,e,t,i,s,r)}function oR(n,e,t,i,r,s){_8(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&tB(e,t,!1),wc(n,e,s);i=e.stateNode,ple.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Sm(e,n.child,null,s),e.child=Sm(e,null,a,s)):is(n,e,a,s),e.memoizedState=i.state,r&&tB(e,t,!0),e.child}function w8(n){var e=n.stateNode;e.pendingContext?eB(n,e.pendingContext,e.pendingContext!==e.context):e.context&&eB(n,e.context,!1),tN(n,e.containerInfo)}function yB(n,e,t,i,r){return bm(),qL(r),e.flags|=256,is(n,e,t,i),e.child}var aR={dehydrated:null,treeContext:null,retryLane:0};function lR(n){return{baseLanes:n,cachePool:null,transitions:null}}function b8(n,e,t){var i=e.pendingProps,r=di.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),jn(di,r&1),n===null)return eR(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=YS(o,i,0,null),n=Sd(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=lR(t),e.memoizedState=aR,n):cN(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return mle(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Iu(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Iu(a,s):(s=Sd(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?lR(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=aR,i}return s=n.child,n=s.sibling,i=Iu(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function cN(n,e){return e=YS({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function I_(n,e,t,i){return i!==null&&qL(i),Sm(e,n.child,null,t),n=cN(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function mle(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=kA(Error(Ke(422))),I_(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=YS({mode:"visible",children:i.children},r,0,null),s=Sd(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Sm(e,n.child,null,o),e.child.memoizedState=lR(o),e.memoizedState=aR,s);if(!(e.mode&1))return I_(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Ke(419)),i=kA(s,i,void 0),I_(n,e,o,i)}if(a=(o&n.childLanes)!==0,ws||a){if(i=dr,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,_c(n,r),Ea(i,n,r,-1))}return mN(),i=kA(Error(Ke(421))),I_(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=Cle.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,js=Au(r.nextSibling),Zs=e,ii=!0,fa=null,n!==null&&(Eo[Mo++]=lc,Eo[Mo++]=cc,Eo[Mo++]=Fd,lc=n.id,cc=n.overflow,Fd=e),e=cN(e,i.children),e.flags|=4096,e)}function vB(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),tR(n.return,e,t)}function OA(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function S8(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(is(n,e,i.children,t),i=di.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&vB(n,t,e);else if(n.tag===19)vB(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(jn(di,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Vb(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),OA(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Vb(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}OA(e,!0,t,null,s);break;case"together":OA(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function U1(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function wc(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Bd|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ke(153));if(e.child!==null){for(n=e.child,t=Iu(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Iu(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function gle(n,e,t){switch(e.tag){case 3:w8(e),bm();break;case 5:qG(e);break;case 1:Es(e.type)&&Fb(e);break;case 4:tN(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;jn(zb,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(jn(di,di.current&1),e.flags|=128,null):t&e.child.childLanes?b8(n,e,t):(jn(di,di.current&1),n=wc(n,e,t),n!==null?n.sibling:null);jn(di,di.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return S8(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),jn(di,di.current),i)break;return null;case 22:case 23:return e.lanes=0,x8(n,e,t)}return wc(n,e,t)}var E8,cR,M8,T8;E8=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};cR=function(){};M8=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,cd(_l.current);var s=null;switch(t){case"input":r=I2(n,r),i=I2(n,i),s=[];break;case"select":r=gi({},r,{value:void 0}),i=gi({},i,{value:void 0}),s=[];break;case"textarea":r=k2(n,r),i=k2(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Ob)}D2(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Av.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Av.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&qn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};T8=function(n,e,t,i){t!==i&&(e.flags|=4)};function Kg(n,e){if(!ii)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Fr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function yle(n,e,t){var i=e.pendingProps;switch(YL(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fr(e),null;case 1:return Es(e.type)&&Db(),Fr(e),null;case 3:return i=e.stateNode,Em(),Jn(Ss),Jn(qr),iN(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(P_(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fa!==null&&(yR(fa),fa=null))),cR(n,e),Fr(e),null;case 5:nN(e);var r=cd(Bv.current);if(t=e.type,n!==null&&e.stateNode!=null)M8(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ke(166));return Fr(e),null}if(n=cd(_l.current),P_(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[al]=e,i[Fv]=s,n=(e.mode&1)!==0,t){case"dialog":qn("cancel",i),qn("close",i);break;case"iframe":case"object":case"embed":qn("load",i);break;case"video":case"audio":for(r=0;r<Uy.length;r++)qn(Uy[r],i);break;case"source":qn("error",i);break;case"img":case"image":case"link":qn("error",i),qn("load",i);break;case"details":qn("toggle",i);break;case"input":AU(i,s),qn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},qn("invalid",i);break;case"textarea":PU(i,s),qn("invalid",i)}D2(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&C_(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&C_(i.textContent,a,n),r=["children",""+a]):Av.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qn("scroll",i)}switch(t){case"input":__(i),CU(i,s,!0);break;case"textarea":__(i),RU(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Ob)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=eG(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[al]=e,n[Fv]=i,E8(n,e,!1,!1),e.stateNode=n;e:{switch(o=F2(t,i),t){case"dialog":qn("cancel",n),qn("close",n),r=i;break;case"iframe":case"object":case"embed":qn("load",n),r=i;break;case"video":case"audio":for(r=0;r<Uy.length;r++)qn(Uy[r],n);r=i;break;case"source":qn("error",n),r=i;break;case"img":case"image":case"link":qn("error",n),qn("load",n),r=i;break;case"details":qn("toggle",n),r=i;break;case"input":AU(n,i),r=I2(n,i),qn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=gi({},i,{value:void 0}),qn("invalid",n);break;case"textarea":PU(n,i),r=k2(n,i),qn("invalid",n);break;default:r=i}D2(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?iG(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&tG(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Cv(n,l):typeof l=="number"&&Cv(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Av.hasOwnProperty(s)?l!=null&&s==="onScroll"&&qn("scroll",n):l!=null&&NL(n,s,l,o))}switch(t){case"input":__(n),CU(n,i,!1);break;case"textarea":__(n),RU(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Uu(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?em(n,!!i.multiple,s,!1):i.defaultValue!=null&&em(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Ob)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Fr(e),null;case 6:if(n&&e.stateNode!=null)T8(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ke(166));if(t=cd(Bv.current),cd(_l.current),P_(e)){if(i=e.stateNode,t=e.memoizedProps,i[al]=e,(s=i.nodeValue!==t)&&(n=Zs,n!==null))switch(n.tag){case 3:C_(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&C_(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[al]=e,e.stateNode=i}return Fr(e),null;case 13:if(Jn(di),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ii&&js!==null&&e.mode&1&&!(e.flags&128))GG(),bm(),e.flags|=98560,s=!1;else if(s=P_(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Ke(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ke(317));s[al]=e}else bm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Fr(e),s=!1}else fa!==null&&(yR(fa),fa=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||di.current&1?Xi===0&&(Xi=3):mN())),e.updateQueue!==null&&(e.flags|=4),Fr(e),null);case 4:return Em(),cR(n,e),n===null&&Ov(e.stateNode.containerInfo),Fr(e),null;case 10:return QL(e.type._context),Fr(e),null;case 17:return Es(e.type)&&Db(),Fr(e),null;case 19:if(Jn(di),s=e.memoizedState,s===null)return Fr(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Kg(s,!1);else{if(Xi!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Vb(n),o!==null){for(e.flags|=128,Kg(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return jn(di,di.current&1|2),e.child}n=n.sibling}s.tail!==null&&Ii()>Tm&&(e.flags|=128,i=!0,Kg(s,!1),e.lanes=4194304)}else{if(!i)if(n=Vb(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Kg(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ii)return Fr(e),null}else 2*Ii()-s.renderingStartTime>Tm&&t!==1073741824&&(e.flags|=128,i=!0,Kg(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ii(),e.sibling=null,t=di.current,jn(di,i?t&1|2:t&1),e):(Fr(e),null);case 22:case 23:return pN(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ws&1073741824&&(Fr(e),e.subtreeFlags&6&&(e.flags|=8192)):Fr(e),null;case 24:return null;case 25:return null}throw Error(Ke(156,e.tag))}function vle(n,e){switch(YL(e),e.tag){case 1:return Es(e.type)&&Db(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Em(),Jn(Ss),Jn(qr),iN(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return nN(e),null;case 13:if(Jn(di),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ke(340));bm()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Jn(di),null;case 4:return Em(),null;case 10:return QL(e.type._context),null;case 22:case 23:return pN(),null;case 24:return null;default:return null}}var L_=!1,Vr=!1,xle=typeof WeakSet=="function"?WeakSet:Set,_t=null;function zp(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){bi(n,e,i)}else t.current=null}function uR(n,e,t){try{t()}catch(i){bi(n,e,i)}}var xB=!1;function _le(n,e){if(X2=Lb,n=IG(),$L(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=n,d=null;t:for(;;){for(var f;h!==t||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===n)break t;if(d===t&&++c===r&&(a=o),d===s&&++u===i&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Y2={focusedElem:n,selectionRange:t},Lb=!1,_t=e;_t!==null;)if(e=_t,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,_t=n;else for(;_t!==null;){e=_t;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var x=p.memoizedProps,v=p.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?x:ua(e.type,x),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ke(163))}}catch(b){bi(e,e.return,b)}if(n=e.sibling,n!==null){n.return=e.return,_t=n;break}_t=e.return}return p=xB,xB=!1,p}function iv(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&uR(e,t,s)}r=r.next}while(r!==i)}}function $S(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function hR(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function A8(n){var e=n.alternate;e!==null&&(n.alternate=null,A8(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[al],delete e[Fv],delete e[K2],delete e[nle],delete e[ile])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function C8(n){return n.tag===5||n.tag===3||n.tag===4}function _B(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||C8(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function dR(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ob));else if(i!==4&&(n=n.child,n!==null))for(dR(n,e,t),n=n.sibling;n!==null;)dR(n,e,t),n=n.sibling}function fR(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(fR(n,e,t),n=n.sibling;n!==null;)fR(n,e,t),n=n.sibling}var wr=null,da=!1;function Vc(n,e,t){for(t=t.child;t!==null;)P8(n,e,t),t=t.sibling}function P8(n,e,t){if(xl&&typeof xl.onCommitFiberUnmount=="function")try{xl.onCommitFiberUnmount(US,t)}catch{}switch(t.tag){case 5:Vr||zp(t,e);case 6:var i=wr,r=da;wr=null,Vc(n,e,t),wr=i,da=r,wr!==null&&(da?(n=wr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):wr.removeChild(t.stateNode));break;case 18:wr!==null&&(da?(n=wr,t=t.stateNode,n.nodeType===8?CA(n.parentNode,t):n.nodeType===1&&CA(n,t),Lv(n)):CA(wr,t.stateNode));break;case 4:i=wr,r=da,wr=t.stateNode.containerInfo,da=!0,Vc(n,e,t),wr=i,da=r;break;case 0:case 11:case 14:case 15:if(!Vr&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&uR(t,e,o),r=r.next}while(r!==i)}Vc(n,e,t);break;case 1:if(!Vr&&(zp(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){bi(t,e,a)}Vc(n,e,t);break;case 21:Vc(n,e,t);break;case 22:t.mode&1?(Vr=(i=Vr)||t.memoizedState!==null,Vc(n,e,t),Vr=i):Vc(n,e,t);break;default:Vc(n,e,t)}}function wB(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new xle),e.forEach(function(i){var r=Ple.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function ea(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:wr=a.stateNode,da=!1;break e;case 3:wr=a.stateNode.containerInfo,da=!0;break e;case 4:wr=a.stateNode.containerInfo,da=!0;break e}a=a.return}if(wr===null)throw Error(Ke(160));P8(s,o,r),wr=null,da=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){bi(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)R8(e,n),e=e.sibling}function R8(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ea(e,n),Za(n),i&4){try{iv(3,n,n.return),$S(3,n)}catch(x){bi(n,n.return,x)}try{iv(5,n,n.return)}catch(x){bi(n,n.return,x)}}break;case 1:ea(e,n),Za(n),i&512&&t!==null&&zp(t,t.return);break;case 5:if(ea(e,n),Za(n),i&512&&t!==null&&zp(t,t.return),n.flags&32){var r=n.stateNode;try{Cv(r,"")}catch(x){bi(n,n.return,x)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&QV(r,s),F2(a,o);var c=F2(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?iG(r,h):u==="dangerouslySetInnerHTML"?tG(r,h):u==="children"?Cv(r,h):NL(r,u,h,c)}switch(a){case"input":L2(r,s);break;case"textarea":JV(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?em(r,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?em(r,!!s.multiple,s.defaultValue,!0):em(r,!!s.multiple,s.multiple?[]:"",!1))}r[Fv]=s}catch(x){bi(n,n.return,x)}}break;case 6:if(ea(e,n),Za(n),i&4){if(n.stateNode===null)throw Error(Ke(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(x){bi(n,n.return,x)}}break;case 3:if(ea(e,n),Za(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Lv(e.containerInfo)}catch(x){bi(n,n.return,x)}break;case 4:ea(e,n),Za(n);break;case 13:ea(e,n),Za(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(dN=Ii())),i&4&&wB(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Vr=(c=Vr)||u,ea(e,n),Vr=c):ea(e,n),Za(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(_t=n,u=n.child;u!==null;){for(h=_t=u;_t!==null;){switch(d=_t,f=d.child,d.tag){case 0:case 11:case 14:case 15:iv(4,d,d.return);break;case 1:zp(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){i=d,t=d.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(x){bi(i,t,x)}}break;case 5:zp(d,d.return);break;case 22:if(d.memoizedState!==null){SB(h);continue}}f!==null?(f.return=d,_t=f):SB(h)}u=u.sibling}e:for(u=null,h=n;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=nG("display",o))}catch(x){bi(n,n.return,x)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){bi(n,n.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ea(e,n),Za(n),i&4&&wB(n);break;case 21:break;default:ea(e,n),Za(n)}}function Za(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(C8(t)){var i=t;break e}t=t.return}throw Error(Ke(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Cv(r,""),i.flags&=-33);var s=_B(n);fR(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=_B(n);dR(n,a,o);break;default:throw Error(Ke(161))}}catch(l){bi(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function wle(n,e,t){_t=n,I8(n)}function I8(n,e,t){for(var i=(n.mode&1)!==0;_t!==null;){var r=_t,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||L_;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Vr;a=L_;var c=Vr;if(L_=o,(Vr=l)&&!c)for(_t=r;_t!==null;)o=_t,l=o.child,o.tag===22&&o.memoizedState!==null?EB(r):l!==null?(l.return=o,_t=l):EB(r);for(;s!==null;)_t=s,I8(s),s=s.sibling;_t=r,L_=a,Vr=c}bB(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,_t=s):bB(n)}}function bB(n){for(;_t!==null;){var e=_t;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vr||$S(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Vr)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:ua(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&oB(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}oB(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Lv(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ke(163))}Vr||e.flags&512&&hR(e)}catch(d){bi(e,e.return,d)}}if(e===n){_t=null;break}if(t=e.sibling,t!==null){t.return=e.return,_t=t;break}_t=e.return}}function SB(n){for(;_t!==null;){var e=_t;if(e===n){_t=null;break}var t=e.sibling;if(t!==null){t.return=e.return,_t=t;break}_t=e.return}}function EB(n){for(;_t!==null;){var e=_t;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{$S(4,e)}catch(l){bi(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){bi(e,r,l)}}var s=e.return;try{hR(e)}catch(l){bi(e,s,l)}break;case 5:var o=e.return;try{hR(e)}catch(l){bi(e,o,l)}}}catch(l){bi(e,e.return,l)}if(e===n){_t=null;break}var a=e.sibling;if(a!==null){a.return=e.return,_t=a;break}_t=e.return}}var ble=Math.ceil,$b=Ac.ReactCurrentDispatcher,uN=Ac.ReactCurrentOwner,Oo=Ac.ReactCurrentBatchConfig,hn=0,dr=null,Ui=null,Ar=0,Ws=0,Hp=Ku(0),Xi=0,Vv=null,Bd=0,XS=0,hN=0,rv=null,vs=null,dN=0,Tm=1/0,nc=null,Xb=!1,pR=null,Pu=null,N_=!1,xu=null,Yb=0,sv=0,mR=null,B1=-1,z1=0;function as(){return hn&6?Ii():B1!==-1?B1:B1=Ii()}function Ru(n){return n.mode&1?hn&2&&Ar!==0?Ar&-Ar:sle.transition!==null?(z1===0&&(z1=mG()),z1):(n=In,n!==0||(n=window.event,n=n===void 0?16:bG(n.type)),n):1}function Ea(n,e,t,i){if(50<sv)throw sv=0,mR=null,Error(Ke(185));b0(n,t,i),(!(hn&2)||n!==dr)&&(n===dr&&(!(hn&2)&&(XS|=t),Xi===4&&du(n,Ar)),Ms(n,i),t===1&&hn===0&&!(e.mode&1)&&(Tm=Ii()+500,VS&&Qu()))}function Ms(n,e){var t=n.callbackNode;sae(n,e);var i=Ib(n,n===dr?Ar:0);if(i===0)t!==null&&NU(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&NU(t),e===1)n.tag===0?rle(MB.bind(null,n)):HG(MB.bind(null,n)),ele(function(){!(hn&6)&&Qu()}),t=null;else{switch(gG(i)){case 1:t=UL;break;case 4:t=fG;break;case 16:t=Rb;break;case 536870912:t=pG;break;default:t=Rb}t=B8(t,L8.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function L8(n,e){if(B1=-1,z1=0,hn&6)throw Error(Ke(327));var t=n.callbackNode;if(sm()&&n.callbackNode!==t)return null;var i=Ib(n,n===dr?Ar:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=qb(n,i);else{e=i;var r=hn;hn|=2;var s=k8();(dr!==n||Ar!==e)&&(nc=null,Tm=Ii()+500,bd(n,e));do try{Mle();break}catch(a){N8(n,a)}while(!0);KL(),$b.current=s,hn=r,Ui!==null?e=0:(dr=null,Ar=0,e=Xi)}if(e!==0){if(e===2&&(r=W2(n),r!==0&&(i=r,e=gR(n,r))),e===1)throw t=Vv,bd(n,0),du(n,i),Ms(n,Ii()),t;if(e===6)du(n,i);else{if(r=n.current.alternate,!(i&30)&&!Sle(r)&&(e=qb(n,i),e===2&&(s=W2(n),s!==0&&(i=s,e=gR(n,s))),e===1))throw t=Vv,bd(n,0),du(n,i),Ms(n,Ii()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Ke(345));case 2:Gh(n,vs,nc);break;case 3:if(du(n,i),(i&130023424)===i&&(e=dN+500-Ii(),10<e)){if(Ib(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){as(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=Z2(Gh.bind(null,n,vs,nc),e);break}Gh(n,vs,nc);break;case 4:if(du(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Sa(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Ii()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*ble(i/1960))-i,10<i){n.timeoutHandle=Z2(Gh.bind(null,n,vs,nc),i);break}Gh(n,vs,nc);break;case 5:Gh(n,vs,nc);break;default:throw Error(Ke(329))}}}return Ms(n,Ii()),n.callbackNode===t?L8.bind(null,n):null}function gR(n,e){var t=rv;return n.current.memoizedState.isDehydrated&&(bd(n,e).flags|=256),n=qb(n,e),n!==2&&(e=vs,vs=t,e!==null&&yR(e)),n}function yR(n){vs===null?vs=n:vs.push.apply(vs,n)}function Sle(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Aa(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function du(n,e){for(e&=~hN,e&=~XS,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Sa(e),i=1<<t;n[t]=-1,e&=~i}}function MB(n){if(hn&6)throw Error(Ke(327));sm();var e=Ib(n,0);if(!(e&1))return Ms(n,Ii()),null;var t=qb(n,e);if(n.tag!==0&&t===2){var i=W2(n);i!==0&&(e=i,t=gR(n,i))}if(t===1)throw t=Vv,bd(n,0),du(n,e),Ms(n,Ii()),t;if(t===6)throw Error(Ke(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Gh(n,vs,nc),Ms(n,Ii()),null}function fN(n,e){var t=hn;hn|=1;try{return n(e)}finally{hn=t,hn===0&&(Tm=Ii()+500,VS&&Qu())}}function zd(n){xu!==null&&xu.tag===0&&!(hn&6)&&sm();var e=hn;hn|=1;var t=Oo.transition,i=In;try{if(Oo.transition=null,In=1,n)return n()}finally{In=i,Oo.transition=t,hn=e,!(hn&6)&&Qu()}}function pN(){Ws=Hp.current,Jn(Hp)}function bd(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Jae(t)),Ui!==null)for(t=Ui.return;t!==null;){var i=t;switch(YL(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Db();break;case 3:Em(),Jn(Ss),Jn(qr),iN();break;case 5:nN(i);break;case 4:Em();break;case 13:Jn(di);break;case 19:Jn(di);break;case 10:QL(i.type._context);break;case 22:case 23:pN()}t=t.return}if(dr=n,Ui=n=Iu(n.current,null),Ar=Ws=e,Xi=0,Vv=null,hN=XS=Bd=0,vs=rv=null,ld!==null){for(e=0;e<ld.length;e++)if(t=ld[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}ld=null}return n}function N8(n,e){do{var t=Ui;try{if(KL(),D1.current=jb,Gb){for(var i=mi.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Gb=!1}if(Ud=0,lr=ji=mi=null,nv=!1,zv=0,uN.current=null,t===null||t.return===null){Xi=1,Vv=e,Ui=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Ar,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=dB(o);if(f!==null){f.flags&=-257,fB(f,o,a,s,e),f.mode&1&&hB(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var x=new Set;x.add(l),e.updateQueue=x}else p.add(l);break e}else{if(!(e&1)){hB(s,c,e),mN();break e}l=Error(Ke(426))}}else if(ii&&a.mode&1){var v=dB(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),fB(v,o,a,s,e),qL(Mm(l,a));break e}}s=l=Mm(l,a),Xi!==4&&(Xi=2),rv===null?rv=[s]:rv.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=g8(s,l,e);sB(s,y);break e;case 1:a=l;var w=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Pu===null||!Pu.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=y8(s,a,e);sB(s,b);break e}}s=s.return}while(s!==null)}D8(t)}catch(E){e=E,Ui===t&&t!==null&&(Ui=t=t.return);continue}break}while(!0)}function k8(){var n=$b.current;return $b.current=jb,n===null?jb:n}function mN(){(Xi===0||Xi===3||Xi===2)&&(Xi=4),dr===null||!(Bd&268435455)&&!(XS&268435455)||du(dr,Ar)}function qb(n,e){var t=hn;hn|=2;var i=k8();(dr!==n||Ar!==e)&&(nc=null,bd(n,e));do try{Ele();break}catch(r){N8(n,r)}while(!0);if(KL(),hn=t,$b.current=i,Ui!==null)throw Error(Ke(261));return dr=null,Ar=0,Xi}function Ele(){for(;Ui!==null;)O8(Ui)}function Mle(){for(;Ui!==null&&!Zoe();)O8(Ui)}function O8(n){var e=U8(n.alternate,n,Ws);n.memoizedProps=n.pendingProps,e===null?D8(n):Ui=e,uN.current=null}function D8(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=vle(t,e),t!==null){t.flags&=32767,Ui=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Xi=6,Ui=null;return}}else if(t=yle(t,e,Ws),t!==null){Ui=t;return}if(e=e.sibling,e!==null){Ui=e;return}Ui=e=n}while(e!==null);Xi===0&&(Xi=5)}function Gh(n,e,t){var i=In,r=Oo.transition;try{Oo.transition=null,In=1,Tle(n,e,t,i)}finally{Oo.transition=r,In=i}return null}function Tle(n,e,t,i){do sm();while(xu!==null);if(hn&6)throw Error(Ke(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ke(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(oae(n,s),n===dr&&(Ui=dr=null,Ar=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||N_||(N_=!0,B8(Rb,function(){return sm(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Oo.transition,Oo.transition=null;var o=In;In=1;var a=hn;hn|=4,uN.current=null,_le(n,t),R8(t,n),$ae(Y2),Lb=!!X2,Y2=X2=null,n.current=t,wle(t),Koe(),hn=a,In=o,Oo.transition=s}else n.current=t;if(N_&&(N_=!1,xu=n,Yb=r),s=n.pendingLanes,s===0&&(Pu=null),eae(t.stateNode),Ms(n,Ii()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(Xb)throw Xb=!1,n=pR,pR=null,n;return Yb&1&&n.tag!==0&&sm(),s=n.pendingLanes,s&1?n===mR?sv++:(sv=0,mR=n):sv=0,Qu(),null}function sm(){if(xu!==null){var n=gG(Yb),e=Oo.transition,t=In;try{if(Oo.transition=null,In=16>n?16:n,xu===null)var i=!1;else{if(n=xu,xu=null,Yb=0,hn&6)throw Error(Ke(331));var r=hn;for(hn|=4,_t=n.current;_t!==null;){var s=_t,o=s.child;if(_t.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(_t=c;_t!==null;){var u=_t;switch(u.tag){case 0:case 11:case 15:iv(8,u,s)}var h=u.child;if(h!==null)h.return=u,_t=h;else for(;_t!==null;){u=_t;var d=u.sibling,f=u.return;if(A8(u),u===c){_t=null;break}if(d!==null){d.return=f,_t=d;break}_t=f}}}var p=s.alternate;if(p!==null){var x=p.child;if(x!==null){p.child=null;do{var v=x.sibling;x.sibling=null,x=v}while(x!==null)}}_t=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,_t=o;else e:for(;_t!==null;){if(s=_t,s.flags&2048)switch(s.tag){case 0:case 11:case 15:iv(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,_t=y;break e}_t=s.return}}var w=n.current;for(_t=w;_t!==null;){o=_t;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,_t=_;else e:for(o=w;_t!==null;){if(a=_t,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$S(9,a)}}catch(E){bi(a,a.return,E)}if(a===o){_t=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,_t=b;break e}_t=a.return}}if(hn=r,Qu(),xl&&typeof xl.onPostCommitFiberRoot=="function")try{xl.onPostCommitFiberRoot(US,n)}catch{}i=!0}return i}finally{In=t,Oo.transition=e}}return!1}function TB(n,e,t){e=Mm(t,e),e=g8(n,e,1),n=Cu(n,e,1),e=as(),n!==null&&(b0(n,1,e),Ms(n,e))}function bi(n,e,t){if(n.tag===3)TB(n,n,t);else for(;e!==null;){if(e.tag===3){TB(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Pu===null||!Pu.has(i))){n=Mm(t,n),n=y8(e,n,1),e=Cu(e,n,1),n=as(),e!==null&&(b0(e,1,n),Ms(e,n));break}}e=e.return}}function Ale(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=as(),n.pingedLanes|=n.suspendedLanes&t,dr===n&&(Ar&t)===t&&(Xi===4||Xi===3&&(Ar&130023424)===Ar&&500>Ii()-dN?bd(n,0):hN|=t),Ms(n,e)}function F8(n,e){e===0&&(n.mode&1?(e=S_,S_<<=1,!(S_&130023424)&&(S_=4194304)):e=1);var t=as();n=_c(n,e),n!==null&&(b0(n,e,t),Ms(n,t))}function Cle(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),F8(n,t)}function Ple(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Ke(314))}i!==null&&i.delete(e),F8(n,t)}var U8;U8=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ss.current)ws=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ws=!1,gle(n,e,t);ws=!!(n.flags&131072)}else ws=!1,ii&&e.flags&1048576&&WG(e,Bb,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;U1(n,e),n=e.pendingProps;var r=wm(e,qr.current);rm(e,t),r=sN(null,e,i,n,r,t);var s=oN();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Es(i)?(s=!0,Fb(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,eN(e),r.updater=jS,e.stateNode=r,r._reactInternals=e,iR(e,i,n,t),e=oR(null,e,i,!0,s,t)):(e.tag=0,ii&&s&&XL(e),is(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(U1(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Ile(i),n=ua(i,n),r){case 0:e=sR(null,e,i,n,t);break e;case 1:e=gB(null,e,i,n,t);break e;case 11:e=pB(null,e,i,n,t);break e;case 14:e=mB(null,e,i,ua(i.type,n),t);break e}throw Error(Ke(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ua(i,r),sR(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ua(i,r),gB(n,e,i,r,t);case 3:e:{if(w8(e),n===null)throw Error(Ke(387));i=e.pendingProps,s=e.memoizedState,r=s.element,YG(n,e),Wb(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Mm(Error(Ke(423)),e),e=yB(n,e,i,t,r);break e}else if(i!==r){r=Mm(Error(Ke(424)),e),e=yB(n,e,i,t,r);break e}else for(js=Au(e.stateNode.containerInfo.firstChild),Zs=e,ii=!0,fa=null,t=$G(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(bm(),i===r){e=wc(n,e,t);break e}is(n,e,i,t)}e=e.child}return e;case 5:return qG(e),n===null&&eR(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,q2(i,r)?o=null:s!==null&&q2(i,s)&&(e.flags|=32),_8(n,e),is(n,e,o,t),e.child;case 6:return n===null&&eR(e),null;case 13:return b8(n,e,t);case 4:return tN(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Sm(e,null,i,t):is(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ua(i,r),pB(n,e,i,r,t);case 7:return is(n,e,e.pendingProps,t),e.child;case 8:return is(n,e,e.pendingProps.children,t),e.child;case 12:return is(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,jn(zb,i._currentValue),i._currentValue=o,s!==null)if(Aa(s.value,o)){if(s.children===r.children&&!Ss.current){e=wc(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=fc(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),tR(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ke(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),tR(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}is(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,rm(e,t),r=Uo(r),i=i(r),e.flags|=1,is(n,e,i,t),e.child;case 14:return i=e.type,r=ua(i,e.pendingProps),r=ua(i.type,r),mB(n,e,i,r,t);case 15:return v8(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ua(i,r),U1(n,e),e.tag=1,Es(i)?(n=!0,Fb(e)):n=!1,rm(e,t),m8(e,i,r),iR(e,i,r,t),oR(null,e,i,!0,n,t);case 19:return S8(n,e,t);case 22:return x8(n,e,t)}throw Error(Ke(156,e.tag))};function B8(n,e){return dG(n,e)}function Rle(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Po(n,e,t,i){return new Rle(n,e,t,i)}function gN(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ile(n){if(typeof n=="function")return gN(n)?1:0;if(n!=null){if(n=n.$$typeof,n===OL)return 11;if(n===DL)return 14}return 2}function Iu(n,e){var t=n.alternate;return t===null?(t=Po(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function H1(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")gN(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Ip:return Sd(t.children,r,s,e);case kL:o=8,r|=8;break;case A2:return n=Po(12,t,e,r|2),n.elementType=A2,n.lanes=s,n;case C2:return n=Po(13,t,e,r),n.elementType=C2,n.lanes=s,n;case P2:return n=Po(19,t,e,r),n.elementType=P2,n.lanes=s,n;case qV:return YS(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case XV:o=10;break e;case YV:o=9;break e;case OL:o=11;break e;case DL:o=14;break e;case iu:o=16,i=null;break e}throw Error(Ke(130,n==null?n:typeof n,""))}return e=Po(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Sd(n,e,t,i){return n=Po(7,n,i,e),n.lanes=t,n}function YS(n,e,t,i){return n=Po(22,n,i,e),n.elementType=qV,n.lanes=t,n.stateNode={isHidden:!1},n}function DA(n,e,t){return n=Po(6,n,null,e),n.lanes=t,n}function FA(n,e,t){return e=Po(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Lle(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yA(0),this.expirationTimes=yA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yA(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function yN(n,e,t,i,r,s,o,a,l){return n=new Lle(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Po(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},eN(s),n}function Nle(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rp,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function z8(n){if(!n)return Bu;n=n._reactInternals;e:{if(Qd(n)!==n||n.tag!==1)throw Error(Ke(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Es(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ke(171))}if(n.tag===1){var t=n.type;if(Es(t))return zG(n,t,e)}return e}function H8(n,e,t,i,r,s,o,a,l){return n=yN(t,i,!0,n,r,s,o,a,l),n.context=z8(null),t=n.current,i=as(),r=Ru(t),s=fc(i,r),s.callback=e??null,Cu(t,s,r),n.current.lanes=r,b0(n,r,i),Ms(n,i),n}function qS(n,e,t,i){var r=e.current,s=as(),o=Ru(r);return t=z8(t),e.context===null?e.context=t:e.pendingContext=t,e=fc(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Cu(r,e,o),n!==null&&(Ea(n,r,o,s),O1(n,r,o)),o}function Zb(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function AB(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function vN(n,e){AB(n,e),(n=n.alternate)&&AB(n,e)}function kle(){return null}var W8=typeof reportError=="function"?reportError:function(n){};function xN(n){this._internalRoot=n}ZS.prototype.render=xN.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ke(409));qS(n,e,null,null)};ZS.prototype.unmount=xN.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;zd(function(){qS(null,n,null,null)}),e[xc]=null}};function ZS(n){this._internalRoot=n}ZS.prototype.unstable_scheduleHydration=function(n){if(n){var e=xG();n={blockedOn:null,target:n,priority:e};for(var t=0;t<hu.length&&e!==0&&e<hu[t].priority;t++);hu.splice(t,0,n),t===0&&wG(n)}};function _N(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function KS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function CB(){}function Ole(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Zb(o);s.call(c)}}var o=H8(e,i,n,0,null,!1,!1,"",CB);return n._reactRootContainer=o,n[xc]=o.current,Ov(n.nodeType===8?n.parentNode:n),zd(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Zb(l);a.call(c)}}var l=yN(n,0,!1,null,null,!1,!1,"",CB);return n._reactRootContainer=l,n[xc]=l.current,Ov(n.nodeType===8?n.parentNode:n),zd(function(){qS(e,l,t,i)}),l}function QS(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Zb(o);a.call(l)}}qS(e,o,n,r)}else o=Ole(t,e,n,r,i);return Zb(o)}yG=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Fy(e.pendingLanes);t!==0&&(BL(e,t|1),Ms(e,Ii()),!(hn&6)&&(Tm=Ii()+500,Qu()))}break;case 13:zd(function(){var i=_c(n,1);if(i!==null){var r=as();Ea(i,n,1,r)}}),vN(n,1)}};zL=function(n){if(n.tag===13){var e=_c(n,134217728);if(e!==null){var t=as();Ea(e,n,134217728,t)}vN(n,134217728)}};vG=function(n){if(n.tag===13){var e=Ru(n),t=_c(n,e);if(t!==null){var i=as();Ea(t,n,e,i)}vN(n,e)}};xG=function(){return In};_G=function(n,e){var t=In;try{return In=n,e()}finally{In=t}};B2=function(n,e,t){switch(e){case"input":if(L2(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=WS(i);if(!r)throw Error(Ke(90));KV(i),L2(i,r)}}}break;case"textarea":JV(n,t);break;case"select":e=t.value,e!=null&&em(n,!!t.multiple,e,!1)}};oG=fN;aG=zd;var Dle={usingClientEntryPoint:!1,Events:[E0,Op,WS,rG,sG,fN]},Qg={findFiberByHostInstance:ad,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fle={bundleType:Qg.bundleType,version:Qg.version,rendererPackageName:Qg.rendererPackageName,rendererConfig:Qg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ac.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=uG(n),n===null?null:n.stateNode},findFiberByHostInstance:Qg.findFiberByHostInstance||kle,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var k_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!k_.isDisabled&&k_.supportsFiber)try{US=k_.inject(Fle),xl=k_}catch{}}io.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dle;io.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_N(e))throw Error(Ke(200));return Nle(n,e,null,t)};io.createRoot=function(n,e){if(!_N(n))throw Error(Ke(299));var t=!1,i="",r=W8;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=yN(n,1,!1,null,null,t,!1,i,r),n[xc]=e.current,Ov(n.nodeType===8?n.parentNode:n),new xN(e)};io.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ke(188)):(n=Object.keys(n).join(","),Error(Ke(268,n)));return n=uG(e),n=n===null?null:n.stateNode,n};io.flushSync=function(n){return zd(n)};io.hydrate=function(n,e,t){if(!KS(e))throw Error(Ke(200));return QS(null,n,e,!0,t)};io.hydrateRoot=function(n,e,t){if(!_N(n))throw Error(Ke(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=W8;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=H8(e,null,n,1,t??null,r,!1,s,o),n[xc]=e.current,Ov(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new ZS(e)};io.render=function(n,e,t){if(!KS(e))throw Error(Ke(200));return QS(null,n,e,!1,t)};io.unmountComponentAtNode=function(n){if(!KS(n))throw Error(Ke(40));return n._reactRootContainer?(zd(function(){QS(null,null,n,!1,function(){n._reactRootContainer=null,n[xc]=null})}),!0):!1};io.unstable_batchedUpdates=fN;io.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!KS(t))throw Error(Ke(200));if(n==null||n._reactInternals===void 0)throw Error(Ke(38));return QS(n,e,t,!1,i)};io.version="18.3.1-next-f1338f8080-20240426";function V8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(V8)}catch{}}V8(),VV.exports=io;var JS=VV.exports;const By=Ia(JS),PB={disabled:!1},Kb=ae.createContext(null);var Ule=function(e){return e.scrollTop},zy="unmounted",jh="exited",$h="entering",bp="entered",vR="exiting",Cc=function(n){BV(e,n);function e(i,r){var s;s=n.call(this,i,r)||this;var o=r,a=o&&!o.isMounting?i.enter:i.appear,l;return s.appearStatus=null,i.in?a?(l=jh,s.appearStatus=$h):l=bp:i.unmountOnExit||i.mountOnEnter?l=zy:l=jh,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(r,s){var o=r.in;return o&&s.status===zy?{status:jh}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(r){var s=null;if(r!==this.props){var o=this.state.status;this.props.in?o!==$h&&o!==bp&&(s=$h):(o===$h||o===bp)&&(s=vR)}this.updateStatus(!1,s)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var r=this.props.timeout,s,o,a;return s=o=a=r,r!=null&&typeof r!="number"&&(s=r.exit,o=r.enter,a=r.appear!==void 0?r.appear:o),{exit:s,enter:o,appear:a}},t.updateStatus=function(r,s){if(r===void 0&&(r=!1),s!==null)if(this.cancelNextCallback(),s===$h){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:By.findDOMNode(this);o&&Ule(o)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===jh&&this.setState({status:zy})},t.performEnter=function(r){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:r,l=this.props.nodeRef?[a]:[By.findDOMNode(this),a],c=l[0],u=l[1],h=this.getTimeouts(),d=a?h.appear:h.enter;if(!r&&!o||PB.disabled){this.safeSetState({status:bp},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:$h},function(){s.props.onEntering(c,u),s.onTransitionEnd(d,function(){s.safeSetState({status:bp},function(){s.props.onEntered(c,u)})})})},t.performExit=function(){var r=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:By.findDOMNode(this);if(!s||PB.disabled){this.safeSetState({status:jh},function(){r.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:vR},function(){r.props.onExiting(a),r.onTransitionEnd(o.exit,function(){r.safeSetState({status:jh},function(){r.props.onExited(a)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(r,s){s=this.setNextCallback(s),this.setState(r,s)},t.setNextCallback=function(r){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,r(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},t.onTransitionEnd=function(r,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:By.findDOMNode(this),a=r==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}r!=null&&setTimeout(this.nextCallback,r)},t.render=function(){var r=this.state.status;if(r===zy)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=UV(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ae.createElement(Kb.Provider,{value:null},typeof o=="function"?o(r,a):ae.cloneElement(ae.Children.only(o),a))},e}(ae.Component);Cc.contextType=Kb;Cc.propTypes={};function Af(){}Cc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Af,onEntering:Af,onEntered:Af,onExit:Af,onExiting:Af,onExited:Af};Cc.UNMOUNTED=zy;Cc.EXITED=jh;Cc.ENTERING=$h;Cc.ENTERED=bp;Cc.EXITING=vR;function Ble(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function wN(n,e){var t=function(s){return e&&R.isValidElement(s)?e(s):s},i=Object.create(null);return n&&R.Children.map(n,function(r){return r}).forEach(function(r){i[r.key]=t(r)}),i}function zle(n,e){n=n||{},e=e||{};function t(u){return u in e?e[u]:n[u]}var i=Object.create(null),r=[];for(var s in n)s in e?r.length&&(i[s]=r,r=[]):r.push(s);var o,a={};for(var l in e){if(i[l])for(o=0;o<i[l].length;o++){var c=i[l][o];a[i[l][o]]=t(c)}a[l]=t(l)}for(o=0;o<r.length;o++)a[r[o]]=t(r[o]);return a}function ud(n,e,t){return t[e]!=null?t[e]:n.props[e]}function Hle(n,e){return wN(n.children,function(t){return R.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:ud(t,"appear",n),enter:ud(t,"enter",n),exit:ud(t,"exit",n)})})}function Wle(n,e,t){var i=wN(n.children),r=zle(e,i);return Object.keys(r).forEach(function(s){var o=r[s];if(R.isValidElement(o)){var a=s in e,l=s in i,c=e[s],u=R.isValidElement(c)&&!c.props.in;l&&(!a||u)?r[s]=R.cloneElement(o,{onExited:t.bind(null,o),in:!0,exit:ud(o,"exit",n),enter:ud(o,"enter",n)}):!l&&a&&!u?r[s]=R.cloneElement(o,{in:!1}):l&&a&&R.isValidElement(c)&&(r[s]=R.cloneElement(o,{onExited:t.bind(null,o),in:c.props.in,exit:ud(o,"exit",n),enter:ud(o,"enter",n)}))}}),r}var Vle=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},Gle={component:"div",childFactory:function(e){return e}},su=function(n){BV(e,n);function e(i,r){var s;s=n.call(this,i,r)||this;var o=s.handleExited.bind(Ble(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(r,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?Hle(r,a):Wle(r,o,a),firstRender:!1}},t.handleExited=function(r,s){var o=wN(this.props.children);r.key in o||(r.props.onExited&&r.props.onExited(s),this.mounted&&this.setState(function(a){var l=Ta({},a.children);return delete l[r.key],{children:l}}))},t.render=function(){var r=this.props,s=r.component,o=r.childFactory,a=UV(r,["component","childFactory"]),l=this.state.contextValue,c=Vle(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?ae.createElement(Kb.Provider,{value:l},c):ae.createElement(Kb.Provider,{value:l},ae.createElement(s,a,c))},e}(ae.Component);su.propTypes={};su.defaultProps=Gle;var ll=function(){return ll=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},ll.apply(this,arguments)};function G8(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function jle(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return n.concat(s||Array.prototype.slice.call(e))}var W1="right-scroll-bar-position",V1="width-before-scroll-bar",$le="with-scroll-bars-hidden",Xle="--removed-body-scroll-bar-size";function UA(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function Yle(n,e){var t=R.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(i){var r=t.value;r!==i&&(t.value=i,t.callback(i,r))}}}})[0];return t.callback=e,t.facade}var qle=typeof window<"u"?R.useLayoutEffect:R.useEffect,RB=new WeakMap;function Zle(n,e){var t=Yle(null,function(i){return n.forEach(function(r){return UA(r,i)})});return qle(function(){var i=RB.get(t);if(i){var r=new Set(i),s=new Set(n),o=t.current;r.forEach(function(a){s.has(a)||UA(a,null)}),s.forEach(function(a){r.has(a)||UA(a,o)})}RB.set(t,n)},[n]),t}function Kle(n){return n}function Qle(n,e){e===void 0&&(e=Kle);var t=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(s){var o=e(s,i);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;t.length;){var o=t;t=[],o.forEach(s)}t={push:function(a){return s(a)},filter:function(){return t}}},assignMedium:function(s){i=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(s),o=t}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return r}function Jle(n){n===void 0&&(n={});var e=Qle(null);return e.options=ll({async:!0,ssr:!1},n),e}var j8=function(n){var e=n.sideCar,t=G8(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return R.createElement(i,ll({},t))};j8.isSideCarExport=!0;function ece(n,e){return n.useMedium(e),j8}var $8=Jle(),BA=function(){},eE=R.forwardRef(function(n,e){var t=R.useRef(null),i=R.useState({onScrollCapture:BA,onWheelCapture:BA,onTouchMoveCapture:BA}),r=i[0],s=i[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,h=n.shards,d=n.sideCar,f=n.noIsolation,p=n.inert,x=n.allowPinchZoom,v=n.as,y=v===void 0?"div":v,w=n.gapMode,_=G8(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=d,E=Zle([t,e]),M=ll(ll({},_),r);return R.createElement(R.Fragment,null,u&&R.createElement(b,{sideCar:$8,removeScrollBar:c,shards:h,noIsolation:f,inert:p,setCallbacks:s,allowPinchZoom:!!x,lockRef:t,gapMode:w}),o?R.cloneElement(R.Children.only(a),ll(ll({},M),{ref:E})):R.createElement(y,ll({},M,{className:l,ref:E}),a))});eE.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};eE.classNames={fullWidth:V1,zeroRight:W1};var tce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function nce(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=tce();return e&&n.setAttribute("nonce",e),n}function ice(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function rce(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var sce=function(){var n=0,e=null;return{add:function(t){n==0&&(e=nce())&&(ice(e,t),rce(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},oce=function(){var n=sce();return function(e,t){R.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},X8=function(){var n=oce(),e=function(t){var i=t.styles,r=t.dynamic;return n(i,r),null};return e},ace={left:0,top:0,right:0,gap:0},zA=function(n){return parseInt(n||"",10)||0},lce=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],i=e[n==="padding"?"paddingTop":"marginTop"],r=e[n==="padding"?"paddingRight":"marginRight"];return[zA(t),zA(i),zA(r)]},cce=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return ace;var e=lce(n),t=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-t+e[2]-e[0])}},uce=X8(),om="data-scroll-locked",hce=function(n,e,t,i){var r=n.left,s=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat($le,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(om,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(W1,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(V1,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(W1," .").concat(W1,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(V1," .").concat(V1,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(om,`] {
    `).concat(Xle,": ").concat(a,`px;
  }
`)},IB=function(){var n=parseInt(document.body.getAttribute(om)||"0",10);return isFinite(n)?n:0},dce=function(){R.useEffect(function(){return document.body.setAttribute(om,(IB()+1).toString()),function(){var n=IB()-1;n<=0?document.body.removeAttribute(om):document.body.setAttribute(om,n.toString())}},[])},fce=function(n){var e=n.noRelative,t=n.noImportant,i=n.gapMode,r=i===void 0?"margin":i;dce();var s=R.useMemo(function(){return cce(r)},[r]);return R.createElement(uce,{styles:hce(s,!e,r,t?"":"!important")})},xR=!1;if(typeof window<"u")try{var O_=Object.defineProperty({},"passive",{get:function(){return xR=!0,!0}});window.addEventListener("test",O_,O_),window.removeEventListener("test",O_,O_)}catch{xR=!1}var Cf=xR?{passive:!1}:!1,pce=function(n){return n.tagName==="TEXTAREA"},Y8=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!pce(n)&&t[e]==="visible")},mce=function(n){return Y8(n,"overflowY")},gce=function(n){return Y8(n,"overflowX")},LB=function(n,e){var t=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=q8(n,i);if(r){var s=Z8(n,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==t.body);return!1},yce=function(n){var e=n.scrollTop,t=n.scrollHeight,i=n.clientHeight;return[e,t,i]},vce=function(n){var e=n.scrollLeft,t=n.scrollWidth,i=n.clientWidth;return[e,t,i]},q8=function(n,e){return n==="v"?mce(e):gce(e)},Z8=function(n,e){return n==="v"?yce(e):vce(e)},xce=function(n,e){return n==="h"&&e==="rtl"?-1:1},_ce=function(n,e,t,i,r){var s=xce(n,window.getComputedStyle(e).direction),o=s*i,a=t.target,l=e.contains(a),c=!1,u=o>0,h=0,d=0;do{var f=Z8(n,a),p=f[0],x=f[1],v=f[2],y=x-v-s*p;(p||y)&&q8(n,a)&&(h+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(h)<1||!r)||!u&&(Math.abs(d)<1||!r))&&(c=!0),c},D_=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},NB=function(n){return[n.deltaX,n.deltaY]},kB=function(n){return n&&"current"in n?n.current:n},wce=function(n,e){return n[0]===e[0]&&n[1]===e[1]},bce=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},Sce=0,Pf=[];function Ece(n){var e=R.useRef([]),t=R.useRef([0,0]),i=R.useRef(),r=R.useState(Sce++)[0],s=R.useState(X8)[0],o=R.useRef(n);R.useEffect(function(){o.current=n},[n]),R.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(r));var x=jle([n.lockRef.current],(n.shards||[]).map(kB),!0).filter(Boolean);return x.forEach(function(v){return v.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),x.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(r))})}}},[n.inert,n.lockRef.current,n.shards]);var a=R.useCallback(function(x,v){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var y=D_(x),w=t.current,_="deltaX"in x?x.deltaX:w[0]-y[0],b="deltaY"in x?x.deltaY:w[1]-y[1],E,M=x.target,C=Math.abs(_)>Math.abs(b)?"h":"v";if("touches"in x&&C==="h"&&M.type==="range")return!1;var P=LB(C,M);if(!P)return!0;if(P?E=C:(E=C==="v"?"h":"v",P=LB(C,M)),!P)return!1;if(!i.current&&"changedTouches"in x&&(_||b)&&(i.current=E),!E)return!0;var T=i.current||E;return _ce(T,v,x,T==="h"?_:b,!0)},[]),l=R.useCallback(function(x){var v=x;if(!(!Pf.length||Pf[Pf.length-1]!==s)){var y="deltaY"in v?NB(v):D_(v),w=e.current.filter(function(E){return E.name===v.type&&(E.target===v.target||v.target===E.shadowParent)&&wce(E.delta,y)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var _=(o.current.shards||[]).map(kB).filter(Boolean).filter(function(E){return E.contains(v.target)}),b=_.length>0?a(v,_[0]):!o.current.noIsolation;b&&v.cancelable&&v.preventDefault()}}},[]),c=R.useCallback(function(x,v,y,w){var _={name:x,delta:v,target:y,should:w,shadowParent:Mce(y)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(b){return b!==_})},1)},[]),u=R.useCallback(function(x){t.current=D_(x),i.current=void 0},[]),h=R.useCallback(function(x){c(x.type,NB(x),x.target,a(x,n.lockRef.current))},[]),d=R.useCallback(function(x){c(x.type,D_(x),x.target,a(x,n.lockRef.current))},[]);R.useEffect(function(){return Pf.push(s),n.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:d}),document.addEventListener("wheel",l,Cf),document.addEventListener("touchmove",l,Cf),document.addEventListener("touchstart",u,Cf),function(){Pf=Pf.filter(function(x){return x!==s}),document.removeEventListener("wheel",l,Cf),document.removeEventListener("touchmove",l,Cf),document.removeEventListener("touchstart",u,Cf)}},[]);var f=n.removeScrollBar,p=n.inert;return R.createElement(R.Fragment,null,p?R.createElement(s,{styles:bce(r)}):null,f?R.createElement(fce,{gapMode:n.gapMode}):null)}function Mce(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const Tce=ece($8,Ece);var tE=R.forwardRef(function(n,e){return R.createElement(eE,ll({},n,{ref:e,sideCar:Tce}))});tE.classNames=eE.classNames;function Cr(n){return Object.keys(n)}function HA(n){return n&&typeof n=="object"&&!Array.isArray(n)}function bN(n,e){const t={...n},i=e;return HA(n)&&HA(e)&&Object.keys(e).forEach(r=>{HA(i[r])&&r in n?t[r]=bN(t[r],i[r]):t[r]=i[r]}),t}function Ace(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function Cce(n){var e;return typeof n!="string"||!n.includes("var(--mantine-scale)")?n:(e=n.match(/^calc\((.*?)\)$/))==null?void 0:e[1].split("*")[0].trim()}function _R(n){const e=Cce(n);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function WA(n){return n==="0rem"?"0rem":`calc(${n} * var(--mantine-scale))`}function K8(n,{shouldScale:e=!1}={}){function t(i){if(i===0||i==="0")return`0${n}`;if(typeof i=="number"){const r=`${i/16}${n}`;return e?WA(r):r}if(typeof i=="string"){if(i===""||i.startsWith("calc(")||i.startsWith("clamp(")||i.includes("rgba("))return i;if(i.includes(","))return i.split(",").map(s=>t(s)).join(",");if(i.includes(" "))return i.split(" ").map(s=>t(s)).join(" ");if(i.includes(n))return e?WA(i):i;const r=i.replace("px","");if(!Number.isNaN(Number(r))){const s=`${Number(r)/16}${n}`;return e?WA(s):s}}return i}return t}const Pe=K8("rem",{shouldScale:!0}),Qb=K8("em");function SN(n){return Object.keys(n).reduce((e,t)=>(n[t]!==void 0&&(e[t]=n[t]),e),{})}function Q8(n){if(typeof n=="number")return!0;if(typeof n=="string"){if(n.startsWith("calc(")||n.startsWith("var(")||n.includes(" ")&&n.trim()!=="")return!0;const e=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|%)?$/;return n.trim().split(/\s+/).every(i=>e.test(i))}return!1}function Pc(n){return Array.isArray(n)||n===null?!1:typeof n=="object"?n.type!==R.Fragment:!1}function Cl(n){const e=R.createContext(null);return[({children:r,value:s})=>k.jsx(e.Provider,{value:s,children:r}),()=>{const r=R.useContext(e);if(r===null)throw new Error(n);return r}]}function Pce(n=null){const e=R.createContext(n);return[({children:r,value:s})=>k.jsx(e.Provider,{value:s,children:r}),()=>R.useContext(e)]}function Jb(n,e){let t=n;for(;(t=t.parentElement)&&!t.matches(e););return t}function Rce(n,e,t){for(let i=n-1;i>=0;i-=1)if(!e[i].disabled)return i;if(t){for(let i=e.length-1;i>-1;i-=1)if(!e[i].disabled)return i}return n}function Ice(n,e,t){for(let i=n+1;i<e.length;i+=1)if(!e[i].disabled)return i;if(t){for(let i=0;i<e.length;i+=1)if(!e[i].disabled)return i}return n}function Lce(n,e,t){return Jb(n,t)===Jb(e,t)}function Nce({parentSelector:n,siblingSelector:e,onKeyDown:t,loop:i=!0,activateOnFocus:r=!1,dir:s="rtl",orientation:o}){return a=>{var p;t==null||t(a);const l=Array.from(((p=Jb(a.currentTarget,n))==null?void 0:p.querySelectorAll(e))||[]).filter(x=>Lce(a.currentTarget,x,n)),c=l.findIndex(x=>a.currentTarget===x),u=Ice(c,l,i),h=Rce(c,l,i),d=s==="rtl"?h:u,f=s==="rtl"?u:h;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),r&&l[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),r&&l[f].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),r&&l[h].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[u].focus(),r&&l[u].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const x=l.length-1;!l[x].disabled&&l[x].focus();break}}}}const kce={app:100,modal:200,popover:300,overlay:400,max:9999};function jo(n){return kce[n]}const Oce=()=>{};function Dce(n,e={active:!0}){return typeof n!="function"||!e.active?e.onKeyDown||Oce:t=>{var i;t.key==="Escape"&&(n(t),(i=e.onTrigger)==null||i.call(e))}}function qi(n,e="size",t=!0){if(n!==void 0)return Q8(n)?t?Pe(n):n:`var(--${e}-${n})`}function nE(n){return qi(n,"mantine-spacing")}function so(n){return n===void 0?"var(--mantine-radius-default)":qi(n,"mantine-radius")}function Do(n){return qi(n,"mantine-font-size")}function Fce(n){return qi(n,"mantine-line-height",!1)}function EN(n){if(n)return qi(n,"mantine-shadow",!1)}function dl(n,e){return t=>{n==null||n(t),e==null||e(t)}}function MN(n,e){return n in e?_R(e[n]):_R(n)}function OB(n,e){const t=n.map(i=>({value:i,px:MN(i,e)}));return t.sort((i,r)=>i.px-r.px),t}function Uce(n,e,t){var i;return t?Array.from(((i=Jb(t,e))==null?void 0:i.querySelectorAll(n))||[]).findIndex(r=>r===t):null}function Bce(){const[n,e]=R.useState(-1);return[n,{setHovered:e,resetHovered:()=>e(-1)}]}function J8(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=J8(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Zi(){for(var n,e,t=0,i="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=J8(n))&&(i&&(i+=" "),i+=e);return i}const zce={};function Hce(n){const e={};return n.forEach(t=>{Object.entries(t).forEach(([i,r])=>{e[i]?e[i]=Zi(e[i],r):e[i]=r})}),e}function iE({theme:n,classNames:e,props:t,stylesCtx:i}){const s=(Array.isArray(e)?e:[e]).map(o=>typeof o=="function"?o(n,t,i):o||zce);return Hce(s)}function eS({theme:n,styles:e,props:t,stylesCtx:i}){return(Array.isArray(e)?e:[e]).reduce((s,o)=>typeof o=="function"?{...s,...o(n,t,i)}:{...s,...o},{})}const ej=R.createContext(null);function Ju(){const n=R.useContext(ej);if(!n)throw new Error("[@mantine/core] MantineProvider was not found in tree");return n}function Wce(){return Ju().cssVariablesResolver}function Vce(){return Ju().classNamesPrefix}function TN(){return Ju().getStyleNonce}function Gce(){return Ju().withStaticClasses}function jce(){return Ju().headless}function $ce(){var n;return(n=Ju().stylesTransform)==null?void 0:n.sx}function Xce(){var n;return(n=Ju().stylesTransform)==null?void 0:n.styles}function Yce(n){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(n)}function qce(n){let e=n.replace("#","");if(e.length===3){const o=e.split("");e=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(e.length===8){const o=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:o}}const t=parseInt(e,16),i=t>>16&255,r=t>>8&255,s=t&255;return{r:i,g:r,b:s,a:1}}function Zce(n){const[e,t,i,r]=n.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:t,b:i,a:r||1}}function Kce(n){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,t=n.match(e);if(!t)return{r:0,g:0,b:0,a:1};const i=parseInt(t[1],10),r=parseInt(t[2],10)/100,s=parseInt(t[3],10)/100,o=t[5]?parseFloat(t[5]):void 0,a=(1-Math.abs(2*s-1))*r,l=i/60,c=a*(1-Math.abs(l%2-1)),u=s-a/2;let h,d,f;return l>=0&&l<1?(h=a,d=c,f=0):l>=1&&l<2?(h=c,d=a,f=0):l>=2&&l<3?(h=0,d=a,f=c):l>=3&&l<4?(h=0,d=c,f=a):l>=4&&l<5?(h=c,d=0,f=a):(h=a,d=0,f=c),{r:Math.round((h+u)*255),g:Math.round((d+u)*255),b:Math.round((f+u)*255),a:o||1}}function AN(n){return Yce(n)?qce(n):n.startsWith("rgb")?Zce(n):n.startsWith("hsl")?Kce(n):{r:0,g:0,b:0,a:1}}function F_(n,e){if(n.startsWith("var("))return`color-mix(in srgb, ${n}, black ${e*100}%)`;const{r:t,g:i,b:r,a:s}=AN(n),o=1-e,a=l=>Math.round(l*o);return`rgba(${a(t)}, ${a(i)}, ${a(r)}, ${s})`}function Gv(n,e){return typeof n.primaryShade=="number"?n.primaryShade:e==="dark"?n.primaryShade.dark:n.primaryShade.light}function VA(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function Qce(n){const e=n.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function Jce(n){if(n.startsWith("oklch("))return(Qce(n)||0)/100;const{r:e,g:t,b:i}=AN(n),r=e/255,s=t/255,o=i/255,a=VA(r),l=VA(s),c=VA(o);return .2126*a+.7152*l+.0722*c}function Jg(n,e=.179){return n.startsWith("var(")?!1:Jce(n)>e}function Jm({color:n,theme:e,colorScheme:t}){if(typeof n!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof n}`);if(n==="bright")return{color:n,value:t==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Jg(t==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(n==="dimmed")return{color:n,value:t==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Jg(t==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(n==="white"||n==="black")return{color:n,value:n==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Jg(n==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${n}`};const[i,r]=n.split("."),s=r?Number(r):void 0,o=i in e.colors;if(o){const a=s!==void 0?e.colors[i][s]:e.colors[i][Gv(e,t||"light")];return{color:i,value:a,shade:s,isThemeColor:o,isLight:Jg(a,e.luminanceThreshold),variable:r?`--mantine-color-${i}-${s}`:`--mantine-color-${i}-filled`}}return{color:n,value:n,isThemeColor:o,isLight:Jg(n,e.luminanceThreshold),shade:s,variable:void 0}}function zu(n,e){const t=Jm({color:n||e.primaryColor,theme:e});return t.variable?`var(${t.variable})`:n}function wR(n,e){const t={from:(n==null?void 0:n.from)||e.defaultGradient.from,to:(n==null?void 0:n.to)||e.defaultGradient.to,deg:(n==null?void 0:n.deg)||e.defaultGradient.deg||0},i=zu(t.from,e),r=zu(t.to,e);return`linear-gradient(${t.deg}deg, ${i} 0%, ${r} 100%)`}function il(n,e){if(typeof n!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(n.startsWith("var(")){const s=(1-e)*100;return`color-mix(in srgb, ${n}, transparent ${s}%)`}if(n.startsWith("oklch"))return n.includes("/")?n.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):n.replace(")",` / ${e})`);const{r:t,g:i,b:r}=AN(n);return`rgba(${t}, ${i}, ${r}, ${e})`}const Rf=il,eue=({color:n,theme:e,variant:t,gradient:i,autoContrast:r})=>{const s=Jm({color:n,theme:e}),o=typeof r=="boolean"?r:e.autoContrast;if(t==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${n}-filled)`,hover:`var(--mantine-color-${n}-filled-hover)`,color:a,border:`${Pe(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Pe(1)} solid transparent`}:{background:n,hover:F_(n,.1),color:a,border:`${Pe(1)} solid transparent`}}if(t==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${n}-light)`,hover:`var(--mantine-color-${n}-light-hover)`,color:`var(--mantine-color-${n}-light-color)`,border:`${Pe(1)} solid transparent`};const a=e.colors[s.color][s.shade];return{background:il(a,.1),hover:il(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Pe(1)} solid transparent`}}return{background:il(n,.1),hover:il(n,.12),color:n,border:`${Pe(1)} solid transparent`}}if(t==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${n}-outline-hover)`,color:`var(--mantine-color-${n}-outline)`,border:`${Pe(1)} solid var(--mantine-color-${n}-outline)`}:{background:"transparent",hover:il(e.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Pe(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:il(n,.05),color:n,border:`${Pe(1)} solid ${n}`};if(t==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${n}-light-hover)`,color:`var(--mantine-color-${n}-light-color)`,border:`${Pe(1)} solid transparent`};const a=e.colors[s.color][s.shade];return{background:"transparent",hover:il(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Pe(1)} solid transparent`}}return{background:"transparent",hover:il(n,.12),color:n,border:`${Pe(1)} solid transparent`}}return t==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${n}-light-color)`,border:`${Pe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Pe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:n,border:`${Pe(1)} solid transparent`}:t==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:F_(e.white,.01),color:`var(--mantine-color-${n}-filled)`,border:`${Pe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:F_(e.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Pe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:F_(e.white,.01),color:n,border:`${Pe(1)} solid transparent`}:t==="gradient"?{background:wR(i,e),hover:wR(i,e),color:"var(--mantine-color-white)",border:"none"}:t==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Pe(1)} solid var(--mantine-color-default-border)`}:{}},tue={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},DB="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",CN={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:tue,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:eue,autoContrast:!1,luminanceThreshold:.3,fontFamily:DB,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:DB,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Pe(34),lineHeight:"1.3"},h2:{fontSize:Pe(26),lineHeight:"1.35"},h3:{fontSize:Pe(22),lineHeight:"1.4"},h4:{fontSize:Pe(18),lineHeight:"1.45"},h5:{fontSize:Pe(16),lineHeight:"1.5"},h6:{fontSize:Pe(14),lineHeight:"1.5"}}},fontSizes:{xs:Pe(12),sm:Pe(14),md:Pe(16),lg:Pe(18),xl:Pe(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Pe(2),sm:Pe(4),md:Pe(8),lg:Pe(16),xl:Pe(32)},spacing:{xs:Pe(10),sm:Pe(12),md:Pe(16),lg:Pe(20),xl:Pe(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Pe(1)} ${Pe(3)} rgba(0, 0, 0, 0.05), 0 ${Pe(1)} ${Pe(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Pe(1)} ${Pe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Pe(10)} ${Pe(15)} ${Pe(-5)}, rgba(0, 0, 0, 0.04) 0 ${Pe(7)} ${Pe(7)} ${Pe(-5)}`,md:`0 ${Pe(1)} ${Pe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Pe(20)} ${Pe(25)} ${Pe(-5)}, rgba(0, 0, 0, 0.04) 0 ${Pe(10)} ${Pe(10)} ${Pe(-5)}`,lg:`0 ${Pe(1)} ${Pe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Pe(28)} ${Pe(23)} ${Pe(-7)}, rgba(0, 0, 0, 0.04) 0 ${Pe(12)} ${Pe(12)} ${Pe(-7)}`,xl:`0 ${Pe(1)} ${Pe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Pe(36)} ${Pe(28)} ${Pe(-7)}, rgba(0, 0, 0, 0.04) 0 ${Pe(17)} ${Pe(17)} ${Pe(-7)}`},other:{},components:{}};function FB(n){return n==="auto"||n==="dark"||n==="light"}function nue({key:n="mantine-color-scheme-value"}={}){let e;return{get:t=>{if(typeof window>"u")return t;try{const i=window.localStorage.getItem(n);return FB(i)?i:t}catch{return t}},set:t=>{try{window.localStorage.setItem(n,t)}catch{}},subscribe:t=>{e=i=>{i.storageArea===window.localStorage&&i.key===n&&FB(i.newValue)&&t(i.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(n)}}}const iue="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",UB="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function GA(n){return n<0||n>9?!1:parseInt(n.toString(),10)===n}function BB(n){if(!(n.primaryColor in n.colors))throw new Error(iue);if(typeof n.primaryShade=="object"&&(!GA(n.primaryShade.dark)||!GA(n.primaryShade.light)))throw new Error(UB);if(typeof n.primaryShade=="number"&&!GA(n.primaryShade))throw new Error(UB)}function rue(n,e){var i;if(!e)return BB(n),n;const t=bN(n,e);return e.fontFamily&&!((i=e.headings)!=null&&i.fontFamily)&&(t.headings.fontFamily=e.fontFamily),BB(t),t}const PN=R.createContext(null),sue=()=>R.useContext(PN)||CN;function oo(){const n=R.useContext(PN);if(!n)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return n}function tj({theme:n,children:e,inherit:t=!0}){const i=sue(),r=R.useMemo(()=>rue(t?i:CN,n),[n,i,t]);return k.jsx(PN.Provider,{value:r,children:e})}tj.displayName="@mantine/core/MantineThemeProvider";function oue(){const n=oo(),e=TN(),t=Cr(n.breakpoints).reduce((i,r)=>{const s=n.breakpoints[r].includes("px"),o=_R(n.breakpoints[r]),a=s?`${o-.1}px`:Qb(o-.1),l=s?`${o}px`:Qb(o);return`${i}@media (max-width: ${a}) {.mantine-visible-from-${r} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${r} {display: none !important;}}`},"");return k.jsx("style",{"data-mantine-styles":"classes",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:t}})}function jA(n){return Object.entries(n).map(([e,t])=>`${e}: ${t};`).join("")}function ey(n,e){return(Array.isArray(n)?n:[n]).reduce((i,r)=>`${r}{${i}}`,e)}function aue(n,e){const t=jA(n.variables),i=t?ey(e,t):"",r=jA(n.dark),s=jA(n.light),o=r?ey(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,r):"",a=s?ey(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,s):"";return`${i}${o}${a}`}function lue({color:n,theme:e,autoContrast:t}){return(typeof t=="boolean"?t:e.autoContrast)&&Jm({color:n||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function zB(n,e){return lue({color:n.colors[n.primaryColor][Gv(n,e)],theme:n,autoContrast:null})}function U_({theme:n,color:e,colorScheme:t,name:i=e,withColorValues:r=!0}){if(!n.colors[e])return{};if(t==="light"){const a=Gv(n,"light"),l={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-filled)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${a})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${a===9?8:a+1})`,[`--mantine-color-${i}-light`]:Rf(n.colors[e][a],.1),[`--mantine-color-${i}-light-hover`]:Rf(n.colors[e][a],.12),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${a})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${a})`,[`--mantine-color-${i}-outline-hover`]:Rf(n.colors[e][a],.05)};return r?{[`--mantine-color-${i}-0`]:n.colors[e][0],[`--mantine-color-${i}-1`]:n.colors[e][1],[`--mantine-color-${i}-2`]:n.colors[e][2],[`--mantine-color-${i}-3`]:n.colors[e][3],[`--mantine-color-${i}-4`]:n.colors[e][4],[`--mantine-color-${i}-5`]:n.colors[e][5],[`--mantine-color-${i}-6`]:n.colors[e][6],[`--mantine-color-${i}-7`]:n.colors[e][7],[`--mantine-color-${i}-8`]:n.colors[e][8],[`--mantine-color-${i}-9`]:n.colors[e][9],...l}:l}const s=Gv(n,"dark"),o={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-4)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${s})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${s===9?8:s+1})`,[`--mantine-color-${i}-light`]:Rf(n.colors[e][Math.max(0,s-2)],.15),[`--mantine-color-${i}-light-hover`]:Rf(n.colors[e][Math.max(0,s-2)],.2),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${Math.max(s-5,0)})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${Math.max(s-4,0)})`,[`--mantine-color-${i}-outline-hover`]:Rf(n.colors[e][Math.max(s-4,0)],.05)};return r?{[`--mantine-color-${i}-0`]:n.colors[e][0],[`--mantine-color-${i}-1`]:n.colors[e][1],[`--mantine-color-${i}-2`]:n.colors[e][2],[`--mantine-color-${i}-3`]:n.colors[e][3],[`--mantine-color-${i}-4`]:n.colors[e][4],[`--mantine-color-${i}-5`]:n.colors[e][5],[`--mantine-color-${i}-6`]:n.colors[e][6],[`--mantine-color-${i}-7`]:n.colors[e][7],[`--mantine-color-${i}-8`]:n.colors[e][8],[`--mantine-color-${i}-9`]:n.colors[e][9],...o}:o}function cue(n){return!!n&&typeof n=="object"&&"mantine-virtual-color"in n}function If(n,e,t){Cr(e).forEach(i=>Object.assign(n,{[`--mantine-${t}-${i}`]:e[i]}))}const nj=n=>{const e=Gv(n,"light"),t=n.defaultRadius in n.radius?n.radius[n.defaultRadius]:Pe(n.defaultRadius),i={variables:{"--mantine-scale":n.scale.toString(),"--mantine-cursor-type":n.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":n.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":n.fontSmoothing?"grayscale":"unset","--mantine-color-white":n.white,"--mantine-color-black":n.black,"--mantine-line-height":n.lineHeights.md,"--mantine-font-family":n.fontFamily,"--mantine-font-family-monospace":n.fontFamilyMonospace,"--mantine-font-family-headings":n.headings.fontFamily,"--mantine-heading-font-weight":n.headings.fontWeight,"--mantine-heading-text-wrap":n.headings.textWrap,"--mantine-radius-default":t,"--mantine-primary-color-filled":`var(--mantine-color-${n.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${n.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${n.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${n.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${n.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":zB(n,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":n.black,"--mantine-color-body":n.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${n.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":zB(n,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${n.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};If(i.variables,n.breakpoints,"breakpoint"),If(i.variables,n.spacing,"spacing"),If(i.variables,n.fontSizes,"font-size"),If(i.variables,n.lineHeights,"line-height"),If(i.variables,n.shadows,"shadow"),If(i.variables,n.radius,"radius"),n.colors[n.primaryColor].forEach((s,o)=>{i.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${n.primaryColor}-${o})`}),Cr(n.colors).forEach(s=>{const o=n.colors[s];if(cue(o)){Object.assign(i.light,U_({theme:n,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(i.dark,U_({theme:n,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,l)=>{i.variables[`--mantine-color-${s}-${l}`]=a}),Object.assign(i.light,U_({theme:n,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(i.dark,U_({theme:n,color:s,colorScheme:"dark",withColorValues:!1}))});const r=n.headings.sizes;return Cr(r).forEach(s=>{i.variables[`--mantine-${s}-font-size`]=r[s].fontSize,i.variables[`--mantine-${s}-line-height`]=r[s].lineHeight,i.variables[`--mantine-${s}-font-weight`]=r[s].fontWeight||n.headings.fontWeight}),i};function uue({theme:n,generator:e}){const t=nj(n),i=e==null?void 0:e(n);return i?bN(t,i):t}const $A=nj(CN);function hue(n){const e={variables:{},light:{},dark:{}};return Cr(n.variables).forEach(t=>{$A.variables[t]!==n.variables[t]&&(e.variables[t]=n.variables[t])}),Cr(n.light).forEach(t=>{$A.light[t]!==n.light[t]&&(e.light[t]=n.light[t])}),Cr(n.dark).forEach(t=>{$A.dark[t]!==n.dark[t]&&(e.dark[t]=n.dark[t])}),e}function due(n){return`
  ${n}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${n}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function ij({cssVariablesSelector:n,deduplicateCssVariables:e}){const t=oo(),i=TN(),r=Wce(),s=uue({theme:t,generator:r}),o=n===":root"&&e,a=o?hue(s):s,l=aue(a,n);return l?k.jsx("style",{"data-mantine-styles":!0,nonce:i==null?void 0:i(),dangerouslySetInnerHTML:{__html:`${l}${o?"":due(n)}`}}):null}ij.displayName="@mantine/CssVariables";function fue(){const n=console.error;console.error=(...e)=>{e.length>1&&typeof e[0]=="string"&&e[0].toLowerCase().includes("extra attributes from the server")&&typeof e[1]=="string"&&e[1].toLowerCase().includes("data-mantine-color-scheme")||n(...e)}}function Lf(n,e){var i;const t=n!=="auto"?n:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(i=e())==null||i.setAttribute("data-mantine-color-scheme",t)}function pue({manager:n,defaultColorScheme:e,getRootElement:t,forceColorScheme:i}){const r=R.useRef(),[s,o]=R.useState(()=>n.get(e)),a=i||s,l=R.useCallback(u=>{i||(Lf(u,t),o(u),n.set(u))},[n.set,a,i]),c=R.useCallback(()=>{o(e),Lf(e,t),n.clear()},[n.clear,e]);return R.useEffect(()=>(n.subscribe(l),n.unsubscribe),[n.subscribe,n.unsubscribe]),Ym(()=>{Lf(n.get(e),t)},[]),R.useEffect(()=>{var h;if(i)return Lf(i,t),()=>{};i===void 0&&Lf(s,t),r.current=window.matchMedia("(prefers-color-scheme: dark)");const u=d=>{s==="auto"&&Lf(d.matches?"dark":"light",t)};return(h=r.current)==null||h.addEventListener("change",u),()=>{var d;return(d=r.current)==null?void 0:d.removeEventListener("change",u)}},[s,i]),{colorScheme:a,setColorScheme:l,clearColorScheme:c}}function mue({respectReducedMotion:n,getRootElement:e}){Ym(()=>{var t;n&&((t=e())==null||t.setAttribute("data-respect-reduced-motion","true"))},[n])}fue();function rj({theme:n,children:e,getStyleNonce:t,withStaticClasses:i=!0,withGlobalClasses:r=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:c=nue(),defaultColorScheme:u="light",getRootElement:h=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:f,stylesTransform:p}){const{colorScheme:x,setColorScheme:v,clearColorScheme:y}=pue({defaultColorScheme:u,forceColorScheme:f,manager:c,getRootElement:h});return mue({respectReducedMotion:(n==null?void 0:n.respectReducedMotion)||!1,getRootElement:h}),k.jsx(ej.Provider,{value:{colorScheme:x,setColorScheme:v,clearColorScheme:y,getRootElement:h,classNamesPrefix:l,getStyleNonce:t,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:i,stylesTransform:p},children:k.jsxs(tj,{theme:n,children:[o&&k.jsx(ij,{cssVariablesSelector:a,deduplicateCssVariables:s}),r&&k.jsx(oue,{}),e]})})}rj.displayName="@mantine/core/MantineProvider";function rE({classNames:n,styles:e,props:t,stylesCtx:i}){const r=oo();return{resolvedClassNames:iE({theme:r,classNames:n,props:t,stylesCtx:i||void 0}),resolvedStyles:eS({theme:r,styles:e,props:t,stylesCtx:i||void 0})}}const gue={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function yue({theme:n,options:e,unstyled:t}){return Zi((e==null?void 0:e.focusable)&&!t&&(n.focusClassName||gue[n.focusRing]),(e==null?void 0:e.active)&&!t&&n.activeClassName)}function vue({selector:n,stylesCtx:e,options:t,props:i,theme:r}){return iE({theme:r,classNames:t==null?void 0:t.classNames,props:(t==null?void 0:t.props)||i,stylesCtx:e})[n]}function HB({selector:n,stylesCtx:e,theme:t,classNames:i,props:r}){return iE({theme:t,classNames:i,props:r,stylesCtx:e})[n]}function xue({rootSelector:n,selector:e,className:t}){return n===e?t:void 0}function _ue({selector:n,classes:e,unstyled:t}){return t?void 0:e[n]}function wue({themeName:n,classNamesPrefix:e,selector:t,withStaticClass:i}){return i===!1?[]:n.map(r=>`${e}-${r}-${t}`)}function bue({themeName:n,theme:e,selector:t,props:i,stylesCtx:r}){return n.map(s=>{var o,a;return(a=iE({theme:e,classNames:(o=e.components[s])==null?void 0:o.classNames,props:i,stylesCtx:r}))==null?void 0:a[t]})}function Sue({options:n,classes:e,selector:t,unstyled:i}){return n!=null&&n.variant&&!i?e[`${t}--${n.variant}`]:void 0}function Eue({theme:n,options:e,themeName:t,selector:i,classNamesPrefix:r,classNames:s,classes:o,unstyled:a,className:l,rootSelector:c,props:u,stylesCtx:h,withStaticClasses:d,headless:f,transformedStyles:p}){return Zi(yue({theme:n,options:e,unstyled:a||f}),bue({theme:n,themeName:t,selector:i,props:u,stylesCtx:h}),Sue({options:e,classes:o,selector:i,unstyled:a}),HB({selector:i,stylesCtx:h,theme:n,classNames:s,props:u}),HB({selector:i,stylesCtx:h,theme:n,classNames:p,props:u}),vue({selector:i,stylesCtx:h,options:e,props:u,theme:n}),xue({rootSelector:c,selector:i,className:l}),_ue({selector:i,classes:o,unstyled:a||f}),d&&!f&&wue({themeName:t,classNamesPrefix:r,selector:i,withStaticClass:e==null?void 0:e.withStaticClass}),e==null?void 0:e.className)}function Mue({theme:n,themeName:e,props:t,stylesCtx:i,selector:r}){return e.map(s=>{var o;return eS({theme:n,styles:(o=n.components[s])==null?void 0:o.styles,props:t,stylesCtx:i})[r]}).reduce((s,o)=>({...s,...o}),{})}function bR({style:n,theme:e}){return Array.isArray(n)?[...n].reduce((t,i)=>({...t,...bR({style:i,theme:e})}),{}):typeof n=="function"?n(e):n??{}}function Tue(n){return n.reduce((e,t)=>(t&&Object.keys(t).forEach(i=>{e[i]={...e[i],...SN(t[i])}}),e),{})}function Aue({vars:n,varsResolver:e,theme:t,props:i,stylesCtx:r,selector:s,themeName:o,headless:a}){var l;return(l=Tue([a?{}:e==null?void 0:e(t,i,r),...o.map(c=>{var u,h,d;return(d=(h=(u=t.components)==null?void 0:u[c])==null?void 0:h.vars)==null?void 0:d.call(h,t,i,r)}),n==null?void 0:n(t,i,r)]))==null?void 0:l[s]}function Cue({theme:n,themeName:e,selector:t,options:i,props:r,stylesCtx:s,rootSelector:o,styles:a,style:l,vars:c,varsResolver:u,headless:h,withStylesTransform:d}){return{...!d&&Mue({theme:n,themeName:e,props:r,stylesCtx:s,selector:t}),...!d&&eS({theme:n,styles:a,props:r,stylesCtx:s})[t],...!d&&eS({theme:n,styles:i==null?void 0:i.styles,props:(i==null?void 0:i.props)||r,stylesCtx:s})[t],...Aue({theme:n,props:r,stylesCtx:s,vars:c,varsResolver:u,selector:t,themeName:e,headless:h}),...o===t?bR({style:l,theme:n}):null,...bR({style:i==null?void 0:i.style,theme:n})}}function Pue({props:n,stylesCtx:e,themeName:t}){var o;const i=oo(),r=(o=Xce())==null?void 0:o();return{getTransformedStyles:a=>r?[...a.map(c=>r(c,{props:n,theme:i,ctx:e})),...t.map(c=>{var u;return r((u=i.components[c])==null?void 0:u.styles,{props:n,theme:i,ctx:e})})].filter(Boolean):[],withStylesTransform:!!r}}function on({name:n,classes:e,props:t,stylesCtx:i,className:r,style:s,rootSelector:o="root",unstyled:a,classNames:l,styles:c,vars:u,varsResolver:h}){const d=oo(),f=Vce(),p=Gce(),x=jce(),v=(Array.isArray(n)?n:[n]).filter(_=>_),{withStylesTransform:y,getTransformedStyles:w}=Pue({props:t,stylesCtx:i,themeName:v});return(_,b)=>({className:Eue({theme:d,options:b,themeName:v,selector:_,classNamesPrefix:f,classNames:l,classes:e,unstyled:a,className:r,rootSelector:o,props:t,stylesCtx:i,withStaticClasses:p,headless:x,transformedStyles:w([b==null?void 0:b.styles,c])}),style:Cue({theme:d,themeName:v,selector:_,options:b,props:t,stylesCtx:i,rootSelector:o,styles:c,style:s,vars:u,varsResolver:h,headless:x,withStylesTransform:y})})}function st(n,e,t){var o;const i=oo(),r=(o=i.components[n])==null?void 0:o.defaultProps,s=typeof r=="function"?r(i):r;return{...e,...s,...SN(t)}}function XA(n){return Cr(n).reduce((e,t)=>n[t]!==void 0?`${e}${Ace(t)}:${n[t]};`:e,"").trim()}function Rue({selector:n,styles:e,media:t,container:i}){const r=e?XA(e):"",s=Array.isArray(t)?t.map(a=>`@media${a.query}{${n}{${XA(a.styles)}}}`):[],o=Array.isArray(i)?i.map(a=>`@container ${a.query}{${n}{${XA(a.styles)}}}`):[];return`${r?`${n}{${r}}`:""}${s.join("")}${o.join("")}`.trim()}function sj(n){const e=TN();return k.jsx("style",{"data-mantine-styles":"inline",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:Rue(n)}})}function RN(n){const{m:e,mx:t,my:i,mt:r,mb:s,ml:o,mr:a,me:l,ms:c,p:u,px:h,py:d,pt:f,pb:p,pl:x,pr:v,pe:y,ps:w,bd:_,bg:b,c:E,opacity:M,ff:C,fz:P,fw:T,lts:I,ta:U,lh:j,fs:B,tt:z,td:$,w:H,miw:Z,maw:O,h:W,mih:D,mah:Y,bgsz:Q,bgp:re,bgr:ce,bga:oe,pos:he,top:Re,left:Oe,bottom:Ve,right:Je,inset:Fe,display:J,flex:ge,hiddenFrom:de,visibleFrom:Ae,lightHidden:Ie,darkHidden:me,sx:ye,...ke}=n;return{styleProps:SN({m:e,mx:t,my:i,mt:r,mb:s,ml:o,mr:a,me:l,ms:c,p:u,px:h,py:d,pt:f,pb:p,pl:x,pr:v,pe:y,ps:w,bd:_,bg:b,c:E,opacity:M,ff:C,fz:P,fw:T,lts:I,ta:U,lh:j,fs:B,tt:z,td:$,w:H,miw:Z,maw:O,h:W,mih:D,mah:Y,bgsz:Q,bgp:re,bgr:ce,bga:oe,pos:he,top:Re,left:Oe,bottom:Ve,right:Je,inset:Fe,display:J,flex:ge,hiddenFrom:de,visibleFrom:Ae,lightHidden:Ie,darkHidden:me,sx:ye}),rest:ke}}const Iue={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function IN(n,e){const t=Jm({color:n,theme:e});return t.color==="dimmed"?"var(--mantine-color-dimmed)":t.color==="bright"?"var(--mantine-color-bright)":t.variable?`var(${t.variable})`:t.color}function Lue(n,e){const t=Jm({color:n,theme:e});return t.isThemeColor&&t.shade===void 0?`var(--mantine-color-${t.color}-text)`:IN(n,e)}function Nue(n,e){if(typeof n=="number")return Pe(n);if(typeof n=="string"){const[t,i,...r]=n.split(" ").filter(o=>o.trim()!=="");let s=`${Pe(t)}`;return i&&(s+=` ${i}`),r.length>0&&(s+=` ${IN(r.join(" "),e)}`),s.trim()}return n}const WB={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function kue(n){return typeof n=="string"&&n in WB?WB[n]:n}const Oue=["h1","h2","h3","h4","h5","h6"];function Due(n,e){return typeof n=="string"&&n in e.fontSizes?`var(--mantine-font-size-${n})`:typeof n=="string"&&Oue.includes(n)?`var(--mantine-${n}-font-size)`:typeof n=="number"||typeof n=="string"?Pe(n):n}function Fue(n){return n}const Uue=["h1","h2","h3","h4","h5","h6"];function Bue(n,e){return typeof n=="string"&&n in e.lineHeights?`var(--mantine-line-height-${n})`:typeof n=="string"&&Uue.includes(n)?`var(--mantine-${n}-line-height)`:n}function zue(n){return typeof n=="number"?Pe(n):n}function Hue(n,e){if(typeof n=="number")return Pe(n);if(typeof n=="string"){const t=n.replace("-","");if(!(t in e.spacing))return Pe(n);const i=`--mantine-spacing-${t}`;return n.startsWith("-")?`calc(var(${i}) * -1)`:`var(${i})`}return n}const YA={color:IN,textColor:Lue,fontSize:Due,spacing:Hue,identity:Fue,size:zue,lineHeight:Bue,fontFamily:kue,border:Nue};function VB(n){return n.replace("(min-width: ","").replace("em)","")}function Wue({media:n,...e}){const i=Object.keys(n).sort((r,s)=>Number(VB(r))-Number(VB(s))).map(r=>({query:r,styles:n[r]}));return{...e,media:i}}function Vue(n){if(typeof n!="object"||n===null)return!1;const e=Object.keys(n);return!(e.length===1&&e[0]==="base")}function Gue(n){return typeof n=="object"&&n!==null?"base"in n?n.base:void 0:n}function jue(n){return typeof n=="object"&&n!==null?Cr(n).filter(e=>e!=="base"):[]}function $ue(n,e){return typeof n=="object"&&n!==null&&e in n?n[e]:n}function Xue({styleProps:n,data:e,theme:t}){return Wue(Cr(n).reduce((i,r)=>{if(r==="hiddenFrom"||r==="visibleFrom"||r==="sx")return i;const s=e[r],o=Array.isArray(s.property)?s.property:[s.property],a=Gue(n[r]);if(!Vue(n[r]))return o.forEach(c=>{i.inlineStyles[c]=YA[s.type](a,t)}),i;i.hasResponsiveStyles=!0;const l=jue(n[r]);return o.forEach(c=>{a&&(i.styles[c]=YA[s.type](a,t)),l.forEach(u=>{const h=`(min-width: ${t.breakpoints[u]})`;i.media[h]={...i.media[h],[c]:YA[s.type]($ue(n[r],u),t)}})}),i},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function Yue(){return`__m__-${R.useId().replace(/:/g,"")}`}function oj(n,e){return Array.isArray(n)?[...n].reduce((t,i)=>({...t,...oj(i,e)}),{}):typeof n=="function"?n(e):n??{}}function aj(n){return n.startsWith("data-")?n:`data-${n}`}function que(n){return Object.keys(n).reduce((e,t)=>{const i=n[t];return i===void 0||i===""||i===!1||i===null||(e[aj(t)]=n[t]),e},{})}function lj(n){return n?typeof n=="string"?{[aj(n)]:!0}:Array.isArray(n)?[...n].reduce((e,t)=>({...e,...lj(t)}),{}):que(n):null}function SR(n,e){return Array.isArray(n)?[...n].reduce((t,i)=>({...t,...SR(i,e)}),{}):typeof n=="function"?n(e):n??{}}function Zue({theme:n,style:e,vars:t,styleProps:i}){const r=SR(e,n),s=SR(t,n);return{...r,...s,...i}}const cj=R.forwardRef(({component:n,style:e,__vars:t,className:i,variant:r,mod:s,size:o,hiddenFrom:a,visibleFrom:l,lightHidden:c,darkHidden:u,renderRoot:h,__size:d,...f},p)=>{var P;const x=oo(),v=n||"div",{styleProps:y,rest:w}=RN(f),_=$ce(),b=(P=_==null?void 0:_())==null?void 0:P(y.sx),E=Yue(),M=Xue({styleProps:y,theme:x,data:Iue}),C={ref:p,style:Zue({theme:x,style:e,vars:t,styleProps:M.inlineStyles}),className:Zi(i,b,{[E]:M.hasResponsiveStyles,"mantine-light-hidden":c,"mantine-dark-hidden":u,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":r,"data-size":Q8(o)?void 0:o||void 0,size:d,...lj(s),...w};return k.jsxs(k.Fragment,{children:[M.hasResponsiveStyles&&k.jsx(sj,{selector:`.${E}`,styles:M.styles,media:M.media}),typeof h=="function"?h(C):k.jsx(v,{...C})]})});cj.displayName="@mantine/core/Box";const pt=cj;function uj(n){return n}function Pt(n){const e=R.forwardRef(n);return e.extend=uj,e.withProps=t=>{const i=R.forwardRef((r,s)=>k.jsx(e,{...t,...r,ref:s}));return i.extend=e.extend,i.displayName=`WithProps(${e.displayName})`,i},e}function Na(n){const e=R.forwardRef(n);return e.withProps=t=>{const i=R.forwardRef((r,s)=>k.jsx(e,{...t,...r,ref:s}));return i.extend=e.extend,i.displayName=`WithProps(${e.displayName})`,i},e.extend=uj,e}const Kue=R.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function eg(){return R.useContext(Kue)}const[Que,$o]=Cl("ScrollArea.Root component was not found in tree");function Am(n,e){const t=Jh(e);Ym(()=>{let i=0;if(n){const r=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(t)});return r.observe(n),()=>{window.cancelAnimationFrame(i),r.unobserve(n)}}},[n,t])}const Jue=R.forwardRef((n,e)=>{const{style:t,...i}=n,r=$o(),[s,o]=R.useState(0),[a,l]=R.useState(0),c=!!(s&&a);return Am(r.scrollbarX,()=>{var h;const u=((h=r.scrollbarX)==null?void 0:h.offsetHeight)||0;r.onCornerHeightChange(u),l(u)}),Am(r.scrollbarY,()=>{var h;const u=((h=r.scrollbarY)==null?void 0:h.offsetWidth)||0;r.onCornerWidthChange(u),o(u)}),c?k.jsx("div",{...i,ref:e,style:{...t,width:s,height:a}}):null}),ehe=R.forwardRef((n,e)=>{const t=$o(),i=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&i?k.jsx(Jue,{...n,ref:e}):null}),the={scrollHideDelay:1e3,type:"hover"},hj=R.forwardRef((n,e)=>{const t=st("ScrollAreaRoot",the,n),{type:i,scrollHideDelay:r,scrollbars:s,...o}=t,[a,l]=R.useState(null),[c,u]=R.useState(null),[h,d]=R.useState(null),[f,p]=R.useState(null),[x,v]=R.useState(null),[y,w]=R.useState(0),[_,b]=R.useState(0),[E,M]=R.useState(!1),[C,P]=R.useState(!1),T=mr(e,I=>l(I));return k.jsx(Que,{value:{type:i,scrollHideDelay:r,scrollArea:a,viewport:c,onViewportChange:u,content:h,onContentChange:d,scrollbarX:f,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:M,scrollbarY:x,onScrollbarYChange:v,scrollbarYEnabled:C,onScrollbarYEnabledChange:P,onCornerWidthChange:w,onCornerHeightChange:b},children:k.jsx(pt,{...o,ref:T,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${_}px`}})})});hj.displayName="@mantine/core/ScrollAreaRoot";function dj(n,e){const t=n/e;return Number.isNaN(t)?0:t}function sE(n){const e=dj(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,i=(n.scrollbar.size-t)*e;return Math.max(i,18)}function fj(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(n[1]-n[0]);return e[0]+i*(t-n[0])}}function nhe(n,[e,t]){return Math.min(t,Math.max(e,n))}function GB(n,e,t="ltr"){const i=sE(e),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-r,o=e.content-e.viewport,a=s-i,l=t==="ltr"?[0,o]:[o*-1,0],c=nhe(n,l);return fj([0,o],[0,a])(c)}function ihe(n,e,t,i="ltr"){const r=sE(t),s=r/2,o=e||s,a=r-o,l=t.scrollbar.paddingStart+o,c=t.scrollbar.size-t.scrollbar.paddingEnd-a,u=t.content-t.viewport,h=i==="ltr"?[0,u]:[u*-1,0];return fj([l,c],h)(n)}function pj(n,e){return n>0&&n<e}function tS(n){return n?parseInt(n,10):0}function Ed(n,e,{checkForDefaultPrevented:t=!0}={}){return i=>{n==null||n(i),(t===!1||!i.defaultPrevented)&&(e==null||e(i))}}const[rhe,mj]=Cl("ScrollAreaScrollbar was not found in tree"),gj=R.forwardRef((n,e)=>{const{sizes:t,hasThumb:i,onThumbChange:r,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:l,onWheelScroll:c,onResize:u,...h}=n,d=$o(),[f,p]=R.useState(null),x=mr(e,P=>p(P)),v=R.useRef(null),y=R.useRef(""),{viewport:w}=d,_=t.content-t.viewport,b=Jh(c),E=Jh(a),M=DS(u,10),C=P=>{if(v.current){const T=P.clientX-v.current.left,I=P.clientY-v.current.top;l({x:T,y:I})}};return R.useEffect(()=>{const P=T=>{const I=T.target;(f==null?void 0:f.contains(I))&&b(T,_)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[w,f,_,b]),R.useEffect(E,[t,E]),Am(f,M),Am(d.content,M),k.jsx(rhe,{value:{scrollbar:f,hasThumb:i,onThumbChange:Jh(r),onThumbPointerUp:Jh(s),onThumbPositionChange:E,onThumbPointerDown:Jh(o)},children:k.jsx("div",{...h,ref:x,"data-mantine-scrollbar":!0,style:{position:"absolute",...h.style},onPointerDown:Ed(n.onPointerDown,P=>{P.preventDefault(),P.button===0&&(P.target.setPointerCapture(P.pointerId),v.current=f.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",C(P))}),onPointerMove:Ed(n.onPointerMove,C),onPointerUp:Ed(n.onPointerUp,P=>{P.preventDefault();const T=P.target;T.hasPointerCapture(P.pointerId)&&T.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=y.current,v.current=null})})})}),yj=R.forwardRef((n,e)=>{const{sizes:t,onSizesChange:i,style:r,...s}=n,o=$o(),[a,l]=R.useState(),c=R.useRef(null),u=mr(e,c,o.onScrollbarXChange);return R.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),k.jsx(gj,{"data-orientation":"horizontal",...s,ref:u,sizes:t,style:{...r,"--sa-thumb-width":`${sE(t)}px`},onThumbPointerDown:h=>n.onThumbPointerDown(h.x),onDragScroll:h=>n.onDragScroll(h.x),onWheelScroll:(h,d)=>{if(o.viewport){const f=o.viewport.scrollLeft+h.deltaX;n.onWheelScroll(f),pj(f,d)&&h.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&i({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:tS(a.paddingLeft),paddingEnd:tS(a.paddingRight)}})}})});yj.displayName="@mantine/core/ScrollAreaScrollbarX";const vj=R.forwardRef((n,e)=>{const{sizes:t,onSizesChange:i,style:r,...s}=n,o=$o(),[a,l]=R.useState(),c=R.useRef(null),u=mr(e,c,o.onScrollbarYChange);return R.useEffect(()=>{c.current&&l(window.getComputedStyle(c.current))},[]),k.jsx(gj,{...s,"data-orientation":"vertical",ref:u,sizes:t,style:{"--sa-thumb-height":`${sE(t)}px`,...r},onThumbPointerDown:h=>n.onThumbPointerDown(h.y),onDragScroll:h=>n.onDragScroll(h.y),onWheelScroll:(h,d)=>{if(o.viewport){const f=o.viewport.scrollTop+h.deltaY;n.onWheelScroll(f),pj(f,d)&&h.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&i({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:tS(a.paddingTop),paddingEnd:tS(a.paddingBottom)}})}})});vj.displayName="@mantine/core/ScrollAreaScrollbarY";const oE=R.forwardRef((n,e)=>{const{orientation:t="vertical",...i}=n,{dir:r}=eg(),s=$o(),o=R.useRef(null),a=R.useRef(0),[l,c]=R.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=dj(l.viewport,l.content),h={...i,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>{o.current=f},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:f=>{a.current=f}},d=(f,p)=>ihe(f,a.current,l,p);return t==="horizontal"?k.jsx(yj,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const f=s.viewport.scrollLeft,p=GB(f,l,r);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=d(f,r))}}):t==="vertical"?k.jsx(vj,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const f=s.viewport.scrollTop,p=GB(f,l);l.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=d(f))}}):null});oE.displayName="@mantine/core/ScrollAreaScrollbarVisible";const LN=R.forwardRef((n,e)=>{const t=$o(),{forceMount:i,...r}=n,[s,o]=R.useState(!1),a=n.orientation==="horizontal",l=DS(()=>{if(t.viewport){const c=t.viewport.offsetWidth<t.viewport.scrollWidth,u=t.viewport.offsetHeight<t.viewport.scrollHeight;o(a?c:u)}},10);return Am(t.viewport,l),Am(t.content,l),i||s?k.jsx(oE,{"data-state":s?"visible":"hidden",...r,ref:e}):null});LN.displayName="@mantine/core/ScrollAreaScrollbarAuto";const xj=R.forwardRef((n,e)=>{const{forceMount:t,...i}=n,r=$o(),[s,o]=R.useState(!1);return R.useEffect(()=>{const{scrollArea:a}=r;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},u=()=>{l=window.setTimeout(()=>o(!1),r.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[r.scrollArea,r.scrollHideDelay]),t||s?k.jsx(LN,{"data-state":s?"visible":"hidden",...i,ref:e}):null});xj.displayName="@mantine/core/ScrollAreaScrollbarHover";const she=R.forwardRef((n,e)=>{const{forceMount:t,...i}=n,r=$o(),s=n.orientation==="horizontal",[o,a]=R.useState("hidden"),l=DS(()=>a("idle"),100);return R.useEffect(()=>{if(o==="idle"){const c=window.setTimeout(()=>a("hidden"),r.scrollHideDelay);return()=>window.clearTimeout(c)}},[o,r.scrollHideDelay]),R.useEffect(()=>{const{viewport:c}=r,u=s?"scrollLeft":"scrollTop";if(c){let h=c[u];const d=()=>{const f=c[u];h!==f&&(a("scrolling"),l()),h=f};return c.addEventListener("scroll",d),()=>c.removeEventListener("scroll",d)}},[r.viewport,s,l]),t||o!=="hidden"?k.jsx(oE,{"data-state":o==="hidden"?"hidden":"visible",...i,ref:e,onPointerEnter:Ed(n.onPointerEnter,()=>a("interacting")),onPointerLeave:Ed(n.onPointerLeave,()=>a("idle"))}):null}),ER=R.forwardRef((n,e)=>{const{forceMount:t,...i}=n,r=$o(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=r,a=n.orientation==="horizontal";return R.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),r.type==="hover"?k.jsx(xj,{...i,ref:e,forceMount:t}):r.type==="scroll"?k.jsx(she,{...i,ref:e,forceMount:t}):r.type==="auto"?k.jsx(LN,{...i,ref:e,forceMount:t}):r.type==="always"?k.jsx(oE,{...i,ref:e}):null});ER.displayName="@mantine/core/ScrollAreaScrollbar";function ohe(n,e=()=>{}){let t={left:n.scrollLeft,top:n.scrollTop},i=0;return function r(){const s={left:n.scrollLeft,top:n.scrollTop},o=t.left!==s.left,a=t.top!==s.top;(o||a)&&e(),t=s,i=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(i)}const _j=R.forwardRef((n,e)=>{const{style:t,...i}=n,r=$o(),s=mj(),{onThumbPositionChange:o}=s,a=mr(e,u=>s.onThumbChange(u)),l=R.useRef(),c=DS(()=>{l.current&&(l.current(),l.current=void 0)},100);return R.useEffect(()=>{const{viewport:u}=r;if(u){const h=()=>{if(c(),!l.current){const d=ohe(u,o);l.current=d,o()}};return o(),u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[r.viewport,c,o]),k.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...i,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...t},onPointerDownCapture:Ed(n.onPointerDownCapture,u=>{const d=u.target.getBoundingClientRect(),f=u.clientX-d.left,p=u.clientY-d.top;s.onThumbPointerDown({x:f,y:p})}),onPointerUp:Ed(n.onPointerUp,s.onThumbPointerUp)})});_j.displayName="@mantine/core/ScrollAreaThumb";const MR=R.forwardRef((n,e)=>{const{forceMount:t,...i}=n,r=mj();return t||r.hasThumb?k.jsx(_j,{ref:e,...i}):null});MR.displayName="@mantine/core/ScrollAreaThumb";const wj=R.forwardRef(({children:n,style:e,...t},i)=>{const r=$o(),s=mr(i,r.onViewportChange);return k.jsx(pt,{...t,ref:s,style:{overflowX:r.scrollbarXEnabled?"scroll":"hidden",overflowY:r.scrollbarYEnabled?"scroll":"hidden",...e},children:k.jsx("div",{style:{minWidth:"100%",display:"table"},ref:r.onContentChange,children:n})})});wj.displayName="@mantine/core/ScrollAreaViewport";var NN={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const bj={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},ahe=(n,{scrollbarSize:e})=>({root:{"--scrollarea-scrollbar-size":Pe(e)}}),T0=Pt((n,e)=>{const t=st("ScrollArea",bj,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,scrollbarSize:l,vars:c,type:u,scrollHideDelay:h,viewportProps:d,viewportRef:f,onScrollPositionChange:p,children:x,offsetScrollbars:v,scrollbars:y,onBottomReached:w,onTopReached:_,...b}=t,[E,M]=R.useState(!1),C=on({name:"ScrollArea",props:t,classes:NN,className:r,style:s,classNames:i,styles:o,unstyled:a,vars:c,varsResolver:ahe});return k.jsxs(hj,{type:u==="never"?"always":u,scrollHideDelay:h,ref:e,scrollbars:y,...C("root"),...b,children:[k.jsx(wj,{...d,...C("viewport",{style:d==null?void 0:d.style}),ref:f,"data-offset-scrollbars":v===!0?"xy":v||void 0,"data-scrollbars":y||void 0,onScroll:P=>{var j;(j=d==null?void 0:d.onScroll)==null||j.call(d,P),p==null||p({x:P.currentTarget.scrollLeft,y:P.currentTarget.scrollTop});const{scrollTop:T,scrollHeight:I,clientHeight:U}=P.currentTarget;T-(I-U)>=0&&(w==null||w()),T===0&&(_==null||_())},children:x}),(y==="xy"||y==="x")&&k.jsx(ER,{...C("scrollbar"),orientation:"horizontal","data-hidden":u==="never"||void 0,forceMount:!0,onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),children:k.jsx(MR,{...C("thumb")})}),(y==="xy"||y==="y")&&k.jsx(ER,{...C("scrollbar"),orientation:"vertical","data-hidden":u==="never"||void 0,forceMount:!0,onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),children:k.jsx(MR,{...C("thumb")})}),k.jsx(ehe,{...C("corner"),"data-hovered":E||void 0,"data-hidden":u==="never"||void 0})]})});T0.displayName="@mantine/core/ScrollArea";const kN=Pt((n,e)=>{const{children:t,classNames:i,styles:r,scrollbarSize:s,scrollHideDelay:o,type:a,dir:l,offsetScrollbars:c,viewportRef:u,onScrollPositionChange:h,unstyled:d,variant:f,viewportProps:p,scrollbars:x,style:v,vars:y,onBottomReached:w,onTopReached:_,...b}=st("ScrollAreaAutosize",bj,n);return k.jsx(pt,{...b,ref:e,style:[{display:"flex",overflow:"auto"},v],children:k.jsx(pt,{style:{display:"flex",flexDirection:"column",flex:1},children:k.jsx(T0,{classNames:i,styles:r,scrollHideDelay:o,scrollbarSize:s,type:a,dir:l,offsetScrollbars:c,viewportRef:u,onScrollPositionChange:h,unstyled:d,variant:f,viewportProps:p,vars:y,scrollbars:x,onBottomReached:w,onTopReached:_,children:t})})})});T0.classes=NN;kN.displayName="@mantine/core/ScrollAreaAutosize";kN.classes=NN;T0.Autosize=kN;var Sj={root:"m_87cf2631"};const lhe={__staticSelector:"UnstyledButton"},Ca=Na((n,e)=>{const t=st("UnstyledButton",lhe,n),{className:i,component:r="button",__staticSelector:s,unstyled:o,classNames:a,styles:l,style:c,...u}=t,h=on({name:s,props:t,classes:Sj,className:i,style:c,classNames:a,styles:l,unstyled:o});return k.jsx(pt,{...h("root",{focusable:!0}),component:r,ref:e,type:r==="button"?"button":void 0,...u})});Ca.classes=Sj;Ca.displayName="@mantine/core/UnstyledButton";var Ej={root:"m_515a97f8"};const che={},ON=Pt((n,e)=>{const t=st("VisuallyHidden",che,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,...c}=t,u=on({name:"VisuallyHidden",classes:Ej,props:t,className:r,style:s,classNames:i,styles:o,unstyled:a});return k.jsx(pt,{component:"span",ref:e,...u("root"),...c})});ON.classes=Ej;ON.displayName="@mantine/core/VisuallyHidden";var Mj={root:"m_1b7284a3"};const uhe={},hhe=(n,{radius:e,shadow:t})=>({root:{"--paper-radius":e===void 0?void 0:so(e),"--paper-shadow":EN(t)}}),aE=Na((n,e)=>{const t=st("Paper",uhe,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,withBorder:l,vars:c,radius:u,shadow:h,variant:d,mod:f,...p}=t,x=on({name:"Paper",props:t,classes:Mj,className:r,style:s,classNames:i,styles:o,unstyled:a,vars:c,varsResolver:hhe});return k.jsx(pt,{ref:e,mod:[{"data-with-border":l},f],...x("root"),variant:d,...p})});aE.classes=Mj;aE.displayName="@mantine/core/Paper";function lE(){return typeof window<"u"}function tg(n){return Tj(n)?(n.nodeName||"").toLowerCase():"#document"}function Ts(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Pl(n){var e;return(e=(Tj(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Tj(n){return lE()?n instanceof Node||n instanceof Ts(n).Node:!1}function Kn(n){return lE()?n instanceof Element||n instanceof Ts(n).Element:!1}function to(n){return lE()?n instanceof HTMLElement||n instanceof Ts(n).HTMLElement:!1}function TR(n){return!lE()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Ts(n).ShadowRoot}function A0(n){const{overflow:e,overflowX:t,overflowY:i,display:r}=zo(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(r)}function dhe(n){return["table","td","th"].includes(tg(n))}function cE(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function DN(n){const e=FN(),t=Kn(n)?zo(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function fhe(n){let e=bc(n);for(;to(e)&&!Hu(e);){if(DN(e))return e;if(cE(e))return null;e=bc(e)}return null}function FN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Hu(n){return["html","body","#document"].includes(tg(n))}function zo(n){return Ts(n).getComputedStyle(n)}function uE(n){return Kn(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function bc(n){if(tg(n)==="html")return n;const e=n.assignedSlot||n.parentNode||TR(n)&&n.host||Pl(n);return TR(e)?e.host:e}function Aj(n){const e=bc(n);return Hu(e)?n.ownerDocument?n.ownerDocument.body:n.body:to(e)&&A0(e)?e:Aj(e)}function pc(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=Aj(n),s=r===((i=n.ownerDocument)==null?void 0:i.body),o=Ts(r);if(s){const a=AR(o);return e.concat(o,o.visualViewport||[],A0(r)?r:[],a&&t?pc(a):[])}return e.concat(r,pc(r,[],t))}function AR(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function jB(n){let e=n.activeElement;for(;((t=e)==null||(t=t.shadowRoot)==null?void 0:t.activeElement)!=null;){var t;e=e.shadowRoot.activeElement}return e}function jv(n,e){if(!n||!e)return!1;const t=e.getRootNode==null?void 0:e.getRootNode();if(n.contains(e))return!0;if(t&&TR(t)){let i=e;for(;i;){if(n===i)return!0;i=i.parentNode||i.host}}return!1}function Cj(){const n=navigator.userAgentData;return n!=null&&n.platform?n.platform:navigator.platform}function Pj(){const n=navigator.userAgentData;return n&&Array.isArray(n.brands)?n.brands.map(e=>{let{brand:t,version:i}=e;return t+"/"+i}).join(" "):navigator.userAgent}function phe(n){return yhe()?!1:!$B()&&n.width===0&&n.height===0||$B()&&n.width===1&&n.height===1&&n.pressure===0&&n.detail===0&&n.pointerType==="mouse"||n.width<1&&n.height<1&&n.pressure===0&&n.detail===0&&n.pointerType==="touch"}function mhe(){return/apple/i.test(navigator.vendor)}function $B(){const n=/android/i;return n.test(Cj())||n.test(Pj())}function ghe(){return Cj().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function yhe(){return Pj().includes("jsdom/")}function CR(n,e){const t=["mouse","pen"];return t.push("",void 0),t.includes(n)}function vhe(n){return"nativeEvent"in n}function xhe(n){return n.matches("html,body")}function hd(n){return(n==null?void 0:n.ownerDocument)||document}function qA(n,e){if(e==null)return!1;if("composedPath"in n)return n.composedPath().includes(e);const t=n;return t.target!=null&&e.contains(t.target)}function Sp(n){return"composedPath"in n?n.composedPath()[0]:n.target}const _he="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function whe(n){return to(n)&&n.matches(_he)}const Pa=Math.min,Gr=Math.max,nS=Math.round,B_=Math.floor,Wu=n=>({x:n,y:n}),bhe={left:"right",right:"left",bottom:"top",top:"bottom"},She={start:"end",end:"start"};function PR(n,e,t){return Gr(n,Pa(e,t))}function Sc(n,e){return typeof n=="function"?n(e):n}function Ra(n){return n.split("-")[0]}function ng(n){return n.split("-")[1]}function UN(n){return n==="x"?"y":"x"}function BN(n){return n==="y"?"height":"width"}function Ec(n){return["top","bottom"].includes(Ra(n))?"y":"x"}function zN(n){return UN(Ec(n))}function Ehe(n,e,t){t===void 0&&(t=!1);const i=ng(n),r=zN(n),s=BN(r);let o=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=iS(o)),[o,iS(o)]}function Mhe(n){const e=iS(n);return[RR(n),e,RR(e)]}function RR(n){return n.replace(/start|end/g,e=>She[e])}function The(n,e,t){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?r:i:e?i:r;case"left":case"right":return e?s:o;default:return[]}}function Ahe(n,e,t,i){const r=ng(n);let s=The(Ra(n),t==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(RR)))),s}function iS(n){return n.replace(/left|right|bottom|top/g,e=>bhe[e])}function Che(n){return{top:0,right:0,bottom:0,left:0,...n}}function HN(n){return typeof n!="number"?Che(n):{top:n,right:n,bottom:n,left:n}}function Cm(n){const{x:e,y:t,width:i,height:r}=n;return{width:i,height:r,top:t,left:e,right:e+i,bottom:t+r,x:e,y:t}}function XB(n,e,t){let{reference:i,floating:r}=n;const s=Ec(e),o=zN(e),a=BN(o),l=Ra(e),c=s==="y",u=i.x+i.width/2-r.width/2,h=i.y+i.height/2-r.height/2,d=i[a]/2-r[a]/2;let f;switch(l){case"top":f={x:u,y:i.y-r.height};break;case"bottom":f={x:u,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:h};break;case"left":f={x:i.x-r.width,y:h};break;default:f={x:i.x,y:i.y}}switch(ng(e)){case"start":f[o]-=d*(t&&c?-1:1);break;case"end":f[o]+=d*(t&&c?-1:1);break}return f}const Phe=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:r}),{x:u,y:h}=XB(c,i,l),d=i,f={},p=0;for(let x=0;x<a.length;x++){const{name:v,fn:y}=a[x],{x:w,y:_,data:b,reset:E}=await y({x:u,y:h,initialPlacement:i,placement:d,strategy:r,middlewareData:f,rects:c,platform:o,elements:{reference:n,floating:e}});u=w??u,h=_??h,f={...f,[v]:{...f[v],...b}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(c=E.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:r}):E.rects),{x:u,y:h}=XB(c,d,l)),x=-1)}return{x:u,y:h,placement:d,strategy:r,middlewareData:f}};async function WN(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=Sc(e,n),p=HN(f),v=a[d?h==="floating"?"reference":"floating":h],y=Cm(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(v)))==null||t?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=h==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),b=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},E=Cm(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:_,strategy:l}):w);return{top:(y.top-E.top+p.top)/b.y,bottom:(E.bottom-y.bottom+p.bottom)/b.y,left:(y.left-E.left+p.left)/b.x,right:(E.right-y.right+p.right)/b.x}}const Rhe=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Sc(n,e)||{};if(c==null)return{};const h=HN(u),d={x:t,y:i},f=zN(r),p=BN(f),x=await o.getDimensions(c),v=f==="y",y=v?"top":"left",w=v?"bottom":"right",_=v?"clientHeight":"clientWidth",b=s.reference[p]+s.reference[f]-d[f]-s.floating[p],E=d[f]-s.reference[f],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=M?M[_]:0;(!C||!await(o.isElement==null?void 0:o.isElement(M)))&&(C=a.floating[_]||s.floating[p]);const P=b/2-E/2,T=C/2-x[p]/2-1,I=Pa(h[y],T),U=Pa(h[w],T),j=I,B=C-x[p]-U,z=C/2-x[p]/2+P,$=PR(j,z,B),H=!l.arrow&&ng(r)!=null&&z!==$&&s.reference[p]/2-(z<j?I:U)-x[p]/2<0,Z=H?z<j?z-j:z-B:0;return{[f]:d[f]+Z,data:{[f]:$,centerOffset:z-$-Z,...H&&{alignmentOffset:Z}},reset:H}}}),Ihe=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:x=!0,...v}=Sc(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const y=Ra(r),w=Ec(a),_=Ra(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),E=d||(_||!x?[iS(a)]:Mhe(a)),M=p!=="none";!d&&M&&E.push(...Ahe(a,x,p,b));const C=[a,...E],P=await WN(e,v),T=[];let I=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&T.push(P[y]),h){const z=Ehe(r,o,b);T.push(P[z[0]],P[z[1]])}if(I=[...I,{placement:r,overflows:T}],!T.every(z=>z<=0)){var U,j;const z=(((U=s.flip)==null?void 0:U.index)||0)+1,$=C[z];if($)return{data:{index:z,overflows:I},reset:{placement:$}};let H=(j=I.filter(Z=>Z.overflows[0]<=0).sort((Z,O)=>Z.overflows[1]-O.overflows[1])[0])==null?void 0:j.placement;if(!H)switch(f){case"bestFit":{var B;const Z=(B=I.filter(O=>{if(M){const W=Ec(O.placement);return W===w||W==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(W=>W>0).reduce((W,D)=>W+D,0)]).sort((O,W)=>O[1]-W[1])[0])==null?void 0:B[0];Z&&(H=Z);break}case"initialPlacement":H=a;break}if(r!==H)return{reset:{placement:H}}}return{}}}};function Rj(n){const e=Pa(...n.map(s=>s.left)),t=Pa(...n.map(s=>s.top)),i=Gr(...n.map(s=>s.right)),r=Gr(...n.map(s=>s.bottom));return{x:e,y:t,width:i-e,height:r-t}}function Lhe(n){const e=n.slice().sort((r,s)=>r.y-s.y),t=[];let i=null;for(let r=0;r<e.length;r++){const s=e[r];!i||s.y-i.y>i.height/2?t.push([s]):t[t.length-1].push(s),i=s}return t.map(r=>Cm(Rj(r)))}const Nhe=function(n){return n===void 0&&(n={}),{name:"inline",options:n,async fn(e){const{placement:t,elements:i,rects:r,platform:s,strategy:o}=e,{padding:a=2,x:l,y:c}=Sc(n,e),u=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(i.reference))||[]),h=Lhe(u),d=Cm(Rj(u)),f=HN(a);function p(){if(h.length===2&&h[0].left>h[1].right&&l!=null&&c!=null)return h.find(v=>l>v.left-f.left&&l<v.right+f.right&&c>v.top-f.top&&c<v.bottom+f.bottom)||d;if(h.length>=2){if(Ec(t)==="y"){const I=h[0],U=h[h.length-1],j=Ra(t)==="top",B=I.top,z=U.bottom,$=j?I.left:U.left,H=j?I.right:U.right,Z=H-$,O=z-B;return{top:B,bottom:z,left:$,right:H,width:Z,height:O,x:$,y:B}}const v=Ra(t)==="left",y=Gr(...h.map(I=>I.right)),w=Pa(...h.map(I=>I.left)),_=h.filter(I=>v?I.left===w:I.right===y),b=_[0].top,E=_[_.length-1].bottom,M=w,C=y,P=C-M,T=E-b;return{top:b,bottom:E,left:M,right:C,width:P,height:T,x:M,y:b}}return d}const x=await s.getElementRects({reference:{getBoundingClientRect:p},floating:i.floating,strategy:o});return r.reference.x!==x.reference.x||r.reference.y!==x.reference.y||r.reference.width!==x.reference.width||r.reference.height!==x.reference.height?{reset:{rects:x}}:{}}}};async function khe(n,e){const{placement:t,platform:i,elements:r}=n,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=Ra(t),a=ng(t),l=Ec(t)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,h=Sc(e,n);let{mainAxis:d,crossAxis:f,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*u,y:d*c}:{x:d*c,y:f*u}}const Ohe=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await khe(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},Dhe=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:y,y:w}=v;return{x:y,y:w}}},...l}=Sc(n,e),c={x:t,y:i},u=await WN(e,l),h=Ec(Ra(r)),d=UN(h);let f=c[d],p=c[h];if(s){const v=d==="y"?"top":"left",y=d==="y"?"bottom":"right",w=f+u[v],_=f-u[y];f=PR(w,f,_)}if(o){const v=h==="y"?"top":"left",y=h==="y"?"bottom":"right",w=p+u[v],_=p-u[y];p=PR(w,p,_)}const x=a.fn({...e,[d]:f,[h]:p});return{...x,data:{x:x.x-t,y:x.y-i,enabled:{[d]:s,[h]:o}}}}}},Fhe=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Sc(n,e),u={x:t,y:i},h=Ec(r),d=UN(h);let f=u[d],p=u[h];const x=Sc(a,e),v=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const _=d==="y"?"height":"width",b=s.reference[d]-s.floating[_]+v.mainAxis,E=s.reference[d]+s.reference[_]-v.mainAxis;f<b?f=b:f>E&&(f=E)}if(c){var y,w;const _=d==="y"?"width":"height",b=["top","left"].includes(Ra(r)),E=s.reference[h]-s.floating[_]+(b&&((y=o.offset)==null?void 0:y[h])||0)+(b?0:v.crossAxis),M=s.reference[h]+s.reference[_]+(b?0:((w=o.offset)==null?void 0:w[h])||0)-(b?v.crossAxis:0);p<E?p=E:p>M&&(p=M)}return{[d]:f,[h]:p}}}},Uhe=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Sc(n,e),u=await WN(e,c),h=Ra(r),d=ng(r),f=Ec(r)==="y",{width:p,height:x}=s.floating;let v,y;h==="top"||h==="bottom"?(v=h,y=d===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=h,v=d==="end"?"top":"bottom");const w=x-u.top-u.bottom,_=p-u.left-u.right,b=Pa(x-u[v],w),E=Pa(p-u[y],_),M=!e.middlewareData.shift;let C=b,P=E;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(P=_),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(C=w),M&&!d){const I=Gr(u.left,0),U=Gr(u.right,0),j=Gr(u.top,0),B=Gr(u.bottom,0);f?P=p-2*(I!==0||U!==0?I+U:Gr(u.left,u.right)):C=x-2*(j!==0||B!==0?j+B:Gr(u.top,u.bottom))}await l({...e,availableWidth:P,availableHeight:C});const T=await o.getDimensions(a.floating);return p!==T.width||x!==T.height?{reset:{rects:!0}}:{}}}};function Ij(n){const e=zo(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=to(n),s=r?n.offsetWidth:t,o=r?n.offsetHeight:i,a=nS(t)!==s||nS(i)!==o;return a&&(t=s,i=o),{width:t,height:i,$:a}}function VN(n){return Kn(n)?n:n.contextElement}function am(n){const e=VN(n);if(!to(e))return Wu(1);const t=e.getBoundingClientRect(),{width:i,height:r,$:s}=Ij(e);let o=(s?nS(t.width):t.width)/i,a=(s?nS(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Bhe=Wu(0);function Lj(n){const e=Ts(n);return!FN()||!e.visualViewport?Bhe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function zhe(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ts(n)?!1:e}function Hd(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=VN(n);let o=Wu(1);e&&(i?Kn(i)&&(o=am(i)):o=am(n));const a=zhe(s,t,i)?Lj(s):Wu(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,h=r.height/o.y;if(s){const d=Ts(s),f=i&&Kn(i)?Ts(i):i;let p=d,x=AR(p);for(;x&&i&&f!==p;){const v=am(x),y=x.getBoundingClientRect(),w=zo(x),_=y.left+(x.clientLeft+parseFloat(w.paddingLeft))*v.x,b=y.top+(x.clientTop+parseFloat(w.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,h*=v.y,l+=_,c+=b,p=Ts(x),x=AR(p)}}return Cm({width:u,height:h,x:l,y:c})}function Hhe(n){let{elements:e,rect:t,offsetParent:i,strategy:r}=n;const s=r==="fixed",o=Pl(i),a=e?cE(e.floating):!1;if(i===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=Wu(1);const u=Wu(0),h=to(i);if((h||!h&&!s)&&((tg(i)!=="body"||A0(o))&&(l=uE(i)),to(i))){const d=Hd(i);c=am(i),u.x=d.x+i.clientLeft,u.y=d.y+i.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x,y:t.y*c.y-l.scrollTop*c.y+u.y}}function Whe(n){return Array.from(n.getClientRects())}function IR(n,e){const t=uE(n).scrollLeft;return e?e.left+t:Hd(Pl(n)).left+t}function Vhe(n){const e=Pl(n),t=uE(n),i=n.ownerDocument.body,r=Gr(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=Gr(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-t.scrollLeft+IR(n);const a=-t.scrollTop;return zo(i).direction==="rtl"&&(o+=Gr(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function Ghe(n,e){const t=Ts(n),i=Pl(n),r=t.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=FN();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function jhe(n,e){const t=Hd(n,!0,e==="fixed"),i=t.top+n.clientTop,r=t.left+n.clientLeft,s=to(n)?am(n):Wu(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function YB(n,e,t){let i;if(e==="viewport")i=Ghe(n,t);else if(e==="document")i=Vhe(Pl(n));else if(Kn(e))i=jhe(e,t);else{const r=Lj(n);i={...e,x:e.x-r.x,y:e.y-r.y}}return Cm(i)}function Nj(n,e){const t=bc(n);return t===e||!Kn(t)||Hu(t)?!1:zo(t).position==="fixed"||Nj(t,e)}function $he(n,e){const t=e.get(n);if(t)return t;let i=pc(n,[],!1).filter(a=>Kn(a)&&tg(a)!=="body"),r=null;const s=zo(n).position==="fixed";let o=s?bc(n):n;for(;Kn(o)&&!Hu(o);){const a=zo(o),l=DN(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||A0(o)&&!l&&Nj(n,o))?i=i.filter(u=>u!==o):r=a,o=bc(o)}return e.set(n,i),i}function Xhe(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const o=[...t==="clippingAncestors"?cE(e)?[]:$he(e,this._c):[].concat(t),i],a=o[0],l=o.reduce((c,u)=>{const h=YB(e,u,r);return c.top=Gr(h.top,c.top),c.right=Pa(h.right,c.right),c.bottom=Pa(h.bottom,c.bottom),c.left=Gr(h.left,c.left),c},YB(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Yhe(n){const{width:e,height:t}=Ij(n);return{width:e,height:t}}function qhe(n,e,t){const i=to(e),r=Pl(e),s=t==="fixed",o=Hd(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Wu(0);if(i||!i&&!s)if((tg(e)!=="body"||A0(r))&&(a=uE(e)),i){const f=Hd(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else r&&(l.x=IR(r));let c=0,u=0;if(r&&!i&&!s){const f=r.getBoundingClientRect();u=f.top+a.scrollTop,c=f.left+a.scrollLeft-IR(r,f)}const h=o.left+a.scrollLeft-l.x-c,d=o.top+a.scrollTop-l.y-u;return{x:h,y:d,width:o.width,height:o.height}}function ZA(n){return zo(n).position==="static"}function qB(n,e){if(!to(n)||zo(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Pl(n)===t&&(t=t.ownerDocument.body),t}function kj(n,e){const t=Ts(n);if(cE(n))return t;if(!to(n)){let r=bc(n);for(;r&&!Hu(r);){if(Kn(r)&&!ZA(r))return r;r=bc(r)}return t}let i=qB(n,e);for(;i&&dhe(i)&&ZA(i);)i=qB(i,e);return i&&Hu(i)&&ZA(i)&&!DN(i)?t:i||fhe(n)||t}const Zhe=async function(n){const e=this.getOffsetParent||kj,t=this.getDimensions,i=await t(n.floating);return{reference:qhe(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Khe(n){return zo(n).direction==="rtl"}const Qhe={convertOffsetParentRelativeRectToViewportRelativeRect:Hhe,getDocumentElement:Pl,getClippingRect:Xhe,getOffsetParent:kj,getElementRects:Zhe,getClientRects:Whe,getDimensions:Yhe,getScale:am,isElement:Kn,isRTL:Khe};function Jhe(n,e){let t=null,i;const r=Pl(n);function s(){var a;clearTimeout(i),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:h,height:d}=n.getBoundingClientRect();if(a||e(),!h||!d)return;const f=B_(u),p=B_(r.clientWidth-(c+h)),x=B_(r.clientHeight-(u+d)),v=B_(c),w={rootMargin:-f+"px "+-p+"px "+-x+"px "+-v+"px",threshold:Gr(0,Pa(1,l))||1};let _=!0;function b(E){const M=E[0].intersectionRatio;if(M!==l){if(!_)return o();M?o(!1,M):i=setTimeout(()=>{o(!1,1e-7)},1e3)}_=!1}try{t=new IntersectionObserver(b,{...w,root:r.ownerDocument})}catch{t=new IntersectionObserver(b,w)}t.observe(n)}return o(!0),s}function ede(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=VN(n),u=r||s?[...c?pc(c):[],...pc(e)]:[];u.forEach(y=>{r&&y.addEventListener("scroll",t,{passive:!0}),s&&y.addEventListener("resize",t)});const h=c&&a?Jhe(c,t):null;let d=-1,f=null;o&&(f=new ResizeObserver(y=>{let[w]=y;w&&w.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var _;(_=f)==null||_.observe(e)})),t()}),c&&!l&&f.observe(c),f.observe(e));let p,x=l?Hd(n):null;l&&v();function v(){const y=Hd(n);x&&(y.x!==x.x||y.y!==x.y||y.width!==x.width||y.height!==x.height)&&t(),x=y,p=requestAnimationFrame(v)}return t(),()=>{var y;u.forEach(w=>{r&&w.removeEventListener("scroll",t),s&&w.removeEventListener("resize",t)}),h==null||h(),(y=f)==null||y.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const tde=Ohe,nde=Dhe,ide=Ihe,rde=Uhe,ZB=Rhe,sde=Nhe,ode=Fhe,ade=(n,e,t)=>{const i=new Map,r={platform:Qhe,...t},s={...r.platform,_c:i};return Phe(n,e,{...r,platform:s})};var G1=typeof document<"u"?R.useLayoutEffect:R.useEffect;function rS(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(i=t;i--!==0;)if(!rS(n[i],e[i]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=t;i--!==0;){const s=r[i];if(!(s==="_owner"&&n.$$typeof)&&!rS(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function Oj(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function KB(n,e){const t=Oj(n);return Math.round(e*t)/t}function KA(n){const e=R.useRef(n);return G1(()=>{e.current=n}),e}function lde(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,h]=R.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[d,f]=R.useState(i);rS(d,i)||f(i);const[p,x]=R.useState(null),[v,y]=R.useState(null),w=R.useCallback(O=>{O!==M.current&&(M.current=O,x(O))},[]),_=R.useCallback(O=>{O!==C.current&&(C.current=O,y(O))},[]),b=s||p,E=o||v,M=R.useRef(null),C=R.useRef(null),P=R.useRef(u),T=l!=null,I=KA(l),U=KA(r),j=KA(c),B=R.useCallback(()=>{if(!M.current||!C.current)return;const O={placement:e,strategy:t,middleware:d};U.current&&(O.platform=U.current),ade(M.current,C.current,O).then(W=>{const D={...W,isPositioned:j.current!==!1};z.current&&!rS(P.current,D)&&(P.current=D,JS.flushSync(()=>{h(D)}))})},[d,e,t,U,j]);G1(()=>{c===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(O=>({...O,isPositioned:!1})))},[c]);const z=R.useRef(!1);G1(()=>(z.current=!0,()=>{z.current=!1}),[]),G1(()=>{if(b&&(M.current=b),E&&(C.current=E),b&&E){if(I.current)return I.current(b,E,B);B()}},[b,E,B,I,T]);const $=R.useMemo(()=>({reference:M,floating:C,setReference:w,setFloating:_}),[w,_]),H=R.useMemo(()=>({reference:b,floating:E}),[b,E]),Z=R.useMemo(()=>{const O={position:t,left:0,top:0};if(!H.floating)return O;const W=KB(H.floating,u.x),D=KB(H.floating,u.y);return a?{...O,transform:"translate("+W+"px, "+D+"px)",...Oj(H.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:W,top:D}},[t,a,H.floating,u.x,u.y]);return R.useMemo(()=>({...u,update:B,refs:$,elements:H,floatingStyles:Z}),[u,B,$,H,Z])}const cde=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:i,padding:r}=typeof n=="function"?n(t):n;return i&&e(i)?i.current!=null?ZB({element:i.current,padding:r}).fn(t):{}:i?ZB({element:i,padding:r}).fn(t):{}}}},Dj=(n,e)=>({...tde(n),options:[n,e]}),GN=(n,e)=>({...nde(n),options:[n,e]}),QB=(n,e)=>({...ode(n),options:[n,e]}),LR=(n,e)=>({...ide(n),options:[n,e]}),ude=(n,e)=>({...rde(n),options:[n,e]}),NR=(n,e)=>({...sde(n),options:[n,e]}),Fj=(n,e)=>({...cde(n),options:[n,e]}),Uj={..._Z},hde=Uj.useInsertionEffect,dde=hde||(n=>n());function fu(n){const e=R.useRef(()=>{});return dde(()=>{e.current=n}),R.useCallback(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}var wl=typeof document<"u"?R.useLayoutEffect:R.useEffect;let JB=!1,fde=0;const e4=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+fde++;function pde(){const[n,e]=R.useState(()=>JB?e4():void 0);return wl(()=>{n==null&&e(e4())},[]),R.useEffect(()=>{JB=!0},[]),n}const mde=Uj.useId,Bj=mde||pde;function gde(){const n=new Map;return{emit(e,t){var i;(i=n.get(e))==null||i.forEach(r=>r(t))},on(e,t){n.set(e,[...n.get(e)||[],t])},off(e,t){var i;n.set(e,((i=n.get(e))==null?void 0:i.filter(r=>r!==t))||[])}}}const yde=R.createContext(null),vde=R.createContext(null),jN=()=>{var n;return((n=R.useContext(yde))==null?void 0:n.id)||null},$N=()=>R.useContext(vde);function XN(n){return"data-floating-ui-"+n}function QA(n){const e=R.useRef(n);return wl(()=>{e.current=n}),e}const t4=XN("safe-polygon");function j1(n,e,t){return t&&!CR(t)?0:typeof n=="number"?n:n==null?void 0:n[e]}function xde(n,e){e===void 0&&(e={});const{open:t,onOpenChange:i,dataRef:r,events:s,elements:o}=n,{enabled:a=!0,delay:l=0,handleClose:c=null,mouseOnly:u=!1,restMs:h=0,move:d=!0}=e,f=$N(),p=jN(),x=QA(c),v=QA(l),y=QA(t),w=R.useRef(),_=R.useRef(-1),b=R.useRef(),E=R.useRef(-1),M=R.useRef(!0),C=R.useRef(!1),P=R.useRef(()=>{}),T=R.useCallback(()=>{var $;const H=($=r.current.openEvent)==null?void 0:$.type;return(H==null?void 0:H.includes("mouse"))&&H!=="mousedown"},[r]);R.useEffect(()=>{if(!a)return;function $(H){let{open:Z}=H;Z||(clearTimeout(_.current),clearTimeout(E.current),M.current=!0)}return s.on("openchange",$),()=>{s.off("openchange",$)}},[a,s]),R.useEffect(()=>{if(!a||!x.current||!t)return;function $(Z){T()&&i(!1,Z,"hover")}const H=hd(o.floating).documentElement;return H.addEventListener("mouseleave",$),()=>{H.removeEventListener("mouseleave",$)}},[o.floating,t,i,a,x,T]);const I=R.useCallback(function($,H,Z){H===void 0&&(H=!0),Z===void 0&&(Z="hover");const O=j1(v.current,"close",w.current);O&&!b.current?(clearTimeout(_.current),_.current=window.setTimeout(()=>i(!1,$,Z),O)):H&&(clearTimeout(_.current),i(!1,$,Z))},[v,i]),U=fu(()=>{P.current(),b.current=void 0}),j=fu(()=>{if(C.current){const $=hd(o.floating).body;$.style.pointerEvents="",$.removeAttribute(t4),C.current=!1}});R.useEffect(()=>{if(!a)return;function $(){return r.current.openEvent?["click","mousedown"].includes(r.current.openEvent.type):!1}function H(D){if(clearTimeout(_.current),M.current=!1,u&&!CR(w.current)||h>0&&!j1(v.current,"open"))return;const Y=j1(v.current,"open",w.current);Y?_.current=window.setTimeout(()=>{y.current||i(!0,D,"hover")},Y):i(!0,D,"hover")}function Z(D){if($())return;P.current();const Y=hd(o.floating);if(clearTimeout(E.current),x.current&&r.current.floatingContext){t||clearTimeout(_.current),b.current=x.current({...r.current.floatingContext,tree:f,x:D.clientX,y:D.clientY,onClose(){j(),U(),I(D,!0,"safe-polygon")}});const re=b.current;Y.addEventListener("mousemove",re),P.current=()=>{Y.removeEventListener("mousemove",re)};return}(w.current==="touch"?!jv(o.floating,D.relatedTarget):!0)&&I(D)}function O(D){$()||r.current.floatingContext&&(x.current==null||x.current({...r.current.floatingContext,tree:f,x:D.clientX,y:D.clientY,onClose(){j(),U(),I(D)}})(D))}if(Kn(o.domReference)){var W;const D=o.domReference;return t&&D.addEventListener("mouseleave",O),(W=o.floating)==null||W.addEventListener("mouseleave",O),d&&D.addEventListener("mousemove",H,{once:!0}),D.addEventListener("mouseenter",H),D.addEventListener("mouseleave",Z),()=>{var Y;t&&D.removeEventListener("mouseleave",O),(Y=o.floating)==null||Y.removeEventListener("mouseleave",O),d&&D.removeEventListener("mousemove",H),D.removeEventListener("mouseenter",H),D.removeEventListener("mouseleave",Z)}}},[o,a,n,u,h,d,I,U,j,i,t,y,f,v,x,r]),wl(()=>{var $;if(a&&t&&($=x.current)!=null&&$.__options.blockPointerEvents&&T()){C.current=!0;const Z=o.floating;if(Kn(o.domReference)&&Z){var H;const O=hd(o.floating).body;O.setAttribute(t4,"");const W=o.domReference,D=f==null||(H=f.nodesRef.current.find(Y=>Y.id===p))==null||(H=H.context)==null?void 0:H.elements.floating;return D&&(D.style.pointerEvents=""),O.style.pointerEvents="none",W.style.pointerEvents="auto",Z.style.pointerEvents="auto",()=>{O.style.pointerEvents="",W.style.pointerEvents="",Z.style.pointerEvents=""}}}},[a,t,p,o,f,x,T]),wl(()=>{t||(w.current=void 0,U(),j())},[t,U,j]),R.useEffect(()=>()=>{U(),clearTimeout(_.current),clearTimeout(E.current),j()},[a,o.domReference,U,j]);const B=R.useMemo(()=>{function $(H){w.current=H.pointerType}return{onPointerDown:$,onPointerEnter:$,onMouseMove(H){const{nativeEvent:Z}=H;function O(){!M.current&&!y.current&&i(!0,Z,"hover")}u&&!CR(w.current)||t||h===0||(clearTimeout(E.current),w.current==="touch"?O():E.current=window.setTimeout(O,h))}}},[u,i,t,y,h]),z=R.useMemo(()=>({onMouseEnter(){clearTimeout(_.current)},onMouseLeave($){I($.nativeEvent,!1)}}),[I]);return R.useMemo(()=>a?{reference:B,floating:z}:{},[a,B,z])}const kR=()=>{},zj=R.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:kR,setState:kR,isInstantPhase:!1}),Hj=()=>R.useContext(zj);function _de(n){const{children:e,delay:t,timeoutMs:i=0}=n,[r,s]=R.useReducer((l,c)=>({...l,...c}),{delay:t,timeoutMs:i,initialDelay:t,currentId:null,isInstantPhase:!1}),o=R.useRef(null),a=R.useCallback(l=>{s({currentId:l})},[]);return wl(()=>{r.currentId?o.current===null?o.current=r.currentId:r.isInstantPhase||s({isInstantPhase:!0}):(r.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[r.currentId,r.isInstantPhase]),R.createElement(zj.Provider,{value:R.useMemo(()=>({...r,setState:s,setCurrentId:a}),[r,a])},e)}function wde(n,e){e===void 0&&(e={});const{open:t,onOpenChange:i,floatingId:r}=n,{id:s}=e,o=s??r,a=Hj(),{currentId:l,setCurrentId:c,initialDelay:u,setState:h,timeoutMs:d}=a;return wl(()=>{l&&(h({delay:{open:1,close:j1(u,"close")}}),l!==o&&i(!1))},[o,i,h,l,u]),wl(()=>{function f(){i(!1),h({delay:u,currentId:null})}if(l&&!t&&l===o){if(d){const p=window.setTimeout(f,d);return()=>{clearTimeout(p)}}f()}},[t,h,l,o,i,u,d]),wl(()=>{c===kR||!t||c(o)},[t,c,o]),a}function JA(n,e){let t=n.filter(r=>{var s;return r.parentId===e&&((s=r.context)==null?void 0:s.open)}),i=t;for(;i.length;)i=n.filter(r=>{var s;return(s=i)==null?void 0:s.some(o=>{var a;return r.parentId===o.id&&((a=r.context)==null?void 0:a.open)})}),t=t.concat(i);return t}const bde="data-floating-ui-focusable",Sde={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Ede={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},n4=n=>{var e,t;return{escapeKey:typeof n=="boolean"?n:(e=n==null?void 0:n.escapeKey)!=null?e:!1,outsidePress:typeof n=="boolean"?n:(t=n==null?void 0:n.outsidePress)!=null?t:!0}};function Mde(n,e){e===void 0&&(e={});const{open:t,onOpenChange:i,elements:r,dataRef:s}=n,{enabled:o=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:u=!1,referencePressEvent:h="pointerdown",ancestorScroll:d=!1,bubbles:f,capture:p}=e,x=$N(),v=fu(typeof l=="function"?l:()=>!1),y=typeof l=="function"?v:l,w=R.useRef(!1),_=R.useRef(!1),{escapeKey:b,outsidePress:E}=n4(f),{escapeKey:M,outsidePress:C}=n4(p),P=fu(z=>{var $;if(!t||!o||!a||z.key!=="Escape")return;const H=($=s.current.floatingContext)==null?void 0:$.nodeId,Z=x?JA(x.nodesRef.current,H):[];if(!b&&(z.stopPropagation(),Z.length>0)){let O=!0;if(Z.forEach(W=>{var D;if((D=W.context)!=null&&D.open&&!W.context.dataRef.current.__escapeKeyBubbles){O=!1;return}}),!O)return}i(!1,vhe(z)?z.nativeEvent:z,"escape-key")}),T=fu(z=>{var $;const H=()=>{var Z;P(z),(Z=Sp(z))==null||Z.removeEventListener("keydown",H)};($=Sp(z))==null||$.addEventListener("keydown",H)}),I=fu(z=>{var $;const H=w.current;w.current=!1;const Z=_.current;if(_.current=!1,c==="click"&&Z||H||typeof y=="function"&&!y(z))return;const O=Sp(z),W="["+XN("inert")+"]",D=hd(r.floating).querySelectorAll(W);let Y=Kn(O)?O:null;for(;Y&&!Hu(Y);){const oe=bc(Y);if(Hu(oe)||!Kn(oe))break;Y=oe}if(D.length&&Kn(O)&&!xhe(O)&&!jv(O,r.floating)&&Array.from(D).every(oe=>!jv(Y,oe)))return;if(to(O)&&B){const oe=O.clientWidth>0&&O.scrollWidth>O.clientWidth,he=O.clientHeight>0&&O.scrollHeight>O.clientHeight;let Re=he&&z.offsetX>O.clientWidth;if(he&&zo(O).direction==="rtl"&&(Re=z.offsetX<=O.offsetWidth-O.clientWidth),Re||oe&&z.offsetY>O.clientHeight)return}const Q=($=s.current.floatingContext)==null?void 0:$.nodeId,re=x&&JA(x.nodesRef.current,Q).some(oe=>{var he;return qA(z,(he=oe.context)==null?void 0:he.elements.floating)});if(qA(z,r.floating)||qA(z,r.domReference)||re)return;const ce=x?JA(x.nodesRef.current,Q):[];if(ce.length>0){let oe=!0;if(ce.forEach(he=>{var Re;if((Re=he.context)!=null&&Re.open&&!he.context.dataRef.current.__outsidePressBubbles){oe=!1;return}}),!oe)return}i(!1,z,"outside-press")}),U=fu(z=>{var $;const H=()=>{var Z;I(z),(Z=Sp(z))==null||Z.removeEventListener(c,H)};($=Sp(z))==null||$.addEventListener(c,H)});R.useEffect(()=>{if(!t||!o)return;s.current.__escapeKeyBubbles=b,s.current.__outsidePressBubbles=E;function z(Z){i(!1,Z,"ancestor-scroll")}const $=hd(r.floating);a&&$.addEventListener("keydown",M?T:P,M),y&&$.addEventListener(c,C?U:I,C);let H=[];return d&&(Kn(r.domReference)&&(H=pc(r.domReference)),Kn(r.floating)&&(H=H.concat(pc(r.floating))),!Kn(r.reference)&&r.reference&&r.reference.contextElement&&(H=H.concat(pc(r.reference.contextElement)))),H=H.filter(Z=>{var O;return Z!==((O=$.defaultView)==null?void 0:O.visualViewport)}),H.forEach(Z=>{Z.addEventListener("scroll",z,{passive:!0})}),()=>{a&&$.removeEventListener("keydown",M?T:P,M),y&&$.removeEventListener(c,C?U:I,C),H.forEach(Z=>{Z.removeEventListener("scroll",z)})}},[s,r,a,y,c,t,i,d,o,b,E,P,M,T,I,C,U]),R.useEffect(()=>{w.current=!1},[y,c]);const j=R.useMemo(()=>({onKeyDown:P,[Sde[h]]:z=>{u&&i(!1,z.nativeEvent,"reference-press")}}),[P,i,u,h]),B=R.useMemo(()=>({onKeyDown:P,onMouseDown(){_.current=!0},onMouseUp(){_.current=!0},[Ede[c]]:()=>{w.current=!0}}),[P,c]);return R.useMemo(()=>o?{reference:j,floating:B}:{},[o,j,B])}function Tde(n){const{open:e=!1,onOpenChange:t,elements:i}=n,r=Bj(),s=R.useRef({}),[o]=R.useState(()=>gde()),a=jN()!=null,[l,c]=R.useState(i.reference),u=fu((f,p,x)=>{s.current.openEvent=f?p:void 0,o.emit("openchange",{open:f,event:p,reason:x,nested:a}),t==null||t(f,p,x)}),h=R.useMemo(()=>({setPositionReference:c}),[]),d=R.useMemo(()=>({reference:l||i.reference||null,floating:i.floating||null,domReference:i.reference}),[l,i.reference,i.floating]);return R.useMemo(()=>({dataRef:s,open:e,onOpenChange:u,elements:d,events:o,floatingId:r,refs:h}),[e,u,d,o,r,h])}function YN(n){n===void 0&&(n={});const{nodeId:e}=n,t=Tde({...n,elements:{reference:null,floating:null,...n.elements}}),i=n.rootContext||t,r=i.elements,[s,o]=R.useState(null),[a,l]=R.useState(null),u=(r==null?void 0:r.reference)||s,h=R.useRef(null),d=$N();wl(()=>{u&&(h.current=u)},[u]);const f=lde({...n,elements:{...r,...a&&{reference:a}}}),p=R.useCallback(_=>{const b=Kn(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;l(b),f.refs.setReference(b)},[f.refs]),x=R.useCallback(_=>{(Kn(_)||_===null)&&(h.current=_,o(_)),(Kn(f.refs.reference.current)||f.refs.reference.current===null||_!==null&&!Kn(_))&&f.refs.setReference(_)},[f.refs]),v=R.useMemo(()=>({...f.refs,setReference:x,setPositionReference:p,domReference:h}),[f.refs,x,p]),y=R.useMemo(()=>({...f.elements,domReference:u}),[f.elements,u]),w=R.useMemo(()=>({...f,...i,refs:v,elements:y,nodeId:e}),[f,v,y,e,i]);return wl(()=>{i.dataRef.current.floatingContext=w;const _=d==null?void 0:d.nodesRef.current.find(b=>b.id===e);_&&(_.context=w)}),R.useMemo(()=>({...f,context:w,refs:v,elements:y}),[f,v,y,w])}function Ade(n,e){e===void 0&&(e={});const{open:t,onOpenChange:i,events:r,dataRef:s,elements:o}=n,{enabled:a=!0,visibleOnly:l=!0}=e,c=R.useRef(!1),u=R.useRef(),h=R.useRef(!0);R.useEffect(()=>{if(!a)return;const f=Ts(o.domReference);function p(){!t&&to(o.domReference)&&o.domReference===jB(hd(o.domReference))&&(c.current=!0)}function x(){h.current=!0}return f.addEventListener("blur",p),f.addEventListener("keydown",x,!0),()=>{f.removeEventListener("blur",p),f.removeEventListener("keydown",x,!0)}},[o.domReference,t,a]),R.useEffect(()=>{if(!a)return;function f(p){let{reason:x}=p;(x==="reference-press"||x==="escape-key")&&(c.current=!0)}return r.on("openchange",f),()=>{r.off("openchange",f)}},[r,a]),R.useEffect(()=>()=>{clearTimeout(u.current)},[]);const d=R.useMemo(()=>({onPointerDown(f){phe(f.nativeEvent)||(h.current=!1)},onMouseLeave(){c.current=!1},onFocus(f){if(c.current)return;const p=Sp(f.nativeEvent);if(l&&Kn(p))try{if(mhe()&&ghe())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!h.current&&!whe(p))return}i(!0,f.nativeEvent,"focus")},onBlur(f){c.current=!1;const p=f.relatedTarget,x=f.nativeEvent,v=Kn(p)&&p.hasAttribute(XN("focus-guard"))&&p.getAttribute("data-type")==="outside";u.current=window.setTimeout(()=>{var y;const w=jB(o.domReference?o.domReference.ownerDocument:document);!p&&w===o.domReference||jv((y=s.current.floatingContext)==null?void 0:y.refs.floating.current,w)||jv(o.domReference,w)||v||i(!1,x,"focus")})}}),[s,o.domReference,i,l]);return R.useMemo(()=>a?{reference:d}:{},[a,d])}const i4="active",r4="selected";function eC(n,e,t){const i=new Map,r=t==="item";let s=n;if(r&&n){const{[i4]:o,[r4]:a,...l}=n;s=l}return{...t==="floating"&&{tabIndex:-1,[bde]:""},...s,...e.map(o=>{const a=o?o[t]:null;return typeof a=="function"?n?a(n):null:a}).concat(n).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[c,u]=l;if(!(r&&[i4,r4].includes(c)))if(c.indexOf("on")===0){if(i.has(c)||i.set(c,[]),typeof u=="function"){var h;(h=i.get(c))==null||h.push(u),o[c]=function(){for(var d,f=arguments.length,p=new Array(f),x=0;x<f;x++)p[x]=arguments[x];return(d=i.get(c))==null?void 0:d.map(v=>v(...p)).find(v=>v!==void 0)}}}else o[c]=u}),o),{})}}function Cde(n){n===void 0&&(n=[]);const e=n.map(a=>a==null?void 0:a.reference),t=n.map(a=>a==null?void 0:a.floating),i=n.map(a=>a==null?void 0:a.item),r=R.useCallback(a=>eC(a,n,"reference"),e),s=R.useCallback(a=>eC(a,n,"floating"),t),o=R.useCallback(a=>eC(a,n,"item"),i);return R.useMemo(()=>({getReferenceProps:r,getFloatingProps:s,getItemProps:o}),[r,s,o])}const Pde=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Rde(n,e){var t;e===void 0&&(e={});const{open:i,floatingId:r}=n,{enabled:s=!0,role:o="dialog"}=e,a=(t=Pde.get(o))!=null?t:o,l=Bj(),u=jN()!=null,h=R.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:i?r:void 0}:{"aria-expanded":i?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":i?r:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&u&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,r,u,i,l,o]),d=R.useMemo(()=>{const p={id:r,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":l}}},[a,r,l,o]),f=R.useCallback(p=>{let{active:x,selected:v}=p;const y={role:"option",...x&&{id:r+"-option"}};switch(o){case"select":return{...y,"aria-selected":x&&v};case"combobox":return{...y,...x&&{"aria-selected":!0}}}return{}},[r,o]);return R.useMemo(()=>s?{reference:h,floating:d,item:f}:{},[s,h,d,f])}function Wj(n,e){if(n==="rtl"&&(e.includes("right")||e.includes("left"))){const[t,i]=e.split("-"),r=t==="right"?"left":"right";return i===void 0?r:`${r}-${i}`}return e}function s4(n,e,t,i){return n==="center"||i==="center"?{top:e}:n==="end"?{bottom:t}:n==="start"?{top:t}:{}}function o4(n,e,t,i,r){return n==="center"||i==="center"?{left:e}:n==="end"?{[r==="ltr"?"right":"left"]:t}:n==="start"?{[r==="ltr"?"left":"right"]:t}:{}}const Ide={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Lde({position:n,arrowSize:e,arrowOffset:t,arrowRadius:i,arrowPosition:r,arrowX:s,arrowY:o,dir:a}){const[l,c="center"]=n.split("-"),u={width:e,height:e,transform:"rotate(45deg)",position:"absolute",[Ide[l]]:i},h=-e/2;return l==="left"?{...u,...s4(c,o,t,r),right:h,borderLeftColor:"transparent",borderBottomColor:"transparent"}:l==="right"?{...u,...s4(c,o,t,r),left:h,borderRightColor:"transparent",borderTopColor:"transparent"}:l==="top"?{...u,...o4(c,s,t,r,a),bottom:h,borderTopColor:"transparent",borderLeftColor:"transparent"}:l==="bottom"?{...u,...o4(c,s,t,r,a),top:h,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const qN=R.forwardRef(({position:n,arrowSize:e,arrowOffset:t,arrowRadius:i,arrowPosition:r,visible:s,arrowX:o,arrowY:a,style:l,...c},u)=>{const{dir:h}=eg();return s?k.jsx("div",{...c,ref:u,style:{...l,...Lde({position:n,arrowSize:e,arrowOffset:t,arrowRadius:i,arrowPosition:r,dir:h,arrowX:o,arrowY:a})}}):null});qN.displayName="@mantine/core/FloatingArrow";const[Nde,Vj]=Cl("Popover component was not found in the tree");function hE({children:n,active:e=!0,refProp:t="ref",innerRef:i}){const r=foe(e),s=mr(r,i);return Pc(n)?R.cloneElement(n,{[t]:s}):n}function Gj(n){return k.jsx(ON,{tabIndex:-1,"data-autofocus":!0,...n})}hE.displayName="@mantine/core/FocusTrap";Gj.displayName="@mantine/core/FocusTrapInitialFocus";hE.InitialFocus=Gj;function kde(n){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof n.className=="string"&&e.classList.add(...n.className.split(" ").filter(Boolean)),typeof n.style=="object"&&Object.assign(e.style,n.style),typeof n.id=="string"&&e.setAttribute("id",n.id),e}const Ode={},jj=R.forwardRef((n,e)=>{const{children:t,target:i,...r}=st("Portal",Ode,n),[s,o]=R.useState(!1),a=R.useRef(null);return Ym(()=>(o(!0),a.current=i?typeof i=="string"?document.querySelector(i):i:kde(r),FS(e,a.current),!i&&a.current&&document.body.appendChild(a.current),()=>{!i&&a.current&&document.body.removeChild(a.current)}),[i]),!s||!a.current?null:JS.createPortal(k.jsx(k.Fragment,{children:t}),a.current)});jj.displayName="@mantine/core/Portal";function eh({withinPortal:n=!0,children:e,...t}){return n?k.jsx(jj,{...t,children:e}):k.jsx(k.Fragment,{children:e})}eh.displayName="@mantine/core/OptionalPortal";const ty=n=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Pe(n==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),z_={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Pe(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Pe(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Pe(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Pe(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Pe(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Pe(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Pe(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Pe(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...ty("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...ty("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...ty("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...ty("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...ty("top"),common:{transformOrigin:"top right"}}},a4={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function Dde({transition:n,state:e,duration:t,timingFunction:i}){const r={transitionDuration:`${t}ms`,transitionTimingFunction:i};return typeof n=="string"?n in z_?{transitionProperty:z_[n].transitionProperty,...r,...z_[n].common,...z_[n][a4[e]]}:{}:{transitionProperty:n.transitionProperty,...r,...n.common,...n[a4[e]]}}function Fde({duration:n,exitDuration:e,timingFunction:t,mounted:i,onEnter:r,onExit:s,onEntered:o,onExited:a,enterDelay:l,exitDelay:c}){const u=oo(),h=RL(),d=u.respectReducedMotion?h:!1,[f,p]=R.useState(d?0:n),[x,v]=R.useState(i?"entered":"exited"),y=R.useRef(-1),w=R.useRef(-1),_=R.useRef(-1),b=M=>{const C=M?r:s,P=M?o:a;window.clearTimeout(y.current);const T=d?0:M?n:e;p(T),T===0?(typeof C=="function"&&C(),typeof P=="function"&&P(),v(M?"entered":"exited")):_.current=requestAnimationFrame(()=>{By.flushSync(()=>{v(M?"pre-entering":"pre-exiting")}),_.current=requestAnimationFrame(()=>{typeof C=="function"&&C(),v(M?"entering":"exiting"),y.current=window.setTimeout(()=>{typeof P=="function"&&P(),v(M?"entered":"exited")},T)})})},E=M=>{if(window.clearTimeout(w.current),typeof(M?l:c)!="number"){b(M);return}w.current=window.setTimeout(()=>{b(M)},M?l:c)};return yc(()=>{E(i)},[i]),R.useEffect(()=>()=>{window.clearTimeout(y.current),cancelAnimationFrame(_.current)},[]),{transitionDuration:f,transitionStatus:x,transitionTimingFunction:t||"ease"}}function Rl({keepMounted:n,transition:e="fade",duration:t=250,exitDuration:i=t,mounted:r,children:s,timingFunction:o="ease",onExit:a,onEntered:l,onEnter:c,onExited:u,enterDelay:h,exitDelay:d}){const{transitionDuration:f,transitionStatus:p,transitionTimingFunction:x}=Fde({mounted:r,exitDuration:i,duration:t,timingFunction:o,onExit:a,onEntered:l,onEnter:c,onExited:u,enterDelay:h,exitDelay:d});return f===0?r?k.jsx(k.Fragment,{children:s({})}):n?s({display:"none"}):null:p==="exited"?n?s({display:"none"}):null:k.jsx(k.Fragment,{children:s(Dde({transition:e,duration:f,state:p,timingFunction:x}))})}Rl.displayName="@mantine/core/Transition";var $j={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const Ude={},ZN=Pt((n,e)=>{var v,y,w,_;const t=st("PopoverDropdown",Ude,n),{className:i,style:r,vars:s,children:o,onKeyDownCapture:a,variant:l,classNames:c,styles:u,...h}=t,d=Vj(),f=LV({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},x=mr(e,d.floating);return d.disabled?null:k.jsx(eh,{...d.portalProps,withinPortal:d.withinPortal,children:k.jsx(Rl,{mounted:d.opened,...d.transitionProps,transition:((v=d.transitionProps)==null?void 0:v.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((w=d.transitionProps)==null?void 0:w.exitDuration)=="number"?d.transitionProps.exitDuration:(_=d.transitionProps)==null?void 0:_.duration,children:b=>k.jsx(hE,{active:d.trapFocus&&d.opened,innerRef:x,children:k.jsxs(pt,{...p,...h,variant:l,onKeyDownCapture:Dce(d.onClose,{active:d.closeOnEscape,onTrigger:f,onKeyDown:a}),"data-position":d.placement,"data-fixed":d.floatingStrategy==="fixed"||void 0,...d.getStyles("dropdown",{className:i,props:t,classNames:c,styles:u,style:[{...b,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Pe(d.width)},r]}),children:[o,k.jsx(qN,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:t,classNames:c,styles:u})})]})})})})});ZN.classes=$j;ZN.displayName="@mantine/core/PopoverDropdown";const Bde={refProp:"ref",popupType:"dialog"},Xj=Pt((n,e)=>{const{children:t,refProp:i,popupType:r,...s}=st("PopoverTarget",Bde,n);if(!Pc(t))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=Vj(),l=mr(a.reference,t.ref,e),c=a.withRoles?{"aria-haspopup":r,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return R.cloneElement(t,{...o,...c,...a.targetProps,className:Zi(a.targetProps.className,o.className,t.props.className),[i]:l,...a.controlled?null:{onClick:a.onToggle}})});Xj.displayName="@mantine/core/PopoverTarget";function Yj({opened:n,floating:e,position:t,positionDependencies:i}){const[r,s]=R.useState(0);R.useEffect(()=>{if(e.refs.reference.current&&e.refs.floating.current&&n)return ede(e.refs.reference.current,e.refs.floating.current,e.update)},[e.refs.reference.current,e.refs.floating.current,n,r,t]),yc(()=>{e.update()},i),yc(()=>{s(o=>o+1)},[n])}function zde(n){if(n===void 0)return{shift:!0,flip:!0};const e={...n};return n.shift===void 0&&(e.shift=!0),n.flip===void 0&&(e.flip=!0),e}function Hde(n,e){const t=zde(n.middlewares),i=[Dj(n.offset)];return t.shift&&i.push(GN(typeof t.shift=="boolean"?{limiter:QB(),padding:5}:{limiter:QB(),padding:5,...t.shift})),t.flip&&i.push(typeof t.flip=="boolean"?LR():LR(t.flip)),t.inline&&i.push(typeof t.inline=="boolean"?NR():NR(t.inline)),i.push(Fj({element:n.arrowRef,padding:n.arrowOffset})),(t.size||n.width==="target")&&i.push(ude({...typeof t.size=="boolean"?{}:t.size,apply({rects:r,availableWidth:s,availableHeight:o,...a}){var u;const c=((u=e().refs.floating.current)==null?void 0:u.style)??{};t.size&&(typeof t.size=="object"&&t.size.apply?t.size.apply({rects:r,availableWidth:s,availableHeight:o,...a}):Object.assign(c,{maxWidth:`${s}px`,maxHeight:`${o}px`})),n.width==="target"&&Object.assign(c,{width:`${r.reference.width}px`})}})),i}function Wde(n){const[e,t,i]=Od({value:n.opened,defaultValue:n.defaultOpened,finalValue:!1,onChange:n.onChange}),r=()=>{var a;e&&((a=n.onClose)==null||a.call(n),t(!1))},s=()=>{var a,l;e?((a=n.onClose)==null||a.call(n),t(!1)):((l=n.onOpen)==null||l.call(n),t(!0))},o=YN({strategy:n.strategy,placement:n.position,middleware:Hde(n,()=>o)});return Yj({opened:e,position:n.position,positionDependencies:n.positionDependencies||[],floating:o}),yc(()=>{var a;(a=n.onPositionChange)==null||a.call(n,o.placement)},[o.placement]),yc(()=>{var a,l;i||(n.opened?(l=n.onOpen)==null||l.call(n):(a=n.onClose)==null||a.call(n))},[n.opened,i]),{floating:o,controlled:typeof n.opened=="boolean",opened:e,onClose:r,onToggle:s}}const Vde={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:jo("popover"),__staticSelector:"Popover",width:"max-content"},Gde=(n,{radius:e,shadow:t})=>({dropdown:{"--popover-radius":e===void 0?void 0:so(e),"--popover-shadow":EN(t)}});function ka(n){var me,ye,ke,Xe,Le,Ye;const e=st("Popover",Vde,n),{children:t,position:i,offset:r,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:l,width:c,middlewares:u,withArrow:h,arrowSize:d,arrowOffset:f,arrowRadius:p,arrowPosition:x,unstyled:v,classNames:y,styles:w,closeOnClickOutside:_,withinPortal:b,portalProps:E,closeOnEscape:M,clickOutsideEvents:C,trapFocus:P,onClose:T,onOpen:I,onChange:U,zIndex:j,radius:B,shadow:z,id:$,defaultOpened:H,__staticSelector:Z,withRoles:O,disabled:W,returnFocus:D,variant:Y,keepMounted:Q,vars:re,floatingStrategy:ce,...oe}=e,he=on({name:Z,props:e,classes:$j,classNames:y,styles:w,unstyled:v,rootSelector:"dropdown",vars:re,varsResolver:Gde}),Re=R.useRef(null),[Oe,Ve]=R.useState(null),[Je,Fe]=R.useState(null),{dir:J}=eg(),ge=qm($),de=Wde({middlewares:u,width:c,position:Wj(J,i),offset:typeof r=="number"?r+(h?d/2:0):r,arrowRef:Re,arrowOffset:f,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:H,onChange:U,onOpen:I,onClose:T,strategy:ce});ioe(()=>_&&de.onClose(),C,[Oe,Je]);const Ae=R.useCallback(q=>{Ve(q),de.floating.refs.setReference(q)},[de.floating.refs.setReference]),Ie=R.useCallback(q=>{Fe(q),de.floating.refs.setFloating(q)},[de.floating.refs.setFloating]);return k.jsx(Nde,{value:{returnFocus:D,disabled:W,controlled:de.controlled,reference:Ae,floating:Ie,x:de.floating.x,y:de.floating.y,arrowX:(ke=(ye=(me=de.floating)==null?void 0:me.middlewareData)==null?void 0:ye.arrow)==null?void 0:ke.x,arrowY:(Ye=(Le=(Xe=de.floating)==null?void 0:Xe.middlewareData)==null?void 0:Le.arrow)==null?void 0:Ye.y,opened:de.opened,arrowRef:Re,transitionProps:l,width:c,withArrow:h,arrowSize:d,arrowOffset:f,arrowRadius:p,arrowPosition:x,placement:de.floating.placement,trapFocus:P,withinPortal:b,portalProps:E,zIndex:j,radius:B,shadow:z,closeOnEscape:M,onClose:de.onClose,onToggle:de.onToggle,getTargetId:()=>`${ge}-target`,getDropdownId:()=>`${ge}-dropdown`,withRoles:O,targetProps:oe,__staticSelector:Z,classNames:y,styles:w,unstyled:v,variant:Y,keepMounted:Q,getStyles:he,floatingStrategy:ce},children:t})}ka.Target=Xj;ka.Dropdown=ZN;ka.displayName="@mantine/core/Popover";ka.extend=n=>n;var wa={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const qj=R.forwardRef(({className:n,...e},t)=>k.jsxs(pt,{component:"span",className:Zi(wa.barsLoader,n),...e,ref:t,children:[k.jsx("span",{className:wa.bar}),k.jsx("span",{className:wa.bar}),k.jsx("span",{className:wa.bar})]}));qj.displayName="@mantine/core/Bars";const Zj=R.forwardRef(({className:n,...e},t)=>k.jsxs(pt,{component:"span",className:Zi(wa.dotsLoader,n),...e,ref:t,children:[k.jsx("span",{className:wa.dot}),k.jsx("span",{className:wa.dot}),k.jsx("span",{className:wa.dot})]}));Zj.displayName="@mantine/core/Dots";const Kj=R.forwardRef(({className:n,...e},t)=>k.jsx(pt,{component:"span",className:Zi(wa.ovalLoader,n),...e,ref:t}));Kj.displayName="@mantine/core/Oval";const Qj={bars:qj,oval:Kj,dots:Zj},jde={loaders:Qj,type:"oval"},$de=(n,{size:e,color:t})=>({root:{"--loader-size":qi(e,"loader-size"),"--loader-color":t?zu(t,n):void 0}}),Jd=Pt((n,e)=>{const t=st("Loader",jde,n),{size:i,color:r,type:s,vars:o,className:a,style:l,classNames:c,styles:u,unstyled:h,loaders:d,variant:f,children:p,...x}=t,v=on({name:"Loader",props:t,classes:wa,className:a,style:l,classNames:c,styles:u,unstyled:h,vars:o,varsResolver:$de});return p?k.jsx(pt,{...v("root"),ref:e,...x,children:p}):k.jsx(pt,{...v("root"),ref:e,component:d[s],variant:f,size:i,...x})});Jd.defaultLoaders=Qj;Jd.classes=wa;Jd.displayName="@mantine/core/Loader";var dE={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const l4={orientation:"horizontal"},Xde=(n,{borderWidth:e})=>({group:{"--ai-border-width":Pe(e)}}),KN=Pt((n,e)=>{const t=st("ActionIconGroup",l4,n),{className:i,style:r,classNames:s,styles:o,unstyled:a,orientation:l,vars:c,borderWidth:u,variant:h,mod:d,...f}=st("ActionIconGroup",l4,n),p=on({name:"ActionIconGroup",props:t,classes:dE,className:i,style:r,classNames:s,styles:o,unstyled:a,vars:c,varsResolver:Xde,rootSelector:"group"});return k.jsx(pt,{...p("group"),ref:e,variant:h,mod:[{"data-orientation":l},d],role:"group",...f})});KN.classes=dE;KN.displayName="@mantine/core/ActionIconGroup";const Yde={},qde=(n,{size:e,radius:t,variant:i,gradient:r,color:s,autoContrast:o})=>{const a=n.variantColorResolver({color:s||n.primaryColor,theme:n,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--ai-size":qi(e,"ai-size"),"--ai-radius":t===void 0?void 0:so(t),"--ai-bg":s||i?a.background:void 0,"--ai-hover":s||i?a.hover:void 0,"--ai-hover-color":s||i?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||i?a.border:void 0}}},ig=Na((n,e)=>{const t=st("ActionIcon",Yde,n),{className:i,unstyled:r,variant:s,classNames:o,styles:a,style:l,loading:c,loaderProps:u,size:h,color:d,radius:f,__staticSelector:p,gradient:x,vars:v,children:y,disabled:w,"data-disabled":_,autoContrast:b,mod:E,...M}=t,C=on({name:["ActionIcon",p],props:t,className:i,style:l,classes:dE,classNames:o,styles:a,unstyled:r,vars:v,varsResolver:qde});return k.jsxs(Ca,{...C("root",{active:!w&&!c&&!_}),...M,unstyled:r,variant:s,size:h,disabled:w||c,ref:e,mod:[{loading:c,disabled:w||_},E],children:[k.jsx(Rl,{mounted:!!c,transition:"slide-down",duration:150,children:P=>k.jsx(pt,{component:"span",...C("loader",{style:P}),"aria-hidden":!0,children:k.jsx(Jd,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...u})})}),k.jsx(pt,{component:"span",mod:{loading:c},...C("icon"),children:y})]})});ig.classes=dE;ig.displayName="@mantine/core/ActionIcon";ig.Group=KN;const Jj=R.forwardRef(({size:n="var(--cb-icon-size, 70%)",style:e,...t},i)=>k.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:n,height:n},ref:i,...t,children:k.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Jj.displayName="@mantine/core/CloseIcon";var e$={root:"m_86a44da5","root--subtle":"m_220c80f2"};const Zde={variant:"subtle"},Kde=(n,{size:e,radius:t,iconSize:i})=>({root:{"--cb-size":qi(e,"cb-size"),"--cb-radius":t===void 0?void 0:so(t),"--cb-icon-size":Pe(i)}}),rg=Na((n,e)=>{const t=st("CloseButton",Zde,n),{iconSize:i,children:r,vars:s,radius:o,className:a,classNames:l,style:c,styles:u,unstyled:h,"data-disabled":d,disabled:f,variant:p,icon:x,mod:v,...y}=t,w=on({name:"CloseButton",props:t,className:a,style:c,classes:e$,classNames:l,styles:u,unstyled:h,vars:s,varsResolver:Kde});return k.jsxs(Ca,{ref:e,...y,unstyled:h,variant:p,disabled:f,mod:[{disabled:f||d},v],...w("root",{variant:p,active:!f&&!d}),children:[x||k.jsx(Jj,{}),r]})});rg.classes=e$;rg.displayName="@mantine/core/CloseButton";function Qde(n){return R.Children.toArray(n).filter(Boolean)}var t$={root:"m_4081bf90"};const Jde={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},efe=(n,{grow:e,preventGrowOverflow:t,gap:i,align:r,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":e&&t?a:void 0,"--group-gap":nE(i),"--group-align":r,"--group-justify":s,"--group-wrap":o}}),mc=Pt((n,e)=>{const t=st("Group",Jde,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,children:l,gap:c,align:u,justify:h,wrap:d,grow:f,preventGrowOverflow:p,vars:x,variant:v,__size:y,mod:w,..._}=t,b=Qde(l),E=b.length,M=nE(c??"md"),P={childWidth:`calc(${100/E}% - (${M} - ${M} / ${E}))`},T=on({name:"Group",props:t,stylesCtx:P,className:r,style:s,classes:t$,classNames:i,styles:o,unstyled:a,vars:x,varsResolver:efe});return k.jsx(pt,{...T("root"),ref:e,variant:v,mod:[{grow:f},w],size:y,..._,children:b})});mc.classes=t$;mc.displayName="@mantine/core/Group";var n$={root:"m_9814e45f"};const tfe={zIndex:jo("modal")},nfe=(n,{gradient:e,color:t,backgroundOpacity:i,blur:r,radius:s,zIndex:o})=>({root:{"--overlay-bg":e||(t!==void 0||i!==void 0)&&il(t||"#000",i??.6)||void 0,"--overlay-filter":r?`blur(${Pe(r)})`:void 0,"--overlay-radius":s===void 0?void 0:so(s),"--overlay-z-index":o==null?void 0:o.toString()}}),$v=Na((n,e)=>{const t=st("Overlay",tfe,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,fixed:c,center:u,children:h,radius:d,zIndex:f,gradient:p,blur:x,color:v,backgroundOpacity:y,mod:w,..._}=t,b=on({name:"Overlay",props:t,classes:n$,className:r,style:s,classNames:i,styles:o,unstyled:a,vars:l,varsResolver:nfe});return k.jsx(pt,{ref:e,...b("root"),mod:[{center:u,fixed:c},w],..._,children:h})});$v.classes=n$;$v.displayName="@mantine/core/Overlay";const[ife,Rc]=Cl("ModalBase component was not found in tree");function rfe({opened:n,transitionDuration:e}){const[t,i]=R.useState(n),r=R.useRef(),o=RL()?0:e;return R.useEffect(()=>(n?(i(!0),window.clearTimeout(r.current)):o===0?i(!1):r.current=window.setTimeout(()=>i(!1),o),()=>window.clearTimeout(r.current)),[n,o]),t}function sfe({id:n,transitionProps:e,opened:t,trapFocus:i,closeOnEscape:r,onClose:s,returnFocus:o}){const a=qm(n),[l,c]=R.useState(!1),[u,h]=R.useState(!1),d=typeof(e==null?void 0:e.duration)=="number"?e==null?void 0:e.duration:200,f=rfe({opened:t,transitionDuration:d});return DV("keydown",p=>{var x;p.key==="Escape"&&r&&t&&((x=p.target)==null?void 0:x.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),LV({opened:t,shouldReturnFocus:i&&o}),{_id:a,titleMounted:l,bodyMounted:u,shouldLockScroll:f,setTitleMounted:c,setBodyMounted:h}}const i$=R.forwardRef(({keepMounted:n,opened:e,onClose:t,id:i,transitionProps:r,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:l,withinPortal:c,portalProps:u,lockScroll:h,children:d,zIndex:f,shadow:p,padding:x,__vars:v,unstyled:y,removeScrollProps:w,..._},b)=>{const{_id:E,titleMounted:M,bodyMounted:C,shouldLockScroll:P,setTitleMounted:T,setBodyMounted:I}=sfe({id:i,transitionProps:r,opened:e,trapFocus:s,closeOnEscape:o,onClose:t,returnFocus:a}),{key:U,...j}=w||{};return k.jsx(eh,{...u,withinPortal:c,children:k.jsx(ife,{value:{opened:e,onClose:t,closeOnClickOutside:l,transitionProps:{...r,keepMounted:n},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:M,bodyMounted:C,setTitleMounted:T,setBodyMounted:I,trapFocus:s,closeOnEscape:o,zIndex:f,unstyled:y},children:k.jsx(tE,{enabled:P&&h,...j,children:k.jsx(pt,{ref:b,..._,__vars:{...v,"--mb-z-index":(f||jo("modal")).toString(),"--mb-shadow":EN(p),"--mb-padding":nE(x)},children:d})},U)})})});i$.displayName="@mantine/core/ModalBase";function ofe(){const n=Rc();return R.useEffect(()=>(n.setBodyMounted(!0),()=>n.setBodyMounted(!1)),[]),n.getBodyId()}var Pm={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const r$=R.forwardRef(({className:n,...e},t)=>{const i=ofe(),r=Rc();return k.jsx(pt,{ref:t,...e,id:i,className:Zi({[Pm.body]:!r.unstyled},n)})});r$.displayName="@mantine/core/ModalBaseBody";const s$=R.forwardRef(({className:n,onClick:e,...t},i)=>{const r=Rc();return k.jsx(rg,{ref:i,...t,onClick:s=>{r.onClose(),e==null||e(s)},className:Zi({[Pm.close]:!r.unstyled},n),unstyled:r.unstyled})});s$.displayName="@mantine/core/ModalBaseCloseButton";const o$=R.forwardRef(({transitionProps:n,className:e,innerProps:t,onKeyDown:i,style:r,...s},o)=>{const a=Rc();return k.jsx(Rl,{mounted:a.opened,transition:"pop",...a.transitionProps,...n,children:l=>k.jsx("div",{...t,className:Zi({[Pm.inner]:!a.unstyled},t.className),children:k.jsx(hE,{active:a.opened&&a.trapFocus,innerRef:o,children:k.jsx(aE,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[r,l],className:Zi({[Pm.content]:!a.unstyled},e),unstyled:a.unstyled,children:s.children})})})})});o$.displayName="@mantine/core/ModalBaseContent";const a$=R.forwardRef(({className:n,...e},t)=>{const i=Rc();return k.jsx(pt,{component:"header",ref:t,className:Zi({[Pm.header]:!i.unstyled},n),...e})});a$.displayName="@mantine/core/ModalBaseHeader";const afe={duration:200,timingFunction:"ease",transition:"fade"};function lfe(n){const e=Rc();return{...afe,...e.transitionProps,...n}}const l$=R.forwardRef(({onClick:n,transitionProps:e,style:t,...i},r)=>{const s=Rc(),o=lfe(e);return k.jsx(Rl,{mounted:s.opened,...o,transition:"fade",children:a=>k.jsx($v,{ref:r,fixed:!0,style:[t,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:l=>{n==null||n(l),s.closeOnClickOutside&&s.onClose()},...i})})});l$.displayName="@mantine/core/ModalBaseOverlay";function cfe(){const n=Rc();return R.useEffect(()=>(n.setTitleMounted(!0),()=>n.setTitleMounted(!1)),[]),n.getTitleId()}const c$=R.forwardRef(({className:n,...e},t)=>{const i=cfe(),r=Rc();return k.jsx(pt,{component:"h2",ref:t,className:Zi({[Pm.title]:!r.unstyled},n),...e,id:i})});c$.displayName="@mantine/core/ModalBaseTitle";function ufe({children:n}){return k.jsx(k.Fragment,{children:n})}const[hfe,fE]=Pce({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Xo={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const c4={},dfe=(n,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${Do(e)} - ${Pe(2)})`}}),pE=Pt((n,e)=>{const t=st("InputDescription",c4,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,size:c,__staticSelector:u,__inheritStyles:h=!0,variant:d,...f}=st("InputDescription",c4,t),p=fE(),x=on({name:["InputWrapper",u],props:t,classes:Xo,className:r,style:s,classNames:i,styles:o,unstyled:a,rootSelector:"description",vars:l,varsResolver:dfe}),v=h&&(p==null?void 0:p.getStyles)||x;return k.jsx(pt,{component:"p",ref:e,variant:d,size:c,...v("description",p!=null&&p.getStyles?{className:r,style:s}:void 0),...f})});pE.classes=Xo;pE.displayName="@mantine/core/InputDescription";const ffe={},pfe=(n,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${Do(e)} - ${Pe(2)})`}}),mE=Pt((n,e)=>{const t=st("InputError",ffe,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,size:c,__staticSelector:u,__inheritStyles:h=!0,variant:d,...f}=t,p=on({name:["InputWrapper",u],props:t,classes:Xo,className:r,style:s,classNames:i,styles:o,unstyled:a,rootSelector:"error",vars:l,varsResolver:pfe}),x=fE(),v=h&&(x==null?void 0:x.getStyles)||p;return k.jsx(pt,{component:"p",ref:e,variant:d,size:c,...v("error",x!=null&&x.getStyles?{className:r,style:s}:void 0),...f})});mE.classes=Xo;mE.displayName="@mantine/core/InputError";const u4={labelElement:"label"},mfe=(n,{size:e})=>({label:{"--input-label-size":Do(e),"--input-asterisk-color":void 0}}),gE=Pt((n,e)=>{const t=st("InputLabel",u4,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,labelElement:c,size:u,required:h,htmlFor:d,onMouseDown:f,children:p,__staticSelector:x,variant:v,mod:y,...w}=st("InputLabel",u4,t),_=on({name:["InputWrapper",x],props:t,classes:Xo,className:r,style:s,classNames:i,styles:o,unstyled:a,rootSelector:"label",vars:l,varsResolver:mfe}),b=fE(),E=(b==null?void 0:b.getStyles)||_;return k.jsxs(pt,{...E("label",b!=null&&b.getStyles?{className:r,style:s}:void 0),component:c,variant:v,size:u,ref:e,htmlFor:c==="label"?d:void 0,mod:[{required:h},y],onMouseDown:M=>{f==null||f(M),!M.defaultPrevented&&M.detail>1&&M.preventDefault()},...w,children:[p,h&&k.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});gE.classes=Xo;gE.displayName="@mantine/core/InputLabel";const h4={},QN=Pt((n,e)=>{const t=st("InputPlaceholder",h4,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,__staticSelector:c,variant:u,error:h,mod:d,...f}=st("InputPlaceholder",h4,t),p=on({name:["InputPlaceholder",c],props:t,classes:Xo,className:r,style:s,classNames:i,styles:o,unstyled:a,rootSelector:"placeholder"});return k.jsx(pt,{...p("placeholder"),mod:[{error:!!h},d],component:"span",variant:u,ref:e,...f})});QN.classes=Xo;QN.displayName="@mantine/core/InputPlaceholder";function gfe(n,{hasDescription:e,hasError:t}){const i=n.findIndex(l=>l==="input"),r=n.slice(0,i),s=n.slice(i+1),o=e&&r.includes("description")||t&&r.includes("error");return{offsetBottom:e&&s.includes("description")||t&&s.includes("error"),offsetTop:o}}const yfe={labelElement:"label",inputContainer:n=>n,inputWrapperOrder:["label","description","input","error"]},vfe=(n,{size:e})=>({label:{"--input-label-size":Do(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${Do(e)} - ${Pe(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${Do(e)} - ${Pe(2)})`}}),JN=Pt((n,e)=>{const t=st("InputWrapper",yfe,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,size:c,variant:u,__staticSelector:h,inputContainer:d,inputWrapperOrder:f,label:p,error:x,description:v,labelProps:y,descriptionProps:w,errorProps:_,labelElement:b,children:E,withAsterisk:M,id:C,required:P,__stylesApiProps:T,mod:I,...U}=t,j=on({name:["InputWrapper",h],props:T||t,classes:Xo,className:r,style:s,classNames:i,styles:o,unstyled:a,vars:l,varsResolver:vfe}),B={size:c,variant:u,__staticSelector:h},z=qm(C),$=typeof M=="boolean"?M:P,H=(_==null?void 0:_.id)||`${z}-error`,Z=(w==null?void 0:w.id)||`${z}-description`,O=z,W=!!x&&typeof x!="boolean",D=!!v,Y=`${W?H:""} ${D?Z:""}`,Q=Y.trim().length>0?Y.trim():void 0,re=(y==null?void 0:y.id)||`${z}-label`,ce=p&&k.jsx(gE,{labelElement:b,id:re,htmlFor:O,required:$,...B,...y,children:p},"label"),oe=D&&k.jsx(pE,{...w,...B,size:(w==null?void 0:w.size)||B.size,id:(w==null?void 0:w.id)||Z,children:v},"description"),he=k.jsx(R.Fragment,{children:d(E)},"input"),Re=W&&R.createElement(mE,{..._,...B,size:(_==null?void 0:_.size)||B.size,key:"error",id:(_==null?void 0:_.id)||H},x),Oe=f.map(Ve=>{switch(Ve){case"label":return ce;case"input":return he;case"description":return oe;case"error":return Re;default:return null}});return k.jsx(hfe,{value:{getStyles:j,describedBy:Q,inputId:O,labelId:re,...gfe(f,{hasDescription:D,hasError:W})},children:k.jsx(pt,{ref:e,variant:u,size:c,mod:[{error:!!x},I],...j("root"),...U,children:Oe})})});JN.classes=Xo;JN.displayName="@mantine/core/InputWrapper";const xfe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},_fe=(n,e,t)=>({wrapper:{"--input-margin-top":t.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":t.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":qi(e.size,"input-height"),"--input-fz":Do(e.size),"--input-radius":e.radius===void 0?void 0:so(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?Pe(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?Pe(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?qi(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),Ho=Na((n,e)=>{const t=st("Input",xfe,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,required:l,__staticSelector:c,__stylesApiProps:u,size:h,wrapperProps:d,error:f,disabled:p,leftSection:x,leftSectionProps:v,leftSectionWidth:y,rightSection:w,rightSectionProps:_,rightSectionWidth:b,rightSectionPointerEvents:E,leftSectionPointerEvents:M,variant:C,vars:P,pointer:T,multiline:I,radius:U,id:j,withAria:B,withErrorStyles:z,mod:$,inputSize:H,...Z}=t,{styleProps:O,rest:W}=RN(Z),D=fE(),Y={offsetBottom:D==null?void 0:D.offsetBottom,offsetTop:D==null?void 0:D.offsetTop},Q=on({name:["Input",c],props:u||t,classes:Xo,className:r,style:s,classNames:i,styles:o,unstyled:a,stylesCtx:Y,rootSelector:"wrapper",vars:P,varsResolver:_fe}),re=B?{required:l,disabled:p,"aria-invalid":!!f,"aria-describedby":D==null?void 0:D.describedBy,id:(D==null?void 0:D.inputId)||j}:{};return k.jsxs(pt,{...Q("wrapper"),...O,...d,mod:[{error:!!f&&z,pointer:T,disabled:p,multiline:I,"data-with-right-section":!!w,"data-with-left-section":!!x},$],variant:C,size:h,children:[x&&k.jsx("div",{...v,"data-position":"left",...Q("section",{className:v==null?void 0:v.className,style:v==null?void 0:v.style}),children:x}),k.jsx(pt,{component:"input",...W,...re,ref:e,required:l,mod:{disabled:p,error:!!f&&z},variant:C,__size:H,...Q("input")}),w&&k.jsx("div",{..._,"data-position":"right",...Q("section",{className:_==null?void 0:_.className,style:_==null?void 0:_.style}),children:w})]})});Ho.classes=Xo;Ho.Wrapper=JN;Ho.Label=gE;Ho.Error=mE;Ho.Description=pE;Ho.Placeholder=QN;Ho.displayName="@mantine/core/Input";function wfe(n,e,t){const i=st(n,e,t),{label:r,description:s,error:o,required:a,classNames:l,styles:c,className:u,unstyled:h,__staticSelector:d,__stylesApiProps:f,errorProps:p,labelProps:x,descriptionProps:v,wrapperProps:y,id:w,size:_,style:b,inputContainer:E,inputWrapperOrder:M,withAsterisk:C,variant:P,vars:T,mod:I,...U}=i,{styleProps:j,rest:B}=RN(U),z={label:r,description:s,error:o,required:a,classNames:l,className:u,__staticSelector:d,__stylesApiProps:f||i,errorProps:p,labelProps:x,descriptionProps:v,unstyled:h,styles:c,size:_,style:b,inputContainer:E,inputWrapperOrder:M,withAsterisk:C,variant:P,id:w,mod:I,...y};return{...B,classNames:l,styles:c,unstyled:h,wrapperProps:{...z,...j},inputProps:{required:a,classNames:l,styles:c,unstyled:h,size:_,__staticSelector:d,__stylesApiProps:f||i,error:o,variant:P,id:w}}}const bfe={__staticSelector:"InputBase",withAria:!0},sg=Na((n,e)=>{const{inputProps:t,wrapperProps:i,...r}=wfe("InputBase",bfe,n);return k.jsx(Ho.Wrapper,{...i,children:k.jsx(Ho,{...t,...r,ref:e})})});sg.classes={...Ho.classes,...Ho.Wrapper.classes};sg.displayName="@mantine/core/InputBase";var u$={root:"m_7f854edf"};const Sfe={position:{bottom:0,right:0},zIndex:jo("modal"),withinPortal:!0},Efe=(n,{zIndex:e,position:t})=>({root:{"--affix-z-index":e==null?void 0:e.toString(),"--affix-top":Pe(t==null?void 0:t.top),"--affix-left":Pe(t==null?void 0:t.left),"--affix-bottom":Pe(t==null?void 0:t.bottom),"--affix-right":Pe(t==null?void 0:t.right)}}),ek=Pt((n,e)=>{const t=st("Affix",Sfe,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,portalProps:c,zIndex:u,withinPortal:h,position:d,...f}=t,p=on({name:"Affix",classes:u$,props:t,className:r,style:s,classNames:i,styles:o,unstyled:a,vars:l,varsResolver:Efe});return k.jsx(eh,{...c,withinPortal:h,children:k.jsx(pt,{ref:e,...p("root"),...f})})});ek.classes=u$;ek.displayName="@mantine/core/Affix";var h$={root:"m_b6d8b162"};function Mfe(n){if(n==="start")return"start";if(n==="end"||n)return"end"}const Tfe={inherit:!1},Afe=(n,{variant:e,lineClamp:t,gradient:i,size:r,color:s})=>({root:{"--text-fz":Do(r),"--text-lh":Fce(r),"--text-gradient":e==="gradient"?wR(i,n):void 0,"--text-line-clamp":typeof t=="number"?t.toString():void 0,"--text-color":s?zu(s,n):void 0}}),ov=Na((n,e)=>{const t=st("Text",Tfe,n),{lineClamp:i,truncate:r,inline:s,inherit:o,gradient:a,span:l,__staticSelector:c,vars:u,className:h,style:d,classNames:f,styles:p,unstyled:x,variant:v,mod:y,size:w,..._}=t,b=on({name:["Text",c],props:t,classes:h$,className:h,style:d,classNames:f,styles:p,unstyled:x,vars:u,varsResolver:Afe});return k.jsx(pt,{...b("root",{focusable:!0}),ref:e,component:l?"span":"p",variant:v,mod:[{"data-truncate":Mfe(r),"data-line-clamp":typeof i=="number","data-inline":s,"data-inherit":o},y],size:w,..._})});ov.classes=h$;ov.displayName="@mantine/core/Text";const[Cfe,og]=Cl("AppShell was not found in tree");var th={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const Pfe={},tk=Pt((n,e)=>{const t=st("AppShellAside",Pfe,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,withBorder:c,zIndex:u,mod:h,...d}=t,f=og();return f.disabled?null:k.jsx(pt,{component:"aside",ref:e,mod:[{"with-border":c??f.withBorder},h],...f.getStyles("aside",{className:r,classNames:i,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${u??f.zIndex} + 1)`}})});tk.classes=th;tk.displayName="@mantine/core/AppShellAside";const Rfe={},nk=Pt((n,e)=>{var p;const t=st("AppShellFooter",Rfe,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,withBorder:c,zIndex:u,mod:h,...d}=t,f=og();return f.disabled?null:k.jsx(pt,{component:"footer",ref:e,mod:[{"with-border":c??f.withBorder},h],...f.getStyles("footer",{className:Zi({[tE.classNames.zeroRight]:f.offsetScrollbars},r),classNames:i,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=u??f.zIndex)==null?void 0:p.toString()}})});nk.classes=th;nk.displayName="@mantine/core/AppShellFooter";const Ife={},ik=Pt((n,e)=>{var p;const t=st("AppShellHeader",Ife,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,withBorder:c,zIndex:u,mod:h,...d}=t,f=og();return f.disabled?null:k.jsx(pt,{component:"header",ref:e,mod:[{"with-border":c??f.withBorder},h],...f.getStyles("header",{className:Zi({[tE.classNames.zeroRight]:f.offsetScrollbars},r),classNames:i,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=u??f.zIndex)==null?void 0:p.toString()}})});ik.classes=th;ik.displayName="@mantine/core/AppShellHeader";const Lfe={},rk=Pt((n,e)=>{const t=st("AppShellMain",Lfe,n),{classNames:i,className:r,style:s,styles:o,vars:a,...l}=t,c=og();return k.jsx(pt,{component:"main",ref:e,...c.getStyles("main",{className:r,style:s,classNames:i,styles:o}),...l})});rk.classes=th;rk.displayName="@mantine/core/AppShellMain";function C0(n){return typeof n=="object"?n.base:n}function P0(n){const e=typeof n=="object"&&n!==null&&typeof n.base<"u"&&Object.keys(n).length===1;return typeof n=="number"||typeof n=="string"||e}function R0(n){return!(typeof n!="object"||n===null||Object.keys(n).length===1&&"base"in n)}function Nfe({baseStyles:n,minMediaStyles:e,maxMediaStyles:t,aside:i,theme:r}){var l,c,u;const s=i==null?void 0:i.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(i!=null&&i.breakpoint&&!((l=i==null?void 0:i.collapsed)!=null&&l.mobile)&&(t[i==null?void 0:i.breakpoint]=t[i==null?void 0:i.breakpoint]||{},t[i==null?void 0:i.breakpoint]["--app-shell-aside-width"]="100%",t[i==null?void 0:i.breakpoint]["--app-shell-aside-offset"]="0px"),P0(s)){const h=Pe(C0(s));n["--app-shell-aside-width"]=h,n["--app-shell-aside-offset"]=h}if(R0(s)&&(typeof s.base<"u"&&(n["--app-shell-aside-width"]=Pe(s.base),n["--app-shell-aside-offset"]=Pe(s.base)),Cr(s).forEach(h=>{h!=="base"&&(e[h]=e[h]||{},e[h]["--app-shell-aside-width"]=Pe(s[h]),e[h]["--app-shell-aside-offset"]=Pe(s[h]))})),(c=i==null?void 0:i.collapsed)!=null&&c.desktop){const h=i.breakpoint;e[h]=e[h]||{},e[h]["--app-shell-aside-transform"]=o,e[h]["--app-shell-aside-transform-rtl"]=a,e[h]["--app-shell-aside-offset"]="0px !important"}if((u=i==null?void 0:i.collapsed)!=null&&u.mobile){const h=MN(i.breakpoint,r.breakpoints)-.1;t[h]=t[h]||{},t[h]["--app-shell-aside-width"]="100%",t[h]["--app-shell-aside-offset"]="0px",t[h]["--app-shell-aside-transform"]=o,t[h]["--app-shell-aside-transform-rtl"]=a}}function kfe({baseStyles:n,minMediaStyles:e,footer:t}){const i=t==null?void 0:t.height,r="translateY(var(--app-shell-footer-height))",s=(t==null?void 0:t.offset)??!0;if(P0(i)){const o=Pe(C0(i));n["--app-shell-footer-height"]=o,s&&(n["--app-shell-footer-offset"]=o)}R0(i)&&(typeof i.base<"u"&&(n["--app-shell-footer-height"]=Pe(i.base),s&&(n["--app-shell-footer-offset"]=Pe(i.base))),Cr(i).forEach(o=>{o!=="base"&&(e[o]=e[o]||{},e[o]["--app-shell-footer-height"]=Pe(i[o]),s&&(e[o]["--app-shell-footer-offset"]=Pe(i[o])))})),t!=null&&t.collapsed&&(n["--app-shell-footer-transform"]=r,n["--app-shell-footer-offset"]="0px !important")}function Ofe({baseStyles:n,minMediaStyles:e,header:t}){const i=t==null?void 0:t.height,r="translateY(calc(var(--app-shell-header-height) * -1))",s=(t==null?void 0:t.offset)??!0;if(P0(i)){const o=Pe(C0(i));n["--app-shell-header-height"]=o,s&&(n["--app-shell-header-offset"]=o)}R0(i)&&(typeof i.base<"u"&&(n["--app-shell-header-height"]=Pe(i.base),s&&(n["--app-shell-header-offset"]=Pe(i.base))),Cr(i).forEach(o=>{o!=="base"&&(e[o]=e[o]||{},e[o]["--app-shell-header-height"]=Pe(i[o]),s&&(e[o]["--app-shell-header-offset"]=Pe(i[o])))})),t!=null&&t.collapsed&&(n["--app-shell-header-transform"]=r,n["--app-shell-header-offset"]="0px !important")}function Dfe({baseStyles:n,minMediaStyles:e,maxMediaStyles:t,navbar:i,theme:r}){var l,c,u;const s=i==null?void 0:i.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(i!=null&&i.breakpoint&&!((l=i==null?void 0:i.collapsed)!=null&&l.mobile)&&(t[i==null?void 0:i.breakpoint]=t[i==null?void 0:i.breakpoint]||{},t[i==null?void 0:i.breakpoint]["--app-shell-navbar-width"]="100%",t[i==null?void 0:i.breakpoint]["--app-shell-navbar-offset"]="0px"),P0(s)){const h=Pe(C0(s));n["--app-shell-navbar-width"]=h,n["--app-shell-navbar-offset"]=h}if(R0(s)&&(typeof s.base<"u"&&(n["--app-shell-navbar-width"]=Pe(s.base),n["--app-shell-navbar-offset"]=Pe(s.base)),Cr(s).forEach(h=>{h!=="base"&&(e[h]=e[h]||{},e[h]["--app-shell-navbar-width"]=Pe(s[h]),e[h]["--app-shell-navbar-offset"]=Pe(s[h]))})),(c=i==null?void 0:i.collapsed)!=null&&c.desktop){const h=i.breakpoint;e[h]=e[h]||{},e[h]["--app-shell-navbar-transform"]=o,e[h]["--app-shell-navbar-transform-rtl"]=a,e[h]["--app-shell-navbar-offset"]="0px !important"}if((u=i==null?void 0:i.collapsed)!=null&&u.mobile){const h=MN(i.breakpoint,r.breakpoints)-.1;t[h]=t[h]||{},t[h]["--app-shell-navbar-width"]="100%",t[h]["--app-shell-navbar-offset"]="0px",t[h]["--app-shell-navbar-transform"]=o,t[h]["--app-shell-navbar-transform-rtl"]=a}}function tC(n){return Number(n)===0?"0px":nE(n)}function Ffe({padding:n,baseStyles:e,minMediaStyles:t}){P0(n)&&(e["--app-shell-padding"]=tC(C0(n))),R0(n)&&(n.base&&(e["--app-shell-padding"]=tC(n.base)),Cr(n).forEach(i=>{i!=="base"&&(t[i]=t[i]||{},t[i]["--app-shell-padding"]=tC(n[i]))}))}function Ufe({navbar:n,header:e,footer:t,aside:i,padding:r,theme:s}){const o={},a={},l={};Dfe({baseStyles:l,minMediaStyles:o,maxMediaStyles:a,navbar:n,theme:s}),Nfe({baseStyles:l,minMediaStyles:o,maxMediaStyles:a,aside:i,theme:s}),Ofe({baseStyles:l,minMediaStyles:o,header:e}),kfe({baseStyles:l,minMediaStyles:o,footer:t}),Ffe({baseStyles:l,minMediaStyles:o,padding:r});const c=OB(Cr(o),s.breakpoints).map(d=>({query:`(min-width: ${Qb(d.px)})`,styles:o[d.value]})),u=OB(Cr(a),s.breakpoints).map(d=>({query:`(max-width: ${Qb(d.px)})`,styles:a[d.value]})),h=[...c,...u];return{baseStyles:l,media:h}}function Bfe({navbar:n,header:e,aside:t,footer:i,padding:r}){const s=oo(),o=Ju(),{media:a,baseStyles:l}=Ufe({navbar:n,header:e,footer:i,aside:t,padding:r,theme:s});return k.jsx(sj,{media:a,styles:l,selector:o.cssVariablesSelector})}const zfe={},sk=Pt((n,e)=>{const t=st("AppShellNavbar",zfe,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,withBorder:c,zIndex:u,mod:h,...d}=t,f=og();return f.disabled?null:k.jsx(pt,{component:"nav",ref:e,mod:[{"with-border":c??f.withBorder},h],...f.getStyles("navbar",{className:r,classNames:i,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${u??f.zIndex} + 1)`}})});sk.classes=th;sk.displayName="@mantine/core/AppShellNavbar";const Hfe={},I0=Na((n,e)=>{const t=st("AppShellSection",Hfe,n),{classNames:i,className:r,style:s,styles:o,vars:a,grow:l,mod:c,...u}=t,h=og();return k.jsx(pt,{ref:e,mod:[{grow:l},c],...h.getStyles("section",{className:r,style:s,classNames:i,styles:o}),...u})});I0.classes=th;I0.displayName="@mantine/core/AppShellSection";function Wfe({transitionDuration:n,disabled:e}){const[t,i]=R.useState(!0),r=R.useRef(),s=R.useRef();return DV("resize",()=>{i(!0),clearTimeout(r.current),r.current=window.setTimeout(()=>R.startTransition(()=>{i(!1)}),200)}),Ym(()=>{i(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>R.startTransition(()=>{i(!1)}),n||0)},[e,n]),t}const Vfe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:jo("app")},Gfe=(n,{transitionDuration:e,transitionTimingFunction:t})=>({root:{"--app-shell-transition-duration":`${e}ms`,"--app-shell-transition-timing-function":t}}),Oa=Pt((n,e)=>{const t=st("AppShell",Vfe,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,navbar:c,withBorder:u,padding:h,transitionDuration:d,transitionTimingFunction:f,header:p,zIndex:x,layout:v,disabled:y,aside:w,footer:_,offsetScrollbars:b,mod:E,...M}=t,C=on({name:"AppShell",classes:th,props:t,className:r,style:s,classNames:i,styles:o,unstyled:a,vars:l,varsResolver:Gfe}),P=Wfe({disabled:y,transitionDuration:d});return k.jsxs(Cfe,{value:{getStyles:C,withBorder:u,zIndex:x,disabled:y,offsetScrollbars:b},children:[k.jsx(Bfe,{navbar:c,header:p,aside:w,footer:_,padding:h}),k.jsx(pt,{ref:e,...C("root"),mod:[{resizing:P,layout:v,disabled:y},E],...M})]})});Oa.classes=th;Oa.displayName="@mantine/core/AppShell";Oa.Navbar=sk;Oa.Header=ik;Oa.Main=rk;Oa.Aside=tk;Oa.Footer=nk;Oa.Section=I0;function d$(n){return typeof n=="string"?{value:n,label:n}:"value"in n&&!("label"in n)?{value:n.value,label:n.value,disabled:n.disabled}:typeof n=="number"?{value:n.toString(),label:n.toString()}:"group"in n?{group:n.group,items:n.items.map(e=>d$(e))}:n}function jfe(n){return n?n.map(e=>d$(e)):[]}function f$(n){return n.reduce((e,t)=>"group"in t?{...e,...f$(t.items)}:(e[t.value]=t,e),{})}var Cs={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const $fe={error:null},Xfe=(n,{size:e})=>({chevron:{"--combobox-chevron-size":qi(e,"combobox-chevron-size")}}),ok=Pt((n,e)=>{const t=st("ComboboxChevron",$fe,n),{size:i,error:r,style:s,className:o,classNames:a,styles:l,unstyled:c,vars:u,mod:h,...d}=t,f=on({name:"ComboboxChevron",classes:Cs,props:t,style:s,className:o,classNames:a,styles:l,unstyled:c,vars:u,varsResolver:Xfe,rootSelector:"chevron"});return k.jsx(pt,{component:"svg",...d,...f("chevron"),size:i,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:r},h],ref:e,children:k.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});ok.classes=Cs;ok.displayName="@mantine/core/ComboboxChevron";const[Yfe,Yo]=Cl("Combobox component was not found in tree"),p$=R.forwardRef(({size:n,onMouseDown:e,onClick:t,onClear:i,...r},s)=>k.jsx(rg,{ref:s,size:n||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...r,onMouseDown:o=>{o.preventDefault(),e==null||e(o)},onClick:o=>{i(),t==null||t(o)}}));p$.displayName="@mantine/core/ComboboxClearButton";const qfe={},ak=Pt((n,e)=>{const{classNames:t,styles:i,className:r,style:s,hidden:o,...a}=st("ComboboxDropdown",qfe,n),l=Yo();return k.jsx(ka.Dropdown,{...a,ref:e,role:"presentation","data-hidden":o||void 0,...l.getStyles("dropdown",{className:r,style:s,classNames:t,styles:i})})});ak.classes=Cs;ak.displayName="@mantine/core/ComboboxDropdown";const Zfe={refProp:"ref"},m$=Pt((n,e)=>{const{children:t,refProp:i}=st("ComboboxDropdownTarget",Zfe,n);if(Yo(),!Pc(t))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return k.jsx(ka.Target,{ref:e,refProp:i,children:t})});m$.displayName="@mantine/core/ComboboxDropdownTarget";const Kfe={},lk=Pt((n,e)=>{const{classNames:t,className:i,style:r,styles:s,vars:o,...a}=st("ComboboxEmpty",Kfe,n),l=Yo();return k.jsx(pt,{ref:e,...l.getStyles("empty",{className:i,classNames:t,styles:s,style:r}),...a})});lk.classes=Cs;lk.displayName="@mantine/core/ComboboxEmpty";function ck({onKeyDown:n,withKeyboardNavigation:e,withAriaAttributes:t,withExpandedAttribute:i,targetType:r,autoComplete:s}){const o=Yo(),[a,l]=R.useState(null),c=h=>{if(n==null||n(h),!o.readOnly&&e){if(h.nativeEvent.isComposing)return;if(h.nativeEvent.code==="ArrowDown"&&(h.preventDefault(),o.store.dropdownOpened?l(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()))),h.nativeEvent.code==="ArrowUp"&&(h.preventDefault(),o.store.dropdownOpened?l(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()))),h.nativeEvent.code==="Enter"||h.nativeEvent.code==="NumpadEnter"){if(h.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(h.preventDefault(),o.store.clickSelectedOption()):r==="button"&&(h.preventDefault(),o.store.openDropdown("keyboard"))}h.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),h.nativeEvent.code==="Space"&&r==="button"&&(h.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...t?{"aria-haspopup":"listbox","aria-expanded":i&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:c}}const Qfe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},g$=Pt((n,e)=>{const{children:t,refProp:i,withKeyboardNavigation:r,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...c}=st("ComboboxEventsTarget",Qfe,n);if(!Pc(t))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const u=Yo(),h=ck({targetType:a,withAriaAttributes:s,withKeyboardNavigation:r,withExpandedAttribute:o,onKeyDown:t.props.onKeyDown,autoComplete:l});return R.cloneElement(t,{...h,...c,[i]:mr(e,u.store.targetRef,t==null?void 0:t.ref)})});g$.displayName="@mantine/core/ComboboxEventsTarget";const Jfe={},uk=Pt((n,e)=>{const{classNames:t,className:i,style:r,styles:s,vars:o,...a}=st("ComboboxFooter",Jfe,n),l=Yo();return k.jsx(pt,{ref:e,...l.getStyles("footer",{className:i,classNames:t,style:r,styles:s}),...a,onMouseDown:c=>{c.preventDefault()}})});uk.classes=Cs;uk.displayName="@mantine/core/ComboboxFooter";const epe={},hk=Pt((n,e)=>{const{classNames:t,className:i,style:r,styles:s,vars:o,children:a,label:l,...c}=st("ComboboxGroup",epe,n),u=Yo();return k.jsxs(pt,{ref:e,...u.getStyles("group",{className:i,classNames:t,style:r,styles:s}),...c,children:[l&&k.jsx("div",{...u.getStyles("groupLabel",{classNames:t,styles:s}),children:l}),a]})});hk.classes=Cs;hk.displayName="@mantine/core/ComboboxGroup";const tpe={},dk=Pt((n,e)=>{const{classNames:t,className:i,style:r,styles:s,vars:o,...a}=st("ComboboxHeader",tpe,n),l=Yo();return k.jsx(pt,{ref:e,...l.getStyles("header",{className:i,classNames:t,style:r,styles:s}),...a,onMouseDown:c=>{c.preventDefault()}})});dk.classes=Cs;dk.displayName="@mantine/core/ComboboxHeader";function y$({value:n,valuesDivider:e=",",...t}){return k.jsx("input",{type:"hidden",value:Array.isArray(n)?n.join(e):n||"",...t})}y$.displayName="@mantine/core/ComboboxHiddenInput";const npe={},fk=Pt((n,e)=>{const t=st("ComboboxOption",npe,n),{classNames:i,className:r,style:s,styles:o,vars:a,onClick:l,id:c,active:u,onMouseDown:h,onMouseOver:d,disabled:f,selected:p,mod:x,...v}=t,y=Yo(),w=R.useId(),_=c||w;return k.jsx(pt,{...y.getStyles("option",{className:r,classNames:i,styles:o,style:s}),...v,ref:e,id:_,mod:["combobox-option",{"combobox-active":u,"combobox-disabled":f,"combobox-selected":p},x],role:"option",onClick:b=>{var E;f?b.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,t.value,t),l==null||l(b))},onMouseDown:b=>{b.preventDefault(),h==null||h(b)},onMouseOver:b=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(b)}})});fk.classes=Cs;fk.displayName="@mantine/core/ComboboxOption";const ipe={},pk=Pt((n,e)=>{const t=st("ComboboxOptions",ipe,n),{classNames:i,className:r,style:s,styles:o,id:a,onMouseDown:l,labelledBy:c,...u}=t,h=Yo(),d=qm(a);return R.useEffect(()=>{h.store.setListId(d)},[d]),k.jsx(pt,{ref:e,...h.getStyles("options",{className:r,style:s,classNames:i,styles:o}),...u,id:d,role:"listbox","aria-labelledby":c,onMouseDown:f=>{f.preventDefault(),l==null||l(f)}})});pk.classes=Cs;pk.displayName="@mantine/core/ComboboxOptions";const rpe={withAriaAttributes:!0,withKeyboardNavigation:!0},mk=Pt((n,e)=>{const t=st("ComboboxSearch",rpe,n),{classNames:i,styles:r,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:l,withKeyboardNavigation:c,size:u,...h}=t,d=Yo(),f=d.getStyles("search"),p=ck({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:c,withExpandedAttribute:!1,onKeyDown:l,autoComplete:"off"});return k.jsx(Ho,{ref:mr(e,d.store.searchRef),classNames:[{input:f.className},i],styles:[{input:f.style},r],size:u||d.size,...p,...h,__staticSelector:"Combobox"})});mk.classes=Cs;mk.displayName="@mantine/core/ComboboxSearch";const spe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},v$=Pt((n,e)=>{const{children:t,refProp:i,withKeyboardNavigation:r,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...c}=st("ComboboxTarget",spe,n);if(!Pc(t))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const u=Yo(),h=ck({targetType:a,withAriaAttributes:s,withKeyboardNavigation:r,withExpandedAttribute:o,onKeyDown:t.props.onKeyDown,autoComplete:l}),d=R.cloneElement(t,{...h,...c});return k.jsx(ka.Target,{ref:mr(e,u.store.targetRef),children:d})});v$.displayName="@mantine/core/ComboboxTarget";function ope(n,e,t){for(let i=n-1;i>=0;i-=1)if(!e[i].hasAttribute("data-combobox-disabled"))return i;if(t){for(let i=e.length-1;i>-1;i-=1)if(!e[i].hasAttribute("data-combobox-disabled"))return i}return n}function ape(n,e,t){for(let i=n+1;i<e.length;i+=1)if(!e[i].hasAttribute("data-combobox-disabled"))return i;if(t){for(let i=0;i<e.length;i+=1)if(!e[i].hasAttribute("data-combobox-disabled"))return i}return n}function lpe(n){for(let e=0;e<n.length;e+=1)if(!n[e].hasAttribute("data-combobox-disabled"))return e;return-1}function x$({defaultOpened:n,opened:e,onOpenedChange:t,onDropdownClose:i,onDropdownOpen:r,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,l]=Od({value:e,defaultValue:n,finalValue:!1,onChange:t}),c=R.useRef(null),u=R.useRef(-1),h=R.useRef(null),d=R.useRef(null),f=R.useRef(-1),p=R.useRef(-1),x=R.useRef(-1),v=R.useCallback((H="unknown")=>{a||(l(!0),r==null||r(H))},[l,r,a]),y=R.useCallback((H="unknown")=>{a&&(l(!1),i==null||i(H))},[l,i,a]),w=R.useCallback((H="unknown")=>{a?y(H):v(H)},[y,v,a]),_=R.useCallback(()=>{const H=document.querySelector(`#${c.current} [data-combobox-selected]`);H==null||H.removeAttribute("data-combobox-selected"),H==null||H.removeAttribute("aria-selected")},[]),b=R.useCallback(H=>{const Z=document.getElementById(c.current),O=Z==null?void 0:Z.querySelectorAll("[data-combobox-option]");if(!O)return null;const W=H>=O.length?0:H<0?O.length-1:H;return u.current=W,O!=null&&O[W]&&!O[W].hasAttribute("data-combobox-disabled")?(_(),O[W].setAttribute("data-combobox-selected","true"),O[W].setAttribute("aria-selected","true"),O[W].scrollIntoView({block:"nearest",behavior:o}),O[W].id):null},[o,_]),E=R.useCallback(()=>{const H=document.querySelector(`#${c.current} [data-combobox-active]`);if(H){const Z=document.querySelectorAll(`#${c.current} [data-combobox-option]`),O=Array.from(Z).findIndex(W=>W===H);return b(O)}return b(0)},[b]),M=R.useCallback(()=>b(ape(u.current,document.querySelectorAll(`#${c.current} [data-combobox-option]`),s)),[b,s]),C=R.useCallback(()=>b(ope(u.current,document.querySelectorAll(`#${c.current} [data-combobox-option]`),s)),[b,s]),P=R.useCallback(()=>b(lpe(document.querySelectorAll(`#${c.current} [data-combobox-option]`))),[b]),T=R.useCallback((H="selected",Z)=>{x.current=window.setTimeout(()=>{var D;const O=document.querySelectorAll(`#${c.current} [data-combobox-option]`),W=Array.from(O).findIndex(Y=>Y.hasAttribute(`data-combobox-${H}`));u.current=W,Z!=null&&Z.scrollIntoView&&((D=O[W])==null||D.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),I=R.useCallback(()=>{u.current=-1,_()},[_]),U=R.useCallback(()=>{const H=document.querySelectorAll(`#${c.current} [data-combobox-option]`),Z=H==null?void 0:H[u.current];Z==null||Z.click()},[]),j=R.useCallback(H=>{c.current=H},[]),B=R.useCallback(()=>{f.current=window.setTimeout(()=>h.current.focus(),0)},[]),z=R.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),$=R.useCallback(()=>u.current,[]);return R.useEffect(()=>()=>{window.clearTimeout(f.current),window.clearTimeout(p.current),window.clearTimeout(x.current)},[]),{dropdownOpened:a,openDropdown:v,closeDropdown:y,toggleDropdown:w,selectedOptionIndex:u.current,getSelectedOptionIndex:$,selectOption:b,selectFirstOption:P,selectActiveOption:E,selectNextOption:M,selectPreviousOption:C,resetSelectedOption:I,updateSelectedOptionIndex:T,listId:c.current,setListId:j,clickSelectedOption:U,searchRef:h,focusSearchInput:B,targetRef:d,focusTarget:z}}const cpe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},upe=(n,{size:e,dropdownPadding:t})=>({options:{"--combobox-option-fz":Do(e),"--combobox-option-padding":qi(e,"combobox-option-padding")},dropdown:{"--combobox-padding":t===void 0?void 0:Pe(t),"--combobox-option-fz":Do(e),"--combobox-option-padding":qi(e,"combobox-option-padding")}});function Dn(n){const e=st("Combobox",cpe,n),{classNames:t,styles:i,unstyled:r,children:s,store:o,vars:a,onOptionSubmit:l,onClose:c,size:u,dropdownPadding:h,resetSelectionOnOptionHover:d,__staticSelector:f,readOnly:p,...x}=e,v=x$(),y=o||v,w=on({name:f||"Combobox",classes:Cs,props:e,classNames:t,styles:i,unstyled:r,vars:a,varsResolver:upe}),_=()=>{c==null||c(),y.closeDropdown()};return k.jsx(Yfe,{value:{getStyles:w,store:y,onOptionSubmit:l,size:u,resetSelectionOnOptionHover:d,readOnly:p},children:k.jsx(ka,{opened:y.dropdownOpened,...x,onClose:_,withRoles:!1,unstyled:r,children:s})})}const hpe=n=>n;Dn.extend=hpe;Dn.classes=Cs;Dn.displayName="@mantine/core/Combobox";Dn.Target=v$;Dn.Dropdown=ak;Dn.Options=pk;Dn.Option=fk;Dn.Search=mk;Dn.Empty=lk;Dn.Chevron=ok;Dn.Footer=uk;Dn.Header=dk;Dn.EventsTarget=g$;Dn.DropdownTarget=m$;Dn.Group=hk;Dn.ClearButton=p$;Dn.HiddenInput=y$;function dpe({size:n,style:e,...t}){const i=n!==void 0?{width:Pe(n),height:Pe(n),...e}:e;return k.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i,"aria-hidden":!0,...t,children:k.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Xv(n){return"group"in n}function _$({options:n,search:e,limit:t}){const i=e.trim().toLowerCase(),r=[];for(let s=0;s<n.length;s+=1){const o=n[s];if(r.length===t)return r;Xv(o)&&r.push({group:o.group,items:_$({options:o.items,search:e,limit:t-r.length})}),Xv(o)||o.label.toLowerCase().includes(i)&&r.push(o)}return r}function fpe(n){if(n.length===0)return!0;for(const e of n)if(!("group"in e)||e.items.length>0)return!1;return!0}function w$(n,e=new Set){if(Array.isArray(n))for(const t of n)if(Xv(t))w$(t.items,e);else{if(typeof t.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof t.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof t.value}`);if(e.has(t.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${t.value}" was provided more than once`);e.add(t.value)}}function ppe(n,e){return Array.isArray(n)?n.includes(e):n===e}function b$({data:n,withCheckIcon:e,value:t,checkIconPosition:i,unstyled:r,renderOption:s}){if(!Xv(n)){const a=ppe(t,n.value),l=e&&a&&k.jsx(dpe,{className:Cs.optionsDropdownCheckIcon}),c=k.jsxs(k.Fragment,{children:[i==="left"&&l,k.jsx("span",{children:n.label}),i==="right"&&l]});return k.jsx(Dn.Option,{value:n.value,disabled:n.disabled,className:Zi({[Cs.optionsDropdownOption]:!r}),"data-reverse":i==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:n,checked:a}):c})}const o=n.items.map(a=>k.jsx(b$,{data:a,value:t,unstyled:r,withCheckIcon:e,checkIconPosition:i,renderOption:s},a.value));return k.jsx(Dn.Group,{label:n.group,children:o})}function mpe({data:n,hidden:e,hiddenWhenEmpty:t,filter:i,search:r,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:l=!0,withCheckIcon:c=!1,value:u,checkIconPosition:h,nothingFoundMessage:d,unstyled:f,labelId:p,renderOption:x,scrollAreaProps:v,"aria-label":y}){w$(n);const _=typeof r=="string"?(i||_$)({options:n,search:l?r:"",limit:s??1/0}):n,b=fpe(_),E=_.map(M=>k.jsx(b$,{data:M,withCheckIcon:c,value:u,checkIconPosition:h,unstyled:f,renderOption:x},Xv(M)?M.group:M.value));return k.jsx(Dn.Dropdown,{hidden:e||t&&b,children:k.jsxs(Dn.Options,{labelledBy:p,"aria-label":y,children:[a?k.jsx(T0.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...v,children:E}):E,b&&d&&k.jsx(Dn.Empty,{children:d})]})})}var yE={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const d4={orientation:"horizontal"},gpe=(n,{borderWidth:e})=>({group:{"--button-border-width":Pe(e)}}),gk=Pt((n,e)=>{const t=st("ButtonGroup",d4,n),{className:i,style:r,classNames:s,styles:o,unstyled:a,orientation:l,vars:c,borderWidth:u,variant:h,mod:d,...f}=st("ButtonGroup",d4,n),p=on({name:"ButtonGroup",props:t,classes:yE,className:i,style:r,classNames:s,styles:o,unstyled:a,vars:c,varsResolver:gpe,rootSelector:"group"});return k.jsx(pt,{...p("group"),ref:e,variant:h,mod:[{"data-orientation":l},d],role:"group",...f})});gk.classes=yE;gk.displayName="@mantine/core/ButtonGroup";const ype={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Pe(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},vpe={},xpe=(n,{radius:e,color:t,gradient:i,variant:r,size:s,justify:o,autoContrast:a})=>{const l=n.variantColorResolver({color:t||n.primaryColor,theme:n,gradient:i,variant:r||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":qi(s,"button-height"),"--button-padding-x":qi(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?Do(s.replace("compact-","")):Do(s),"--button-radius":e===void 0?void 0:so(e),"--button-bg":t||r?l.background:void 0,"--button-hover":t||r?l.hover:void 0,"--button-color":l.color,"--button-bd":t||r?l.border:void 0,"--button-hover-color":t||r?l.hoverColor:void 0}}},L0=Na((n,e)=>{const t=st("Button",vpe,n),{style:i,vars:r,className:s,color:o,disabled:a,children:l,leftSection:c,rightSection:u,fullWidth:h,variant:d,radius:f,loading:p,loaderProps:x,gradient:v,classNames:y,styles:w,unstyled:_,"data-disabled":b,autoContrast:E,mod:M,...C}=t,P=on({name:"Button",props:t,classes:yE,className:s,style:i,classNames:y,styles:w,unstyled:_,vars:r,varsResolver:xpe}),T=!!c,I=!!u;return k.jsxs(Ca,{ref:e,...P("root",{active:!a&&!p&&!b}),unstyled:_,variant:d,disabled:a||p,mod:[{disabled:a||b,loading:p,block:h,"with-left-section":T,"with-right-section":I},M],...C,children:[k.jsx(Rl,{mounted:!!p,transition:ype,duration:150,children:U=>k.jsx(pt,{component:"span",...P("loader",{style:U}),"aria-hidden":!0,children:k.jsx(Jd,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...x})})}),k.jsxs("span",{...P("inner"),children:[c&&k.jsx(pt,{component:"span",...P("section"),mod:{position:"left"},children:c}),k.jsx(pt,{component:"span",mod:{loading:p},...P("label"),children:l}),u&&k.jsx(pt,{component:"span",...P("section"),mod:{position:"right"},children:u})]})]})});L0.classes=yE;L0.displayName="@mantine/core/Button";L0.Group=gk;var S$={root:"m_e2125a27",closeButton:"m_5abab665"};const _pe={shadow:"md",p:"md",withBorder:!1,transitionProps:{transition:"pop-top-right",duration:200},position:{bottom:30,right:30}},wpe=(n,{size:e})=>({root:{"--dialog-size":qi(e,"dialog-size")}}),yk=Pt((n,e)=>{const t=st("Dialog",_pe,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,zIndex:c,position:u,keepMounted:h,opened:d,transitionProps:f,withCloseButton:p,withinPortal:x,children:v,onClose:y,portalProps:w,..._}=t,b=on({name:"Dialog",classes:S$,props:t,className:r,style:s,classNames:i,styles:o,unstyled:a,vars:l,varsResolver:wpe});return k.jsx(ek,{zIndex:c,position:u,ref:e,withinPortal:x,portalProps:w,unstyled:a,children:k.jsx(Rl,{keepMounted:h,mounted:d,...f,children:E=>k.jsxs(aE,{unstyled:a,...b("root",{style:E}),..._,children:[p&&k.jsx(rg,{onClick:y,unstyled:a,...b("closeButton")}),v]})})})});yk.classes=S$;yk.displayName="@mantine/core/Dialog";function bpe({open:n,close:e,openDelay:t,closeDelay:i}){const r=R.useRef(-1),s=R.useRef(-1),o=()=>{window.clearTimeout(r.current),window.clearTimeout(s.current)},a=()=>{o(),t===0||t===void 0?n():r.current=window.setTimeout(n,t)},l=()=>{o(),i===0||i===void 0?e():s.current=window.setTimeout(e,i)};return R.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:l}}var E$={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const f4={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:jo("overlay")},Spe=(n,{zIndex:e})=>({root:{"--lo-z-index":e==null?void 0:e.toString()}}),vk=Pt((n,e)=>{const t=st("LoadingOverlay",f4,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,transitionProps:c,loaderProps:u,overlayProps:h,visible:d,zIndex:f,...p}=t,x=oo(),v=on({name:"LoadingOverlay",classes:E$,props:t,className:r,style:s,classNames:i,styles:o,unstyled:a,vars:l,varsResolver:Spe}),y={...f4.overlayProps,...h};return k.jsx(Rl,{transition:"fade",...c,mounted:!!d,children:w=>k.jsxs(pt,{...v("root",{style:w}),ref:e,...p,children:[k.jsx(Jd,{...v("loader"),unstyled:a,...u}),k.jsx($v,{...y,...v("overlay"),darkHidden:!0,unstyled:a,color:(h==null?void 0:h.color)||x.white}),k.jsx($v,{...y,...v("overlay"),lightHidden:!0,unstyled:a,color:(h==null?void 0:h.color)||x.colors.dark[5]})]})})});vk.classes=E$;vk.displayName="@mantine/core/LoadingOverlay";const[Epe,N0]=Cl("Menu component was not found in the tree");var ag={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const Mpe={},xk=Pt((n,e)=>{const{classNames:t,className:i,style:r,styles:s,vars:o,...a}=st("MenuDivider",Mpe,n),l=N0();return k.jsx(pt,{ref:e,...l.getStyles("divider",{className:i,style:r,styles:s,classNames:t}),...a})});xk.classes=ag;xk.displayName="@mantine/core/MenuDivider";const Tpe={},_k=Pt((n,e)=>{const{classNames:t,className:i,style:r,styles:s,vars:o,onMouseEnter:a,onMouseLeave:l,onKeyDown:c,children:u,...h}=st("MenuDropdown",Tpe,n),d=R.useRef(null),f=N0(),p=dl(c,y=>{var w,_;(y.key==="ArrowUp"||y.key==="ArrowDown")&&(y.preventDefault(),(_=(w=d.current)==null?void 0:w.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||_.focus())}),x=dl(a,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.openDropdown()),v=dl(l,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.closeDropdown());return k.jsxs(ka.Dropdown,{...h,onMouseEnter:x,onMouseLeave:v,role:"menu","aria-orientation":"vertical",ref:mr(e,d),...f.getStyles("dropdown",{className:i,style:r,styles:s,classNames:t,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:p,children:[k.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),u]})});_k.classes=ag;_k.displayName="@mantine/core/MenuDropdown";const Ape={},wk=Na((n,e)=>{const{classNames:t,className:i,style:r,styles:s,vars:o,color:a,closeMenuOnClick:l,leftSection:c,rightSection:u,children:h,disabled:d,...f}=st("MenuItem",Ape,n),p=N0(),x=oo(),{dir:v}=eg(),y=R.useRef(),w=p.getItemIndex(y.current),_=f,b=dl(_.onMouseLeave,()=>p.setHovered(-1)),E=dl(_.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),M=dl(_.onClick,()=>{typeof l=="boolean"?l&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),C=dl(_.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),P=a?x.variantColorResolver({color:a,theme:x,variant:"light"}):void 0,T=a?Jm({color:a,theme:x}):null;return k.jsxs(Ca,{...f,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:C,...p.getStyles("item",{className:i,style:r,styles:s,classNames:t}),ref:mr(y,e),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===w?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:E,onMouseLeave:b,onClick:M,onKeyDown:Nce({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:v,orientation:"vertical",onKeyDown:_.onKeyDown}),__vars:{"--menu-item-color":T!=null&&T.isThemeColor&&(T==null?void 0:T.shade)===void 0?`var(--mantine-color-${T.color}-6)`:P==null?void 0:P.color,"--menu-item-hover":P==null?void 0:P.hover},children:[c&&k.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:t}),"data-position":"left",children:c}),h&&k.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:t}),children:h}),u&&k.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:t}),"data-position":"right",children:u})]})});wk.classes=ag;wk.displayName="@mantine/core/MenuItem";const Cpe={},bk=Pt((n,e)=>{const{classNames:t,className:i,style:r,styles:s,vars:o,...a}=st("MenuLabel",Cpe,n),l=N0();return k.jsx(pt,{ref:e,...l.getStyles("label",{className:i,style:r,styles:s,classNames:t}),...a})});bk.classes=ag;bk.displayName="@mantine/core/MenuLabel";const Ppe={refProp:"ref"},M$=R.forwardRef((n,e)=>{const{children:t,refProp:i,...r}=st("MenuTarget",Ppe,n);if(!Pc(t))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=N0(),o=dl(t.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=dl(t.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),l=dl(t.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return k.jsx(ka.Target,{refProp:i,popupType:"menu",ref:e,...r,children:R.cloneElement(t,{onClick:o,onMouseEnter:a,onMouseLeave:l,"data-expanded":s.opened?!0:void 0})})});M$.displayName="@mantine/core/MenuTarget";const Rpe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Hn(n){const e=st("Menu",Rpe,n),{children:t,onOpen:i,onClose:r,opened:s,defaultOpened:o,trapFocus:a,onChange:l,closeOnItemClick:c,loop:u,closeOnEscape:h,trigger:d,openDelay:f,closeDelay:p,classNames:x,styles:v,unstyled:y,variant:w,vars:_,menuItemTabIndex:b,keepMounted:E,...M}=e,C=on({name:"Menu",classes:ag,props:e,classNames:x,styles:v,unstyled:y}),[P,{setHovered:T,resetHovered:I}]=Bce(),[U,j]=Od({value:s,defaultValue:o,finalValue:!1,onChange:l}),[B,z]=R.useState(!1),$=()=>{j(!1),z(!1),U&&(r==null||r())},H=()=>{j(!0),!U&&(i==null||i())},Z=()=>{U?$():H()},{openDropdown:O,closeDropdown:W}=bpe({open:H,close:$,closeDelay:p,openDelay:f}),D=re=>Uce("[data-menu-item]","[data-menu-dropdown]",re),{resolvedClassNames:Y,resolvedStyles:Q}=rE({classNames:x,styles:v,props:e});return yc(()=>{I()},[U]),k.jsx(Epe,{value:{getStyles:C,opened:U,toggleDropdown:Z,getItemIndex:D,hovered:P,setHovered:T,openedViaClick:B,setOpenedViaClick:z,closeOnItemClick:c,closeDropdown:d==="click"?$:W,openDropdown:d==="click"?H:O,closeDropdownImmediately:$,loop:u,trigger:d,unstyled:y,menuItemTabIndex:b},children:k.jsx(ka,{...M,opened:U,onChange:Z,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:h,__staticSelector:"Menu",classNames:Y,styles:Q,unstyled:y,variant:w,keepMounted:E,children:t})})}Hn.extend=n=>n;Hn.classes=ag;Hn.displayName="@mantine/core/Menu";Hn.Item=wk;Hn.Label=bk;Hn.Dropdown=_k;Hn.Target=M$;Hn.Divider=xk;const[Ipe,lg]=Cl("Modal component was not found in tree");var Ic={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const Lpe={},vE=Pt((n,e)=>{const t=st("ModalBody",Lpe,n),{classNames:i,className:r,style:s,styles:o,vars:a,...l}=t,c=lg();return k.jsx(r$,{ref:e,...c.getStyles("body",{classNames:i,style:s,styles:o,className:r}),...l})});vE.classes=Ic;vE.displayName="@mantine/core/ModalBody";const Npe={},xE=Pt((n,e)=>{const t=st("ModalCloseButton",Npe,n),{classNames:i,className:r,style:s,styles:o,vars:a,...l}=t,c=lg();return k.jsx(s$,{ref:e,...c.getStyles("close",{classNames:i,style:s,styles:o,className:r}),...l})});xE.classes=Ic;xE.displayName="@mantine/core/ModalCloseButton";const kpe={},_E=Pt((n,e)=>{const t=st("ModalContent",kpe,n),{classNames:i,className:r,style:s,styles:o,vars:a,children:l,...c}=t,u=lg(),h=u.scrollAreaComponent||ufe;return k.jsx(o$,{...u.getStyles("content",{className:r,style:s,styles:o,classNames:i}),innerProps:u.getStyles("inner",{className:r,style:s,styles:o,classNames:i}),"data-full-screen":u.fullScreen||void 0,"data-modal-content":!0,ref:e,...c,children:k.jsx(h,{style:{maxHeight:u.fullScreen?"100dvh":`calc(100dvh - (${Pe(u.yOffset)} * 2))`},children:l})})});_E.classes=Ic;_E.displayName="@mantine/core/ModalContent";const Ope={},wE=Pt((n,e)=>{const t=st("ModalHeader",Ope,n),{classNames:i,className:r,style:s,styles:o,vars:a,...l}=t,c=lg();return k.jsx(a$,{ref:e,...c.getStyles("header",{classNames:i,style:s,styles:o,className:r}),...l})});wE.classes=Ic;wE.displayName="@mantine/core/ModalHeader";const Dpe={},bE=Pt((n,e)=>{const t=st("ModalOverlay",Dpe,n),{classNames:i,className:r,style:s,styles:o,vars:a,...l}=t,c=lg();return k.jsx(l$,{ref:e,...c.getStyles("overlay",{classNames:i,style:s,styles:o,className:r}),...l})});bE.classes=Ic;bE.displayName="@mantine/core/ModalOverlay";const Fpe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:jo("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},Upe=(n,{radius:e,size:t,yOffset:i,xOffset:r})=>({root:{"--modal-radius":e===void 0?void 0:so(e),"--modal-size":qi(t,"modal-size"),"--modal-y-offset":Pe(i),"--modal-x-offset":Pe(r)}}),SE=Pt((n,e)=>{const t=st("ModalRoot",Fpe,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,yOffset:c,scrollAreaComponent:u,radius:h,fullScreen:d,centered:f,xOffset:p,__staticSelector:x,...v}=t,y=on({name:x,classes:Ic,props:t,className:r,style:s,classNames:i,styles:o,unstyled:a,vars:l,varsResolver:Upe});return k.jsx(Ipe,{value:{yOffset:c,scrollAreaComponent:u,getStyles:y,fullScreen:d},children:k.jsx(i$,{ref:e,...y("root"),"data-full-screen":d||void 0,"data-centered":f||void 0,unstyled:a,...v})})});SE.classes=Ic;SE.displayName="@mantine/core/ModalRoot";const Bpe={},EE=Pt((n,e)=>{const t=st("ModalTitle",Bpe,n),{classNames:i,className:r,style:s,styles:o,vars:a,...l}=t,c=lg();return k.jsx(c$,{ref:e,...c.getStyles("title",{classNames:i,style:s,styles:o,className:r}),...l})});EE.classes=Ic;EE.displayName="@mantine/core/ModalTitle";const zpe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:jo("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Il=Pt((n,e)=>{const{title:t,withOverlay:i,overlayProps:r,withCloseButton:s,closeButtonProps:o,children:a,radius:l,...c}=st("Modal",zpe,n),u=!!t||s;return k.jsxs(SE,{ref:e,radius:l,...c,children:[i&&k.jsx(bE,{...r}),k.jsxs(_E,{radius:l,children:[u&&k.jsxs(wE,{children:[t&&k.jsx(EE,{children:t}),s&&k.jsx(xE,{...o})]}),k.jsx(vE,{children:a})]})]})});Il.classes=Ic;Il.displayName="@mantine/core/Modal";Il.Root=SE;Il.Overlay=bE;Il.Content=_E;Il.Body=vE;Il.Header=wE;Il.Title=EE;Il.CloseButton=xE;var T$={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const Hpe={withCloseButton:!0},Wpe=(n,{radius:e,color:t})=>({root:{"--notification-radius":e===void 0?void 0:so(e),"--notification-color":t?zu(t,n):void 0}}),Sk=Pt((n,e)=>{const t=st("Notification",Hpe,n),{className:i,color:r,radius:s,loading:o,withCloseButton:a,withBorder:l,title:c,icon:u,children:h,onClose:d,closeButtonProps:f,classNames:p,style:x,styles:v,unstyled:y,variant:w,vars:_,mod:b,...E}=t,M=on({name:"Notification",classes:T$,props:t,className:i,style:x,classNames:p,styles:v,unstyled:y,vars:_,varsResolver:Wpe});return k.jsxs(pt,{...M("root"),mod:[{"data-with-icon":!!u||o,"data-with-border":l},b],ref:e,variant:w,...E,role:"alert",children:[u&&!o&&k.jsx("div",{...M("icon"),children:u}),o&&k.jsx(Jd,{size:28,color:r,...M("loader")}),k.jsxs("div",{...M("body"),children:[c&&k.jsx("div",{...M("title"),children:c}),k.jsx(pt,{...M("description"),mod:{"data-with-title":!!c},children:h})]}),a&&k.jsx(rg,{iconSize:16,color:"gray",...f,unstyled:y,onClick:d,...M("closeButton")})]})});Sk.classes=T$;Sk.displayName="@mantine/core/Notification";function A$(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}var Yv;(function(n){n.event="event",n.props="prop"})(Yv||(Yv={}));function pu(){}function Vpe(n){var e,t=void 0;return function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];return e&&i.length===e.length&&i.every(function(s,o){return s===e[o]})||(e=i,t=n.apply(void 0,i)),t}}function qv(n){return!!(n||"").match(/\d/)}function lm(n){return n==null}function Gpe(n){return typeof n=="number"&&isNaN(n)}function C$(n){return lm(n)||Gpe(n)||typeof n=="number"&&!isFinite(n)}function P$(n){return n.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function jpe(n){switch(n){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function $pe(n,e,t){var i=jpe(t),r=n.search(/[1-9]/);return r=r===-1?n.length:r,n.substring(0,r)+n.substring(r,n.length).replace(i,"$1"+e)}function Xpe(n){var e=R.useRef(n);e.current=n;var t=R.useRef(function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];return e.current.apply(e,i)});return t.current}function Ek(n,e){e===void 0&&(e=!0);var t=n[0]==="-",i=t&&e;n=n.replace("-","");var r=n.split("."),s=r[0],o=r[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:t,addNegation:i}}function Ype(n){if(!n)return n;var e=n[0]==="-";e&&(n=n.substring(1,n.length));var t=n.split("."),i=t[0].replace(/^0+/,"")||"0",r=t[1]||"";return(e?"-":"")+i+(r?"."+r:"")}function R$(n,e,t){for(var i="",r=t?"0":"",s=0;s<=e-1;s++)i+=n[s]||r;return i}function p4(n,e){return Array(e+1).join(n)}function I$(n){var e=n+"",t=e[0]==="-"?"-":"";t&&(e=e.substring(1));var i=e.split(/[eE]/g),r=i[0],s=i[1];if(s=Number(s),!s)return t+r;r=r.replace(".","");var o=1+s,a=r.length;return o<0?r="0."+p4("0",Math.abs(o))+r:o>=a?r=r+p4("0",o-a):r=(r.substring(0,o)||"0")+"."+r.substring(o),t+r}function m4(n,e,t){if(["","-"].indexOf(n)!==-1)return n;var i=(n.indexOf(".")!==-1||t)&&e,r=Ek(n),s=r.beforeDecimal,o=r.afterDecimal,a=r.hasNegation,l=parseFloat("0."+(o||"0")),c=o.length<=e?"0."+o:l.toFixed(e),u=c.split("."),h=s;s&&Number(u[0])&&(h=s.split("").reverse().reduce(function(x,v,y){return x.length>y?(Number(x[0])+Number(v)).toString()+x.substring(1,x.length):v+x},u[0]));var d=R$(u[1]||"",e,t),f=a?"-":"",p=i?".":"";return""+f+h+p+d}function ed(n,e){if(n.value=n.value,n!==null){if(n.createTextRange){var t=n.createTextRange();return t.move("character",e),t.select(),!0}return n.selectionStart||n.selectionStart===0?(n.focus(),n.setSelectionRange(e,e),!0):(n.focus(),!1)}}var L$=Vpe(function(n,e){for(var t=0,i=0,r=n.length,s=e.length;n[t]===e[t]&&t<r;)t++;for(;n[r-1-i]===e[s-1-i]&&s-i>t&&r-i>t;)i++;return{from:{start:t,end:r-i},to:{start:t,end:s-i}}}),qpe=function(n,e){var t=Math.min(n.selectionStart,e);return{from:{start:t,end:n.selectionEnd},to:{start:t,end:e}}};function Zpe(n,e,t){return Math.min(Math.max(n,e),t)}function nC(n){return Math.max(n.selectionStart,n.selectionEnd)}function Kpe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Qpe(n){return{from:{start:0,end:0},to:{start:0,end:n.length},lastValue:""}}function Jpe(n){var e=n.currentValue,t=n.formattedValue,i=n.currentValueIndex,r=n.formattedValueIndex;return e[i]===t[r]}function eme(n,e,t,i,r,s,o){o===void 0&&(o=Jpe);var a=r.findIndex(function(b){return b}),l=n.slice(0,a);!e&&!t.startsWith(l)&&(e=l,t=l+t,i=i+l.length);for(var c=t.length,u=n.length,h={},d=new Array(c),f=0;f<c;f++){d[f]=-1;for(var p=0,x=u;p<x;p++){var v=o({currentValue:t,lastValue:e,formattedValue:n,currentValueIndex:f,formattedValueIndex:p});if(v&&h[p]!==!0){d[f]=p,h[p]=!0;break}}}for(var y=i;y<c&&(d[y]===-1||!s(t[y]));)y++;var w=y===c||d[y]===-1?u:d[y];for(y=i-1;y>0&&d[y]===-1;)y--;var _=y===-1||d[y]===-1?0:d[y]+1;return _>w?w:i-_<w-i?_:w}function g4(n,e,t,i){var r=n.length;if(e=Zpe(e,0,r),i==="left"){for(;e>=0&&!t[e];)e--;e===-1&&(e=t.indexOf(!0))}else{for(;e<=r&&!t[e];)e++;e>r&&(e=t.lastIndexOf(!0))}return e===-1&&(e=r),e}function tme(n){for(var e=Array.from({length:n.length+1}).map(function(){return!0}),t=0,i=e.length;t<i;t++)e[t]=!!(qv(n[t])||qv(n[t-1]));return e}function N$(n,e,t,i,r,s){s===void 0&&(s=pu);var o=Xpe(function(p,x){var v,y;return C$(p)?(y="",v=""):typeof p=="number"||x?(y=typeof p=="number"?I$(p):p,v=i(y)):(y=r(p,void 0),v=i(y)),{formattedValue:v,numAsString:y}}),a=R.useState(function(){return o(lm(n)?e:n,t)}),l=a[0],c=a[1],u=function(p,x){p.formattedValue!==l.formattedValue&&c({formattedValue:p.formattedValue,numAsString:p.value}),s(p,x)},h=n,d=t;lm(n)&&(h=l.numAsString,d=!0);var f=o(h,d);return R.useMemo(function(){c(f)},[f.formattedValue]),[l,u]}function nme(n){return n.replace(/[^0-9]/g,"")}function ime(n){return n}function rme(n){var e=n.type;e===void 0&&(e="text");var t=n.displayType;t===void 0&&(t="input");var i=n.customInput,r=n.renderText,s=n.getInputRef,o=n.format;o===void 0&&(o=ime);var a=n.removeFormatting;a===void 0&&(a=nme);var l=n.defaultValue,c=n.valueIsNumericString,u=n.onValueChange,h=n.isAllowed,d=n.onChange;d===void 0&&(d=pu);var f=n.onKeyDown;f===void 0&&(f=pu);var p=n.onMouseUp;p===void 0&&(p=pu);var x=n.onFocus;x===void 0&&(x=pu);var v=n.onBlur;v===void 0&&(v=pu);var y=n.value,w=n.getCaretBoundary;w===void 0&&(w=tme);var _=n.isValidInputCharacter;_===void 0&&(_=qv);var b=n.isCharacterSame,E=A$(n,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),M=N$(y,l,!!c,o,a,u),C=M[0],P=C.formattedValue,T=C.numAsString,I=M[1],U=R.useRef(),j=R.useRef({formattedValue:P,numAsString:T}),B=function(me,ye){j.current={formattedValue:me.formattedValue,numAsString:me.value},I(me,ye)},z=R.useState(!1),$=z[0],H=z[1],Z=R.useRef(null),O=R.useRef({setCaretTimeout:null,focusTimeout:null});R.useEffect(function(){return H(!0),function(){clearTimeout(O.current.setCaretTimeout),clearTimeout(O.current.focusTimeout)}},[]);var W=o,D=function(me,ye){var ke=parseFloat(ye);return{formattedValue:me,value:ye,floatValue:isNaN(ke)?void 0:ke}},Y=function(me,ye,ke){me.selectionStart===0&&me.selectionEnd===me.value.length||(ed(me,ye),O.current.setCaretTimeout=setTimeout(function(){me.value===ke&&me.selectionStart!==ye&&ed(me,ye)},0))},Q=function(me,ye,ke){return g4(me,ye,w(me),ke)},re=function(me,ye,ke){var Xe=w(ye),Le=eme(ye,P,me,ke,Xe,_,b);return Le=g4(ye,Le,Xe),Le},ce=function(me){var ye=me.formattedValue;ye===void 0&&(ye="");var ke=me.input,Xe=me.source,Le=me.event,Ye=me.numAsString,q;if(ke){var X=me.inputValue||ke.value,pe=nC(ke);ke.value=ye,q=re(X,ye,pe),q!==void 0&&Y(ke,q,ye)}ye!==P&&B(D(ye,Ye),{event:Le,source:Xe})};R.useEffect(function(){var me=j.current,ye=me.formattedValue,ke=me.numAsString;(P!==ye||T!==ke)&&B(D(P,T),{event:void 0,source:Yv.props})},[P,T]);var oe=Z.current?nC(Z.current):void 0,he=typeof window<"u"?R.useLayoutEffect:R.useEffect;he(function(){var me=Z.current;if(P!==j.current.formattedValue&&me){var ye=re(j.current.formattedValue,P,oe);me.value=P,Y(me,ye,P)}},[P]);var Re=function(me,ye,ke){var Xe=ye.target,Le=U.current?qpe(U.current,Xe.selectionEnd):L$(P,me),Ye=Object.assign(Object.assign({},Le),{lastValue:P}),q=a(me,Ye),X=W(q);if(q=a(X,void 0),h&&!h(D(X,q))){var pe=ye.target,_e=nC(pe),xe=re(me,P,_e);return pe.value=P,Y(pe,xe,P),!1}return ce({formattedValue:X,numAsString:q,inputValue:me,event:ye,source:ke,input:ye.target}),!0},Oe=function(me,ye){ye===void 0&&(ye=0);var ke=me.selectionStart,Xe=me.selectionEnd;U.current={selectionStart:ke,selectionEnd:Xe+ye}},Ve=function(me){var ye=me.target,ke=ye.value,Xe=Re(ke,me,Yv.event);Xe&&d(me),U.current=void 0},Je=function(me){var ye=me.target,ke=me.key,Xe=ye.selectionStart,Le=ye.selectionEnd,Ye=ye.value;Ye===void 0&&(Ye="");var q;ke==="ArrowLeft"||ke==="Backspace"?q=Math.max(Xe-1,0):ke==="ArrowRight"?q=Math.min(Xe+1,Ye.length):ke==="Delete"&&(q=Xe);var X=0;ke==="Delete"&&Xe===Le&&(X=1);var pe=ke==="ArrowLeft"||ke==="ArrowRight";if(q===void 0||Xe!==Le&&!pe){f(me),Oe(ye,X);return}var _e=q;if(pe){var xe=ke==="ArrowLeft"?"left":"right";_e=Q(Ye,q,xe),_e!==q&&me.preventDefault()}else ke==="Delete"&&!_(Ye[q])?_e=Q(Ye,q,"right"):ke==="Backspace"&&!_(Ye[q])&&(_e=Q(Ye,q,"left"));_e!==q&&Y(ye,_e,Ye),f(me),Oe(ye,X)},Fe=function(me){var ye=me.target,ke=function(){var Xe=ye.selectionStart,Le=ye.selectionEnd,Ye=ye.value;if(Ye===void 0&&(Ye=""),Xe===Le){var q=Q(Ye,Xe);q!==Xe&&Y(ye,q,Ye)}};ke(),requestAnimationFrame(function(){ke()}),p(me),Oe(ye)},J=function(me){me.persist&&me.persist();var ye=me.target,ke=me.currentTarget;Z.current=ye,O.current.focusTimeout=setTimeout(function(){var Xe=ye.selectionStart,Le=ye.selectionEnd,Ye=ye.value;Ye===void 0&&(Ye="");var q=Q(Ye,Xe);q!==Xe&&!(Xe===0&&Le===Ye.length)&&Y(ye,q,Ye),x(Object.assign(Object.assign({},me),{currentTarget:ke}))},0)},ge=function(me){Z.current=null,clearTimeout(O.current.focusTimeout),clearTimeout(O.current.setCaretTimeout),v(me)},de=$&&Kpe()?"numeric":void 0,Ae=Object.assign({inputMode:de},E,{type:e,value:P,onChange:Ve,onKeyDown:Je,onMouseUp:Fe,onFocus:J,onBlur:ge});if(t==="text")return r?ae.createElement(ae.Fragment,null,r(P,E)||null):ae.createElement("span",Object.assign({},E,{ref:s}),P);if(i){var Ie=i;return ae.createElement(Ie,Object.assign({},Ae,{ref:s}))}return ae.createElement("input",Object.assign({},Ae,{ref:s}))}function y4(n,e){var t=e.decimalScale,i=e.fixedDecimalScale,r=e.prefix;r===void 0&&(r="");var s=e.suffix;s===void 0&&(s="");var o=e.allowNegative,a=e.thousandsGroupStyle;if(a===void 0&&(a="thousand"),n===""||n==="-")return n;var l=ME(e),c=l.thousandSeparator,u=l.decimalSeparator,h=t!==0&&n.indexOf(".")!==-1||t&&i,d=Ek(n,o),f=d.beforeDecimal,p=d.afterDecimal,x=d.addNegation;return t!==void 0&&(p=R$(p,t,!!i)),c&&(f=$pe(f,c,a)),r&&(f=r+f),s&&(p=p+s),x&&(f="-"+f),n=f+(h&&u||"")+p,n}function ME(n){var e=n.decimalSeparator;e===void 0&&(e=".");var t=n.thousandSeparator,i=n.allowedDecimalSeparators;return t===!0&&(t=","),i||(i=[e,"."]),{decimalSeparator:e,thousandSeparator:t,allowedDecimalSeparators:i}}function sme(n,e){n===void 0&&(n="");var t=new RegExp("(-)"),i=new RegExp("(-)(.)*(-)"),r=t.test(n),s=i.test(n);return n=n.replace(/-/g,""),r&&!s&&e&&(n="-"+n),n}function ome(n,e){return new RegExp("(^-)|[0-9]|"+P$(n),"g")}function ame(n,e,t){return n===""?!0:!(e!=null&&e.match(/\d/))&&!(t!=null&&t.match(/\d/))&&typeof n=="string"&&!isNaN(Number(n))}function lme(n,e,t){var i;e===void 0&&(e=Qpe(n));var r=t.allowNegative,s=t.prefix;s===void 0&&(s="");var o=t.suffix;o===void 0&&(o="");var a=t.decimalScale,l=e.from,c=e.to,u=c.start,h=c.end,d=ME(t),f=d.allowedDecimalSeparators,p=d.decimalSeparator,x=n[h]===p;if(qv(n)&&(n===s||n===o)&&e.lastValue==="")return n;if(h-u===1&&f.indexOf(n[u])!==-1){var v=a===0?"":p;n=n.substring(0,u)+v+n.substring(u+1,n.length)}var y=function(Z,O,W){var D=!1,Y=!1;s.startsWith("-")?D=!1:Z.startsWith("--")?(D=!1,Y=!0):o.startsWith("-")&&Z.length===o.length?D=!1:Z[0]==="-"&&(D=!0);var Q=D?1:0;return Y&&(Q=2),Q&&(Z=Z.substring(Q),O-=Q,W-=Q),{value:Z,start:O,end:W,hasNegation:D}},w=y(n,u,h),_=w.hasNegation;i=w,n=i.value,u=i.start,h=i.end;var b=y(e.lastValue,l.start,l.end),E=b.start,M=b.end,C=b.value,P=n.substring(u,h);n.length&&C.length&&(E>C.length-o.length||M<s.length)&&!(P&&o.startsWith(P))&&(n=C);var T=0;n.startsWith(s)?T+=s.length:u<s.length&&(T=u),n=n.substring(T),h-=T;var I=n.length,U=n.length-o.length;n.endsWith(o)?I=U:(h>U||h>n.length-o.length)&&(I=h),n=n.substring(0,I),n=sme(_?"-"+n:n,r),n=(n.match(ome(p))||[]).join("");var j=n.indexOf(p);n=n.replace(new RegExp(P$(p),"g"),function(Z,O){return O===j?".":""});var B=Ek(n,r),z=B.beforeDecimal,$=B.afterDecimal,H=B.addNegation;return c.end-c.start<l.end-l.start&&z===""&&x&&!parseFloat($)&&(n=H?"-":""),n}function cme(n,e){var t=e.prefix;t===void 0&&(t="");var i=e.suffix;i===void 0&&(i="");var r=Array.from({length:n.length+1}).map(function(){return!0}),s=n[0]==="-";r.fill(!1,0,t.length+(s?1:0));var o=n.length;return r.fill(!1,o-i.length+1,o+1),r}function ume(n){var e=ME(n),t=e.thousandSeparator,i=e.decimalSeparator,r=n.prefix;r===void 0&&(r="");var s=n.allowNegative;if(s===void 0&&(s=!0),t===i)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+t+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+i+` (default value for decimalSeparator is .)
     `);return r.startsWith("-")&&s&&(s=!1),Object.assign(Object.assign({},n),{allowNegative:s})}function hme(n){n=ume(n),n.decimalSeparator,n.allowedDecimalSeparators,n.thousandsGroupStyle;var e=n.suffix,t=n.allowNegative,i=n.allowLeadingZeros,r=n.onKeyDown;r===void 0&&(r=pu);var s=n.onBlur;s===void 0&&(s=pu);var o=n.thousandSeparator,a=n.decimalScale,l=n.fixedDecimalScale,c=n.prefix;c===void 0&&(c="");var u=n.defaultValue,h=n.value,d=n.valueIsNumericString,f=n.onValueChange,p=A$(n,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),x=ME(n),v=x.decimalSeparator,y=x.allowedDecimalSeparators,w=function(H){return y4(H,n)},_=function(H,Z){return lme(H,Z,n)},b=lm(h)?u:h,E=d??ame(b,c,e);lm(h)?lm(u)||(E=E||typeof u=="number"):E=E||typeof h=="number";var M=function(H){return C$(H)?H:(typeof H=="number"&&(H=I$(H)),E&&typeof a=="number"?m4(H,a,!!l):H)},C=N$(M(h),M(u),!!E,w,_,f),P=C[0],T=P.numAsString,I=P.formattedValue,U=C[1],j=function(H){var Z=H.target,O=H.key,W=Z.selectionStart,D=Z.selectionEnd,Y=Z.value;if(Y===void 0&&(Y=""),(O==="Backspace"||O==="Delete")&&D<c.length){H.preventDefault();return}if(W!==D){r(H);return}O==="Backspace"&&Y[0]==="-"&&W===c.length+1&&t&&ed(Z,1),a&&l&&(O==="Backspace"&&Y[W-1]===v?(ed(Z,W-1),H.preventDefault()):O==="Delete"&&Y[W]===v&&H.preventDefault()),y!=null&&y.includes(O)&&Y[W]===v&&ed(Z,W+1);var Q=o===!0?",":o;O==="Backspace"&&Y[W-1]===Q&&ed(Z,W-1),O==="Delete"&&Y[W]===Q&&ed(Z,W+1),r(H)},B=function(H){var Z=T;if(Z.match(/\d/g)||(Z=""),i||(Z=Ype(Z)),l&&a&&(Z=m4(Z,a,l)),Z!==T){var O=y4(Z,n);U({formattedValue:O,value:Z,floatValue:parseFloat(Z)},{event:H,source:Yv.event})}s(H)},z=function(H){return H===v?!0:qv(H)},$=function(H){var Z=H.currentValue,O=H.lastValue,W=H.formattedValue,D=H.currentValueIndex,Y=H.formattedValueIndex,Q=Z[D],re=W[Y],ce=L$(O,Z),oe=ce.to,he=function(Re){return _(Re).indexOf(".")+c.length};return h===0&&l&&a&&Z[oe.start]===v&&he(Z)<D&&he(W)>Y?!1:D>=oe.start&&D<oe.end&&y&&y.includes(Q)&&re===v?!0:Q===re};return Object.assign(Object.assign({},p),{value:I,valueIsNumericString:!1,isValidInputCharacter:z,isCharacterSame:$,onValueChange:U,format:w,removeFormatting:_,getCaretBoundary:function(H){return cme(H,n)},onKeyDown:j,onBlur:B})}function dme(n){var e=hme(n);return ae.createElement(rme,Object.assign({},e))}function v4({direction:n,style:e,...t}){return k.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:n==="up"?"rotate(180deg)":void 0,...e},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:k.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var OR={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const fme=/^(0\.0*|-0(\.0*)?)$/,pme=/^-?0\d+(\.\d+)?\.?$/;function mme(n){return n.toString().replace(".","").length}function gme(n,e){return typeof e=="string"?mme(e)<14&&e!=="":(typeof n=="number"?n<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(n)))&&!Number.isNaN(n)}function x4(n,e,t){if(n===void 0)return!0;const i=e===void 0||n>=e,r=t===void 0||n<=t;return i&&r}const yme={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},vme=(n,{size:e})=>({controls:{"--ni-chevron-size":qi(e,"ni-chevron-size")}}),TE=Pt((n,e)=>{const t=st("NumberInput",yme,n),{className:i,classNames:r,styles:s,unstyled:o,vars:a,onChange:l,onValueChange:c,value:u,defaultValue:h,max:d,min:f,step:p,hideControls:x,rightSection:v,isAllowed:y,clampBehavior:w,onBlur:_,allowDecimal:b,decimalScale:E,onKeyDown:M,onKeyDownCapture:C,handlersRef:P,startValue:T,disabled:I,rightSectionPointerEvents:U,allowNegative:j,readOnly:B,size:z,rightSectionWidth:$,stepHoldInterval:H,stepHoldDelay:Z,allowLeadingZeros:O,withKeyboardEvents:W,trimLeadingZeroesOnBlur:D,...Y}=t,Q=on({name:"NumberInput",classes:OR,props:t,classNames:r,styles:s,unstyled:o,vars:a,varsResolver:vme}),{resolvedClassNames:re,resolvedStyles:ce}=rE({classNames:r,styles:s,props:t}),[oe,he]=Od({value:u,defaultValue:h,onChange:l}),Re=Z!==void 0&&H!==void 0,Oe=R.useRef(null),Ve=R.useRef(null),Je=R.useRef(0),Fe=(q,X)=>{X.source==="event"&&he(gme(q.floatValue,q.value)&&!fme.test(q.value)&&!(O&&pme.test(q.value))?q.floatValue:q.value),c==null||c(q,X)},J=q=>{const X=String(q).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return X?Math.max(0,(X[1]?X[1].length:0)-(X[2]?+X[2]:0)):0},ge=q=>{Oe.current&&typeof q<"u"&&Oe.current.setSelectionRange(q,q)},de=R.useRef();de.current=()=>{let q;const X=J(oe),pe=J(p),_e=Math.max(X,pe),xe=10**_e;if(typeof oe!="number"||Number.isNaN(oe))q=ac(T,f,d);else if(d!==void 0){const je=(Math.round(oe*xe)+Math.round(p*xe))/xe;q=je<=d?je:d}else q=(Math.round(oe*xe)+Math.round(p*xe))/xe;const Me=q.toFixed(_e);he(parseFloat(Me)),c==null||c({floatValue:parseFloat(Me),formattedValue:Me,value:Me},{source:"increment"}),setTimeout(()=>{var je;return ge((je=Oe.current)==null?void 0:je.value.length)},0)};const Ae=R.useRef();Ae.current=()=>{let q;const X=f!==void 0?f:j?Number.MIN_SAFE_INTEGER:0,pe=J(oe),_e=J(p),xe=Math.max(pe,_e),Me=10**xe;if(typeof oe!="number"||Number.isNaN(oe))q=ac(T,X,d);else{const qe=(Math.round(oe*Me)-Math.round(p*Me))/Me;q=X!==void 0&&qe<X?X:qe}const je=q.toFixed(xe);he(parseFloat(je)),c==null||c({floatValue:parseFloat(je),formattedValue:je,value:je},{source:"decrement"}),setTimeout(()=>{var qe;return ge((qe=Oe.current)==null?void 0:qe.value.length)},0)};const Ie=q=>{M==null||M(q),!(B||!W)&&(q.key==="ArrowUp"&&(q.preventDefault(),de.current()),q.key==="ArrowDown"&&(q.preventDefault(),Ae.current()))},me=q=>{if(C==null||C(q),q.key==="Backspace"){const X=Oe.current;X.selectionStart===0&&X.selectionStart===X.selectionEnd&&(q.preventDefault(),window.setTimeout(()=>ge(0),0))}};FS(P,{increment:de.current,decrement:Ae.current});const ye=q=>{q?de.current():Ae.current(),Je.current+=1},ke=q=>{if(ye(q),Re){const X=typeof H=="number"?H:H(Je.current);Ve.current=window.setTimeout(()=>ke(q),X)}},Xe=(q,X)=>{var pe;q.preventDefault(),(pe=Oe.current)==null||pe.focus(),ye(X),Re&&(Ve.current=window.setTimeout(()=>ke(X),Z))},Le=()=>{Ve.current&&window.clearTimeout(Ve.current),Ve.current=null,Je.current=0},Ye=k.jsxs("div",{...Q("controls"),children:[k.jsx(Ca,{...Q("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof oe=="number"&&d!==void 0&&oe>=d,mod:{direction:"up"},onMouseDown:q=>q.preventDefault(),onPointerDown:q=>{Xe(q,!0)},onPointerUp:Le,onPointerLeave:Le,children:k.jsx(v4,{direction:"up"})}),k.jsx(Ca,{...Q("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof oe=="number"&&f!==void 0&&oe<=f,mod:{direction:"down"},onMouseDown:q=>q.preventDefault(),onPointerDown:q=>{Xe(q,!1)},onPointerUp:Le,onPointerLeave:Le,children:k.jsx(v4,{direction:"down"})})]});return k.jsx(sg,{component:dme,allowNegative:j,className:Zi(OR.root,i),size:z,...Y,readOnly:B,disabled:I,value:oe,getInputRef:mr(e,Oe),onValueChange:Fe,rightSection:x||B?v:v||Ye,classNames:re,styles:ce,unstyled:o,__staticSelector:"NumberInput",decimalScale:b?E:0,onKeyDown:Ie,onKeyDownCapture:me,rightSectionPointerEvents:U??(I?"none":void 0),rightSectionWidth:$??`var(--ni-right-section-width-${z||"sm"})`,allowLeadingZeros:O,onBlur:q=>{if(_==null||_(q),w==="blur"&&typeof oe=="number"&&ac(oe,f,d)!==oe&&he(ac(oe,f,d)),D&&typeof oe=="string"&&J(oe)<15){const X=oe.replace(/^0+/,""),pe=parseFloat(X);he(Number.isNaN(pe)||pe>Number.MAX_SAFE_INTEGER?X:pe)}},isAllowed:q=>w==="strict"?y?y(q)&&x4(q.floatValue,f,d):x4(q.floatValue,f,d):y?y(q):!0})});TE.classes={...sg.classes,...OR};TE.displayName="@mantine/core/NumberInput";const xme={duration:100,transition:"fade"};function _me(n,e){return{...xme,...e,...n}}function wme({offset:n,position:e,defaultOpened:t}){const[i,r]=R.useState(t),s=R.useRef(),{x:o,y:a,elements:l,refs:c,update:u,placement:h}=YN({placement:e,middleware:[GN({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=h.includes("right")?n:e.includes("left")?n*-1:0,f=h.includes("bottom")?n:e.includes("top")?n*-1:0,p=R.useCallback(({clientX:x,clientY:v})=>{c.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x,y:v,left:x+d,top:v+f,right:x,bottom:v}}})},[l.reference]);return R.useEffect(()=>{if(c.floating.current){const x=s.current;x.addEventListener("mousemove",p);const v=pc(c.floating.current);return v.forEach(y=>{y.addEventListener("scroll",u)}),()=>{x.removeEventListener("mousemove",p),v.forEach(y=>{y.removeEventListener("scroll",u)})}}},[l.reference,c.floating.current,u,p,i]),{handleMouseMove:p,x:o,y:a,opened:i,setOpened:r,boundaryRef:s,floating:c.setFloating}}var AE={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const bme={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:jo("popover")},Sme=(n,{radius:e,color:t})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:so(e),"--tooltip-bg":t?zu(t,n):void 0,"--tooltip-color":t?"var(--mantine-color-white)":void 0}}),Mk=Pt((n,e)=>{const t=st("TooltipFloating",bme,n),{children:i,refProp:r,withinPortal:s,style:o,className:a,classNames:l,styles:c,unstyled:u,radius:h,color:d,label:f,offset:p,position:x,multiline:v,zIndex:y,disabled:w,defaultOpened:_,variant:b,vars:E,portalProps:M,...C}=t,P=oo(),T=on({name:"TooltipFloating",props:t,classes:AE,className:a,style:o,classNames:l,styles:c,unstyled:u,rootSelector:"tooltip",vars:E,varsResolver:Sme}),{handleMouseMove:I,x:U,y:j,opened:B,boundaryRef:z,floating:$,setOpened:H}=wme({offset:p,position:x,defaultOpened:_});if(!Pc(i))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Z=mr(z,i.ref,e),O=D=>{var Y,Q;(Q=(Y=i.props).onMouseEnter)==null||Q.call(Y,D),I(D),H(!0)},W=D=>{var Y,Q;(Q=(Y=i.props).onMouseLeave)==null||Q.call(Y,D),H(!1)};return k.jsxs(k.Fragment,{children:[k.jsx(eh,{...M,withinPortal:s,children:k.jsx(pt,{...C,...T("tooltip",{style:{...oj(o,P),zIndex:y,display:!w&&B?"block":"none",top:(j&&Math.round(j))??"",left:(U&&Math.round(U))??""}}),variant:b,ref:$,mod:{multiline:v},children:f})}),R.cloneElement(i,{...i.props,[r]:Z,onMouseEnter:O,onMouseLeave:W})]})});Mk.classes=AE;Mk.displayName="@mantine/core/TooltipFloating";const k$=R.createContext(!1),Eme=k$.Provider,Mme=()=>R.useContext(k$),Tme={openDelay:0,closeDelay:0};function Tk(n){const{openDelay:e,closeDelay:t,children:i}=st("TooltipGroup",Tme,n);return k.jsx(Eme,{value:!0,children:k.jsx(_de,{delay:{open:e,close:t},children:i})})}Tk.displayName="@mantine/core/TooltipGroup";Tk.extend=n=>n;function Ame(n){var M,C,P;const[e,t]=R.useState(n.defaultOpened),r=typeof n.opened=="boolean"?n.opened:e,s=Mme(),o=qm(),{delay:a,currentId:l,setCurrentId:c}=Hj(),u=R.useCallback(T=>{t(T),T&&c(o)},[c,o]),{x:h,y:d,context:f,refs:p,update:x,placement:v,middlewareData:{arrow:{x:y,y:w}={}}}=YN({strategy:n.strategy,placement:n.position,open:r,onOpenChange:u,middleware:[Dj(n.offset),GN({padding:8}),LR(),Fj({element:n.arrowRef,padding:n.arrowOffset}),...n.inline?[NR()]:[]]}),{getReferenceProps:_,getFloatingProps:b}=Cde([xde(f,{enabled:(M=n.events)==null?void 0:M.hover,delay:s?a:{open:n.openDelay,close:n.closeDelay},mouseOnly:!((C=n.events)!=null&&C.touch)}),Ade(f,{enabled:(P=n.events)==null?void 0:P.focus,visibleOnly:!0}),Rde(f,{role:"tooltip"}),Mde(f,{enabled:typeof n.opened>"u"}),wde(f,{id:o})]);Yj({opened:r,position:n.position,positionDependencies:n.positionDependencies,floating:{refs:p,update:x}}),yc(()=>{var T;(T=n.onPositionChange)==null||T.call(n,v)},[v]);const E=r&&l&&l!==o;return{x:h,y:d,arrowX:y,arrowY:w,reference:p.setReference,floating:p.setFloating,getFloatingProps:b,getReferenceProps:_,isGroupPhase:E,opened:r,placement:v}}const _4={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:jo("popover"),positionDependencies:[]},Cme=(n,{radius:e,color:t})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:so(e),"--tooltip-bg":t?zu(t,n):void 0,"--tooltip-color":t?"var(--mantine-color-white)":void 0}}),k0=Pt((n,e)=>{const t=st("Tooltip",_4,n),{children:i,position:r,refProp:s,label:o,openDelay:a,closeDelay:l,onPositionChange:c,opened:u,defaultOpened:h,withinPortal:d,radius:f,color:p,classNames:x,styles:v,unstyled:y,style:w,className:_,withArrow:b,arrowSize:E,arrowOffset:M,arrowRadius:C,arrowPosition:P,offset:T,transitionProps:I,multiline:U,events:j,zIndex:B,disabled:z,positionDependencies:$,onClick:H,onMouseEnter:Z,onMouseLeave:O,inline:W,variant:D,keepMounted:Y,vars:Q,portalProps:re,mod:ce,floatingStrategy:oe,...he}=st("Tooltip",_4,t),{dir:Re}=eg(),Oe=R.useRef(null),Ve=Ame({position:Wj(Re,r),closeDelay:l,openDelay:a,onPositionChange:c,opened:u,defaultOpened:h,events:j,arrowRef:Oe,arrowOffset:M,offset:typeof T=="number"?T+(b?E/2:0):T,positionDependencies:[...$,i],inline:W,strategy:oe}),Je=on({name:"Tooltip",props:t,classes:AE,className:_,style:w,classNames:x,styles:v,unstyled:y,rootSelector:"tooltip",vars:Q,varsResolver:Cme});if(!Pc(i))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Fe=mr(Ve.reference,i.ref,e),J=_me(I,{duration:100,transition:"fade"});return k.jsxs(k.Fragment,{children:[k.jsx(eh,{...re,withinPortal:d,children:k.jsx(Rl,{...J,keepMounted:Y,mounted:!z&&!!Ve.opened,duration:Ve.isGroupPhase?10:J.duration,children:ge=>k.jsxs(pt,{...he,"data-fixed":oe==="fixed"||void 0,variant:D,mod:[{multiline:U},ce],...Ve.getFloatingProps({ref:Ve.floating,className:Je("tooltip").className,style:{...Je("tooltip").style,...ge,zIndex:B,top:Ve.y??0,left:Ve.x??0}}),children:[o,k.jsx(qN,{ref:Oe,arrowX:Ve.arrowX,arrowY:Ve.arrowY,visible:b,position:Ve.placement,arrowSize:E,arrowOffset:M,arrowRadius:C,arrowPosition:P,...Je("arrow")})]})})}),R.cloneElement(i,Ve.getReferenceProps({onClick:H,onMouseEnter:Z,onMouseLeave:O,onMouseMove:t.onMouseMove,onPointerDown:t.onPointerDown,onPointerEnter:t.onPointerEnter,[s]:Fe,className:Zi(_,i.props.className),...i.props}))]})});k0.classes=AE;k0.displayName="@mantine/core/Tooltip";k0.Floating=Mk;k0.Group=Tk;const Pme={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},Md=Pt((n,e)=>{const t=st("Select",Pme,n),{classNames:i,styles:r,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:l,onDropdownClose:c,onDropdownOpen:u,onFocus:h,onBlur:d,onClick:f,onChange:p,data:x,value:v,defaultValue:y,selectFirstOptionOnChange:w,onOptionSubmit:_,comboboxProps:b,readOnly:E,disabled:M,filter:C,limit:P,withScrollArea:T,maxDropdownHeight:I,size:U,searchable:j,rightSection:B,checkIconPosition:z,withCheckIcon:$,nothingFoundMessage:H,name:Z,form:O,searchValue:W,defaultSearchValue:D,onSearchChange:Y,allowDeselect:Q,error:re,rightSectionPointerEvents:ce,id:oe,clearable:he,clearButtonProps:Re,hiddenInputProps:Oe,renderOption:Ve,onClear:Je,autoComplete:Fe,scrollAreaProps:J,...ge}=t,de=R.useMemo(()=>jfe(x),[x]),Ae=R.useMemo(()=>f$(de),[de]),Ie=qm(oe),[me,ye,ke]=Od({value:v,defaultValue:y,finalValue:null,onChange:p}),Xe=typeof me=="string"?Ae[me]:void 0,Le=woe(Xe),[Ye,q]=Od({value:W,defaultValue:D,finalValue:Xe?Xe.label:"",onChange:Y}),X=x$({opened:a,defaultOpened:l,onDropdownOpen:()=>{u==null||u(),X.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{c==null||c(),X.resetSelectedOption()}}),{resolvedClassNames:pe,resolvedStyles:_e}=rE({props:t,styles:r,classNames:i});R.useEffect(()=>{w&&X.selectFirstOption()},[w,me]),R.useEffect(()=>{v===null&&q(""),typeof v=="string"&&Xe&&((Le==null?void 0:Le.value)!==Xe.value||(Le==null?void 0:Le.label)!==Xe.label)&&q(Xe.label)},[v,Xe]);const xe=he&&!!me&&!M&&!E&&k.jsx(Dn.ClearButton,{size:U,...Re,onClear:()=>{ye(null,null),q(""),Je==null||Je()}});return k.jsxs(k.Fragment,{children:[k.jsxs(Dn,{store:X,__staticSelector:"Select",classNames:pe,styles:_e,unstyled:s,readOnly:E,onOptionSubmit:Me=>{_==null||_(Me);const je=Q&&Ae[Me].value===me?null:Ae[Me],qe=je?je.value:null;qe!==me&&ye(qe,je),!ke&&q(typeof qe=="string"&&(je==null?void 0:je.label)||""),X.closeDropdown()},size:U,...b,children:[k.jsx(Dn.Target,{targetType:j?"input":"button",autoComplete:Fe,children:k.jsx(sg,{id:Ie,ref:e,rightSection:B||xe||k.jsx(Dn.Chevron,{size:U,error:re,unstyled:s}),rightSectionPointerEvents:ce||(xe?"all":"none"),...ge,size:U,__staticSelector:"Select",disabled:M,readOnly:E||!j,value:Ye,onChange:Me=>{q(Me.currentTarget.value),X.openDropdown(),w&&X.selectFirstOption()},onFocus:Me=>{j&&X.openDropdown(),h==null||h(Me)},onBlur:Me=>{var je;j&&X.closeDropdown(),q(me!=null&&((je=Ae[me])==null?void 0:je.label)||""),d==null||d(Me)},onClick:Me=>{j?X.openDropdown():X.toggleDropdown(),f==null||f(Me)},classNames:pe,styles:_e,unstyled:s,pointer:!j,error:re})}),k.jsx(mpe,{data:de,hidden:E||M,filter:C,search:Ye,limit:P,hiddenWhenEmpty:!H,withScrollArea:T,maxDropdownHeight:I,filterOptions:j&&(Xe==null?void 0:Xe.label)!==Ye,value:me,checkIconPosition:z,withCheckIcon:$,nothingFoundMessage:H,unstyled:s,labelId:ge.label?`${Ie}-label`:void 0,"aria-label":ge.label?void 0:ge["aria-label"],renderOption:Ve,scrollAreaProps:J})]}),k.jsx(Dn.HiddenInput,{value:me,name:Z,form:O,disabled:M,...Oe})]})});Md.classes={...sg.classes,...Dn.classes};Md.displayName="@mantine/core/Select";const[Rme,CE]=Cl("SliderProvider was not found in tree"),O$=R.forwardRef(({size:n,disabled:e,variant:t,color:i,thumbSize:r,radius:s,...o},a)=>{const{getStyles:l}=CE();return k.jsx(pt,{tabIndex:-1,variant:t,size:n,ref:a,...l("root"),...o})});O$.displayName="@mantine/core/SliderRoot";const D$=R.forwardRef(({max:n,min:e,value:t,position:i,label:r,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:l,labelAlwaysOn:c,thumbLabel:u,onFocus:h,onBlur:d,showLabelOnHover:f,isHovered:p,children:x=null,disabled:v},y)=>{const{getStyles:w}=CE(),[_,b]=R.useState(!1),E=c||s||_||f&&p;return k.jsxs(pt,{tabIndex:0,role:"slider","aria-label":u,"aria-valuemax":n,"aria-valuemin":e,"aria-valuenow":t,ref:y,__vars:{"--slider-thumb-offset":`${i}%`},...w("thumb",{focusable:!0}),mod:{dragging:s,disabled:v},onFocus:()=>{b(!0),typeof h=="function"&&h()},onBlur:()=>{b(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:M=>M.stopPropagation(),children:[x,k.jsx(Rl,{mounted:r!=null&&!!E,transition:"fade",duration:0,...l,children:M=>k.jsx("div",{...w("label",{style:M}),children:r})})]})});D$.displayName="@mantine/core/SliderThumb";function F$({value:n,min:e,max:t}){const i=(n-e)/(t-e)*100;return Math.min(Math.max(i,0),100)}function Ime({mark:n,offset:e,value:t,inverted:i=!1}){return i?typeof e=="number"&&n.value<=e||n.value>=t:typeof e=="number"?n.value>=e&&n.value<=t:n.value<=t}function U$({marks:n,min:e,max:t,disabled:i,value:r,offset:s,inverted:o}){const{getStyles:a}=CE();if(!n)return null;const l=n.map((c,u)=>R.createElement(pt,{...a("markWrapper"),__vars:{"--mark-offset":`${F$({value:c.value,min:e,max:t})}%`},key:u},k.jsx(pt,{...a("mark"),mod:{filled:Ime({mark:c,value:r,offset:s,inverted:o}),disabled:i}}),c.label&&k.jsx("div",{...a("markLabel"),children:c.label})));return k.jsx("div",{children:l})}U$.displayName="@mantine/core/SliderMarks";function B$({filled:n,children:e,offset:t,disabled:i,marksOffset:r,inverted:s,containerProps:o,...a}){const{getStyles:l}=CE();return k.jsx(pt,{...l("trackContainer"),mod:{disabled:i},...o,children:k.jsxs(pt,{...l("track"),mod:{inverted:s,disabled:i},children:[k.jsx(pt,{mod:{inverted:s,disabled:i},__vars:{"--slider-bar-width":`calc(${n}% + var(--slider-size))`,"--slider-bar-offset":`calc(${t}% - var(--slider-size))`},...l("bar")}),e,k.jsx(U$,{...a,offset:r,disabled:i,inverted:s})]})})}B$.displayName="@mantine/core/SliderTrack";function Lme({value:n,containerWidth:e,min:t,max:i,step:r,precision:s}){const a=(e?Math.min(Math.max(n,0),e)/e:n)*(i-t),l=(a!==0?Math.round(a/r)*r:0)+t,c=Math.max(l,t);return s!==void 0?Number(c.toFixed(s)):c}function H_(n,e){return parseFloat(n.toFixed(e))}function Nme(n){if(!n)return 0;const e=n.toString().split(".");return e.length>1?e[1].length:0}var z$={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const kme={radius:"xl",min:0,max:100,step:1,marks:[],label:n=>n,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:n=>n},Ome=(n,{size:e,color:t,thumbSize:i,radius:r})=>({root:{"--slider-size":qi(e,"slider-size"),"--slider-color":t?zu(t,n):void 0,"--slider-radius":r===void 0?void 0:so(r),"--slider-thumb-size":i!==void 0?Pe(i):"calc(var(--slider-size) * 2)"}}),av=Pt((n,e)=>{const t=st("Slider",kme,n),{classNames:i,styles:r,value:s,onChange:o,onChangeEnd:a,size:l,min:c,max:u,step:h,precision:d,defaultValue:f,name:p,marks:x,label:v,labelTransitionProps:y,labelAlwaysOn:w,thumbLabel:_,showLabelOnHover:b,thumbChildren:E,disabled:M,unstyled:C,scale:P,inverted:T,className:I,style:U,vars:j,hiddenInputProps:B,...z}=t,$=on({name:"Slider",props:t,classes:z$,classNames:i,className:I,styles:r,style:U,vars:j,varsResolver:Ome,unstyled:C}),{dir:H}=eg(),[Z,O]=R.useState(!1),[W,D]=Od({value:typeof s=="number"?ac(s,c,u):s,defaultValue:typeof f=="number"?ac(f,c,u):f,finalValue:ac(0,c,u),onChange:o}),Y=R.useRef(W),Q=R.useRef(),re=R.useRef(),ce=F$({value:W,min:c,max:u}),oe=P(W),he=typeof v=="function"?v(oe):v,Re=d??Nme(h),Oe=R.useCallback(({x:J})=>{if(!M){const ge=Lme({value:J,min:c,max:u,step:h,precision:Re});D(ge),Y.current=ge}},[M,c,u,h,Re,D]),{ref:Ve,active:Je}=xoe(Oe,{onScrubEnd:()=>a==null?void 0:a(Y.current)},H),Fe=J=>{var ge,de,Ae,Ie,me,ye;if(!M)switch(J.key){case"ArrowUp":{J.preventDefault(),(ge=re.current)==null||ge.focus();const ke=H_(Math.min(Math.max(W+h,c),u),Re);D(ke),a==null||a(ke);break}case"ArrowRight":{J.preventDefault(),(de=re.current)==null||de.focus();const ke=H_(Math.min(Math.max(H==="rtl"?W-h:W+h,c),u),Re);D(ke),a==null||a(ke);break}case"ArrowDown":{J.preventDefault(),(Ae=re.current)==null||Ae.focus();const ke=H_(Math.min(Math.max(W-h,c),u),Re);D(ke),a==null||a(ke);break}case"ArrowLeft":{J.preventDefault(),(Ie=re.current)==null||Ie.focus();const ke=H_(Math.min(Math.max(H==="rtl"?W+h:W-h,c),u),Re);D(ke),a==null||a(ke);break}case"Home":{J.preventDefault(),(me=re.current)==null||me.focus(),D(c),a==null||a(c);break}case"End":{J.preventDefault(),(ye=re.current)==null||ye.focus(),D(u),a==null||a(u);break}}};return k.jsx(Rme,{value:{getStyles:$},children:k.jsxs(O$,{...z,ref:mr(e,Q),onKeyDownCapture:Fe,onMouseDownCapture:()=>{var J;return(J=Q.current)==null?void 0:J.focus()},size:l,disabled:M,children:[k.jsx(B$,{inverted:T,offset:0,filled:ce,marks:x,min:c,max:u,value:oe,disabled:M,containerProps:{ref:Ve,onMouseEnter:b?()=>O(!0):void 0,onMouseLeave:b?()=>O(!1):void 0},children:k.jsx(D$,{max:u,min:c,value:oe,position:ce,dragging:Je,label:he,ref:re,labelTransitionProps:y,labelAlwaysOn:w,thumbLabel:_,showLabelOnHover:b,isHovered:Z,disabled:M,children:E})}),k.jsx("input",{type:"hidden",name:p,value:oe,...B})]})})});av.classes=z$;av.displayName="@mantine/core/Slider";const H$=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function Dme(n,e){return n.reduce((t,i)=>(t[i.position||e].push(i),t),H$.reduce((t,i)=>(t[i]=[],t),{}))}const w4={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},Fme={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function Ume({state:n,maxHeight:e,position:t,transitionDuration:i}){const[r,s]=t.split("-"),o=s==="center"?`${r}-center`:s,a={opacity:0,maxHeight:e,transform:w4[o],transitionDuration:`${i}ms, ${i}ms, ${i}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},l={opacity:1,transform:Fme[o]},c={opacity:0,maxHeight:0,transform:w4[o]};return{...a,...{entering:l,entered:l,exiting:c,exited:c}[n]}}function Bme(n,e){return typeof e=="number"?e:e===!1||n===!1?!1:n}const W$=R.forwardRef(({data:n,onHide:e,autoClose:t,...i},r)=>{const{autoClose:s,message:o,...a}=n,l=Bme(t,n.autoClose),c=R.useRef(),u=()=>window.clearTimeout(c.current),h=()=>{e(n.id),u()},d=()=>{typeof l=="number"&&(c.current=window.setTimeout(h,l))};return R.useEffect(()=>{var f;(f=n.onOpen)==null||f.call(n,n)},[]),R.useEffect(()=>(d(),u),[l]),k.jsx(Sk,{...i,...a,onClose:h,ref:r,onMouseEnter:u,onMouseLeave:d,children:o})});W$.displayName="@mantine/notifications/NotificationContainer";var V$={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const zme=Cc,Hme={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:jo("overlay"),store:Zd,withinPortal:!0},Wme=(n,{zIndex:e,containerWidth:t})=>({root:{"--notifications-z-index":e==null?void 0:e.toString(),"--notifications-container-width":Pe(t)}}),Lc=Pt((n,e)=>{const t=st("Notifications",Hme,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,position:c,autoClose:u,transitionDuration:h,containerWidth:d,notificationMaxHeight:f,limit:p,zIndex:x,store:v,portalProps:y,withinPortal:w,..._}=t,b=oo(),E=Toe(v),M=moe(),C=RL(),P=R.useRef({}),T=R.useRef(0),U=(b.respectReducedMotion?C:!1)?1:h,j=on({name:"Notifications",classes:V$,props:t,className:r,style:s,classNames:i,styles:o,unstyled:a,vars:l,varsResolver:Wme});R.useEffect(()=>{v==null||v.updateState($=>({...$,limit:p||5,defaultPosition:c}))},[p,c]),yc(()=>{E.notifications.length>T.current&&setTimeout(()=>M(),0),T.current=E.notifications.length},[E.notifications]);const B=Dme(E.notifications,c),z=H$.reduce(($,H)=>($[H]=B[H].map(({style:Z,...O})=>k.jsx(zme,{timeout:U,onEnter:()=>P.current[O.id].offsetHeight,nodeRef:{current:P.current[O.id]},children:W=>k.jsx(W$,{ref:D=>{P.current[O.id]=D},data:O,onHide:D=>FV(D,v),autoClose:u,...j("notification",{style:{...Ume({state:W,position:H,transitionDuration:U,maxHeight:f}),...Z}})})},O.id)),$),{});return k.jsxs(eh,{withinPortal:w,...y,children:[k.jsx(pt,{...j("root"),"data-position":"top-center",ref:e,..._,children:k.jsx(su,{children:z["top-center"]})}),k.jsx(pt,{...j("root"),"data-position":"top-left",..._,children:k.jsx(su,{children:z["top-left"]})}),k.jsx(pt,{...j("root"),"data-position":"top-right",..._,children:k.jsx(su,{children:z["top-right"]})}),k.jsx(pt,{...j("root"),"data-position":"bottom-right",..._,children:k.jsx(su,{children:z["bottom-right"]})}),k.jsx(pt,{...j("root"),"data-position":"bottom-left",..._,children:k.jsx(su,{children:z["bottom-left"]})}),k.jsx(pt,{...j("root"),"data-position":"bottom-center",..._,children:k.jsx(su,{children:z["bottom-center"]})})]})});Lc.classes=V$;Lc.displayName="@mantine/notifications/Notifications";Lc.show=Wr.show;Lc.hide=Wr.hide;Lc.update=Wr.update;Lc.clean=Wr.clean;Lc.cleanQueue=Wr.cleanQueue;Lc.updateState=Wr.updateState;class Vme{constructor(e){ve(this,"uuid");ve(this,"receiver");this.uuid=e,this.receiver=cs.Instance}execute(){this.receiver.actions.push(this),this.receiver.removeFurniture(this.uuid)}}const Hy=20,Gme=40;class cg extends dn{constructor(t){super();ve(this,"uuid",IV());ve(this,"background");ve(this,"clickStartTime");ve(this,"customParent");ve(this,"length",0);ve(this,"dragStartPosition",{x:0,y:0});ve(this,"isTemporary",!1);ve(this,"isValid",!1);ve(this,"isFocused",!1);ve(this,"isDragging",!1);this.eventMode="static",t!=null&&t.uuid&&(this.uuid=t.uuid),t!=null&&t.parent&&(this.customParent=t.parent),this.background=new Vn,this.on("pointerover",this.onElementMouseOver),this.on("pointerleave",this.onElementMouseLeave),this.on("pointerdown",this.onElementMouseDown),this.on("pointerup",this.onElementMouseUp),this.on("globalpointermove",this.onGlobalMouseMove),this.clickStartTime=0,this.zIndex=Gme}isCollide(){var r;const t=((r=this.customParent)==null?void 0:r.length)||1/0,i=[{start:Hy,end:Hy},{start:t-Hy,end:t-Hy}];for(const s of this.parent.children)s instanceof cg&&i.push({start:s.position.x,end:s.position.x+s.length});i.sort((s,o)=>s.start-o.start);for(const s in i){const o=i[s],a=i[+s+1];if(o.end>(a==null?void 0:a.start))return!0}return!1}onElementMouseOver(t){this.isDragging||(document.body.style.cursor="pointer")}onElementMouseLeave(t){this.isDragging||(document.body.style.cursor="default")}onElementMouseDown(t){t.stopPropagation(),this.isDragging=!0,this.dragStartPosition=this.toLocal({x:t.x,y:t.y}),this.dragStartPosition={x:Math.abs(this.dragStartPosition.x),y:this.dragStartPosition.y},this.clickStartTime=Date.now()}onElementMouseUp(t){t.stopPropagation(),this.isDragging=!1,this.dragStartPosition=this.toLocal({x:0,y:0}),document.body.style.cursor="pointer",Date.now()-this.clickStartTime<200&&this.onMouseClick()}onGlobalMouseMove(t){if(t.buttons!==1||!this.isFocused||!this.isDragging||this.isTemporary||!this.customParent||Lt.getState().activeTool!==mt.Edit)return;document.body.style.cursor="grabbing";const s=this.parent.toLocal(t.global).x-this.dragStartPosition.x,a={x:Math.max(0,Math.min(s,this.customParent.length-this.length)),y:this.position.y},l={x:this.position.x,y:this.position.y};this.setPosition(a),this.isCollide()&&this.setPosition(l)}setPosition({x:t,y:i}){}onMouseClick(){const t=Lt.getState();switch(t.activeTool){case mt.Edit:this.parent.parent.blurAllElements(this.uuid),t.setFocusedElement(this),this.focus();break;case mt.Remove:this.delete();break}}checkVisibility(){}blur(){}focus(){}show(){this.visible=!0}setTemporality(t){t?this.alpha=.5:this.alpha=1,this.isTemporary=t,this.eventMode=t?"none":"static"}hide(){this.visible=!1}delete(){new Vme(this.uuid).execute()}}const Ak=200,jme="#1C7ED6",$me="#545454",Xme="#732424",Yme=80;let pa=class extends cg{constructor(t){super({position:t==null?void 0:t.position,uuid:t==null?void 0:t.uuid,parent:t==null?void 0:t.parent});ve(this,"baseLine");ve(this,"length",Yme);ve(this,"type",Wh.Left);ve(this,"orientation",ky.West);t&&(t.position&&this.setPosition(t.position),t.length!==void 0&&(this.length=t.length),t.type!==void 0&&(this.type=t.type),t.orientation!==void 0&&(this.orientation=t.orientation)),this.setBackground(),this.setStroke()}onStoreChange(){this.checkEventMode()}setValidity(t=!0){t?(this.isValid=!0,this.setStroke()):(this.isValid=!1,this.setStroke(Xme))}setType(t){this.type=t,this.setStroke(),this.setBackground()}setBackground(t="transparent",i="transparent"){this.background.clear(),this.background.rect(-0/2,-0/2,this.length,this.length),this.background.fill(i),this.background.stroke(t),this.addChild(this.background)}setStroke(t=$me){var l,c,u;(l=this.baseLine)==null||l.clear();const i=-1,r=((c=this.customParent)==null?void 0:c.thickness)||0;this.baseLine=new Vn;const{x:s,y:o}={x:0,y:0},a={width:2,color:t};this.baseLine.arc(s,o+i,this.length,0,.1).stroke(a).arc(s,o+i,this.length,.15,.25).stroke(a).arc(s,o+i,this.length,.3,.4).stroke(a).arc(s,o+i,this.length,.45,.55).stroke(a).arc(s,o+i,this.length,.6,.7).stroke(a).arc(s,o+i,this.length,.75,.85).stroke(a).arc(s,o+i,this.length,.9,1).stroke(a).arc(s,o+i,this.length,1.05,1.15).stroke(a).arc(s,o+i,this.length,1.2,1.3).stroke(a).arc(s,o+i,this.length,1.35,1.45).stroke(a).arc(s,o+i,this.length,1.5,1.55).stroke(a),this.baseLine.rect(-1,-r+i,this.length+2,r).fill({color:fL}),this.baseLine.rect(-1,-9,s+this.length+2,10).fill({color:t}),this.baseLine.moveTo(s,o-2).lineTo(0,o+this.length).stroke(a),this.orientation===ky.West&&(this.position.y=((u=this.customParent)==null?void 0:u.thickness)||0,this.scale.y=1,this.scale.x=this.type===Wh.Left?1:-1,this.type===Wh.Left&&(this.baseLine.position.x=0,this.background.position.x=0),this.type===Wh.Right&&(this.baseLine.position.x=-this.length,this.background.position.x=-this.length)),this.orientation===ky.East&&(this.scale.y=-1,this.position.y=0,this.type===Wh.Left&&(this.scale.x=-1,this.baseLine.position.x=-this.length,this.background.position.x=-this.length),this.type===Wh.Right&&(this.scale.x=1,this.baseLine.position.x=0,this.background.position.x=0)),this.addChild(this.baseLine)}checkEventMode(){const t=Lt.getState().activeTool;this.eventMode=t===mt.FurnitureAddDoor||t===mt.WallAdd?"none":"static"}focus(){this.isFocused=!0,this.setStroke(jme)}blur(){this.isFocused=!1,this.setStroke()}setPosition({x:t,y:i}){var o;const r=((o=this.customParent)==null?void 0:o.thickness)||0,s=this.orientation===ky.West?r:0;this.position={x:t??this.position.x,y:s}}setLength(t){const i=this.length;if(this.length=t,this.isCollide()){this.length=i,Wr.clean(),Wr.show({title:"🚪 Nie można zmienić szerokości",message:"Elementy na ścianie nie mogą nachodzić na siebie",color:"red"});return}this.setStroke()}setOrientation(t){this.orientation=t,this.setStroke()}serialize(){const t=this.parent;return{uuid:this.uuid,wallUuid:t.uuid,x:this.x,y:this.y,length:this.length,orientation:this.orientation,type:this.type,element:"door"}}};var sS=(n=>(n[n.Fixed=0]="Fixed",n[n.Casement=1]="Casement",n[n.Single=2]="Single",n))(sS||{});const qme=Object.freeze({2:{type:2,label:"Jednoskrzydłowe"},1:{type:1,label:"Dwuskrzydłowe"},0:{type:0,label:"Fix"}}),xo=30,ec=400,Jc=30,Xh=200,eu=0,Yh=150,Zme="#1C7ED6",Kme="#545454",Qme="#732424",Jme=80,ege=140,tge=90;class ma extends cg{constructor(t){super({position:t==null?void 0:t.position,uuid:t==null?void 0:t.uuid,parent:t==null?void 0:t.parent});ve(this,"baseLine");ve(this,"length",Jme);ve(this,"_height",ege);ve(this,"bottom",tge);ve(this,"type",sS.Single);t&&(t.position&&this.setPosition(t.position),t.length!==void 0&&(this.length=t.length),t.height!==void 0&&(this.height=t.height),t.bottom!==void 0&&(this.bottom=t.bottom)),this.setBackground("transparent"),this.setStroke()}get height(){return this._height}set height(t){this._height=t}onStoreChange(){this.checkEventMode()}setValidity(t=!0){t?(this.isValid=!0,this.setStroke()):(this.isValid=!1,this.setStroke(Qme))}setType(t){this.type=t,this.setStroke()}setBackground(t="transparent",i="transparent"){var o;const r=((o=this.customParent)==null?void 0:o.thickness)||0,s=10;this.background.clear(),this.background.rect(0-s/2,-r/2-s/2,this.length+s,r+s),this.background.fill(i),this.background.stroke(t),this.addChild(this.background)}setStroke(t=Kme){var c,u;(c=this.baseLine)==null||c.clear();const i=(((u=this.customParent)==null?void 0:u.thickness)||0)+1;this.baseLine=new Vn;const{x:r,y:s}={x:0,y:0},o={width:2,color:t};this.baseLine.rect(0,-i/2,r+this.length,i).fill({color:fL});const a=5,l=Math.floor(this.length/a);for(let h=0;h<l;h++)this.baseLine.moveTo(h*a,0).lineTo(h*a+a/2,0).stroke(o);this.baseLine.moveTo(0,-i/2).lineTo(0,i/2).stroke(o),this.baseLine.moveTo(this.length,-i/2).lineTo(this.length,i/2).stroke(o),this.type===sS.Casement&&this.baseLine.moveTo(this.length/2,-5).lineTo(this.length/2,5).stroke(o),this.baseLine.position={x:0,y:1},this.addChild(this.baseLine)}checkEventMode(){const t=Lt.getState().activeTool;this.eventMode=t===mt.FurnitureAddWindow||t===mt.WallAdd?"none":"static"}focus(){this.isFocused=!0,this.setStroke(Zme)}blur(){this.isFocused=!1,this.setStroke()}setPosition({x:t,y:i}){var s;const r=((s=this.customParent)==null?void 0:s.thickness)||0;this.position={x:t??this.position.x,y:r/2-1}}setLength(t){const i=this.length;if(this.length=t,this.isCollide()){this.length=i,Wr.clean(),Wr.show({title:"🪟 Nie można zmienić szerokości",message:"Elementy na ścianie nie mogą nachodzić na siebie",color:"red"});return}this.setStroke()}serialize(){const t=this.parent;return{uuid:this.uuid,wallUuid:t.uuid,x:this.x,y:this.y,length:this.length,height:this.height,bottom:this.bottom,type:this.type,element:"window"}}}class nge{constructor(e,t,i){ve(this,"object");ve(this,"attachedTo");ve(this,"position");ve(this,"receiver");this.object=e,this.attachedTo=t,this.position=i,this.receiver=cs.Instance}execute(){this.receiver.addFurniture(this.object,this.attachedTo,this.position),this.receiver.actions.push(this)}}const ige="#1C7ED6";class iC extends dn{constructor(t){super();ve(this,"baseLine");this.length=t,this.eventMode="none",this.baseLine=new Vn,this.setStroke()}setStroke(t=ige){this.baseLine=new Vn;const i=Math.floor(this.length/5.5),r=5;for(let s=0;s<i;s++)this.baseLine.moveTo(s*r,0).lineTo(s*r+r/2,0).stroke({width:1,color:t});this.addChild(this.baseLine)}setPosition(t){const i=Lt.getState().snap;let r=t.x,s=t.y;i&&(r=Tl(t.x),s=Tl(t.y)),this.position={x:r,y:s+3}}show(){this.visible=!0}hide(){this.visible=!1}}const rge=(n,e)=>{const{x:t,y:i}=n,{x:r,y:s}=e[0],{x:o,y:a}=e[1],l=o-r,c=a-s,u=t-r,h=i-s,d=u*l+h*c,f=l*l+c*c,p=Math.max(0,Math.min(1,d/f)),x=r+p*l,v=s+p*c;return{x,y:v}},b4="#919191",sge="#919191",oge="#1C7ED6",age=21,S4=20,G$=Vs.Exterior,E4=n=>n>=180?n-180:n,W_=(n,e)=>E4(~n)!==E4(~e);class O0 extends Vn{constructor(t,i,r){super();ve(this,"uuid",IV());ve(this,"leftNode");ve(this,"rightNode");ve(this,"length");ve(this,"measureLabelTop");ve(this,"measureLabelBottom");ve(this,"children",[]);ve(this,"lineHelper");ve(this,"dotHelperA");ve(this,"dotHelperB");ve(this,"dotHelperC");ve(this,"dotHelperD");ve(this,"graphic");ve(this,"helpersContainer",new dn);ve(this,"focused",!1);ve(this,"clickStartTime");ve(this,"x1");ve(this,"x2");ve(this,"y1");ve(this,"y2");ve(this,"thickness");ve(this,"type",Vs.Exterior);ve(this,"dragging");ve(this,"mouseStartPoint");ve(this,"tempFurniture",null);ve(this,"color",b4);ve(this,"leftNodePlaceholder");ve(this,"rightNodePlaceholder");ve(this,"pointA");ve(this,"pointC");ve(this,"pointD");ve(this,"pointB");if(this.sortableChildren=!0,this.eventMode="dynamic",this.leftNode=t,this.rightNode=i,this.dragging=!1,this.mouseStartPoint={x:0,y:0},this.lineHelper=new Vn,this.dotHelperA=new Vn,this.dotHelperB=new Vn,this.dotHelperC=new Vn,this.dotHelperD=new Vn,this.helpersContainer.addChild(this.lineHelper),this.helpersContainer.addChild(this.dotHelperA),this.helpersContainer.addChild(this.dotHelperB),this.helpersContainer.addChild(this.dotHelperC),this.helpersContainer.addChild(this.dotHelperD),this.addChild(this.helpersContainer),this.graphic=new Vn,this.addChild(this.graphic),this.getNodesCords(),this.measureLabelTop=new wU(0),this.measureLabelBottom=new wU(0),this.addChild(this.measureLabelTop),this.addChild(this.measureLabelBottom),(r==null?void 0:r.type)!==void 0)this.type=r==null?void 0:r.type;else{const o=Lt.getState().activeToolSettings;this.type=(o==null?void 0:o.wallType)||G$}r!=null&&r.uuid&&(this.uuid=r.uuid),r!=null&&r.thickness&&(this.thickness=r.thickness),this.applySettings(r==null?void 0:r.thickness),this.drawLine(),this.pivot.set(0,this.thickness*.5),this.on("pointerdown",this.onMouseDown),this.on("pointerup",this.onMouseUp),this.on("globalpointermove",this.onMouseMove),this.on("pointermove",this.onWallMouseMove),this.on("pointerupoutside",this.onMouseUp),this.on("pointerover",this.onMouseOver),this.on("pointerout",this.onMouseOut),this.clickStartTime=0,this.zIndex=S4}applySettings(t=CL[this.type].thickness){this.thickness=t,this.pivot.set(0,t*.5)}updateCorners(){const t=this.pointA,i=this.pointB,r=this.pointC,s=this.pointD,o=this.focused?oge:sge,a={x:this.length,y:this.thickness/2},l={x:0,y:this.thickness/2};this.graphic.clear(),this.graphic.poly([t.x,t.y,i.x,i.y,a.x,a.y,r.x,r.y,s.x,s.y,l.x,l.y]).fill({color:this.color}).stroke({width:1,color:o})}setStyles(){if(!this.parent)return;const t=this.parent;this.pointA={x:0,y:this.thickness},this.pointB={x:this.length,y:this.thickness},this.pointC={x:this.length,y:0},this.pointD={x:0,y:0};const i=t.findFirstNeighbor(this,this.leftNode.getId(),!0);if(i&&W_(i.angle,this.angle)){const l=this.thickness,c=this.length+100,u=this.thickness,h=this.leftNode===i.leftNode?0:i.thickness,d=-100,f=h,p=i.length+100,x=h,v=this.toGlobal({x:-100,y:l}),y=this.toGlobal({x:c,y:u}),w=i.toGlobal({x:d,y:f}),_=i.toGlobal({x:p,y:x});this.pointA=this.toLocal(y_(v,y,w,_))}const r=t.findFirstNeighbor(this,this.leftNode.getId(),!1);if(r&&W_(r.angle,this.angle)){const c=this.length+100,u=0,h=this.leftNode===r.leftNode?r.thickness:0,d=-100,f=h,p=r.length+100,x=h,v=this.toGlobal({x:-100,y:0}),y=this.toGlobal({x:c,y:u}),w=r.toGlobal({x:d,y:f}),_=r.toGlobal({x:p,y:x});this.pointD=this.toLocal(y_(v,y,w,_))}const s=t.findFirstNeighbor(this,this.rightNode.getId(),!0);if(s&&W_(s.angle,this.angle)){const c=this.length+100,u=0,h=this.rightNode===s.rightNode?s.thickness:0,d=-100,f=h,p=s.length+100,x=h,v=this.toGlobal({x:-100,y:0}),y=this.toGlobal({x:c,y:u}),w=s.toGlobal({x:d,y:f}),_=s.toGlobal({x:p,y:x});this.pointC=this.toLocal(y_(v,y,w,_))}const o=t.findFirstNeighbor(this,this.rightNode.getId(),!1);if(o&&W_(o.angle,this.angle)){const l=this.thickness,c=this.length+100,u=this.thickness,h=this.rightNode===o.rightNode?0:o.thickness,d=-100,f=h,p=o.length+100,x=h,v=this.toGlobal({x:-100,y:l}),y=this.toGlobal({x:c,y:u}),w=o.toGlobal({x:d,y:f}),_=o.toGlobal({x:p,y:x});this.pointB=this.toLocal(y_(v,y,w,_))}this.updateDebugHelpers(),this.updateCorners()}updateDebugHelpers(){this.dotHelperA.clear(),this.dotHelperA.zIndex=1001,this.dotHelperA.circle(this.pointA.x,this.pointA.y,3),this.dotHelperA.stroke({width:1,color:"red"}),this.dotHelperB.clear(),this.dotHelperB.zIndex=1001,this.dotHelperB.circle(this.pointB.x,this.pointB.y,3),this.dotHelperB.stroke({width:1,color:"green"}),this.dotHelperC.clear(),this.dotHelperC.zIndex=1001,this.dotHelperC.circle(this.pointC.x,this.pointC.y,3),this.dotHelperC.stroke({width:1,color:"blue"}),this.dotHelperD.clear(),this.dotHelperD.zIndex=1001,this.dotHelperD.circle(this.pointD.x,this.pointD.y,3),this.dotHelperD.stroke({width:1,color:"purple"})}onMouseOver(t){const i=Lt.getState(),r=t.getLocalPosition(this);switch(i.activeTool){case mt.FurnitureAddDoor:case mt.FurnitureAddWindow:this.removeTempFurniture();const s=i.activeTool===mt.FurnitureAddDoor?pa:ma;this.tempFurniture=new s({parent:this}),this.tempFurniture.setTemporality(!0),this.addChild(this.tempFurniture),this.updateFurniturePosition(r);break;case mt.WallAdd:const o=this.thickness,a=new iC(o);a.rotation=Math.PI*.5,this.addChild(a),this.leftNode.setVisibility(!0),this.rightNode.setVisibility(!0);break}}onMouseOut(){if(this.dragging)return;switch(this.fill({color:b4}),Lt.getState().activeTool){case mt.FurnitureAddDoor:case mt.FurnitureAddWindow:this.removeTempFurniture();break;case mt.WallAdd:for(const i of this.children)i instanceof iC&&(i.visible=!1);this.leftNode.setVisibility(!1),this.rightNode.setVisibility(!1);break}}setType(t){this.type!==t&&(this.type=t,this.applySettings(),this.drawLine(),this.updateChildren())}updateChildren(){for(const t of this.children)(t instanceof pa||t instanceof ma)&&(t.setPosition({x:null,y:null}),t.setStroke(),t.setBackground())}getNodesCords(){return[this.leftNode.x,this.leftNode.y,this.rightNode.x,this.rightNode.y]}drawWallNodesPlaceholders(){var i,r;(i=this.leftNodePlaceholder)==null||i.clear(),(r=this.rightNodePlaceholder)==null||r.clear(),[{x:0,y:this.thickness/2,el:this.leftNodePlaceholder,node:this.leftNode},{x:this.length,y:this.thickness/2,el:this.rightNodePlaceholder,node:this.rightNode}].forEach((s,o)=>{const a=o,l=new Vn;l.circle(s.x,s.y,5),l.fill("transparent"),l.eventMode="static",l.on("pointerdown",()=>{switch(Lt.getState().activeTool){case mt.WallAdd:Wd.Instance.step(a?this.rightNode:this.leftNode);break}}),s.el=l,a&&(this.rightNodePlaceholder=l,this.addChild(this.rightNodePlaceholder)),a||(this.leftNodePlaceholder=l,this.addChild(this.leftNodePlaceholder))})}drawLine(){const t=this.leftNode.x,i=this.leftNode.y,r=this.rightNode.x,s=this.rightNode.y;this.length=Math.floor(Fu(t,r,i,s));const o=this.getMinimumWallLength();if(this.length<o){this.leftNode.dragging=!1,this.rightNode.dragging=!1,this.leftNode.setToPrevPosition(),this.rightNode.setToPrevPosition(),this.leftNode.setStyles({}),this.rightNode.setStyles({}),Wr.clean(),Wr.show({title:"🚪 Za krótka ściana",message:"Nie można zmniejszyć ściany. Usuń drzwi.",color:"red"}),this.drawLine();return}this.setStyles();let a=Math.atan2(s-i,r-t);a*=180/Math.PI,a<0&&(a=360+a),this.position.set(t,i),this.angle=a,this.leftNode.angle=a,this.rightNode.angle=a,this.updateMeasureLabels(),this.drawWallNodesPlaceholders()}getMinimumWallLength(){let t=0;return this.children.forEach(i=>{if(i instanceof pa||i instanceof ma){const r=i.position.x+i.length;r>t&&(t=r)}}),parseInt(t.toString())}updateMeasureLabels(){var l,c,u,h;const t=((l=this.pointA)==null?void 0:l.x)||0,i=((c=this.pointB)==null?void 0:c.x)||0,r=((u=this.pointC)==null?void 0:u.x)||0,s=((h=this.pointD)==null?void 0:h.x)||0,o=Math.abs(s-r);this.measureLabelTop.update({length:o,angle:this.angle,startX:r,endX:s,offsetY:-5,thickness:this.thickness});const a=Math.abs(i-t);this.measureLabelBottom.update({thickness:this.thickness,length:a,angle:this.angle,startX:t,endX:i,offsetY:this.thickness+20})}onMouseMove(t){if(!this.dragging)return;const i=Lt.getState().snap,r=t.global;let s=(r.x-this.mouseStartPoint.x)/jr.scale.x,o=(r.y-this.mouseStartPoint.y)/jr.scale.y;i&&(s=Tl(s),o=Tl(o)),this.leftNode.setPosition(this.x1+s,this.y1+o),this.rightNode.setPosition(this.x2+s,this.y2+o),this.drawLine()}blur(){this.focused=!1,this.leftNode.setVisibility(!1),this.rightNode.setVisibility(!1),this.measureLabelTop.hide(),this.measureLabelBottom.hide(),this.zIndex=S4,this.updateCorners()}focus(){this.focused=!0,this.leftNode.setVisibility(!0),this.rightNode.setVisibility(!0),this.measureLabelTop.show(),this.measureLabelBottom.show(),this.zIndex=age,this.updateCorners()}onMouseClick(t){const i=Lt.getState(),r={x:$m(t.global.x),y:Xm(t.global.y)},s=t.getLocalPosition(this);for(const o of this.children);switch(i.activeTool){case mt.Edit:this.parent.blurAllElements(this.uuid),this.focus(),i.setFocusedElement(this);break;case mt.FurnitureAddDoor:case mt.FurnitureAddWindow:if(this.tempFurniture){const l=i.activeTool===mt.FurnitureAddDoor,c=l?this.tempFurniture:this.tempFurniture;if(!c.isValid){Wr.clean();const f=l?"🚪":"🪟",p=l?"Nie można dodać drzwi, które kolidują z innymi elementami":"Nie można dodać okna, które koliduje z innymi elementami";Wr.show({title:`${f} Niewłaściwa pozycja`,message:p,color:"red"});return}const{x:u,y:h}=c.position;new nge(c,this,{x:u,y:h}).execute(),this.removeTempFurniture()}break;case mt.WallAdd:if(this.isOccupiedSpot(s.x))Wr.show({title:"Nie można stworzyć ściany",message:"Nie można stworzyć ściany w miejscu w którym znajdują się inne elementy.",color:"red"});else{if(this.children.some(u=>u instanceof pa||u instanceof ma)){Wr.show({title:"Błędna pozycja",message:"Nie można podzielić ściany na której znajdują się inne elementy.",color:"red"});return}new AV(this,rge(r,[{x:this.leftNode.x,y:this.leftNode.y},{x:this.rightNode.x,y:this.rightNode.y}])).execute()}break}}onMouseDown(t){if(t.stopPropagation(),Lt.getState().activeMode!==bs.Edit)return;switch(this.clickStartTime=Date.now(),Lt.getState().activeTool){case mt.Edit:if(this.dragging)return;this.dragging=!0,this.mouseStartPoint.x=t.global.x,this.mouseStartPoint.y=t.global.y,this.x1=this.leftNode.position.x,this.y1=this.leftNode.position.y,this.x2=this.rightNode.position.x,this.y2=this.rightNode.position.y;break;case mt.Remove:this.delete();break;case mt.FurnitureAddWindow:break}}onMouseUp(t){Date.now()-this.clickStartTime<200&&this.onMouseClick(t),this.dragging=!1}delete(){new Hre(this).execute(),new b2(this.leftNode.getId()).execute(),new b2(this.rightNode.getId()).execute()}setLength(t){const[i,r,s,o]=this.getNodesCords(),a=s-i,l=o-r,c=Fu(i,s,r,o),u=a/c,h=l/c,d=i+u*t,f=r+h*t;this.rightNode.setPosition(d,f),this.drawLine()}getXWithinWall(t){var h;const i=((h=this.tempFurniture)==null?void 0:h.length)||0;let r=t;const s=this.length,o=0,a=t+i,l=t,c=a>s-o,u=l<o;return c?r=s-o-i:u&&(r=o),r}isOccupiedSpot(t){var l;const i=((l=this.tempFurniture)==null?void 0:l.length)||0;if(i>this.length-Hy)return!0;const r=t,s=t+i;let o=!1;const a=[];this.children.forEach(c=>{if((c instanceof pa||c instanceof ma)&&!c.isTemporary){const u=c.position.x;a.push({start:u,end:u+c.length})}}),a.sort((c,u)=>c.start-u.start);for(const{start:c,end:u}of a){if(s>=c&&r<=u){o=!0;break}o=!1}return o}getPossibleCords({x:t,y:i}){var a,l;const r={x:t,y:i},s=this.getXWithinWall(r.x),o=(a=this.tempFurniture)==null?void 0:a.isCollide();return(l=this.tempFurniture)==null||l.setValidity(!o),r.x=s,r}updateFurniturePosition(t){var l,c;const i=((l=this.tempFurniture)==null?void 0:l.length)||0,r=this.thickness,o={x:t.x-i/2,y:0+r-12},a=this.getPossibleCords(o);(c=this.tempFurniture)==null||c.setPosition(a)}onWallMouseMove(t){const i=Lt.getState(),r=t.getLocalPosition(this);switch(i.activeTool){case mt.FurnitureAddDoor:case mt.FurnitureAddWindow:this.tempFurniture&&this.updateFurniturePosition(r);break;case mt.WallAdd:const s=this.isOccupiedSpot(r.x);for(const o of this.children)if(o instanceof iC){const a=this.children.some(l=>l instanceof pa||l instanceof ma);o.setStroke(s?"red":a?"orange":void 0),o.setPosition({x:r.x,y:0})}break}}removeTempFurniture(){this.removeChild(this.tempFurniture),this.tempFurniture=null}}class lge extends dn{constructor(t,i,r){super();ve(this,"dragging");ve(this,"id");ve(this,"dot",new Vn);ve(this,"mouseStartPoint");ve(this,"type",Vs.Partition);ve(this,"size",20);ve(this,"prevPosition",{x:0,y:0});ve(this,"isMouseOver",!1);ve(this,"background");this.eventMode="none",this.id=r,this.setSettings(),this.setStyles({}),this.mouseStartPoint={x:0,y:0},this.prevPosition={x:t,y:i},this.position.set(t,i),this.zIndex=999,this.visible=!1,this.watchStoreChanges(),this.on("pointerdown",this.onMouseDown),this.on("globalpointermove",this.onMouseMove),this.on("pointerup",this.onMouseUp),this.on("pointerupoutside",this.onMouseUp),this.on("pointerover",this.onMouseOver),this.on("pointerout",this.onPointerOut)}getId(){return this.id}watchStoreChanges(){Lt.subscribe(()=>{this.checkVisibility(),this.checkEventMode()})}checkVisibility(){const t=Lt.getState().focusedElement;if(!t)return this.hide();if(t instanceof cg)return this.hide();if(t instanceof O0){if(t.leftNode===this||t.rightNode===this)return;this.hide();return}this.show()}checkEventMode(){switch(Lt.getState().activeTool){case mt.Edit:this.eventMode="static";break;default:this.eventMode="none";break}}show(){this.visible=!0}hide(){this.visible=!1}setSettings(){const i=Lt.getState().activeToolSettings;this.type=(i==null?void 0:i.wallType)||G$,this.size=10}setVisibility(t){if(this.isMouseOver)return this.visible=!0;this.visible=t}setStyles({color:t=2236962}){this.dot.clear(),this.dot.circle(0,0,this.size/2),this.dot.fill(this.dragging?"#1C7ED6":t),this.addChild(this.dot)}onMouseOver(){if(this.isMouseOver=!0,!!this.isEditMode())switch(Lt.getState().activeTool){case mt.WallAdd:break;default:this.setStyles({color:"#1C7ED6"});break}}onPointerOut(){this.isMouseOver=!1,this.setStyles({})}onMouseDown(t){switch(t.stopPropagation(),Lt.getState().activeTool){case mt.Edit:this.dragging=!0,this.mouseStartPoint.x=t.global.x,this.mouseStartPoint.y=t.global.y;break;case mt.Remove:this.delete();break;case mt.WallAdd:Wd.Instance.step(this);break}}onMouseMove(t){if(!this.dragging)return;const i=Lt.getState().snap;this.prevPosition={x:this.x,y:this.y};const r=t.global;let s=r.x/jr.scale.x+jr.corner.x,o=r.y/jr.scale.y+jr.corner.y;i&&(s=Tl(s),o=Tl(o)),this.x=s,this.y=o,cs.Instance.redrawWalls()}setToPrevPosition(){this.x=this.prevPosition.x,this.y=this.prevPosition.y}setPosition(t,i,r=!0){this.prevPosition={x:this.x,y:this.y},this.x=t,this.y=i,r&&cs.Instance.redrawWalls()}onMouseUp(){this.dragging=!1}isEditMode(){return Lt.getState().activeMode===bs.Edit}delete(){new b2(this.id).execute()}serialize(){let t;return t={id:this.id,x:this.x,y:this.y},t}}const ic=class ic extends dn{constructor(){super();ve(this,"wallNodes");ve(this,"wallNodeLinks");ve(this,"walls");this.sortableChildren=!0,this.walls=[],this.wallNodes=new Map,this.wallNodeLinks=new Map,this.drawWalls(),this.on("mousemove",this.drawWalls)}setId(t){ic.wallNodeId=t}getWallNodeId(){return ic.wallNodeId}contains(t){return this.wallNodes.has(t)}getWalls(){return this.walls}getWallNodes(){return this.wallNodes}getWallNodeLinks(){return this.wallNodeLinks}getWallNodeLinksWithUuid(){const t=this.getWalls();return Array.from(this.getWallNodeLinks().entries()).reduce((s,[o,a])=>{const l=a.map(c=>{const u=t.find(({leftNode:h,rightNode:d})=>{const f=h.getId()===o||d.getId()===o,p=h.getId()===c||d.getId()===c;return f&&p});if(!u)throw new Error("Wall not found");return{id:c,wallUuid:u.uuid||null,thickness:u.thickness||null}});return s.push([o,l]),s},[])}load(t,i){const r=[];for(const s of t)this.addNode(s.x,s.y,s.id);for(const[s,o]of i)for(const a of o){const{id:l,wallUuid:c,thickness:u}=a;this.addWall(l,s,{uuid:c,thickness:u}),r.push(l),r.push(s)}ic.wallNodeId=r.length?Math.max(...r):0}reset(){var t;for(const i of Array.from(this.wallNodes.keys()))(t=this.wallNodes.get(i))==null||t.destroy(!0);this.wallNodes.clear();for(const i of this.walls)i.destroy(!0);this.walls=[],this.wallNodeLinks.clear(),ic.wallNodeId=0}remove(t){let i=!0;const r=this.wallNodeLinks.get(t);if(r&&r.length>0)i=!1;else for(const s of Array.from(this.wallNodeLinks.keys()))for(const o of this.wallNodeLinks.get(s))o==t&&(i=!1);i&&(this.wallNodes.get(t).destroy(!0),this.wallNodes.delete(t))}getNewNodeId(){return ic.wallNodeId+=1,ic.wallNodeId}addNode(t,i,r){const s=r||this.getNewNodeId();return this.wallNodes.set(s,new lge(t,i,s)),this.wallNodeLinks.set(s,[]),this.addChild(this.wallNodes.get(s)),this.wallNodes.get(s)}addWall(t,i,r){var l,c;if(t===i||this.wallNodeLinks.has(t)&&((l=this.wallNodeLinks.get(t))!=null&&l.includes(i)))return;(c=this.wallNodeLinks.get(t))==null||c.push(i);const s=this.wallNodes.get(t),o=this.wallNodes.get(i),a=new O0(s,o,r);return this.walls.push(a),this.addChild(a),this.drawWalls(),a}removeWall(t,i){const r=this.wallNodeLinks.get(t).indexOf(i);r!=-1&&(this.wallNodeLinks.get(t).splice(r,1),this.drawWalls());let s=-1;for(let o=0;o<this.walls.length;o++){const a=this.walls[o];if(a.leftNode.getId()==t&&a.rightNode.getId()==i){s=o;break}}s!=-1&&(this.removeChild(this.walls[s]),this.walls.splice(s,1))}getWall(t,i){if(!this.wallNodeLinks.get(t)||!this.wallNodeLinks.get(t).includes(i))return null;for(const r of this.walls)if(r.leftNode.getId()===t&&r.rightNode.getId()===i)return r;return null}getWallsByNodesIds(t){const i=[];for(const r of t)for(const s of this.walls)(s.leftNode.getId()===r||s.rightNode.getId()===r)&&i.push(s);return i}getWallByUuid(t){return this.walls.find(i=>i.uuid===t)}findAllNeighbors(t,i){return this.getWallsByNodesIds([i]).filter(r=>r.uuid!==t)}findFirstNeighbor(t,i,r=!0){var c;const s=this.getWallsByNodesIds([i]),o=t.uuid;if(!t)return null;const a=t.leftNode.getId()===i;return((c=s.filter(u=>u.uuid!==o).map(u=>{const h=u.leftNode.getId()===i;let d=a?t.angle:(t.angle+180)%360,p=(h?u.angle:(u.angle+180)%360)-d;return p<0&&(p+=360),{wall:u,angle:p}}).sort((u,h)=>r?u.angle-h.angle:h.angle-u.angle)[0])==null?void 0:c.wall)||null}drawWalls(){this.walls.forEach(t=>{t.drawLine()})}blurAllElements(t){this.walls.forEach(i=>{i.uuid!==t&&i.blur(),i.children.forEach(r=>{r instanceof cg&&r.blur()})})}};ve(ic,"wallNodeId",0);let oS=ic;class V_ extends dn{constructor(t,i){super();ve(this,"furnitureArray");ve(this,"wallNodeSequence");if(this.furnitureArray=new Map,this.wallNodeSequence=new oS,this.addChild(this.wallNodeSequence),this.sortableChildren=!0,t){this.applyFloorData(t);return}}applyFloorData(t){this.wallNodeSequence.load(t.wallNodes,t.wallNodeLinks);for(const i of t.furnitureArray){if(i.element==="door"){const r=this.wallNodeSequence.getWalls().find(o=>o.uuid===i.wallUuid);if(!r)throw Error("Parent wall for furniture not found, but should.");const s=new pa({uuid:i.uuid,position:{x:i.x,y:i.y},parent:r,length:i.length,type:i.type,orientation:i.orientation});this.furnitureArray.set(i.uuid,s),r.addChild(s)}if(i.element==="window"){const r=this.wallNodeSequence.getWalls().find(o=>o.uuid===i.wallUuid);if(!r)throw Error("Parent wall for furniture not found, but should.");const s=new ma({uuid:i.uuid,position:{x:i.x,y:i.y},parent:r,length:i.length,height:i.height,bottom:i.bottom});this.furnitureArray.set(i.uuid,s),r.addChild(s)}}}setLabelVisibility(t=!0){}getFurniture(){}reset(){for(const t of this.furnitureArray.keys())this.removeFurniture(t);this.wallNodeSequence.reset(),this.furnitureArray=new Map}getWallNodeSequence(){return this.wallNodeSequence}shiftCoordinatesToOrigin(t){if(!t[0])return[];const i=t[0].a.x,r=t[0].a.y;t.forEach(a=>{a.a.x=a.a.x-i,a.a.y=a.a.y-r,a.b.x=a.b.x-i,a.b.y=a.b.y-r});const s=Math.min(...t.map(a=>Math.min(a.a.x,a.b.x))),o=Math.min(...t.map(a=>Math.min(a.a.y,a.b.y)));if(s<0||o<0){const a=Math.abs(s),l=Math.abs(o);t.forEach(c=>{c.a.x+=a,c.a.y+=l,c.b.x+=a,c.b.y+=l})}return t}getPlan(t=!1){const i=new RF,r=this.wallNodeSequence.getWalls(),s=[],o=[];for(const l of this.furnitureArray.values())o.push(l.serialize());i.furnitureArray=o;for(const l of r.values()){const{leftNode:c,rightNode:u}=l,h={a:{x:c.x/100,y:c.y/100},b:{x:u.x/100,y:u.y/100},thickness:l.thickness};t&&(h.furnitures=i.furnitureArray.filter(d=>d.wallUuid===l.uuid,[]),h.length=l.length),s.push(h)}return i.wallNodeLinks=Array.from(this.wallNodeSequence.getWallNodeLinks().entries()),{wallNodes:this.shiftCoordinatesToOrigin(s)}}serialize(){const t=new RF,i=this.wallNodeSequence.getWallNodes();for(const s of i.values())t.wallNodes.push(s.serialize());t.wallNodeLinks=this.wallNodeSequence.getWallNodeLinksWithUuid();const r=[];for(const s of this.furnitureArray.values())r.push(s.serialize());return t.furnitureArray=r,t}setFurniturePosition(t,i,r,s){}addFurniture({object:t,attachedTo:i,position:r}){let s=null;if(t instanceof pa&&(s=new pa({uuid:t.uuid,position:r,parent:i})),t instanceof ma&&(s=new ma({uuid:t.uuid,position:r,parent:i})),!s)throw Error("Element is not Door, nor Window");this.furnitureArray.set(t.uuid,s),i.addChild(s)}removeFurniture(t){const i=this.furnitureArray.get(t);i&&(i.parent.removeChild(i),this.furnitureArray.delete(t))}getObject(t){}redrawWalls(){this.wallNodeSequence.drawWalls()}removeWallNode(t){this.wallNodeSequence.contains(t)&&this.wallNodeSequence.remove(t)}removeWall(t){const i=t.leftNode.getId(),r=t.rightNode.getId();for(const s of t.children)(s instanceof pa||s instanceof ma)&&this.removeFurniture(s.uuid);this.wallNodeSequence.contains(i)&&this.wallNodeSequence.removeWall(i,r)}addNode(t,i,r){return this.wallNodeSequence.addNode(t,i,r)}addNodeToWall(t,i){const r=t.leftNode.getId(),s=t.rightNode.getId();if(Math.abs(Fu(i.x,t.leftNode.x,i.y,t.leftNode.y))<.2*Fo||Math.abs(Fu(i.x,t.rightNode.x,i.y,t.rightNode.y))<.2*Fo)return;const o={type:t.type};this.removeWall(t);const a=this.wallNodeSequence.addNode(i.x,i.y);if(!a)return a;const l=a.getId();return this.wallNodeSequence.addWall(r,l,o),this.wallNodeSequence.addWall(l,s,o),a}}class rC{constructor(){ve(this,"floors");ve(this,"furnitureId");ve(this,"wallNodeId");this.floors=[]}}class M4{serialize(e,t){const i=new rC;for(const s of e){const o=s.serialize();i.floors.push(o)}return i}serializePlanForExport(e){const t=new rC;for(const i of e){const r=i.getPlan();t.floors.push(r)}return t.floors[0]}serializePlanForModel(e){const t=new rC;for(const i of e){const r=i.getPlan(!0);t.floors.push(r)}return t.floors[0]}}class cs extends dn{constructor(){super();ve(this,"floors");ve(this,"visibleLabels",!0);ve(this,"serializer");ve(this,"furnitureId",0);ve(this,"windowFurniture");ve(this,"actions");ve(this,"currentFloor",0);this.floors=[],this.actions=[],this.floors.push(new V_),this.addChild(this.floors[0]),this.serializer=new M4}static get Instance(){return this.instance||(this.instance=new this)}get CurrentFloor(){return this.currentFloor}set CurrentFloor(t){this.currentFloor=t,Lt.setState({floor:this.currentFloor})}toggleLabels(){this.visibleLabels=!this.visibleLabels,this.floors[this.currentFloor].setLabelVisibility(this.visibleLabels)}changeFloor(t){this.removeChild(this.floors[this.currentFloor]);const i=this.currentFloor;this.CurrentFloor+=t,this.floors[this.currentFloor]==null&&(this.floors[this.currentFloor]=new V_(void 0,this.floors[i])),this.floors[this.currentFloor].setLabelVisibility(this.visibleLabels),this.addChild(this.floors[this.currentFloor])}save(){return this.serializer.serialize(this.floors,this.furnitureId)}getPlanForModel(){return this.serializer.serializePlanForModel(this.floors)}load(t){const i=JSON.parse(t);this.reset();for(const r of i.floors){const s=new V_(r);this.floors.push(s)}this.addChild(this.floors[this.currentFloor])}removeFloor(){if(this.floors.length<2){vl({title:"Floor removal not permitted",message:"This floor is the only floor in the plan. You cannot have a plan with no floors. Create a new floor before deleting.",color:"red"});return}const t=this.currentFloor;this.changeFloor(-1),this.floors[t].reset(),this.floors.splice(t,1),this.changeFloor(1)}restart(){this.reset(),this.actions=[],this.floors.push(new V_),this.addChild(this.floors[0]),this.serializer=new M4}reset(){for(const t of this.floors)t.reset();this.floors=[],this.currentFloor=0,this.furnitureId=0}addFurniture(t,i,r){this.floors[this.currentFloor].addFurniture({object:t,attachedTo:i,position:r})}setFurniturePosition(t,i,r,s){this.floors[this.currentFloor].setFurniturePosition(t,i,r,s)}removeFurniture(t){this.floors[this.currentFloor].removeFurniture(t)}getObject(t){return this.floors[this.currentFloor].getObject(t)}redrawWalls(){this.floors[this.currentFloor].redrawWalls()}removeWallNode(t){this.floors[this.currentFloor].removeWallNode(t)}removeWall(t){this.floors[this.currentFloor].removeWall(t)}addNodeToWall(t,i){return this.floors[this.currentFloor].addNodeToWall(t,i)}addNode(t,i){return this.floors[this.currentFloor].addNode(t,i)}getWallNodeSeq(){return this.floors[this.currentFloor].getWallNodeSequence()}getFurniture(){return this.floors[this.currentFloor].getFurniture()}}ve(cs,"instance");var wt={},DR={exports:{}};(function(n,e){(function(t,i){var r="1.0.39",s="",o="?",a="function",l="undefined",c="object",u="string",h="major",d="model",f="name",p="type",x="vendor",v="version",y="architecture",w="console",_="mobile",b="tablet",E="smarttv",M="wearable",C="embedded",P=500,T="Amazon",I="Apple",U="ASUS",j="BlackBerry",B="Browser",z="Chrome",$="Edge",H="Firefox",Z="Google",O="Huawei",W="LG",D="Microsoft",Y="Motorola",Q="Opera",re="Samsung",ce="Sharp",oe="Sony",he="Xiaomi",Re="Zebra",Oe="Facebook",Ve="Chromium OS",Je="Mac OS",Fe=" Browser",J=function(_e,xe){var Me={};for(var je in _e)xe[je]&&xe[je].length%2===0?Me[je]=xe[je].concat(_e[je]):Me[je]=_e[je];return Me},ge=function(_e){for(var xe={},Me=0;Me<_e.length;Me++)xe[_e[Me].toUpperCase()]=_e[Me];return xe},de=function(_e,xe){return typeof _e===u?Ae(xe).indexOf(Ae(_e))!==-1:!1},Ae=function(_e){return _e.toLowerCase()},Ie=function(_e){return typeof _e===u?_e.replace(/[^\d\.]/g,s).split(".")[0]:i},me=function(_e,xe){if(typeof _e===u)return _e=_e.replace(/^\s\s*/,s),typeof xe===l?_e:_e.substring(0,P)},ye=function(_e,xe){for(var Me=0,je,qe,Ne,Qe,$e,it;Me<xe.length&&!$e;){var se=xe[Me],Se=xe[Me+1];for(je=qe=0;je<se.length&&!$e&&se[je];)if($e=se[je++].exec(_e),$e)for(Ne=0;Ne<Se.length;Ne++)it=$e[++qe],Qe=Se[Ne],typeof Qe===c&&Qe.length>0?Qe.length===2?typeof Qe[1]==a?this[Qe[0]]=Qe[1].call(this,it):this[Qe[0]]=Qe[1]:Qe.length===3?typeof Qe[1]===a&&!(Qe[1].exec&&Qe[1].test)?this[Qe[0]]=it?Qe[1].call(this,it,Qe[2]):i:this[Qe[0]]=it?it.replace(Qe[1],Qe[2]):i:Qe.length===4&&(this[Qe[0]]=it?Qe[3].call(this,it.replace(Qe[1],Qe[2])):i):this[Qe]=it||i;Me+=2}},ke=function(_e,xe){for(var Me in xe)if(typeof xe[Me]===c&&xe[Me].length>0){for(var je=0;je<xe[Me].length;je++)if(de(xe[Me][je],_e))return Me===o?i:Me}else if(de(xe[Me],_e))return Me===o?i:Me;return xe.hasOwnProperty("*")?xe["*"]:_e},Xe={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Le={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ye={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[f,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[f,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[f,v],[/opios[\/ ]+([\w\.]+)/i],[v,[f,Q+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[v,[f,Q+" GX"]],[/\bopr\/([\w\.]+)/i],[v,[f,Q]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[v,[f,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[f,v],[/quark(?:pc)?\/([-\w\.]+)/i],[v,[f,"Quark"]],[/\bddg\/([\w\.]+)/i],[v,[f,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[f,"UC"+B]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[v,[f,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[f,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[f,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[v,[f,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[v,[f,"Smart Lenovo "+B]],[/(avast|avg)\/([\w\.]+)/i],[[f,/(.+)/,"$1 Secure "+B],v],[/\bfocus\/([\w\.]+)/i],[v,[f,H+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[f,Q+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[f,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[f,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[f,Q+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[f,"MIUI "+B]],[/fxios\/([-\w\.]+)/i],[v,[f,H]],[/\bqihu|(qi?ho?o?|360)browser/i],[[f,"360"+Fe]],[/\b(qq)\/([\w\.]+)/i],[[f,/(.+)/,"$1Browser"],v],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[f,/(.+)/,"$1"+Fe],v],[/samsungbrowser\/([\w\.]+)/i],[v,[f,re+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],v],[/metasr[\/ ]?([\d\.]+)/i],[v,[f,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[f,"Sogou Mobile"],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[f,v],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[f],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[f,Oe],v],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[f,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[f,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[v,[f,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[f,z+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[f,z+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[f,"Android "+B]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[f,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[f,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,f],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[f,[v,ke,Xe]],[/(webkit|khtml)\/([\w\.]+)/i],[f,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[f,"Netscape"],v],[/(wolvic)\/([\w\.]+)/i],[f,v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[f,H+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[f,[v,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[f,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[y,"amd64"]],[/(ia32(?=;))/i],[[y,Ae]],[/((?:i[346]|x)86)[;\)]/i],[[y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[y,/ower/,s,Ae]],[/(sun4\w)[;\)]/i],[[y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[y,Ae]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[x,re],[p,b]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[d,[x,re],[p,_]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[x,I],[p,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[x,I],[p,b]],[/(macintosh);/i],[d,[x,I]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[x,ce],[p,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[x,O],[p,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[x,O],[p,_]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[d,/_/g," "],[x,he],[p,_]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[x,he],[p,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[x,"OPPO"],[p,_]],[/\b(opd2\d{3}a?) bui/i],[d,[x,"OPPO"],[p,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[x,"Vivo"],[p,_]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[x,"Realme"],[p,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[x,Y],[p,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[x,Y],[p,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[x,W],[p,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[x,W],[p,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[x,"Lenovo"],[p,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[x,"Nokia"],[p,_]],[/(pixel c)\b/i],[d,[x,Z],[p,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[x,Z],[p,_]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[x,oe],[p,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[x,oe],[p,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[x,"OnePlus"],[p,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[x,T],[p,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[x,T],[p,_]],[/(playbook);[-\w\),; ]+(rim)/i],[d,x,[p,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[x,j],[p,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[x,U],[p,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[x,U],[p,_]],[/(nexus 9)/i],[d,[x,"HTC"],[p,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[x,[d,/_/g," "],[p,_]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[d,[x,"TCL"],[p,b]],[/(itel) ((\w+))/i],[[x,Ae],d,[p,ke,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[x,"Acer"],[p,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[x,"Meizu"],[p,_]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[x,"Ulefone"],[p,_]],[/droid.+; (a(?:015|06[35]|142p?))/i],[d,[x,"Nothing"],[p,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[x,d,[p,_]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[x,d,[p,b]],[/(surface duo)/i],[d,[x,D],[p,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[x,"Fairphone"],[p,_]],[/(u304aa)/i],[d,[x,"AT&T"],[p,_]],[/\bsie-(\w*)/i],[d,[x,"Siemens"],[p,_]],[/\b(rct\w+) b/i],[d,[x,"RCA"],[p,b]],[/\b(venue[\d ]{2,7}) b/i],[d,[x,"Dell"],[p,b]],[/\b(q(?:mv|ta)\w+) b/i],[d,[x,"Verizon"],[p,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[x,"Barnes & Noble"],[p,b]],[/\b(tm\d{3}\w+) b/i],[d,[x,"NuVision"],[p,b]],[/\b(k88) b/i],[d,[x,"ZTE"],[p,b]],[/\b(nx\d{3}j) b/i],[d,[x,"ZTE"],[p,_]],[/\b(gen\d{3}) b.+49h/i],[d,[x,"Swiss"],[p,_]],[/\b(zur\d{3}) b/i],[d,[x,"Swiss"],[p,b]],[/\b((zeki)?tb.*\b) b/i],[d,[x,"Zeki"],[p,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[x,"Dragon Touch"],d,[p,b]],[/\b(ns-?\w{0,9}) b/i],[d,[x,"Insignia"],[p,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[x,"NextBook"],[p,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[x,"Voice"],d,[p,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[x,"LvTel"],d,[p,_]],[/\b(ph-1) /i],[d,[x,"Essential"],[p,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[x,"Envizen"],[p,b]],[/\b(trio[-\w\. ]+) b/i],[d,[x,"MachSpeed"],[p,b]],[/\btu_(1491) b/i],[d,[x,"Rotor"],[p,b]],[/(shield[\w ]+) b/i],[d,[x,"Nvidia"],[p,b]],[/(sprint) (\w+)/i],[x,d,[p,_]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[x,D],[p,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[x,Re],[p,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[x,Re],[p,_]],[/smart-tv.+(samsung)/i],[x,[p,E]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[x,re],[p,E]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[x,W],[p,E]],[/(apple) ?tv/i],[x,[d,I+" TV"],[p,E]],[/crkey/i],[[d,z+"cast"],[x,Z],[p,E]],[/droid.+aft(\w+)( bui|\))/i],[d,[x,T],[p,E]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[x,ce],[p,E]],[/(bravia[\w ]+)( bui|\))/i],[d,[x,oe],[p,E]],[/(mitv-\w{5}) bui/i],[d,[x,he],[p,E]],[/Hbbtv.*(technisat) (.*);/i],[x,d,[p,E]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[x,me],[d,me],[p,E]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,E]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[x,d,[p,w]],[/droid.+; (shield) bui/i],[d,[x,"Nvidia"],[p,w]],[/(playstation [345portablevi]+)/i],[d,[x,oe],[p,w]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[x,D],[p,w]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[d,[x,re],[p,M]],[/((pebble))app/i],[x,d,[p,M]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[x,I],[p,M]],[/droid.+; (glass) \d/i],[d,[x,Z],[p,M]],[/droid.+; (wt63?0{2,3})\)/i],[d,[x,Re],[p,M]],[/(quest( \d| pro)?)/i],[d,[x,Oe],[p,M]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[x,[p,C]],[/(aeobc)\b/i],[d,[x,T],[p,C]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[d,[p,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[p,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,_]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[x,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[f,$+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[f,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,f]],os:[[/microsoft (windows) (vista|xp)/i],[f,v],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[f,[v,ke,Le]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[v,ke,Le],[f,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[f,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[f,Je],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,f],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[f,v],[/\(bb(10);/i],[v,[f,j]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[f,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[f,H+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[f,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[v,[f,"watchOS"]],[/crkey\/([\d\.]+)/i],[v,[f,z+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[f,Ve],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[f,v],[/(sunos) ?([\w\.\d]*)/i],[[f,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[f,v]]},q=function(_e,xe){if(typeof _e===c&&(xe=_e,_e=i),!(this instanceof q))return new q(_e,xe).getResult();var Me=typeof t!==l&&t.navigator?t.navigator:i,je=_e||(Me&&Me.userAgent?Me.userAgent:s),qe=Me&&Me.userAgentData?Me.userAgentData:i,Ne=xe?J(Ye,xe):Ye,Qe=Me&&Me.userAgent==je;return this.getBrowser=function(){var $e={};return $e[f]=i,$e[v]=i,ye.call($e,je,Ne.browser),$e[h]=Ie($e[v]),Qe&&Me&&Me.brave&&typeof Me.brave.isBrave==a&&($e[f]="Brave"),$e},this.getCPU=function(){var $e={};return $e[y]=i,ye.call($e,je,Ne.cpu),$e},this.getDevice=function(){var $e={};return $e[x]=i,$e[d]=i,$e[p]=i,ye.call($e,je,Ne.device),Qe&&!$e[p]&&qe&&qe.mobile&&($e[p]=_),Qe&&$e[d]=="Macintosh"&&Me&&typeof Me.standalone!==l&&Me.maxTouchPoints&&Me.maxTouchPoints>2&&($e[d]="iPad",$e[p]=b),$e},this.getEngine=function(){var $e={};return $e[f]=i,$e[v]=i,ye.call($e,je,Ne.engine),$e},this.getOS=function(){var $e={};return $e[f]=i,$e[v]=i,ye.call($e,je,Ne.os),Qe&&!$e[f]&&qe&&qe.platform&&qe.platform!="Unknown"&&($e[f]=qe.platform.replace(/chrome os/i,Ve).replace(/macos/i,Je)),$e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return je},this.setUA=function($e){return je=typeof $e===u&&$e.length>P?me($e,P):$e,this},this.setUA(je),this};q.VERSION=r,q.BROWSER=ge([f,v,h]),q.CPU=ge([y]),q.DEVICE=ge([d,x,p,w,_,E,b,M,C]),q.ENGINE=q.OS=ge([f,v]),n.exports&&(e=n.exports=q),e.UAParser=q;var X=typeof t!==l&&(t.jQuery||t.Zepto);if(X&&!X.ua){var pe=new q;X.ua=pe.getResult(),X.ua.get=function(){return pe.getUA()},X.ua.set=function(_e){pe.setUA(_e);var xe=pe.getResult();for(var Me in xe)X.ua[Me]=xe[Me]}}})(typeof window=="object"?window:ya)})(DR,DR.exports);var cge=DR.exports;Object.defineProperty(wt,"__esModule",{value:!0});function uge(n){return n&&typeof n=="object"&&"default"in n?n.default:n}var $r=R,Xn=uge($r),j$=cge,nh=new j$,Zr=nh.getBrowser(),hge=nh.getCPU(),ao=nh.getDevice(),Ck=nh.getEngine(),ih=nh.getOS(),D0=nh.getUA(),$$=function(e){return nh.setUA(e)},F0=function(e){if(e){var t=new j$(e);return{UA:t,browser:t.getBrowser(),cpu:t.getCPU(),device:t.getDevice(),engine:t.getEngine(),os:t.getOS(),ua:t.getUA(),setUserAgent:function(r){return t.setUA(r)}}}},X$=Object.freeze({ClientUAInstance:nh,browser:Zr,cpu:hge,device:ao,engine:Ck,os:ih,ua:D0,setUa:$$,parseUserAgent:F0});function T4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function dge(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?T4(Object(t),!0).forEach(function(i){gge(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):T4(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function lv(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lv=function(e){return typeof e}:lv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lv(n)}function fge(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function pge(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function mge(n,e,t){return e&&pge(n.prototype,e),n}function gge(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FR(){return FR=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},FR.apply(this,arguments)}function yge(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&BR(n,e)}function UR(n){return UR=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},UR(n)}function BR(n,e){return BR=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},BR(n,e)}function vge(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function qo(n,e){if(n==null)return{};var t=vge(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function $1(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function xge(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $1(n)}function _ge(n,e){return wge(n)||bge(n,e)||Sge(n,e)||Ege()}function wge(n){if(Array.isArray(n))return n}function bge(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function Sge(n,e){if(n){if(typeof n=="string")return A4(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A4(n,e)}}function A4(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Ege(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Hr={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},Ps={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},ug={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},Mge={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},Tge=function(e){switch(e){case Hr.Mobile:return{isMobile:!0};case Hr.Tablet:return{isTablet:!0};case Hr.SmartTv:return{isSmartTV:!0};case Hr.Console:return{isConsole:!0};case Hr.Wearable:return{isWearable:!0};case Hr.Browser:return{isBrowser:!0};case Hr.Embedded:return{isEmbedded:!0};default:return Mge}},Age=function(e){return $$(e)},Ut=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return e||t},Pk=function(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},Rk=function(e){var t=Pk();return t&&t.platform&&(t.platform.indexOf(e)!==-1||t.platform==="MacIntel"&&t.maxTouchPoints>1&&!window.MSStream)},Cge=function(e,t,i,r,s){return{isBrowser:e,browserMajorVersion:Ut(t.major),browserFullVersion:Ut(t.version),browserName:Ut(t.name),engineName:Ut(i.name),engineVersion:Ut(i.version),osName:Ut(r.name),osVersion:Ut(r.version),userAgent:Ut(s)}},C4=function(e,t,i,r){return dge({},e,{vendor:Ut(t.vendor),model:Ut(t.model),os:Ut(i.name),osVersion:Ut(i.version),ua:Ut(r)})},Pge=function(e,t,i,r){return{isSmartTV:e,engineName:Ut(t.name),engineVersion:Ut(t.version),osName:Ut(i.name),osVersion:Ut(i.version),userAgent:Ut(r)}},Rge=function(e,t,i,r){return{isConsole:e,engineName:Ut(t.name),engineVersion:Ut(t.version),osName:Ut(i.name),osVersion:Ut(i.version),userAgent:Ut(r)}},Ige=function(e,t,i,r){return{isWearable:e,engineName:Ut(t.name),engineVersion:Ut(t.version),osName:Ut(i.name),osVersion:Ut(i.version),userAgent:Ut(r)}},Lge=function(e,t,i,r,s){return{isEmbedded:e,vendor:Ut(t.vendor),model:Ut(t.model),engineName:Ut(i.name),engineVersion:Ut(i.version),osName:Ut(r.name),osVersion:Ut(r.version),userAgent:Ut(s)}};function Nge(n){var e=n?F0(n):X$,t=e.device,i=e.browser,r=e.engine,s=e.os,o=e.ua,a=Tge(t.type),l=a.isBrowser,c=a.isMobile,u=a.isTablet,h=a.isSmartTV,d=a.isConsole,f=a.isWearable,p=a.isEmbedded;if(l)return Cge(l,i,r,s,o);if(h)return Pge(h,r,s,o);if(d)return Rge(d,r,s,o);if(c||u)return C4(a,t,s,o);if(f)return Ige(f,r,s,o);if(p)return Lge(p,t,r,s,o)}var Y$=function(e){var t=e.type;return t===Hr.Mobile},q$=function(e){var t=e.type;return t===Hr.Tablet},Z$=function(e){var t=e.type;return t===Hr.Mobile||t===Hr.Tablet},K$=function(e){var t=e.type;return t===Hr.SmartTv},aS=function(e){var t=e.type;return t===Hr.Browser},Q$=function(e){var t=e.type;return t===Hr.Wearable},J$=function(e){var t=e.type;return t===Hr.Console},e9=function(e){var t=e.type;return t===Hr.Embedded},t9=function(e){var t=e.vendor;return Ut(t)},n9=function(e){var t=e.model;return Ut(t)},i9=function(e){var t=e.type;return Ut(t,"browser")},r9=function(e){var t=e.name;return t===ug.Android},s9=function(e){var t=e.name;return t===ug.Windows},o9=function(e){var t=e.name;return t===ug.MAC_OS},a9=function(e){var t=e.name;return t===ug.WindowsPhone},l9=function(e){var t=e.name;return t===ug.IOS},c9=function(e){var t=e.version;return Ut(t)},u9=function(e){var t=e.name;return Ut(t)},h9=function(e){var t=e.name;return t===Ps.Chrome},d9=function(e){var t=e.name;return t===Ps.Firefox},f9=function(e){var t=e.name;return t===Ps.Chromium},lS=function(e){var t=e.name;return t===Ps.Edge},p9=function(e){var t=e.name;return t===Ps.Yandex},m9=function(e){var t=e.name;return t===Ps.Safari||t===Ps.MobileSafari},g9=function(e){var t=e.name;return t===Ps.MobileSafari},y9=function(e){var t=e.name;return t===Ps.Opera},v9=function(e){var t=e.name;return t===Ps.InternetExplorer||t===Ps.Ie},x9=function(e){var t=e.name;return t===Ps.MIUI},_9=function(e){var t=e.name;return t===Ps.SamsungBrowser},w9=function(e){var t=e.version;return Ut(t)},b9=function(e){var t=e.major;return Ut(t)},S9=function(e){var t=e.name;return Ut(t)},E9=function(e){var t=e.name;return Ut(t)},M9=function(e){var t=e.version;return Ut(t)},T9=function(){var e=Pk(),t=e&&e.userAgent&&e.userAgent.toLowerCase();return typeof t=="string"?/electron/.test(t):!1},cm=function(e){return typeof e=="string"&&e.indexOf("Edg/")!==-1},A9=function(){var e=Pk();return e&&(/iPad|iPhone|iPod/.test(e.platform)||e.platform==="MacIntel"&&e.maxTouchPoints>1)&&!window.MSStream},cl=function(){return Rk("iPad")},C9=function(){return Rk("iPhone")},P9=function(){return Rk("iPod")},R9=function(e){return Ut(e)};function I9(n){var e=n||X$,t=e.device,i=e.browser,r=e.os,s=e.engine,o=e.ua;return{isSmartTV:K$(t),isConsole:J$(t),isWearable:Q$(t),isEmbedded:e9(t),isMobileSafari:g9(i)||cl(),isChromium:f9(i),isMobile:Z$(t)||cl(),isMobileOnly:Y$(t),isTablet:q$(t)||cl(),isBrowser:aS(t),isDesktop:aS(t),isAndroid:r9(r),isWinPhone:a9(r),isIOS:l9(r)||cl(),isChrome:h9(i),isFirefox:d9(i),isSafari:m9(i),isOpera:y9(i),isIE:v9(i),osVersion:c9(r),osName:u9(r),fullBrowserVersion:w9(i),browserVersion:b9(i),browserName:S9(i),mobileVendor:t9(t),mobileModel:n9(t),engineName:E9(s),engineVersion:M9(s),getUA:R9(o),isEdge:lS(i)||cm(o),isYandex:p9(i),deviceType:i9(t),isIOS13:A9(),isIPad13:cl(),isIPhone13:C9(),isIPod13:P9(),isElectron:T9(),isEdgeChromium:cm(o),isLegacyEdge:lS(i)&&!cm(o),isWindows:s9(r),isMacOs:o9(r),isMIUI:x9(i),isSamsungBrowser:_9(i)}}var L9=K$(ao),N9=J$(ao),k9=Q$(ao),kge=e9(ao),Oge=g9(Zr)||cl(),Dge=f9(Zr),PE=Z$(ao)||cl(),O9=Y$(ao),D9=q$(ao)||cl(),F9=aS(ao),Fge=aS(ao),U9=r9(ih),B9=a9(ih),z9=l9(ih)||cl(),Uge=h9(Zr),Bge=d9(Zr),zge=m9(Zr),Hge=y9(Zr),H9=v9(Zr),Wge=c9(ih),Vge=u9(ih),Gge=w9(Zr),jge=b9(Zr),$ge=S9(Zr),Xge=t9(ao),Yge=n9(ao),qge=E9(Ck),Zge=M9(Ck),Kge=R9(D0),Qge=lS(Zr)||cm(D0),Jge=p9(Zr),eye=i9(ao),tye=A9(),nye=cl(),iye=C9(),rye=P9(),sye=T9(),oye=cm(D0),aye=lS(Zr)&&!cm(D0),lye=s9(ih),cye=o9(ih),uye=x9(Zr),hye=_9(Zr),dye=function(e){if(!(!e||typeof e!="string")){var t=F0(e),i=t.device,r=t.browser,s=t.os,o=t.engine,a=t.ua;return I9({device:i,browser:r,os:s,engine:o,ua:a})}},fye=function(e){var t=e.renderWithFragment,i=e.children,r=qo(e,["renderWithFragment","children"]);return U9?t?Xn.createElement($r.Fragment,null,i):Xn.createElement("div",r,i):null},pye=function(e){var t=e.renderWithFragment,i=e.children,r=qo(e,["renderWithFragment","children"]);return F9?t?Xn.createElement($r.Fragment,null,i):Xn.createElement("div",r,i):null},mye=function(e){var t=e.renderWithFragment,i=e.children,r=qo(e,["renderWithFragment","children"]);return H9?t?Xn.createElement($r.Fragment,null,i):Xn.createElement("div",r,i):null},gye=function(e){var t=e.renderWithFragment,i=e.children,r=qo(e,["renderWithFragment","children"]);return z9?t?Xn.createElement($r.Fragment,null,i):Xn.createElement("div",r,i):null},yye=function(e){var t=e.renderWithFragment,i=e.children,r=qo(e,["renderWithFragment","children"]);return PE?t?Xn.createElement($r.Fragment,null,i):Xn.createElement("div",r,i):null},vye=function(e){var t=e.renderWithFragment,i=e.children,r=qo(e,["renderWithFragment","children"]);return D9?t?Xn.createElement($r.Fragment,null,i):Xn.createElement("div",r,i):null},xye=function(e){var t=e.renderWithFragment,i=e.children,r=qo(e,["renderWithFragment","children"]);return B9?t?Xn.createElement($r.Fragment,null,i):Xn.createElement("div",r,i):null},_ye=function(e){var t=e.renderWithFragment,i=e.children;e.viewClassName,e.style;var r=qo(e,["renderWithFragment","children","viewClassName","style"]);return O9?t?Xn.createElement($r.Fragment,null,i):Xn.createElement("div",r,i):null},wye=function(e){var t=e.renderWithFragment,i=e.children,r=qo(e,["renderWithFragment","children"]);return L9?t?Xn.createElement($r.Fragment,null,i):Xn.createElement("div",r,i):null},bye=function(e){var t=e.renderWithFragment,i=e.children,r=qo(e,["renderWithFragment","children"]);return N9?t?Xn.createElement($r.Fragment,null,i):Xn.createElement("div",r,i):null},Sye=function(e){var t=e.renderWithFragment,i=e.children,r=qo(e,["renderWithFragment","children"]);return k9?t?Xn.createElement($r.Fragment,null,i):Xn.createElement("div",r,i):null},Eye=function(e){var t=e.renderWithFragment,i=e.children;e.viewClassName,e.style;var r=e.condition,s=qo(e,["renderWithFragment","children","viewClassName","style","condition"]);return r?t?Xn.createElement($r.Fragment,null,i):Xn.createElement("div",s,i):null};function Mye(n){return function(e){yge(t,e);function t(i){var r;return fge(this,t),r=xge(this,UR(t).call(this,i)),r.isEventListenerAdded=!1,r.handleOrientationChange=r.handleOrientationChange.bind($1(r)),r.onOrientationChange=r.onOrientationChange.bind($1(r)),r.onPageLoad=r.onPageLoad.bind($1(r)),r.state={isLandscape:!1,isPortrait:!1},r}return mge(t,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var r=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:r===0,isLandscape:r===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":lv(window))!==void 0&&PE&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return Xn.createElement(n,FR({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),t}(Xn.Component)}function Tye(){var n=$r.useState(function(){var s=window.innerWidth>window.innerHeight?90:0;return{isPortrait:s===0,isLandscape:s===90,orientation:s===0?"portrait":"landscape"}}),e=_ge(n,2),t=e[0],i=e[1],r=$r.useCallback(function(){var s=window.innerWidth>window.innerHeight?90:0,o={isPortrait:s===0,isLandscape:s===90,orientation:s===0?"portrait":"landscape"};t.orientation!==o.orientation&&i(o)},[t.orientation]);return $r.useEffect(function(){return(typeof window>"u"?"undefined":lv(window))!==void 0&&PE&&(r(),window.addEventListener("load",r,!1),window.addEventListener("resize",r,!1)),function(){window.removeEventListener("resize",r,!1),window.removeEventListener("load",r,!1)}},[r]),t}function W9(n){var e=n||window.navigator.userAgent;return F0(e)}function Aye(n){var e=n||window.navigator.userAgent,t=W9(e),i=I9(t);return[i,t]}wt.AndroidView=fye;wt.BrowserTypes=Ps;wt.BrowserView=pye;wt.ConsoleView=bye;wt.CustomView=Eye;wt.IEView=mye;wt.IOSView=gye;wt.MobileOnlyView=_ye;wt.MobileView=yye;wt.OsTypes=ug;wt.SmartTVView=wye;wt.TabletView=vye;wt.WearableView=Sye;wt.WinPhoneView=xye;wt.browserName=$ge;wt.browserVersion=jge;wt.deviceDetect=Nge;wt.deviceType=eye;wt.engineName=qge;wt.engineVersion=Zge;wt.fullBrowserVersion=Gge;wt.getSelectorsByUserAgent=dye;wt.getUA=Kge;wt.isAndroid=U9;wt.isBrowser=F9;wt.isChrome=Uge;wt.isChromium=Dge;wt.isConsole=N9;wt.isDesktop=Fge;wt.isEdge=Qge;wt.isEdgeChromium=oye;wt.isElectron=sye;wt.isEmbedded=kge;wt.isFirefox=Bge;wt.isIE=H9;wt.isIOS=z9;wt.isIOS13=tye;wt.isIPad13=nye;wt.isIPhone13=iye;wt.isIPod13=rye;wt.isLegacyEdge=aye;wt.isMIUI=uye;wt.isMacOs=cye;var Cye=wt.isMobile=PE;wt.isMobileOnly=O9;wt.isMobileSafari=Oge;wt.isOpera=Hge;wt.isSafari=zge;wt.isSamsungBrowser=hye;wt.isSmartTV=L9;wt.isTablet=D9;wt.isWearable=k9;wt.isWinPhone=B9;wt.isWindows=lye;wt.isYandex=Jge;wt.mobileModel=Yge;wt.mobileVendor=Xge;wt.osName=Vge;wt.osVersion=Wge;wt.parseUserAgent=F0;wt.setUserAgent=Age;wt.useDeviceData=W9;wt.useDeviceSelectors=Aye;wt.useMobileOrientation=Tye;wt.withOrientationChange=Mye;var _r=(n=>(n[n.Horizontal=0]="Horizontal",n[n.Vertical=1]="Vertical",n[n.HorizontalVertical=2]="HorizontalVertical",n[n.Rotate=3]="Rotate",n[n.Move=4]="Move",n))(_r||{});class Pye extends Vn{constructor(t){super();ve(this,"type");ve(this,"target");ve(this,"size",10);ve(this,"active",!1);ve(this,"mouseStartPoint");ve(this,"targetStartPoint");ve(this,"mouseEndPoint");ve(this,"startRotaton");ve(this,"startScale");ve(this,"targetStartCenterPoint");ve(this,"localCoords");switch(this.eventMode="static",t.color&&(this.color=t.color),t.size&&(this.size=t.size),this.mouseStartPoint={x:0,y:0},this.targetStartPoint={x:0,y:0},this.startScale={x:0,y:0},this.targetStartCenterPoint={x:0,y:0},this.localCoords={x:0,y:0},this.mouseEndPoint={x:0,y:0},this.type=t.type,this.target=t.target,this.rect(0,0,10,10).stroke({width:1,color:1710618}),Cye&&(this.size=this.size*2.5),this.type==3?(this.circle(0,0,this.size/1.5),this.pivot.set(this.size/3,this.size/3)):(this.rect(0,0,this.size,this.size),this.pivot.set(.5)),this.type){case 4:this.cursor="move";break;case 0:this.cursor="ew-resize";break;case 1:this.cursor="ns-resize";break;case 2:this.cursor="nwse-resize";break;case 3:this.cursor="wait";break}t.pos&&this.position.set(t.pos.x,t.pos.y),this.on("pointerdown",this.onMouseDown),this.on("pointerup",this.onMouseUp),this.on("pointerupoutside",this.onMouseUp),this.on("pointermove",this.onMouseMove)}onMouseDown(t){_u.dragging||(this.mouseStartPoint.x=t.data.global.x,this.mouseStartPoint.y=t.data.global.y,this.targetStartPoint=this.target.getGlobalPosition(),this.targetStartCenterPoint.x=this.targetStartPoint.x+this.target.width/2,this.targetStartCenterPoint.y=this.targetStartPoint.y+this.target.height/2,t.data.getLocalPosition(this.target),this.startRotaton=this.target.rotation,this.startScale.x=this.target.scale.x,this.startScale.y=this.target.scale.y,_u.dragging=!0,this.active=!0,t.stopPropagation())}onMouseUp(t){_u.dragging=!1,this.active=!1,t.stopPropagation()}onMouseMove(t){if(!this.active||!_u.dragging)return;this.mouseEndPoint.x=t.data.global.x,this.mouseEndPoint.y=t.data.global.y;const i=this.getDistance(this.mouseStartPoint,this.targetStartPoint),s=this.getDistance(this.mouseEndPoint,this.targetStartPoint)/i;switch(this.target.centerAngle,this.type){case 3:const o={x:this.mouseStartPoint.x-this.targetStartPoint.x,y:this.mouseStartPoint.y-this.targetStartPoint.y},a={x:this.mouseEndPoint.x-this.targetStartPoint.x,y:this.mouseEndPoint.y-this.targetStartPoint.y},l=Math.atan2(a.y,a.x),c=Math.atan2(o.y,o.x),u=l-c;this.target.rotation=this.startRotaton+u;break;case 0:this.target.scale.x=this.startScale.x*s;break;case 1:this.target.scale.y=this.startScale.y*s;break;case 2:this.target.scale.x=this.startScale.x*s,this.target.scale.y=this.startScale.y*s;break;case 4:const h={x:this.mouseEndPoint.x-this.mouseStartPoint.x,y:this.mouseEndPoint.y-this.mouseStartPoint.y};if(!this.target.xLocked)this.target.position.x=$m(this.targetStartPoint.x+h.x),this.target.position.y=Xm(this.targetStartPoint.y+h.y);else{const d=(h.x+h.y)*.8;this.localCoords.x+d<=s_*.5?this.target.position.x=s_*.5:this.localCoords.x+d>=this.target.parent.length-this.target.width-s_*.5?this.target.position.x=this.target.parent.length-this.target.width-s_*.5:this.target.position.x=this.localCoords.x+d}break}}getDistance(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))}setTarget(t){this.target=t}update(t){this.position.set(t.x,t.y)}}class V9 extends dn{constructor(t){super();ve(this,"text");ve(this,"textStyle",new IS({fontFamily:"Arial",fontSize:16,fill:0,align:"center"}));ve(this,"textBkg",new hb(On.WHITE));this.eventMode="none",t||(t=0),this.text=new pW({text:"",style:this.textStyle}),this.update(t),this.addChild(this.textBkg),this.addChild(this.text),this.pivot.set(this.width/2,this.height/2),this.zIndex=1001,this.on("toggleLabel",this.toggleLabel),this.toggleLabel({})}toggleLabel(t){}update(t){this.text.text=this.toMeter(t),this.textBkg.width=this.text.width,this.textBkg.height=this.text.height}updatePos(t,i){this.position.set(t.x,t.y),this.update(i)}toMeter(t){return t=Math.abs(t)/Fo,(Math.round(t*100)/100).toFixed(2)+"m"}}class _u extends dn{constructor(){super();ve(this,"target");ve(this,"points");ve(this,"handles");ve(this,"labels");ve(this,"border");ve(this,"borderContainer");ve(this,"borderOffset");this.points=[],this.handles=[],this.labels=[],this.visible=!1,this.target=null,this.borderContainer=new dn,this.border=new Vn,this.borderContainer.addChild(this.border),this.borderOffset=2,this.addChild(this.borderContainer),this.addHandle(_r.Rotate),this.addHandle(_r.Horizontal),this.addHandle(_r.HorizontalVertical),this.addHandle(_r.Vertical),this.addHandle(_r.Move);for(let t=0;t<7;t++)this.points[t]={x:0,y:0};this.addLabel(oa.Horizontal),this.addLabel(oa.Vertical)}static get Instance(){return this.instance||(this.instance=new this)}computePoints(){this.target&&([this.points[Wi.NE].x,this.points[Wi.NE].y]=[this.target.width+5,5],[this.points[Wi.E].x,this.points[Wi.E].y]=[this.target.width,this.target.height/2],[this.points[Wi.SE].x,this.points[Wi.SE].y]=[this.target.width,this.target.height],[this.points[Wi.S].x,this.points[Wi.S].y]=[this.target.width/2,this.target.height],[this.points[Wi.C].x,this.points[Wi.C].y]=[this.target.width/2,this.target.height/2],this.points[Wi.Vertical].x=this.target.width+PF,this.points[Wi.Vertical].y=this.target.height/2-this.labels[oa.Vertical].height/2,this.points[Wi.Horizontal].x=this.target.width/2-this.labels[oa.Horizontal].width/2,this.points[Wi.Horizontal].y=this.target.height+PF)}addHandle(t){let i=new Pye({type:t,target:null,pos:{x:0,y:0}});this.borderContainer.addChild(i),this.handles.push(i)}addLabel(t){this.labels[t]=new V9,this.borderContainer.addChild(this.labels[t])}select(t){if(Lt.getState().activeTool==mt.Edit){if(this.target!=null){this.deselect();return}this.target=t,this.computePoints(),this.draw(),this.visible=!0,this.eventMode="static"}}draw(){this.drawBorder();for(let t=0;t<this.handles.length;t++)this.handles[t].setTarget(this.target),this.handles[t].update(this.points[t]);this.target.resourcePath=="door"?(this.handles[_r.Rotate].visible=!1,this.handles[_r.Vertical].visible=!0,this.handles[_r.Horizontal].visible=!0,this.handles[_r.HorizontalVertical].visible=!0):this.target.resourcePath=="window"?(this.handles[_r.Horizontal].visible=!1,this.handles[_r.Rotate].visible=!1,this.handles[_r.HorizontalVertical].visible=!1):(this.handles[_r.Rotate].visible=!0,this.handles[_r.Vertical].visible=!0,this.handles[_r.Horizontal].visible=!0,this.handles[_r.HorizontalVertical].visible=!0),this.labels[oa.Horizontal].updatePos(this.points[Wi.Horizontal],this.target.width),this.labels[oa.Vertical].updatePos(this.points[Wi.Vertical],this.target.height)}drawBorder(){this.border.clear();let t=this.target.getGlobalPosition();const i=$m(t.x-this.borderOffset,!1),r=Xm(t.y-this.borderOffset,!1),s=this.target.width+2*this.borderOffset,o=this.target.height+2*this.borderOffset;this.border.lineStyle(3,0,1).drawRect(0,0,s,o),this.border.position.x=i,this.border.position.y=r,this.border.rotation=this.computeTargetRotation()}computeTargetRotation(){return this.target.isAttached?this.target.parent.rotation:this.target.rotation}deselect(){this.target=null,this.visible=!1,this.interactive=!1}update(){if(this.target){this.computePoints(),this.drawBorder();for(let t=0;t<this.handles.length;t++)this.handles[t].update(this.points[t]);this.labels[oa.Horizontal].updatePos(this.points[Wi.Horizontal],this.target.width),this.labels[oa.Horizontal].angle=360-this.target.angle,this.labels[oa.Vertical].updatePos(this.points[Wi.Vertical],this.target.height),this.labels[oa.Vertical].angle=360-this.target.angle}}}ve(_u,"dragging"),ve(_u,"instance");class Rye{constructor(e,t){ve(this,"leftNode");ve(this,"rightNode");ve(this,"receiver");this.leftNode=e.getId(),this.rightNode=t.getId(),this.receiver=cs.Instance}execute(){return this.receiver.actions.push(this),this.receiver.getWallNodeSeq().addWall(this.leftNode,this.rightNode)}}class RE{constructor({color:e=2039583,showSizeLabel:t=!0}){ve(this,"showSizeLabel");ve(this,"isActive",!1);ve(this,"preview");ve(this,"pointA");ve(this,"endPoint");ve(this,"sizeGraphic");ve(this,"sizeLabel");ve(this,"color");ve(this,"length");this.pointA=void 0,this.preview=new dn,this.sizeGraphic=new Vn,this.preview.addChild(this.sizeGraphic),this.color=e,this.showSizeLabel=t,this.sizeLabel=new V9,this.sizeLabel.visible=!1,this.preview.addChild(this.sizeLabel),this.preview.eventMode="none"}setA(e){this.isActive=!0,this.pointA=e,this.sizeGraphic.clear(),this.sizeLabel.visible=!1}setB(e){this.isActive=!1,this.endPoint=e}updatePreview(e,t=!1){if(this.sizeGraphic.clear(),this.pointA===void 0)return;const i=$m(e.global.x),r=Xm(e.global.y);this.sizeGraphic.clear().moveTo(this.pointA.x,this.pointA.y).lineTo(i,r).stroke({width:2,color:this.color});const s=Fu(this.pointA.x,i,this.pointA.y,r);this.length=s,this.showSizeLabel&&(this.sizeLabel.update(s),this.sizeLabel.position.x=Math.abs(i+this.pointA.x)/2,this.sizeLabel.position.y=Math.abs(r+this.pointA.y)/2,this.sizeLabel.visible=!0)}updateByPoint(e){if(!this.isActive||!this.pointA)return;const t=e.x,i=e.y;this.sizeGraphic.clear().stroke({texture:On.WHITE,width:2,color:this.color}).moveTo(this.pointA.x,this.pointA.y).lineTo(t,i);const r=Fu(this.pointA.x,t,this.pointA.y,i);this.length=r,this.showSizeLabel&&(this.sizeLabel.update(r),this.sizeLabel.position.x=Math.abs(t+this.pointA.x)/2,this.sizeLabel.position.y=Math.abs(i+this.pointA.y)/2,this.sizeLabel.visible=!0)}getReference(){return this.preview}}ve(RE,"instance");class Wd{constructor(){ve(this,"previousNode");ve(this,"preview");this.previousNode=void 0,this.preview=new RE({})}checkStep(e){if(this.previousNode==null){for(const[t,i]of cs.Instance.getWallNodeSeq().getWallNodes())if(Fu(e.x,i.x,e.y,i.y)<.3*Fo)return!1;return!0}return!(Fu(e.x,this.previousNode.x,e.y,this.previousNode.y)<.3*Fo)}step(e){if(this.previousNode===void 0){this.previousNode=e,this.preview.setA(this.previousNode.position);return}new Rye(this.previousNode,e).execute(),this.preview.setA(e.position),this.previousNode=e,this.preview.setA(this.previousNode.position)}updatePreview(e){this.preview.updatePreview(e,!0)}unset(){this.previousNode=void 0,this.preview.setA(void 0)}static get Instance(){return this.instance||(this.instance=new this)}resetTools(){_u.Instance.deselect(),this.unset()}}ve(Wd,"instance");const Lt=_W((n,e)=>({activeMode:bs.Edit,activeTool:mt.Edit,activeToolSettings:{},helpMode:!1,floor:0,snap:!0,plan:null,app:null,focusedElement:null,setFocusedElement:t=>{n(()=>({focusedElement:t}))},setHelpMode:t=>{n(()=>({helpMode:t}))},setFloor:t=>{n(()=>({floor:t}))},setActiveMode:t=>{n(()=>({activeMode:t}))},setTool:t=>{n(()=>({activeTool:t,focusedElement:null})),Wd.Instance.resetTools()},setToolSettings:t=>{n(()=>({activeToolSettings:t}))},setSnap:t=>{n(()=>({snap:t}))},setPlan:t=>{n(()=>({plan:t}))},setApp:t=>{n(()=>({app:t}))}}));class P4{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?vn.EMPTY:(e=e||new vn(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:i,b:r,c:s,d:o,tx:a,ty:l}=e,c=i*t.x+s*t.y+a,u=r*t.x+o*t.y+l;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)}addQuad(e){let t=this.minX,i=this.minY,r=this.maxX,s=this.maxY,o=e[0],a=e[1];t=o<t?o:t,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,o=e[2],a=e[3],t=o<t?o:t,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,o=e[4],a=e[5],t=o<t?o:t,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,o=e[6],a=e[7],t=o<t?o:t,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,this.minX=t,this.minY=i,this.maxX=r,this.maxY=s}addFrame(e,t,i,r,s){this.addFrameMatrix(e.worldTransform,t,i,r,s)}addFrameMatrix(e,t,i,r,s){const o=e.a,a=e.b,l=e.c,c=e.d,u=e.tx,h=e.ty;let d=this.minX,f=this.minY,p=this.maxX,x=this.maxY,v=o*t+l*i+u,y=a*t+c*i+h;d=v<d?v:d,f=y<f?y:f,p=v>p?v:p,x=y>x?y:x,v=o*r+l*i+u,y=a*r+c*i+h,d=v<d?v:d,f=y<f?y:f,p=v>p?v:p,x=y>x?y:x,v=o*t+l*s+u,y=a*t+c*s+h,d=v<d?v:d,f=y<f?y:f,p=v>p?v:p,x=y>x?y:x,v=o*r+l*s+u,y=a*r+c*s+h,d=v<d?v:d,f=y<f?y:f,p=v>p?v:p,x=y>x?y:x,this.minX=d,this.minY=f,this.maxX=p,this.maxY=x}addVertexData(e,t,i){let r=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=t;l<i;l+=2){const c=e[l],u=e[l+1];r=c<r?c:r,s=u<s?u:s,o=c>o?c:o,a=u>a?u:a}this.minX=r,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,t,i,r){this.addVerticesMatrix(e.worldTransform,t,i,r)}addVerticesMatrix(e,t,i,r,s=0,o=s){const a=e.a,l=e.b,c=e.c,u=e.d,h=e.tx,d=e.ty;let f=this.minX,p=this.minY,x=this.maxX,v=this.maxY;for(let y=i;y<r;y+=2){const w=t[y],_=t[y+1],b=a*w+c*_+h,E=u*_+l*w+d;f=Math.min(f,b-s),x=Math.max(x,b+s),p=Math.min(p,E-o),v=Math.max(v,E+o)}this.minX=f,this.minY=p,this.maxX=x,this.maxY=v}addBounds(e){const t=this.minX,i=this.minY,r=this.maxX,s=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,t){const i=e.minX>t.minX?e.minX:t.minX,r=e.minY>t.minY?e.minY:t.minY,s=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(i<=s&&r<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=i<a?i:a,this.minY=r<l?r:l,this.maxX=s>c?s:c,this.maxY=o>u?o:u}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const i=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,s=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(i<=s&&r<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=i<a?i:a,this.minY=r<l?r:l,this.maxX=s>c?s:c,this.maxY=o>u?o:u}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,i,r,s,o){e-=s,t-=o,i+=s,r+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>r?this.maxY:r}}class Vd extends x0{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new EL,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new P4,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let i=0;i<t.length;++i){const r=t[i];Object.defineProperty(Vd.prototype,r,Object.getOwnPropertyDescriptor(e,r))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new vn),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new vn),e=this._localBoundsRect),this._localBounds||(this._localBounds=new P4);const t=this.transform,i=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(i==null?void 0:i.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const r=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=i,this.transform=t,this._bounds=r,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,t,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,i,r){return t&&(e=t.toGlobal(e,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,t=0,i=1,r=1,s=0,o=0,a=0,l=0,c=0){return this.position.x=e,this.position.y=t,this.scale.x=i||1,this.scale.y=r||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=c,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new G9),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*Cie}set angle(e){this.transform.rotation=e*Pie}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class G9 extends Vd{constructor(){super(...arguments),this.sortDirty=null}}Vd.prototype.displayObjectUpdateTransform=Vd.prototype.updateTransform;const Iye=new Yi;function Lye(n,e){return n.zIndex===e.zIndex?n._lastSortedIndex-e._lastSortedIndex:n.zIndex-e.zIndex}const j9=class zR extends Vd{constructor(){super(),this.children=[],this.sortableChildren=zR.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const i=this.getChildIndex(e),r=this.getChildIndex(t);this.children[i]=t,this.children[r]=e,this.onChildrenChange(i<r?i:r)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(e);A1(this.children,i,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],i=this.children.indexOf(t);if(i===-1)return null;t.parent=null,t.transform._parentID=-1,A1(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this),this.emit("childRemoved",t,this,i)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,A1(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const i=e,r=t,s=r-i;let o;if(s>0&&s<=r){o=this.children.splice(i,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,i=this.children.length;t<i;++t){const r=this.children[t];r._lastSortedIndex=t,!e&&r.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(Lye),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const i=this.children[e];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const i=t._mask.isMaskData?t._mask.maskObject:t._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(t._bounds,i._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const i=super.getLocalBounds(e);if(!t)for(let r=0,s=this.children.length;r<s;++r){const o=this.children[r];o.visible&&o.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let i,r;this.cullArea?(i=this.cullArea,r=this.worldTransform):this._render!==zR.prototype._render&&(i=this.getBounds(!0));const s=e.projection.transform;if(s&&(r?(r=Iye.copyFrom(r),r.prepend(s)):r=s),i&&t.intersects(i,r))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],c=l.cullable;l.cullable=c||!this.cullArea,l.render(e),l.cullable=c}}render(e){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let i=0,r=this.children.length;i<r;++i)this.children[i].render(e)}}renderAdvanced(e){var s,o,a;const t=this.filters,i=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<t.length;l++)t[l].enabled&&this._enabledFilters.push(t[l])}const r=t&&((s=this._enabledFilters)==null?void 0:s.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==Gi.NONE));if(r&&e.batch.flush(),t&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let l=0,c=this.children.length;l<c;++l)this.children[l].render(e)}r&&e.batch.flush(),i&&e.mask.pop(this),t&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e==null?void 0:e.children,i=this.removeChildren(0,this.children.length);if(t)for(let r=0;r<i.length;++r)i[r].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};j9.defaultSortableChildren=!1;let cS=j9;cS.prototype.containerUpdateTransform=cS.prototype.updateTransform;Object.defineProperties(xn,{SORTABLE_CHILDREN:{get(){return cS.defaultSortableChildren},set(n){Pn("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),cS.defaultSortableChildren=n}}});/*!
 * @pixi/interaction - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var R4=function(){function n(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Gn,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(n.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),n.prototype.getLocalPosition=function(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)},n.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},n.prototype.reset=function(){this.isPrimary=!1},n}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var HR=function(n,e){return HR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},HR(n,e)};function Nye(n,e){HR(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var kye=function(){function n(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return n.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},n.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},n}(),sC=function(){function n(e){this._pointerId=e,this._flags=n.FLAGS.NONE}return n.prototype._doSet=function(e,t){t?this._flags=this._flags|e:this._flags=this._flags&~e},Object.defineProperty(n.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"none",{get:function(){return this._flags===n.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"over",{get:function(){return(this._flags&n.FLAGS.OVER)!==0},set:function(e){this._doSet(n.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rightDown",{get:function(){return(this._flags&n.FLAGS.RIGHT_DOWN)!==0},set:function(e){this._doSet(n.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"leftDown",{get:function(){return(this._flags&n.FLAGS.LEFT_DOWN)!==0},set:function(e){this._doSet(n.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),n.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),n}(),Oye=function(){function n(){this._tempPoint=new Gn}return n.prototype.recursiveFindHit=function(e,t,i,r,s){var o;if(!t||!t.visible)return!1;var a=e.data.global;s=t.interactive||s;var l=!1,c=s,u=!0;if(t.hitArea)r&&(t.worldTransform.applyInverse(a,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?l=!0:(r=!1,u=!1)),c=!1;else if(t._mask&&r){var h=t._mask.isMaskData?t._mask.maskObject:t._mask;h&&!(!((o=h.containsPoint)===null||o===void 0)&&o.call(h,a))&&(r=!1)}if(u&&t.interactiveChildren&&t.children)for(var d=t.children,f=d.length-1;f>=0;f--){var p=d[f],x=this.recursiveFindHit(e,p,i,r,c);if(x){if(!p.parent)continue;c=!1,x&&(e.target&&(r=!1),l=!0)}}return s&&(r&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(a)&&(l=!0),t.interactive&&(l&&!e.target&&(e.target=t),i&&i(e,t,!!l))),l},n.prototype.findHit=function(e,t,i,r){this.recursiveFindHit(e,t,i,r,!1)},n}(),Dye={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(n){n?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Vd.mixin(Dye);var G_=1,j_={target:null,data:{global:null}},Fye=function(n){Nye(e,n);function e(t,i){var r=n.call(this)||this;return i=i||{},r.renderer=t,r.autoPreventDefault=i.autoPreventDefault!==void 0?i.autoPreventDefault:!0,r.interactionFrequency=i.interactionFrequency||10,r.mouse=new R4,r.mouse.identifier=G_,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[G_]=r.mouse,r.interactionDataPool=[],r.eventData=new kye,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!("PointerEvent"in globalThis),r.supportsTouchEvents="ontouchstart"in globalThis,r.supportsPointerEvents=!!globalThis.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new Oye,r._tempDisplayObject=new G9,r._eventListenerOptions={capture:!0,passive:!1},r._useSystemTicker=i.useSystemTicker!==void 0?i.useSystemTicker:!0,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,i){return j_.target=null,j_.data.global=t,i||(i=this.lastObjectRendered),this.processInteractive(j_,i,null,!0),j_.target},e.prototype.setTargetElement=function(t,i){i===void 0&&(i=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=i,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(hl.system.add(this.tickerUpdate,this,Tv.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(hl.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var t in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var i=this.activeInteractionData[t];if(i.originalEvent&&i.pointerType!=="touch"){var r=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var i=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(i=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var r=this.cursorStyles[t];if(r)switch(typeof r){case"string":i&&(this.interactionDOMElement.style.cursor=r);break;case"function":r(t);break;case"object":i&&Object.assign(this.interactionDOMElement.style,r);break}else i&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,i,r){(!r.stopPropagationHint||t===r.stopsPropagatingAt)&&(r.currentTarget=t,r.type=i,t.emit(i,r),t[i]&&t[i](r))},e.prototype.delayDispatchEvent=function(t,i,r){this.delayedEvents.push({displayObject:t,eventString:i,eventData:r})},e.prototype.mapPositionToPoint=function(t,i,r){var s;this.interactionDOMElement.parentElement?s=this.interactionDOMElement.getBoundingClientRect():s={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var o=1/this.resolution;t.x=(i-s.left)*(this.interactionDOMElement.width/s.width)*o,t.y=(r-s.top)*(this.interactionDOMElement.height/s.height)*o},e.prototype.processInteractive=function(t,i,r,s){var o=this.search.findHit(t,i,r,s),a=this.delayedEvents;if(!a.length)return o;t.stopPropagationHint=!1;var l=a.length;this.delayedEvents=[];for(var c=0;c<l;c++){var u=a[c],h=u.displayObject,d=u.eventString,f=u.eventData;f.stopsPropagatingAt===h&&(f.stopPropagationHint=!0),this.dispatchEvent(h,d,f)}return o},e.prototype.onPointerDown=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var i=this.normalizeToPointerData(t);if(this.autoPreventDefault&&i[0].isNormalized){var r=t.cancelable||!("cancelable"in t);r&&t.preventDefault()}for(var s=i.length,o=0;o<s;o++){var a=i[o],l=this.getInteractionDataForPointerId(a),c=this.configureInteractionEventForDOMEvent(this.eventData,a,l);if(c.data.originalEvent=t,this.processInteractive(c,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",c),a.pointerType==="touch")this.emit("touchstart",c);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var u=a.button===2;this.emit(u?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,i,r){var s=t.data,o=t.data.identifier;if(r){if(i.trackedPointers[o]||(i.trackedPointers[o]=new sC(o)),this.dispatchEvent(i,"pointerdown",t),s.pointerType==="touch")this.dispatchEvent(i,"touchstart",t);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var a=s.button===2;a?i.trackedPointers[o].rightDown=!0:i.trackedPointers[o].leftDown=!0,this.dispatchEvent(i,a?"rightdown":"mousedown",t)}}},e.prototype.onPointerComplete=function(t,i,r){var s=this.normalizeToPointerData(t),o=s.length,a=t.target;t.composedPath&&t.composedPath().length>0&&(a=t.composedPath()[0]);for(var l=a!==this.interactionDOMElement?"outside":"",c=0;c<o;c++){var u=s[c],h=this.getInteractionDataForPointerId(u),d=this.configureInteractionEventForDOMEvent(this.eventData,u,h);if(d.data.originalEvent=t,this.processInteractive(d,this.lastObjectRendered,r,i||!l),this.emit(i?"pointercancel":"pointerup"+l,d),u.pointerType==="mouse"||u.pointerType==="pen"){var f=u.button===2;this.emit(f?"rightup"+l:"mouseup"+l,d)}else u.pointerType==="touch"&&(this.emit(i?"touchcancel":"touchend"+l,d),this.releaseInteractionDataForPointerId(u.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,i){var r=t.data,s=t.data.identifier;i.trackedPointers[s]!==void 0&&(delete i.trackedPointers[s],this.dispatchEvent(i,"pointercancel",t),r.pointerType==="touch"&&this.dispatchEvent(i,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,i,r){var s=t.data,o=t.data.identifier,a=i.trackedPointers[o],l=s.pointerType==="touch",c=s.pointerType==="mouse"||s.pointerType==="pen",u=!1;if(c){var h=s.button===2,d=sC.FLAGS,f=h?d.RIGHT_DOWN:d.LEFT_DOWN,p=a!==void 0&&a.flags&f;r?(this.dispatchEvent(i,h?"rightup":"mouseup",t),p&&(this.dispatchEvent(i,h?"rightclick":"click",t),u=!0)):p&&this.dispatchEvent(i,h?"rightupoutside":"mouseupoutside",t),a&&(h?a.rightDown=!1:a.leftDown=!1)}r?(this.dispatchEvent(i,"pointerup",t),l&&this.dispatchEvent(i,"touchend",t),a&&((!c||u)&&this.dispatchEvent(i,"pointertap",t),l&&(this.dispatchEvent(i,"tap",t),a.over=!1))):a&&(this.dispatchEvent(i,"pointerupoutside",t),l&&this.dispatchEvent(i,"touchendoutside",t)),a&&a.none&&delete i.trackedPointers[o]},e.prototype.onPointerMove=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var i=this.normalizeToPointerData(t);(i[0].pointerType==="mouse"||i[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var r=i.length,s=0;s<r;s++){var o=i[s],a=this.getInteractionDataForPointerId(o),l=this.configureInteractionEventForDOMEvent(this.eventData,o,a);l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",l),o.pointerType==="touch"&&this.emit("touchmove",l),(o.pointerType==="mouse"||o.pointerType==="pen")&&this.emit("mousemove",l)}i[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,i,r){var s=t.data,o=s.pointerType==="touch",a=s.pointerType==="mouse"||s.pointerType==="pen";a&&this.processPointerOverOut(t,i,r),(!this.moveWhenInside||r)&&(this.dispatchEvent(i,"pointermove",t),o&&this.dispatchEvent(i,"touchmove",t),a&&this.dispatchEvent(i,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var i=this.normalizeToPointerData(t),r=i[0];r.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var s=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,s);o.data.originalEvent=r,this.processInteractive(o,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",o),r.pointerType==="mouse"||r.pointerType==="pen"?this.emit("mouseout",o):this.releaseInteractionDataForPointerId(s.identifier)}},e.prototype.processPointerOverOut=function(t,i,r){var s=t.data,o=t.data.identifier,a=s.pointerType==="mouse"||s.pointerType==="pen",l=i.trackedPointers[o];r&&!l&&(l=i.trackedPointers[o]=new sC(o)),l!==void 0&&(r&&this.mouseOverRenderer?(l.over||(l.over=!0,this.delayDispatchEvent(i,"pointerover",t),a&&this.delayDispatchEvent(i,"mouseover",t)),a&&this.cursor===null&&(this.cursor=i.cursor)):l.over&&(l.over=!1,this.dispatchEvent(i,"pointerout",this.eventData),a&&this.dispatchEvent(i,"mouseout",t),l.none&&delete i.trackedPointers[o]))},e.prototype.onPointerOver=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var i=this.normalizeToPointerData(t),r=i[0],s=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,s);o.data.originalEvent=r,r.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",o),(r.pointerType==="mouse"||r.pointerType==="pen")&&this.emit("mouseover",o)}},e.prototype.getInteractionDataForPointerId=function(t){var i=t.pointerId,r;return i===G_||t.pointerType==="mouse"?r=this.mouse:this.activeInteractionData[i]?r=this.activeInteractionData[i]:(r=this.interactionDataPool.pop()||new R4,r.identifier=i,this.activeInteractionData[i]=r),r.copyEvent(t),r},e.prototype.releaseInteractionDataForPointerId=function(t){var i=this.activeInteractionData[t];i&&(delete this.activeInteractionData[t],i.reset(),this.interactionDataPool.push(i))},e.prototype.configureInteractionEventForDOMEvent=function(t,i,r){return t.data=r,this.mapPositionToPoint(r.global,i.clientX,i.clientY),i.pointerType==="touch"&&(i.globalX=r.global.x,i.globalY=r.global.y),r.originalEvent=i,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var i=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var r=0,s=t.changedTouches.length;r<s;r++){var o=t.changedTouches[r];typeof o.button>"u"&&(o.button=t.touches.length?1:0),typeof o.buttons>"u"&&(o.buttons=t.touches.length?1:0),typeof o.isPrimary>"u"&&(o.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,i.push(o)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){var a=t;typeof a.isPrimary>"u"&&(a.isPrimary=!0),typeof a.width>"u"&&(a.width=1),typeof a.height>"u"&&(a.height=1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="mouse"),typeof a.pointerId>"u"&&(a.pointerId=G_),typeof a.pressure>"u"&&(a.pressure=.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),a.isNormalized=!0,i.push(a)}else i.push(t);return i},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e.extension={name:"interaction",type:[nn.RendererPlugin,nn.CanvasRendererPlugin]},e}(x0);class Zo{constructor(e){this.parent=e,this.paused=!1}destroy(){}down(e){return!1}move(e){return!1}up(e){return!1}wheel(e){return!1}update(e){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}var Uye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bye(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $9={exports:{}};(function(n,e){(function(){var t,i;i=function(r){return n.exports=r},t={linear:function(r,s,o,a){return o*r/a+s},easeInQuad:function(r,s,o,a){return o*(r/=a)*r+s},easeOutQuad:function(r,s,o,a){return-o*(r/=a)*(r-2)+s},easeInOutQuad:function(r,s,o,a){return(r/=a/2)<1?o/2*r*r+s:-o/2*(--r*(r-2)-1)+s},easeInCubic:function(r,s,o,a){return o*(r/=a)*r*r+s},easeOutCubic:function(r,s,o,a){return o*((r=r/a-1)*r*r+1)+s},easeInOutCubic:function(r,s,o,a){return(r/=a/2)<1?o/2*r*r*r+s:o/2*((r-=2)*r*r+2)+s},easeInQuart:function(r,s,o,a){return o*(r/=a)*r*r*r+s},easeOutQuart:function(r,s,o,a){return-o*((r=r/a-1)*r*r*r-1)+s},easeInOutQuart:function(r,s,o,a){return(r/=a/2)<1?o/2*r*r*r*r+s:-o/2*((r-=2)*r*r*r-2)+s},easeInQuint:function(r,s,o,a){return o*(r/=a)*r*r*r*r+s},easeOutQuint:function(r,s,o,a){return o*((r=r/a-1)*r*r*r*r+1)+s},easeInOutQuint:function(r,s,o,a){return(r/=a/2)<1?o/2*r*r*r*r*r+s:o/2*((r-=2)*r*r*r*r+2)+s},easeInSine:function(r,s,o,a){return-o*Math.cos(r/a*(Math.PI/2))+o+s},easeOutSine:function(r,s,o,a){return o*Math.sin(r/a*(Math.PI/2))+s},easeInOutSine:function(r,s,o,a){return-o/2*(Math.cos(Math.PI*r/a)-1)+s},easeInExpo:function(r,s,o,a){return r===0?s:o*Math.pow(2,10*(r/a-1))+s},easeOutExpo:function(r,s,o,a){return r===a?s+o:o*(-Math.pow(2,-10*r/a)+1)+s},easeInOutExpo:function(r,s,o,a){return(r/=a/2)<1?o/2*Math.pow(2,10*(r-1))+s:o/2*(-Math.pow(2,-10*--r)+2)+s},easeInCirc:function(r,s,o,a){return-o*(Math.sqrt(1-(r/=a)*r)-1)+s},easeOutCirc:function(r,s,o,a){return o*Math.sqrt(1-(r=r/a-1)*r)+s},easeInOutCirc:function(r,s,o,a){return(r/=a/2)<1?-o/2*(Math.sqrt(1-r*r)-1)+s:o/2*(Math.sqrt(1-(r-=2)*r)+1)+s},easeInElastic:function(r,s,o,a){var l,c,u;return u=1.70158,c=0,l=o,r===0||(r/=a),c||(c=a*.3),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),-(l*Math.pow(2,10*(r-=1))*Math.sin((r*a-u)*(2*Math.PI)/c))+s},easeOutElastic:function(r,s,o,a){var l,c,u;return u=1.70158,c=0,l=o,r===0||(r/=a),c||(c=a*.3),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),l*Math.pow(2,-10*r)*Math.sin((r*a-u)*(2*Math.PI)/c)+o+s},easeInOutElastic:function(r,s,o,a){var l,c,u;return u=1.70158,c=0,l=o,r===0||(r/=a/2),c||(c=a*(.3*1.5)),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),r<1?-.5*(l*Math.pow(2,10*(r-=1))*Math.sin((r*a-u)*(2*Math.PI)/c))+s:l*Math.pow(2,-10*(r-=1))*Math.sin((r*a-u)*(2*Math.PI)/c)*.5+o+s},easeInBack:function(r,s,o,a,l){return l===void 0&&(l=1.70158),o*(r/=a)*r*((l+1)*r-l)+s},easeOutBack:function(r,s,o,a,l){return l===void 0&&(l=1.70158),o*((r=r/a-1)*r*((l+1)*r+l)+1)+s},easeInOutBack:function(r,s,o,a,l){return l===void 0&&(l=1.70158),(r/=a/2)<1?o/2*(r*r*(((l*=1.525)+1)*r-l))+s:o/2*((r-=2)*r*(((l*=1.525)+1)*r+l)+2)+s},easeInBounce:function(r,s,o,a){var l;return l=t.easeOutBounce(a-r,0,o,a),o-l+s},easeOutBounce:function(r,s,o,a){return(r/=a)<1/2.75?o*(7.5625*r*r)+s:r<2/2.75?o*(7.5625*(r-=1.5/2.75)*r+.75)+s:r<2.5/2.75?o*(7.5625*(r-=2.25/2.75)*r+.9375)+s:o*(7.5625*(r-=2.625/2.75)*r+.984375)+s},easeInOutBounce:function(r,s,o,a){var l;return r<a/2?(l=t.easeInBounce(r*2,0,o,a),l*.5+s):(l=t.easeOutBounce(r*2-a,0,o,a),l*.5+o*.5+s)}},i(t)}).call(Uye)})($9);var zye=$9.exports;const I4=Bye(zye);function IE(n,e){if(n){if(typeof n=="function")return n;if(typeof n=="string")return I4[n]}else return I4[e]}const Hye={removeOnInterrupt:!1,ease:"linear",time:1e3};class Wye extends Zo{constructor(e,t={}){super(e),this.startWidth=null,this.startHeight=null,this.deltaWidth=null,this.deltaHeight=null,this.width=null,this.height=null,this.time=0,this.options=Object.assign({},Hye,t),this.options.ease=IE(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(e){if(this.paused)return;this.time+=e;const t=new qt(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const i=this.parent.width,r=this.parent.height;this.complete(),(i!==this.parent.width||r!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:t,type:"animate"})}else{const i=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const r=this.startWidth,s=this.deltaWidth;this.parent.fitWidth(r+s*i,this.keepCenter,this.height===null)}if(this.height!==null){const r=this.startHeight,s=this.deltaHeight;this.parent.fitHeight(r+s*i,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const r=this.startX,s=this.startY,o=this.deltaX,a=this.deltaY,l=new qt(this.parent.x,this.parent.y);this.parent.moveCenter(r+o*i,s+a*i),this.parent.emit("moved",{viewport:this.parent,original:l,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:t,type:"animate"})}}}const Vye={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class Gye extends Zo{constructor(e,t={}){super(e),this.options=Object.assign({},Vye,t),this.ease=IE(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const i=this.options.underflow.toLowerCase();i==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=i.indexOf("left")!==-1?-1:i.indexOf("right")!==-1?1:0,this.underflowY=i.indexOf("top")!==-1?-1:i.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(e){if(!this.paused){if(this.bounce(),this.toX){const t=this.toX;t.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),t.time>=this.options.time?(this.parent.x=t.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(t.time,t.start,t.delta,this.options.time)}if(this.toY){const t=this.toY;t.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),t.time>=this.options.time?(this.parent.y=t.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(t.time,t.start,t.delta,this.options.time)}}}calcUnderflowX(){let e;switch(this.underflowX){case-1:e=0;break;case 1:e=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:e=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return e}calcUnderflowY(){let e;switch(this.underflowY){case-1:e=0;break;case 1:e=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:e=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return e}oob(){const e=this.options.bounceBox;if(e){const t=typeof e.x>"u"?0:e.x,i=typeof e.y>"u"?0:e.y,r=typeof e.width>"u"?this.parent.worldWidth:e.width,s=typeof e.height>"u"?this.parent.worldHeight:e.height;return{left:this.parent.left<t,right:this.parent.right>r,top:this.parent.top<i,bottom:this.parent.bottom>s,topLeft:new qt(t*this.parent.scale.x,i*this.parent.scale.y),bottomRight:new qt(r*this.parent.scale.x-this.parent.screenWidth,s*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new qt(0,0),bottomRight:new qt(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var e,t;if(this.paused)return;let i,r=this.parent.plugins.get("decelerate",!0);r&&(r.x||r.y)&&(r.x&&r.percentChangeX===((e=r.options)==null?void 0:e.friction)||r.y&&r.percentChangeY===((t=r.options)==null?void 0:t.friction))&&(i=this.oob(),(i.left&&this.left||i.right&&this.right)&&(r.percentChangeX=this.options.friction),(i.top&&this.top||i.bottom&&this.bottom)&&(r.percentChangeY=this.options.friction));const s=this.parent.plugins.get("drag",!0)||{},o=this.parent.plugins.get("pinch",!0)||{};if(r=r||{},!(s!=null&&s.active)&&!(o!=null&&o.active)&&(!this.toX||!this.toY)&&(!r.x||!r.y)){i=i||this.oob();const a=i.topLeft,l=i.bottomRight;if(!this.toX&&!r.x){let c=null;i.left&&this.left?c=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-a.x:i.right&&this.right&&(c=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-l.x),c!==null&&this.parent.x!==c&&(this.toX={time:0,start:this.parent.x,delta:c-this.parent.x,end:c},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!r.y){let c=null;i.top&&this.top?c=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-a.y:i.bottom&&this.bottom&&(c=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-l.y),c!==null&&this.parent.y!==c&&(this.toY={time:0,start:this.parent.y,delta:c-this.parent.y,end:c},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const jye={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class $ye extends Zo{constructor(e,t={}){super(e),this.options=Object.assign({},jye,t),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="none"?this.noUnderflow=!0:e==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=e.indexOf("left")!==-1?-1:e.indexOf("right")!==-1?1:0,this.underflowY=e.indexOf("top")!==-1?-1:e.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const e=new qt(this.parent.x,this.parent.y),t=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let i=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,i=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,i=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,i=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,t.x=0,i=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,t.x=0,i=!0);i&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let i=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,i=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,i=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,i=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,t.y=0,i=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,t.y=0,i=!0);i&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const Xye={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class Yye extends Zo{constructor(e,t={}){super(e),this.options=Object.assign({},Xye,t),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let e=this.parent.worldScreenWidth,t=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&e<this.options.minWidth){const i=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/i,e=this.parent.worldScreenWidth,t=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&e>this.options.maxWidth){const i=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/i,e=this.parent.worldScreenWidth,t=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&t<this.options.minHeight){const i=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/i,e=this.parent.worldScreenWidth,t=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&t>this.options.maxHeight){const i=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/i,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const e={x:null,y:null},t={x:null,y:null};if(typeof this.options.minScale=="number")e.x=this.options.minScale,e.y=this.options.minScale;else if(this.options.minScale!==null){const s=this.options.minScale;e.x=typeof s.x>"u"?null:s.x,e.y=typeof s.y>"u"?null:s.y}if(typeof this.options.maxScale=="number")t.x=this.options.maxScale,t.y=this.options.maxScale;else if(this.options.maxScale!==null){const s=this.options.maxScale;t.x=typeof s.x>"u"?null:s.x,t.y=typeof s.y>"u"?null:s.y}let i=this.parent.scale.x,r=this.parent.scale.y;e.x!==null&&i<e.x&&(i=e.x),t.x!==null&&i>t.x&&(i=t.x),e.y!==null&&r<e.y&&(r=e.y),t.y!==null&&r>t.y&&(r=t.y),(i!==this.parent.scale.x||r!==this.parent.scale.y)&&(this.parent.scale.set(i,r),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}}const qye={friction:.98,bounce:.8,minSpeed:.01},Gc=16;class Zye extends Zo{constructor(e,t={}){super(e),this.options=Object.assign({},qye,t),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",i=>this.handleMoved(i))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const e=this.parent.input.count();return(e===1||e>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(e){if(this.saved.length){const t=this.saved[this.saved.length-1];e.type==="clamp-x"&&e.original?t.x===e.original.x&&(t.x=this.parent.x):e.type==="clamp-y"&&e.original&&t.y===e.original.y&&(t.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const e=performance.now();for(const t of this.saved)if(t.time>=e-100){const i=e-t.time;this.x=(this.parent.x-t.x)/i,this.y=(this.parent.y-t.y)/i,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(e){e=e||{},typeof e.x<"u"&&(this.x=e.x,this.percentChangeX=this.options.friction),typeof e.y<"u"&&(this.y=e.y,this.percentChangeY=this.options.friction)}update(e){if(this.paused)return;const t=this.x||this.y,i=this.timeSinceRelease,r=this.timeSinceRelease+e;if(this.x){const s=this.percentChangeX,o=Math.log(s);this.parent.x+=this.x*Gc/o*(Math.pow(s,r/Gc)-Math.pow(s,i/Gc)),this.x*=Math.pow(this.percentChangeX,e/Gc)}if(this.y){const s=this.percentChangeY,o=Math.log(s);this.parent.y+=this.y*Gc/o*(Math.pow(s,r/Gc)-Math.pow(s,i/Gc)),this.y*=Math.pow(this.percentChangeY,e/Gc)}this.timeSinceRelease+=e,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),t&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const Kye={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class Qye extends Zo{constructor(e,t={}){super(e),this.windowEventHandlers=[],this.options=Object.assign({},Kye,t),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){const t=r=>{e.includes(r.code)&&(this.keyIsPressed=!0)},i=r=>{e.includes(r.code)&&(this.keyIsPressed=!1)};this.addWindowEventHandler("keyup",i),this.addWindowEventHandler("keydown",t)}addWindowEventHandler(e,t){typeof window>"u"||(window.addEventListener(e,t),this.windowEventHandlers.push({event:e,handler:t}))}destroy(){typeof window>"u"||this.windowEventHandlers.forEach(({event:e,handler:t})=>{window.removeEventListener(e,t)})}mouseButtons(e){!e||e==="all"?this.mouse=[!0,!0,!0]:this.mouse=[e.indexOf("left")!==-1,e.indexOf("middle")!==-1,e.indexOf("right")!==-1]}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="center"?(this.underflowX=0,this.underflowY=0):(e.includes("left")?this.underflowX=-1:e.includes("right")?this.underflowX=1:this.underflowX=0,e.includes("top")?this.underflowY=-1:e.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(e){const t=e.pointerType==="mouse",i=this.parent.input.count();return!!((i===1||i>1&&!this.parent.plugins.get("pinch",!0))&&(!t||this.mouse[e.button]))}checkKeyPress(e){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&e.data.pointerType==="touch"}down(e){return this.paused||!this.options.pressDrag?!1:this.checkButtons(e)&&this.checkKeyPress(e)?(this.last={x:e.global.x,y:e.global.y},this.current=e.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(e){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===e.data.pointerId){const t=e.global.x,i=e.global.y,r=this.parent.input.count();if(r===1||r>1&&!this.parent.plugins.get("pinch",!0)){const s=t-this.last.x,o=i-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(s)||this.yDirection&&this.parent.input.checkThreshold(o)){const a={x:t,y:i};return this.xDirection&&(this.parent.x+=(a.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(a.y-this.last.y)*this.options.factor),this.last=a,this.moved||this.parent.emit("drag-start",{event:e,screen:new qt(this.last.x,this.last.y),world:this.parent.toWorld(new qt(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(e){if(this.paused)return!1;const t=this.parent.input.touches;if(t.length===1){const i=t[0];return i.last&&(this.last={x:i.last.x,y:i.last.y},this.current=i.id),this.moved=!1,!0}else if(this.last&&this.moved){const i=new qt(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:e,screen:i,world:this.parent.toWorld(i),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(e){if(this.paused)return!1;if(this.options.wheel){const t=this.parent.plugins.get("wheel",!0);if(!t||!t.options.wheelZoom&&!e.ctrlKey){const i=e.deltaMode?this.options.lineHeight:1,r=[e.deltaX,e.deltaY],[s,o]=this.options.wheelSwapAxes?r.reverse():r;return this.xDirection&&(this.parent.x+=s*i*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=o*i*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||e.preventDefault(),this.parent.options.stopPropagation&&e.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const e=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,e.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,e.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,e.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,e.y=0)}}const Jye={speed:0,acceleration:null,radius:null};class eve extends Zo{constructor(e,t,i={}){super(e),this.target=t,this.options=Object.assign({},Jye,i),this.velocity={x:0,y:0}}update(e){if(this.paused)return;const t=this.parent.center;let i=this.target.x,r=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-t.y,2)+Math.pow(this.target.x-t.x,2))>this.options.radius){const a=Math.atan2(this.target.y-t.y,this.target.x-t.x);i=this.target.x-Math.cos(a)*this.options.radius,r=this.target.y-Math.sin(a)*this.options.radius}else return;const s=i-t.x,o=r-t.y;if(s||o)if(this.options.speed)if(this.options.acceleration){const a=Math.atan2(r-t.y,i-t.x),l=Math.sqrt(Math.pow(s,2)+Math.pow(o,2));if(l){const c=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);l>c?this.velocity={x:Math.min(this.velocity.x+(this.options.acceleration*e,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration*e,this.options.speed))}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const u=Math.cos(a)*this.velocity.x,h=Math.sin(a)*this.velocity.y,d=Math.abs(u)>Math.abs(s)?i:t.x+u,f=Math.abs(h)>Math.abs(o)?r:t.y+h;this.parent.moveCenter(d,f),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const a=Math.atan2(r-t.y,i-t.x),l=Math.cos(a)*this.options.speed,c=Math.sin(a)*this.options.speed,u=Math.abs(l)>Math.abs(s)?i:t.x+l,h=Math.abs(c)>Math.abs(o)?r:t.y+c;this.parent.moveCenter(u,h),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(i,r),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const tve={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class nve extends Zo{constructor(e,t={}){super(e),this.options=Object.assign({},tve,t),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const e=this.options.distance;e!==null?(this.left=e,this.top=e,this.right=this.parent.screenWidth-e,this.bottom=this.parent.screenHeight-e):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(e){if(this.paused||e.pointerType!=="mouse"&&e.pointerId!==1||!this.options.allowButtons&&e.buttons!==0)return!1;const t=e.global.x,i=e.global.y;if(this.radiusSquared){const r=this.parent.toScreen(this.parent.center);if(Math.pow(r.x-t,2)+Math.pow(r.y-i,2)>=this.radiusSquared){const s=Math.atan2(r.y-i,r.x-t);this.options.linear?(this.horizontal=Math.round(Math.cos(s))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(s))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(s)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(s)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&t<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&t>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&i<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&i>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const e=this.parent.plugins.get("decelerate",!0);this.horizontal&&e&&!this.options.noDecelerate&&e.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const e=this.parent.plugins.get("decelerate",!0);this.vertical&&e&&!this.options.noDecelerate&&e.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const e=this.parent.center;this.horizontal&&(e.x+=this.horizontal*this.options.speed),this.vertical&&(e.y+=this.vertical*this.options.speed),this.parent.moveCenter(e),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const ive={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class rve extends Zo{constructor(e,t={}){super(e),this.active=!1,this.pinching=!1,this.moved=!1,this.options=Object.assign({},ive,t)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(e){if(this.paused||!this.active)return!1;const t=e.global.x,i=e.global.y,r=this.parent.input.touches;if(r.length>=2){const s=r[0],o=r[1],a=s.last&&o.last?Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2)):null;if(s.id===e.pointerId?s.last={x:t,y:i,data:e}:o.id===e.pointerId&&(o.last={x:t,y:i,data:e}),a){let l;const c=new qt(s.last.x+(o.last.x-s.last.x)/2,s.last.y+(o.last.y-s.last.y)/2);this.options.center||(l=this.parent.toLocal(c));let u=Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2));u=u===0?u=1e-10:u;const h=(1-a/u)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=h),this.isAxisY()&&(this.parent.scale.y+=h),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:c});const d=this.parent.plugins.get("clamp-zoom",!0);if(d&&d.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const f=this.parent.toGlobal(l);this.parent.x+=(c.x-f.x)*this.options.factor,this.parent.y+=(c.y-f.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(c.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(c.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=c,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}}const sve={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class ove extends Zo{constructor(e,t,i,r={}){super(e),this.options=Object.assign({},sve,r),this.ease=IE(r.ease,"easeInOutSine"),this.x=t,this.y=i,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const e=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-e.x,this.deltaY=this.y-e.y,this.startX=e.x,this.startY=e.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const e=this.parent.plugins.get("decelerate",!0);e&&(e.x||e.y)&&(e.percentChangeX=e.percentChangeY=this.options.friction)}return!1}update(e){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const t=this.snapping;t.time+=e;let i,r,s;const o=this.startX,a=this.startY,l=this.deltaX,c=this.deltaY;if(t.time>this.options.time)i=!0,r=o+l,s=a+c;else{const u=this.ease(t.time,0,1,this.options.time);r=o+l*u,s=a+c*u}this.options.topLeft?this.parent.moveCorner(r,s):this.parent.moveCenter(r,s),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),i&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const t=this.options.topLeft?this.parent.corner:this.parent.center;(t.x!==this.x||t.y!==this.y)&&this.snapStart()}}}const ave={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class lve extends Zo{constructor(e,t={}){super(e),this.options=Object.assign({},ave,t),this.ease=IE(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=e.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=e.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(e.container.scale.x=this.xScale,e.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):t.forceStart&&this.createSnapping()}createSnapping(){const e=this.parent.worldScreenWidth,t=this.parent.worldScreenHeight,i=this.parent.screenWidth/this.xScale,r=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:e,startY:t,deltaX:i-e,deltaY:r-t},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(e){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let t;if(!this.options.center&&!this.options.noMove&&(t=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const i=this.snapping;if(i.time+=e,i.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const s=this.snapping,o=this.ease(s.time,s.startX,s.deltaX,this.options.time),a=this.ease(s.time,s.startY,s.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/o,this.parent.scale.y=this.parent.screenHeight/a}const r=this.parent.plugins.get("clamp-zoom",!0);r&&r.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(t))}}resume(){this.snapping=null,super.resume()}}const cve={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class uve extends Zo{constructor(e,t={}){super(e),this.options=Object.assign({},cve,t),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){typeof window>"u"||(window.addEventListener("keydown",t=>{e.includes(t.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",t=>{e.includes(t.code)&&(this.keyIsPressed=!1)}))}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const e=this.smoothingCenter,t=this.smoothing;let i;this.options.center||(i=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x+=t.x),this.isAxisY()&&(this.parent.scale.y+=t.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const r=this.parent.plugins.get("clamp-zoom",!0);if(r&&r.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const s=this.parent.toGlobal(i);this.parent.x+=e.x-s.x,this.parent.y+=e.y-s.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(e){if(this.paused)return;const t=this.parent.input.getPointerPosition(e),i=-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/200,r=Math.pow(2,(1+this.options.percent)*i);let s;this.options.center||(s=this.parent.toLocal(t)),this.isAxisX()&&(this.parent.scale.x*=r),this.isAxisY()&&(this.parent.scale.y*=r),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=t.x-a.x,this.parent.y+=t.y-a.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}wheel(e){if(this.paused||!this.checkKeyPress())return!1;if(e.ctrlKey&&this.options.trackpadPinch)this.pinch(e);else if(this.options.wheelZoom){const t=this.parent.input.getPointerPosition(e),i=(this.options.reverse?-1:1)*-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/500,r=Math.pow(2,(1+this.options.percent)*i);if(this.options.smooth){const s={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+s.x)*r-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+s.y)*r-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=t}else{let s;this.options.center||(s=this.parent.toLocal(t)),this.isAxisX()&&(this.parent.scale.x*=r),this.isAxisY()&&(this.parent.scale.y*=r),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=t.x-a.x,this.parent.y+=t.y-a.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}return!this.parent.options.passiveWheel}}class hve{constructor(e){this.viewport=e,this.touches=[],this.addListeners()}addListeners(){this.viewport.eventMode="static",this.viewport.forceHitArea||(this.viewport.hitArea=new Er(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=e=>this.handleWheel(e),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){var e;(e=this.viewport.options.events.domElement)==null||e.removeEventListener("wheel",this.wheelFunction)}down(e){if(!(this.viewport.pause||!this.viewport.visible)){if(e.pointerType==="mouse"?this.isMouseDown=!0:this.get(e.pointerId)||this.touches.push({id:e.pointerId,last:null}),this.count()===1){this.last=e.global.clone();const t=this.viewport.plugins.get("decelerate",!0),i=this.viewport.plugins.get("bounce",!0);(!t||!t.isActive())&&(!i||!i.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(e)&&this.viewport.options.stopPropagation&&e.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(e){return Math.abs(e)>=this.viewport.threshold}move(e){if(this.viewport.pause||!this.viewport.visible)return;const t=this.viewport.plugins.move(e);if(this.clickedAvailable&&this.last){const i=e.global.x-this.last.x,r=e.global.y-this.last.y;(this.checkThreshold(i)||this.checkThreshold(r))&&(this.clickedAvailable=!1)}t&&this.viewport.options.stopPropagation&&e.stopPropagation()}up(e){if(this.viewport.pause||!this.viewport.visible)return;e.pointerType==="mouse"&&(this.isMouseDown=!1),e.pointerType!=="mouse"&&this.remove(e.pointerId);const t=this.viewport.plugins.up(e);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:e,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),t&&this.viewport.options.stopPropagation&&e.stopPropagation()}getPointerPosition(e){const t=new qt;return this.viewport.options.events.mapPositionToPoint(t,e.clientX,e.clientY),t}handleWheel(e){if(this.viewport.pause||!this.viewport.visible)return;const t=this.viewport.toLocal(this.getPointerPosition(e));this.viewport.left<=t.x&&t.x<=this.viewport.right&&this.viewport.top<=t.y&&t.y<=this.viewport.bottom&&this.viewport.plugins.wheel(e)&&!this.viewport.options.passiveWheel&&e.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(e){for(const t of this.touches)if(t.id===e)return t;return null}remove(e){for(let t=0;t<this.touches.length;t++)if(this.touches[t].id===e){this.touches.splice(t,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}const ny=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class dve{constructor(e){this.viewport=e,this.list=[],this.plugins={}}add(e,t,i=ny.length){const r=this.plugins[e];r&&r.destroy(),this.plugins[e]=t;const s=ny.indexOf(e);s!==-1&&ny.splice(s,1),ny.splice(i,0,e),this.sort()}get(e,t){var i;return t&&(i=this.plugins[e])!=null&&i.paused?null:this.plugins[e]}update(e){for(const t of this.list)t.update(e)}resize(){for(const e of this.list)e.resize()}reset(){for(const e of this.list)e.reset()}removeAll(){this.list.forEach(e=>{e.destroy()}),this.plugins={},this.sort()}remove(e){var t;this.plugins[e]&&((t=this.plugins[e])==null||t.destroy(),delete this.plugins[e],this.viewport.emit("plugin-remove",e),this.sort())}pause(e){var t;(t=this.plugins[e])==null||t.pause()}resume(e){var t;(t=this.plugins[e])==null||t.resume()}sort(){this.list=[];for(const e of ny)this.plugins[e]&&this.list.push(this.plugins[e])}down(e){let t=!1;for(const i of this.list)i.down(e)&&(t=!0);return t}move(e){let t=!1;for(const i of this.viewport.plugins.list)i.move(e)&&(t=!0);return t}up(e){let t=!1;for(const i of this.list)i.up(e)&&(t=!0);return t}wheel(e){let t=!1;for(const i of this.list)i.wheel(e)&&(t=!0);return t}}const fve={screenWidth:typeof window>"u"?0:window.innerWidth,screenHeight:typeof window>"u"?0:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:sd.shared,allowPreserveDragOutside:!1};let X9=class extends dn{constructor(e){super(),this._disableOnContextMenu=t=>t.preventDefault(),this.options={...fve,...e},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new hve(this),this.plugins=new dve(this)}destroy(e){var t;!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&((t=this.options.events.domElement)==null||t.removeEventListener("contextmenu",this._disableOnContextMenu)),this.input.destroy(),super.destroy(e)}update(e){this.pause||(this.plugins.update(e),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new Er(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(e=typeof window>"u"?0:window.innerWidth,t=typeof window>"u"?0:window.innerHeight,i,r){this.screenWidth=e,this.screenHeight=t,typeof i<"u"&&(this._worldWidth=i),typeof r<"u"&&(this._worldHeight=r),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(e){this._worldWidth=e,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(e){this._worldHeight=e,this.plugins.resize()}getVisibleBounds(){return new Er(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(e,t){return arguments.length===2?this.toLocal(new qt(e,t)):this.toLocal(e)}toScreen(e,t){return arguments.length===2?this.toGlobal(new qt(e,t)):this.toGlobal(e)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new qt(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(e){this.moveCenter(e)}moveCenter(...e){let t,i;typeof e[0]=="number"?(t=e[0],i=e[1]):(t=e[0].x,i=e[0].y);const r=(this.worldScreenWidth/2-t)*this.scale.x,s=(this.worldScreenHeight/2-i)*this.scale.y;return(this.x!==r||this.y!==s)&&(this.position.set(r,s),this.plugins.reset(),this.dirty=!0),this}get corner(){return new qt(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(e){this.moveCorner(e)}moveCorner(...e){let t,i;return e.length===1?(t=-e[0].x*this.scale.x,i=-e[0].y*this.scale.y):(t=-e[0]*this.scale.x,i=-e[1]*this.scale.y),(t!==this.x||i!==this.y)&&(this.position.set(t,i),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(e){return this.screenWidth/e}findFitHeight(e){return this.screenHeight/e}findFit(e,t){const i=this.screenWidth/e,r=this.screenHeight/t;return Math.min(i,r)}findCover(e,t){const i=this.screenWidth/e,r=this.screenHeight/t;return Math.max(i,r)}fitWidth(e=this.worldWidth,t,i=!0,r){let s;t&&(s=this.center),this.scale.x=this.screenWidth/e,i&&(this.scale.y=this.scale.x);const o=this.plugins.get("clamp-zoom",!0);return!r&&o&&o.clamp(),t&&s&&this.moveCenter(s),this}fitHeight(e=this.worldHeight,t,i=!0,r){let s;t&&(s=this.center),this.scale.y=this.screenHeight/e,i&&(this.scale.x=this.scale.y);const o=this.plugins.get("clamp-zoom",!0);return!r&&o&&o.clamp(),t&&s&&this.moveCenter(s),this}fitWorld(e){let t;e&&(t=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),e&&t&&this.moveCenter(t),this}fit(e,t=this.worldWidth,i=this.worldHeight){let r;e&&(r=this.center),this.scale.x=this.screenWidth/t,this.scale.y=this.screenHeight/i,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const s=this.plugins.get("clamp-zoom",!0);return s&&s.clamp(),e&&r&&this.moveCenter(r),this}setZoom(e,t){let i;t&&(i=this.center),this.scale.set(e);const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),t&&i&&this.moveCenter(i),this}zoomPercent(e,t){return this.setZoom(this.scale.x+this.scale.x*e,t)}zoom(e,t){return this.fitWidth(e+this.worldScreenWidth,t),this}get scaled(){return this.scale.x}set scaled(e){this.setZoom(e,!0)}snapZoom(e){return this.plugins.add("snap-zoom",new lve(this,e)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new qt(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(e){this.x=-e*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(e){this.x=-e*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(e){this.y=-e*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(e){this.y=-e*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(e){this._dirty=e}get forceHitArea(){return this._forceHitArea}set forceHitArea(e){e?(this._forceHitArea=e,this.hitArea=e):(this._forceHitArea=null,this.hitArea=new Er(0,0,this.worldWidth,this.worldHeight))}drag(e){return this.plugins.add("drag",new Qye(this,e)),this}clamp(e){return this.plugins.add("clamp",new $ye(this,e)),this}decelerate(e){return this.plugins.add("decelerate",new Zye(this,e)),this}bounce(e){return this.plugins.add("bounce",new Gye(this,e)),this}pinch(e){return this.plugins.add("pinch",new rve(this,e)),this}snap(e,t,i){return this.plugins.add("snap",new ove(this,e,t,i)),this}follow(e,t){return this.plugins.add("follow",new eve(this,e,t)),this}wheel(e){return this.plugins.add("wheel",new uve(this,e)),this}animate(e){return this.plugins.add("animate",new Wye(this,e)),this}clampZoom(e){return this.plugins.add("clamp-zoom",new Yye(this,e)),this}mouseEdges(e){return this.plugins.add("mouse-edges",new nve(this,e)),this}get pause(){return!!this._pause}set pause(e){this._pause=e,this.lastViewport=null,this.moving=!1,this.zooming=!1,e&&this.input.pause()}ensureVisible(e,t,i,r,s){s&&(i>this.worldScreenWidth||r>this.worldScreenHeight)&&(this.fit(!0,i,r),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let o=!1;e<this.left?(this.left=e,o=!0):e+i>this.right&&(this.right=e+i,o=!0),t<this.top?(this.top=t,o=!0):t+r>this.bottom&&(this.bottom=t+r,o=!0),o&&this.emit("moved",{viewport:this,type:"ensureVisible"})}};class pve extends dn{constructor(){super();ve(this,"dot");ve(this,"hand");this.eventMode="none",this.dot=new Vn().circle(0,0,0).fill(15),this.addChild(this.dot),this.hand=new Vn,this.hand.circle(0,0,4).fill(11189196),this.addChild(this.hand)}update(t){let i=$m(t.global.x),r=Xm(t.global.y);Lt.getState().snap&&(i=Math.trunc(i-i%10),r=Math.trunc(r-r%10)),this.position.set(i,r)}setCursor(t){}}qs.add(dW);dn.mixin(qJ);class Y9{constructor(e){ve(this,"receiver");ve(this,"loadData");this.receiver=cs.Instance,this.loadData=e}execute(){this.receiver.load(this.loadData)}}class mve extends dn{constructor(t,i){super();ve(this,"gridGraphics");ve(this,"worldWidth");ve(this,"worldHeight");this.worldWidth=t,this.worldHeight=i,this.gridGraphics=new Vn,this.addChild(this.gridGraphics),this.drawGrid()}drawGrid(){for(let a=0;a<=this.worldWidth;a+=10)this.gridGraphics.moveTo(a,0),this.gridGraphics.lineTo(a,this.worldHeight),this.gridGraphics.stroke({width:.5,color:2236962,alpha:.25});for(let a=0;a<=this.worldHeight;a+=10)this.gridGraphics.moveTo(0,a),this.gridGraphics.lineTo(this.worldWidth,a),this.gridGraphics.stroke({width:.5,color:2236962,alpha:.25});for(let a=0;a<=this.worldWidth;a+=100)this.gridGraphics.moveTo(a,0),this.gridGraphics.lineTo(a,this.worldHeight),this.gridGraphics.stroke({width:.5,color:2236962,alpha:.75});for(let a=0;a<=this.worldHeight;a+=100)this.gridGraphics.moveTo(0,a),this.gridGraphics.lineTo(this.worldWidth,a),this.gridGraphics.stroke({width:.5,color:2236962,alpha:.75})}update(t,i){this.worldWidth=t,this.worldHeight=i,this.gridGraphics.clear(),this.drawGrid()}}const gve=[{furnitureArray:[],wallNodes:[{id:1,x:2200,y:2200},{id:2,x:2200,y:2800},{id:3,x:3100,y:2800},{id:4,x:3100,y:2200},{id:5,x:2600,y:2200},{id:6,x:3330,y:2180},{id:7,x:3320,y:2810},{id:8,x:4080,y:2800},{id:9,x:3820,y:2480},{id:10,x:4080,y:2200},{id:11,x:3630,y:2190},{id:12,x:3490,y:2700},{id:13,x:3330,y:2450},{id:14,x:3560,y:2460},{id:15,x:3720,y:2190},{id:16,x:2630,y:2800},{id:17,x:2620,y:2490},{id:18,x:2620,y:2600},{id:19,x:2910,y:2580},{id:20,x:2410,y:2800},{id:21,x:2410,y:2500}],wallNodeLinks:[[1,[{id:2,wallUuid:"7cea5608-7f34-458f-9491-da5d4a65da2b",thickness:40}]],[2,[{id:20,wallUuid:"1c98bba9-0f27-46fb-bfc3-215d684e91c2",thickness:40}]],[3,[{id:4,wallUuid:"962edbbd-bf91-4c4d-99ed-e288a731f14a",thickness:40}]],[4,[{id:5,wallUuid:"cfe718ac-7aa0-420a-bf28-026f99bfab82",thickness:40}]],[5,[{id:1,wallUuid:"2d785296-466c-4546-a4d7-5e1fab9edb1a",thickness:40}]],[6,[{id:11,wallUuid:"e17adbea-2cee-4dcd-9c7b-7cb83f76e65e",thickness:40}]],[7,[{id:13,wallUuid:"7cbc7693-9c9f-4fc6-a5e1-c8f29708b232",thickness:40}]],[8,[{id:7,wallUuid:"a068d9d1-d0e4-4d51-baf7-8a793bc77117",thickness:40}]],[9,[{id:8,wallUuid:"c811f530-1483-4888-b289-bcc73eb4920b",thickness:40},{id:12,wallUuid:"df67ebdf-0933-46bb-9167-91706c563253",thickness:40},{id:15,wallUuid:"b8bae277-bb1b-46be-90e8-1ed12b5d6141",thickness:40}]],[10,[{id:9,wallUuid:"4ffdb670-93ab-492e-b79e-30994a2b7ae9",thickness:40}]],[11,[{id:15,wallUuid:"78ef35e1-fea3-4594-9129-55646185b2df",thickness:40}]],[12,[{id:14,wallUuid:"54f87e2d-f764-4c34-aaa6-de526fc632ab",thickness:40}]],[13,[{id:6,wallUuid:"cacf319b-f057-4211-bbf4-052eb2539107",thickness:40}]],[14,[{id:11,wallUuid:"e1c8d954-cd6f-4998-82dd-faf776301862",thickness:40},{id:13,wallUuid:"c27c2384-ccde-4d24-8965-0a6fa63dff8c",thickness:40}]],[15,[{id:10,wallUuid:"2d5c68ba-5064-439a-a7d4-2e3b7e217d26",thickness:40}]],[16,[{id:3,wallUuid:"b9099759-f3e2-435a-b33b-11f93916098f",thickness:40},{id:18,wallUuid:"a9a91a11-b6eb-4abb-bcbb-75a980bb36d8",thickness:40}]],[17,[]],[18,[{id:17,wallUuid:"c12d9a06-362c-4319-b280-3b01ac376ccc",thickness:40},{id:19,wallUuid:"056b777d-020b-485d-b4b4-be270e631cd9",thickness:40}]],[19,[]],[20,[{id:16,wallUuid:"950f86a6-d108-4bbe-a235-7c595e0b9f6d",thickness:40}]],[21,[{id:20,wallUuid:"c1724bcf-e032-4244-9461-aad4c988c65d",thickness:15}]]]}],yve={floors:gve},xv=class xv extends X9{constructor(t){super(t);ve(this,"floorPlan");ve(this,"transformLayer");ve(this,"addWallManager");ve(this,"grid");ve(this,"pointer");ve(this,"preview");this.setup(),this.preview=new RE({}),this.addChild(this.preview.getReference())}async setup(){xv.viewportPluginManager=this.plugins,this.drag({mouseButtons:"right"}).clamp({direction:"all"}).pinch().wheel().decelerate().clampZoom({minScale:.5,maxScale:6}),this.center=new qt(this.worldWidth/2,this.worldHeight/2);const t=new dn;this.addChildAt(t,0),this.grid=new mve(this.worldWidth,this.worldHeight),this.addChild(this.grid),this.floorPlan=cs.Instance,this.addChild(this.floorPlan),this.transformLayer=_u.Instance,this.addChild(this.transformLayer),this.addWallManager=Wd.Instance;const i=this.addWallManager.preview.getReference();this.addChild(i),this.pointer=new pve,this.addChild(this.pointer),this.on("pointerdown",this.onMouseDown),this.on("pointermove",this.updatePreview),this.on("pointerup",this.onPointerUp),this.loadMockupPlan()}onMouseDown(t){if(t.stopPropagation(),t.button===0&&t.target===this){const r=Lt.getState();this.floorPlan.children.forEach(s=>{s.children.forEach(o=>{o instanceof oS&&o.blurAllElements()})}),r.setFocusedElement(null)}this.checkTools(t)}onPointerUp(t){document.body.style.cursor="default",this.updateEnd(t)}updatePreview(t){switch(this.addWallManager.updatePreview(t),this.preview.updatePreview(t),this.pointer.update(t),Lt.getState().activeTool){case mt.WallAdd:this.pointer.alpha=1;break;default:this.pointer.alpha=0}}updateEnd(t){switch(Lt.getState().activeTool){case mt.Measure:this.preview.setA(void 0);break;case mt.WallAdd:break;case mt.Edit:break}}checkTools(t){if(t.button===2)return;const i={x:$m(t.global.x),y:Xm(t.global.y)};switch(Lt.getState().activeTool){case mt.WallAdd:new AV(void 0,i).execute();break;case mt.Edit:break;case mt.Measure:this.preview.setA(i);break}}loadMockupPlan(){new Y9(JSON.stringify(yve)).execute()}};ve(xv,"viewportPluginManager"),ve(xv,"app");let uS=xv;const vve=Lt.getState().setSnap;document.onkeydown=n=>{if(n.key==="Control"&&vve(!1),n.key==="Escape"){const{activeMode:e,setTool:t,activeTool:i}=Lt.getState();e===bs.Edit&&(t(mt.None),t(i))}};Cn.remove(Fye);let jr;function xve(){const n=R.useRef(null),{setApp:e}=Lt();return R.useEffect(()=>{const t=new tL;(async()=>{await t.init({view:document.getElementById("pixi-canvas"),resolution:window.devicePixelRatio||1,autoDensity:!0,backgroundColor:fL,antialias:!0,resizeTo:window}),t.canvas.oncontextmenu=r=>{r.preventDefault()};const i={screenWidth:t.screen.width,screenHeight:t.screen.height,worldWidth:50*Fo,worldHeight:50*Fo,events:t.renderer.events,eventMode:"static"};jr=new uS(i),n.current.appendChild(t.canvas),t.start(),t.stage.addChild(jr),e(t)})()},[]),k.jsx("div",{ref:n})}function U0({icon:n,label:e,active:t,onClick:i,options:r,position:s="right",disabled:o=!1}){const a=()=>k.jsx("div",{onClick:i,className:`w-10 h-10 rounded-md flex items-center justify-center transition-colors ${t?"bg-blue-100  text-blue-500 dark:text-primary-400":"text-gray-600 dark:text-dark-0 hover:bg-gray-100"} ${o?"opacity-25 cursor-not-allowed":""}`,children:k.jsx(n,{})});return r?k.jsxs(Hn,{position:s,trigger:"hover",children:[k.jsx(Hn.Target,{children:k.jsx(Ca,{children:k.jsx(a,{})})}),k.jsx(Hn.Dropdown,{children:r.map(l=>k.jsx(Hn.Item,{leftSection:l.icon,onClick:l.onClick,disabled:l.disabled,className:l.active?"text-blue-500":"",children:l.title},l.title))})]}):k.jsx(k0,{label:e,position:s,withArrow:!0,children:k.jsx(Ca,{disabled:o,children:k.jsx(a,{})})})}function _ve(){const{helpMode:n,setHelpMode:e}=Lt(),t=()=>{e(!n),dc(),vl({title:`💡 ${n?"Tryb pomocy został wyłączony":"Tryb pomocy został aktywowany"}`,message:"",color:"yellow"})};return k.jsx(k.Fragment,{children:k.jsx(mc,{children:k.jsx(U0,{active:n,onClick:t,icon:Sse,label:"Tryb pomocy"})})})}const q9=_W(n=>({categories:[],currentFurnitureData:[],getCategories:async()=>{n(()=>({categories:[]}))},getCurrentFurnitureData:async()=>{n(()=>({currentFurnitureData:[]}))}})),wve=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function B0(n,e){const t=bve(n);if(typeof t.path!="string"){const{webkitRelativePath:i}=n;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof i=="string"&&i.length>0?i:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function bve(n){const{name:e}=n;if(e&&e.lastIndexOf(".")!==-1&&!n.type){const i=e.split(".").pop().toLowerCase(),r=wve.get(i);r&&Object.defineProperty(n,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return n}var hg=(n,e,t)=>new Promise((i,r)=>{var s=l=>{try{a(t.next(l))}catch(c){r(c)}},o=l=>{try{a(t.throw(l))}catch(c){r(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(n,e)).next())});const Sve=[".DS_Store","Thumbs.db"];function Eve(n){return hg(this,null,function*(){return hS(n)&&Mve(n.dataTransfer)?Pve(n.dataTransfer,n.type):Tve(n)?Ave(n):Array.isArray(n)&&n.every(e=>"getFile"in e&&typeof e.getFile=="function")?Cve(n):[]})}function Mve(n){return hS(n)}function Tve(n){return hS(n)&&hS(n.target)}function hS(n){return typeof n=="object"&&n!==null}function Ave(n){return WR(n.target.files).map(e=>B0(e))}function Cve(n){return hg(this,null,function*(){return(yield Promise.all(n.map(t=>t.getFile()))).map(t=>B0(t))})}function Pve(n,e){return hg(this,null,function*(){if(n.items){const t=WR(n.items).filter(r=>r.kind==="file");if(e!=="drop")return t;const i=yield Promise.all(t.map(Rve));return L4(Z9(i))}return L4(WR(n.files).map(t=>B0(t)))})}function L4(n){return n.filter(e=>Sve.indexOf(e.name)===-1)}function WR(n){if(n===null)return[];const e=[];for(let t=0;t<n.length;t++){const i=n[t];e.push(i)}return e}function Rve(n){if(typeof n.webkitGetAsEntry!="function")return N4(n);const e=n.webkitGetAsEntry();return e&&e.isDirectory?K9(e):N4(n)}function Z9(n){return n.reduce((e,t)=>[...e,...Array.isArray(t)?Z9(t):[t]],[])}function N4(n){const e=n.getAsFile();if(!e)return Promise.reject(`${n} is not a File`);const t=B0(e);return Promise.resolve(t)}function Ive(n){return hg(this,null,function*(){return n.isDirectory?K9(n):Lve(n)})}function K9(n){const e=n.createReader();return new Promise((t,i)=>{const r=[];function s(){e.readEntries(o=>hg(this,null,function*(){if(o.length){const a=Promise.all(o.map(Ive));r.push(a),s()}else try{const a=yield Promise.all(r);t(a)}catch(a){i(a)}}),o=>{i(o)})}s()})}function Lve(n){return hg(this,null,function*(){return new Promise((e,t)=>{n.file(i=>{const r=B0(i,n.fullPath);e(r)},i=>{t(i)})})})}function Nve(n,e){if(n&&e){const t=Array.isArray(e)?e:e.split(","),i=n.name||"",r=(n.type||"").toLowerCase(),s=r.replace(/\/.*$/,"");return t.some(o=>{const a=o.trim().toLowerCase();return a.charAt(0)==="."?i.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):r===a})}return!0}var kve=Object.defineProperty,Ove=Object.defineProperties,Dve=Object.getOwnPropertyDescriptors,k4=Object.getOwnPropertySymbols,Fve=Object.prototype.hasOwnProperty,Uve=Object.prototype.propertyIsEnumerable,O4=(n,e,t)=>e in n?kve(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Bve=(n,e)=>{for(var t in e||(e={}))Fve.call(e,t)&&O4(n,t,e[t]);if(k4)for(var t of k4(e))Uve.call(e,t)&&O4(n,t,e[t]);return n},zve=(n,e)=>Ove(n,Dve(e));const Hve="file-invalid-type",Wve="file-too-large",Vve="file-too-small",Gve="too-many-files",jve=n=>{n=Array.isArray(n)&&n.length===1?n[0]:n;const e=Array.isArray(n)?`one of ${n.join(", ")}`:n;return{code:Hve,message:`File type must be ${e}`}},D4=n=>({code:Wve,message:`File is larger than ${n} ${n===1?"byte":"bytes"}`}),F4=n=>({code:Vve,message:`File is smaller than ${n} ${n===1?"byte":"bytes"}`}),$ve={code:Gve,message:"Too many files"};function Q9(n,e){const t=n.type==="application/x-moz-file"||Nve(n,e);return[t,t?null:jve(e)]}function J9(n,e,t){if(td(n.size))if(td(e)&&td(t)){if(n.size>t)return[!1,D4(t)];if(n.size<e)return[!1,F4(e)]}else{if(td(e)&&n.size<e)return[!1,F4(e)];if(td(t)&&n.size>t)return[!1,D4(t)]}return[!0,null]}function td(n){return n!=null}function Xve({files:n,accept:e,minSize:t,maxSize:i,multiple:r,maxFiles:s,validator:o}){return!r&&n.length>1||r&&s>=1&&n.length>s?!1:n.every(a=>{const[l]=Q9(a,e),[c]=J9(a,t,i),u=o?o(a):null;return l&&c&&!u})}function dS(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function $_(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,e=>e==="Files"||e==="application/x-moz-file"):!!n.target&&!!n.target.files}function U4(n){n.preventDefault()}function Yve(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function qve(n){return n.indexOf("Edge/")!==-1}function Zve(n=window.navigator.userAgent){return Yve(n)||qve(n)}function Ka(...n){return(e,...t)=>n.some(i=>(!dS(e)&&i&&i(e,...t),dS(e)))}function Kve(){return"showOpenFilePicker"in window}function Qve(n){return td(n)?[{description:"Files",accept:Object.entries(n).filter(([t,i])=>{let r=!0;return e7(t)||(r=!1),(!Array.isArray(i)||!i.every(t7))&&(r=!1),r}).reduce((t,[i,r])=>zve(Bve({},t),{[i]:r}),{})}]:n}function Jve(n){if(td(n))return Object.entries(n).reduce((e,[t,i])=>[...e,t,...i],[]).filter(e=>e7(e)||t7(e)).join(",")}function e0e(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function t0e(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}function e7(n){return n==="audio/*"||n==="video/*"||n==="image/*"||n==="text/*"||/\w+\/[-+.\w]+/g.test(n)}function t7(n){return/^.*\.[\w]+$/.test(n)}var n0e=Object.defineProperty,i0e=Object.defineProperties,r0e=Object.getOwnPropertyDescriptors,fS=Object.getOwnPropertySymbols,n7=Object.prototype.hasOwnProperty,i7=Object.prototype.propertyIsEnumerable,B4=(n,e,t)=>e in n?n0e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ss=(n,e)=>{for(var t in e||(e={}))n7.call(e,t)&&B4(n,t,e[t]);if(fS)for(var t of fS(e))i7.call(e,t)&&B4(n,t,e[t]);return n},ou=(n,e)=>i0e(n,r0e(e)),pS=(n,e)=>{var t={};for(var i in n)n7.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&fS)for(var i of fS(n))e.indexOf(i)<0&&i7.call(n,i)&&(t[i]=n[i]);return t};const Ik=R.forwardRef((n,e)=>{var t=n,{children:i}=t,r=pS(t,["children"]);const s=s7(r),{open:o}=s,a=pS(s,["open"]);return R.useImperativeHandle(e,()=>({open:o}),[o]),ae.createElement(R.Fragment,null,i(ou(ss({},a),{open:o})))});Ik.displayName="Dropzone";const r7={disabled:!1,getFilesFromEvent:Eve,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Ik.defaultProps=r7;Ik.propTypes={children:Un.func,accept:Un.objectOf(Un.arrayOf(Un.string)),multiple:Un.bool,preventDropOnDocument:Un.bool,noClick:Un.bool,noKeyboard:Un.bool,noDrag:Un.bool,noDragEventsBubbling:Un.bool,minSize:Un.number,maxSize:Un.number,maxFiles:Un.number,disabled:Un.bool,getFilesFromEvent:Un.func,onFileDialogCancel:Un.func,onFileDialogOpen:Un.func,useFsAccessApi:Un.bool,autoFocus:Un.bool,onDragEnter:Un.func,onDragLeave:Un.func,onDragOver:Un.func,onDrop:Un.func,onDropAccepted:Un.func,onDropRejected:Un.func,onError:Un.func,validator:Un.func};const VR={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function s7(n={}){const{accept:e,disabled:t,getFilesFromEvent:i,maxSize:r,minSize:s,multiple:o,maxFiles:a,onDragEnter:l,onDragLeave:c,onDragOver:u,onDrop:h,onDropAccepted:d,onDropRejected:f,onFileDialogCancel:p,onFileDialogOpen:x,useFsAccessApi:v,autoFocus:y,preventDropOnDocument:w,noClick:_,noKeyboard:b,noDrag:E,noDragEventsBubbling:M,onError:C,validator:P}=ss(ss({},r7),n),T=R.useMemo(()=>Jve(e),[e]),I=R.useMemo(()=>Qve(e),[e]),U=R.useMemo(()=>typeof x=="function"?x:z4,[x]),j=R.useMemo(()=>typeof p=="function"?p:z4,[p]),B=R.useRef(null),z=R.useRef(null),[$,H]=R.useReducer(s0e,VR),{isFocused:Z,isFileDialogActive:O}=$,W=R.useRef(typeof window<"u"&&window.isSecureContext&&v&&Kve()),D=()=>{!W.current&&O&&setTimeout(()=>{if(z.current){const{files:Le}=z.current;Le.length||(H({type:"closeDialog"}),j())}},300)};R.useEffect(()=>(window.addEventListener("focus",D,!1),()=>{window.removeEventListener("focus",D,!1)}),[z,O,j,W]);const Y=R.useRef([]),Q=Le=>{B.current&&B.current.contains(Le.target)||(Le.preventDefault(),Y.current=[])};R.useEffect(()=>(w&&(document.addEventListener("dragover",U4,!1),document.addEventListener("drop",Q,!1)),()=>{w&&(document.removeEventListener("dragover",U4),document.removeEventListener("drop",Q))}),[B,w]),R.useEffect(()=>(!t&&y&&B.current&&B.current.focus(),()=>{}),[B,y,t]);const re=R.useCallback(Le=>{C&&C(Le)},[C]),ce=R.useCallback(Le=>{Le.preventDefault(),Le.persist(),me(Le),Y.current=[...Y.current,Le.target],$_(Le)&&Promise.resolve(i(Le)).then(Ye=>{if(dS(Le)&&!M)return;const q=Ye.length,X=q>0&&Xve({files:Ye,accept:T,minSize:s,maxSize:r,multiple:o,maxFiles:a,validator:P}),pe=q>0&&!X;H({isDragAccept:X,isDragReject:pe,isDragActive:!0,type:"setDraggedFiles"}),l&&l(Le)}).catch(Ye=>re(Ye))},[i,l,re,M,T,s,r,o,a,P]),oe=R.useCallback(Le=>{Le.preventDefault(),Le.persist(),me(Le);const Ye=$_(Le);if(Ye&&Le.dataTransfer)try{Le.dataTransfer.dropEffect="copy"}catch{}return Ye&&u&&u(Le),!1},[u,M]),he=R.useCallback(Le=>{Le.preventDefault(),Le.persist(),me(Le);const Ye=Y.current.filter(X=>B.current&&B.current.contains(X)),q=Ye.indexOf(Le.target);q!==-1&&Ye.splice(q,1),Y.current=Ye,!(Ye.length>0)&&(H({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),$_(Le)&&c&&c(Le))},[B,c,M]),Re=R.useCallback((Le,Ye)=>{const q=[],X=[];Le.forEach(pe=>{const[_e,xe]=Q9(pe,T),[Me,je]=J9(pe,s,r),qe=P?P(pe):null;if(_e&&Me&&!qe)q.push(pe);else{let Ne=[xe,je];qe&&(Ne=Ne.concat(qe)),X.push({file:pe,errors:Ne.filter(Qe=>Qe)})}}),(!o&&q.length>1||o&&a>=1&&q.length>a)&&(q.forEach(pe=>{X.push({file:pe,errors:[$ve]})}),q.splice(0)),H({acceptedFiles:q,fileRejections:X,type:"setFiles"}),h&&h(q,X,Ye),X.length>0&&f&&f(X,Ye),q.length>0&&d&&d(q,Ye)},[H,o,T,s,r,a,h,d,f,P]),Oe=R.useCallback(Le=>{Le.preventDefault(),Le.persist(),me(Le),Y.current=[],$_(Le)&&Promise.resolve(i(Le)).then(Ye=>{dS(Le)&&!M||Re(Ye,Le)}).catch(Ye=>re(Ye)),H({type:"reset"})},[i,Re,re,M]),Ve=R.useCallback(()=>{if(W.current){H({type:"openDialog"}),U();const Le={multiple:o,types:I};window.showOpenFilePicker(Le).then(Ye=>i(Ye)).then(Ye=>{Re(Ye,null),H({type:"closeDialog"})}).catch(Ye=>{e0e(Ye)?(j(Ye),H({type:"closeDialog"})):t0e(Ye)?(W.current=!1,z.current?(z.current.value=null,z.current.click()):re(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):re(Ye)});return}z.current&&(H({type:"openDialog"}),U(),z.current.value=null,z.current.click())},[H,U,j,v,Re,re,I,o]),Je=R.useCallback(Le=>{!B.current||!B.current.isEqualNode(Le.target)||(Le.key===" "||Le.key==="Enter"||Le.keyCode===32||Le.keyCode===13)&&(Le.preventDefault(),Ve())},[B,Ve]),Fe=R.useCallback(()=>{H({type:"focus"})},[]),J=R.useCallback(()=>{H({type:"blur"})},[]),ge=R.useCallback(()=>{_||(Zve()?setTimeout(Ve,0):Ve())},[_,Ve]),de=Le=>t?null:Le,Ae=Le=>b?null:de(Le),Ie=Le=>E?null:de(Le),me=Le=>{M&&Le.stopPropagation()},ye=R.useMemo(()=>(Le={})=>{var Ye=Le,{refKey:q="ref",role:X,onKeyDown:pe,onFocus:_e,onBlur:xe,onClick:Me,onDragEnter:je,onDragOver:qe,onDragLeave:Ne,onDrop:Qe}=Ye,$e=pS(Ye,["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"]);return ss(ss({onKeyDown:Ae(Ka(pe,Je)),onFocus:Ae(Ka(_e,Fe)),onBlur:Ae(Ka(xe,J)),onClick:de(Ka(Me,ge)),onDragEnter:Ie(Ka(je,ce)),onDragOver:Ie(Ka(qe,oe)),onDragLeave:Ie(Ka(Ne,he)),onDrop:Ie(Ka(Qe,Oe)),role:typeof X=="string"&&X!==""?X:"presentation",[q]:B},!t&&!b?{tabIndex:0}:{}),$e)},[B,Je,Fe,J,ge,ce,oe,he,Oe,b,E,t]),ke=R.useCallback(Le=>{Le.stopPropagation()},[]),Xe=R.useMemo(()=>(Le={})=>{var Ye=Le,{refKey:q="ref",onChange:X,onClick:pe}=Ye,_e=pS(Ye,["refKey","onChange","onClick"]);const xe={accept:T,multiple:o,type:"file",style:{display:"none"},onChange:de(Ka(X,Oe)),onClick:de(Ka(pe,ke)),tabIndex:-1,[q]:z};return ss(ss({},xe),_e)},[z,e,o,Oe,t]);return ou(ss({},$),{isFocused:Z&&!t,getRootProps:ye,getInputProps:Xe,rootRef:B,inputRef:z,open:de(Ve)})}function s0e(n,e){switch(e.type){case"focus":return ou(ss({},n),{isFocused:!0});case"blur":return ou(ss({},n),{isFocused:!1});case"openDialog":return ou(ss({},VR),{isFileDialogActive:!0});case"closeDialog":return ou(ss({},n),{isFileDialogActive:!1});case"setDraggedFiles":return ou(ss({},n),{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return ou(ss({},n),{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return ss({},VR);default:return n}}function z4(){}const[o0e,a0e]=Cl("Dropzone component was not found in tree");function Lk(n){const e=t=>{const{children:i,...r}=st(`Dropzone${bU(n)}`,{},t),s=a0e(),o=Pc(i)?i:k.jsx("span",{children:i});return s[n]?R.cloneElement(o,r):null};return e.displayName=`@mantine/dropzone/${bU(n)}`,e}const l0e=Lk("accept"),c0e=Lk("reject"),u0e=Lk("idle");var Zv={root:"m_d46a4834",inner:"m_b85f7144",fullScreen:"m_96f6e9ad",dropzone:"m_7946116d"};const h0e={loading:!1,multiple:!0,maxSize:1/0,autoFocus:!1,activateOnClick:!0,activateOnDrag:!0,dragEventsBubbling:!0,activateOnKeyboard:!0,useFsAccessApi:!0,variant:"light",rejectColor:"red"},d0e=(n,{radius:e,variant:t,acceptColor:i,rejectColor:r})=>{const s=n.variantColorResolver({color:i||n.primaryColor,theme:n,variant:t}),o=n.variantColorResolver({color:r||"red",theme:n,variant:t});return{root:{"--dropzone-radius":so(e),"--dropzone-accept-color":s.color,"--dropzone-accept-bg":s.background,"--dropzone-reject-color":o.color,"--dropzone-reject-bg":o.background}}},rh=Pt((n,e)=>{const t=st("Dropzone",h0e,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,radius:c,disabled:u,loading:h,multiple:d,maxSize:f,accept:p,children:x,onDropAny:v,onDrop:y,onReject:w,openRef:_,name:b,maxFiles:E,autoFocus:M,activateOnClick:C,activateOnDrag:P,dragEventsBubbling:T,activateOnKeyboard:I,onDragEnter:U,onDragLeave:j,onDragOver:B,onFileDialogCancel:z,onFileDialogOpen:$,preventDropOnDocument:H,useFsAccessApi:Z,getFilesFromEvent:O,validator:W,rejectColor:D,acceptColor:Y,enablePointerEvents:Q,loaderProps:re,inputProps:ce,mod:oe,...he}=t,Re=on({name:"Dropzone",classes:Zv,props:t,className:r,style:s,classNames:i,styles:o,unstyled:a,vars:l,varsResolver:d0e}),{getRootProps:Oe,getInputProps:Ve,isDragAccept:Je,isDragReject:Fe,open:J}=s7({onDrop:v,onDropAccepted:y,onDropRejected:w,disabled:u||h,accept:Array.isArray(p)?p.reduce((de,Ae)=>({...de,[Ae]:[]}),{}):p,multiple:d,maxSize:f,maxFiles:E,autoFocus:M,noClick:!C,noDrag:!P,noDragEventsBubbling:!T,noKeyboard:!I,onDragEnter:U,onDragLeave:j,onDragOver:B,onFileDialogCancel:z,onFileDialogOpen:$,preventDropOnDocument:H,useFsAccessApi:Z,validator:W,...O?{getFilesFromEvent:O}:null});FS(_,J);const ge=!Je&&!Fe;return k.jsx(o0e,{value:{accept:Je,reject:Fe,idle:ge},children:k.jsxs(pt,{...Oe(),...Re("root",{focusable:!0}),...he,mod:[{accept:Je,reject:Fe,idle:ge,loading:h,"activate-on-click":C},oe],children:[k.jsx(vk,{visible:h,overlayProps:{radius:c},unstyled:a,loaderProps:re}),k.jsx("input",{...Ve(ce),name:b}),k.jsx("div",{...Re("inner"),ref:e,"data-enable-pointer-events":Q||void 0,children:x})]})})});rh.classes=Zv;rh.displayName="@mantine/dropzone/Dropzone";rh.Accept=l0e;rh.Idle=u0e;rh.Reject=c0e;const f0e={loading:!1,maxSize:1/0,activateOnClick:!1,activateOnDrag:!0,dragEventsBubbling:!0,activateOnKeyboard:!0,active:!0,zIndex:jo("max"),withinPortal:!0},Nk=Pt((n,e)=>{const t=st("DropzoneFullScreen",f0e,n),{classNames:i,className:r,style:s,styles:o,unstyled:a,vars:l,active:c,onDrop:u,onReject:h,zIndex:d,withinPortal:f,portalProps:p,...x}=t,v=on({name:"DropzoneFullScreen",classes:Zv,props:t,className:r,style:s,classNames:i,styles:o,unstyled:a,rootSelector:"fullScreen"}),{resolvedClassNames:y,resolvedStyles:w}=rE({classNames:i,styles:o,props:t}),[_,b]=R.useState(0),[E,{open:M,close:C}]=_oe(!1),P=I=>{var U;(U=I.dataTransfer)!=null&&U.types.includes("Files")&&(b(j=>j+1),M())},T=()=>{b(I=>I-1)};return R.useEffect(()=>{_===0&&C()},[_]),R.useEffect(()=>{if(c)return document.addEventListener("dragenter",P,!1),document.addEventListener("dragleave",T,!1),()=>{document.removeEventListener("dragenter",P,!1),document.removeEventListener("dragleave",T,!1)}},[c]),k.jsx(eh,{...p,withinPortal:f,children:k.jsx(pt,{...v("fullScreen",{style:{opacity:E?1:0,pointerEvents:E?"all":"none",zIndex:d}}),ref:e,children:k.jsx(rh,{...x,classNames:y,styles:w,unstyled:a,className:Zv.dropzone,onDrop:I=>{u==null||u(I),C(),b(0)},onReject:I=>{h==null||h(I),C(),b(0)}})})})});Nk.classes=Zv;Nk.displayName="@mantine/dropzone/DropzoneFullScreen";const xh={png:"image/png",gif:"image/gif",jpeg:"image/jpeg",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif",heic:"image/heic",mp4:"video/mp4",zip:"application/zip",rar:"application/x-rar","7z":"application/x-7z-compressed",csv:"text/csv",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",exe:"application/vnd.microsoft.portable-executable"},p0e=[xh.png,xh.gif,xh.jpeg,xh.svg,xh.webp,xh.avif,xh.heic];rh.FullScreen=Nk;const X_=rh;function m0e({fileUrl:n,lengths:e,setLengths:t}){const i=R.useRef(null),[r,s]=R.useState(null);return R.useEffect(()=>{const o=new tL;return(async()=>{var h;const a=(h=i.current)==null?void 0:h.offsetWidth,l=a;await o.init({autoDensity:!0,antialias:!0,backgroundAlpha:.3,width:a,height:l}),o.canvas.oncontextmenu=d=>{d.preventDefault()};const c={screenWidth:a,screenHeight:l,worldWidth:50*Fo,worldHeight:50*Fo,events:o.renderer.events,eventMode:"static"},u=new GR(c);u.onSetLength=d=>{t({...e,real:d})},i.current.appendChild(o.canvas),o.start(),o.stage.addChild(u),s(o)})(),()=>{o.destroy(!0,!0)}},[]),k.jsx("div",{children:k.jsx("div",{className:"mt-4 rounded border border-dashed border-green-400 overflow-hidden",children:k.jsxs("div",{className:"relative aspect-square",children:[n?k.jsx("img",{className:"w-full object-cover",src:n,alt:""}):null,k.jsx("div",{className:"absolute top-0 left-0 w-full h-full",ref:i})]})})})}class GR extends X9{constructor(t){super(t);ve(this,"preview");ve(this,"onSetLength");this.preview=new RE({color:"red",showSizeLabel:!1}),this.addChild(this.preview.getReference()),this.preview,this.setup()}async setup(){uS.viewportPluginManager=this.plugins,this.on("click",this.onPointerDown),this.on("pointermove",this.onPointerMove)}onPointerDown(t){t.stopPropagation();const{pointA:i,endPoint:r}=this.preview;i&&!r&&this.setPointB(t),i||this.setPointA(t),i&&r&&(this.preview.setB(void 0),this.setPointA(t))}setPointA(t){const i={x:t.global.x,y:t.global.y};this.preview.setA(i)}setPointB(t){const i={x:t.global.x,y:t.global.y};this.preview.setB(i),this.onSetLength(this.preview.length)}onPointerMove(t){const i={x:t.global.x,y:t.global.y};this.preview.updateByPoint(i)}}ve(GR,"viewportPluginManager"),ve(GR,"app");function g0e({onClose:n}){const[e,t]=R.useState([]),[i,r]=R.useState([]),{setPlan:s,plan:o}=Lt(),[a,l]=R.useState({real:0,plan:0}),c=h=>{t(h),r([])},u=()=>{e[0],dc(),vl({title:"✏️ Dodawanie planu",message:"Plan został dodany.",color:"green"});const h=new FileReader;h.onload=async d=>{const f=d.target.result,p=new Image;p.src=f;const x=729,v=a.plan/a.real,y=await Py.load(f),w=new hb(y),_=w.width/x;w.width=w.width*v/_,w.height=w.height*v/_,w.x=jr.center.x-w.width/2,w.y=jr.center.y-w.height/2,jr.removeChildAt(0),jr.addChildAt(w,0),s(w)},h.readAsDataURL(e[0]),n()};return k.jsxs("div",{children:[k.jsx("div",{children:e.length?k.jsx(m0e,{fileUrl:URL.createObjectURL(e[0]),lengths:a,setLengths:l}):null}),k.jsxs("div",{className:"grid grid-cols-2 gap-8 mt-4",children:[k.jsxs("div",{children:[k.jsx(X_,{onDrop:c,maxSize:5*1024**2,accept:p0e,maxFiles:1,children:k.jsxs(mc,{justify:"center",style:{pointerEvents:"none"},children:[k.jsx(X_.Accept,{children:k.jsx(RV,{style:{width:Pe(52),height:Pe(52),color:"var(--mantine-color-blue-6)"}})}),k.jsx(X_.Reject,{children:k.jsx(qse,{style:{width:Pe(52),height:Pe(52),color:"var(--mantine-color-red-6)"}})}),k.jsx(X_.Idle,{children:k.jsx(Ise,{style:{width:Pe(52),height:Pe(52),color:"var(--mantine-color-dimmed)"}})}),k.jsxs("div",{children:[k.jsx(ov,{className:"text-lg",children:"Upuść zdjęcie planu swojego domu"}),k.jsx(ov,{className:"mt-2 text-xs",children:"Załącz jeden plik, nie powinien przekraczać 5MB"})]})]})}),i.length>1&&k.jsx(ov,{className:"text-red-400 text-sm mt-4",children:"Możesz dodać maksymalnie 1 plik. Sprawdź rozmiar i typ pliku."})]}),k.jsxs("div",{children:[k.jsxs("div",{className:"flex flex-col",children:[k.jsx("p",{className:"mt-0 mb-1",children:"Zaznaczony odcinek ma:"})," ",k.jsxs("div",{className:"flex gap-2 items-center",children:[k.jsx(TE,{className:"w-44",disabled:!a.real,placeholder:"Zaznacz odcinek na planie",value:length??void 0,hideControls:!0,onChange:h=>l({...a,plan:h})}),k.jsx("p",{children:"cm"})]})]}),k.jsx(L0,{onClick:u,className:"mt-6",leftSection:k.jsx(yse,{size:20}),children:"Akceptuj plan"})]})]})]})}const y0e=n=>n,v0e=()=>y0e,x0e=()=>{var c;const n=v0e(),{activeTool:e,plan:t}=Lt();R.useState(!1);const[i,r]=R.useState(!1),[s,o]=R.useState(!!(t!=null&&t.visible));R.useState(!1);const{getCategories:a}=q9(),l=[{icon:k.jsx(Nse,{size:18}),title:"Dodaj rzut",onClick:()=>{r(!0)}},{icon:t!=null&&t.visible?k.jsx(fse,{size:18}):k.jsx(mse,{size:18}),title:`${t!=null&&t.visible?"Ukryj":"Pokaż"} rzut`,disabled:!t,onClick:()=>{t.visible=!(t!=null&&t.visible),o(!(t!=null&&t.visible))}}];return R.useEffect(()=>{},[t==null?void 0:t.visible]),(c=l.find(u=>u.id===e))==null||c.icon,[mt.Edit,mt.WallAdd].includes(e),k.jsxs(k.Fragment,{children:[k.jsx(Il,{opened:i,onClose:()=>{a(),r(!1)},title:n("Dodaj rzut"),size:"xl",centered:!0,children:k.jsx(g0e,{onClose:()=>{r(!1)}})}),k.jsxs(Hn,{position:"right",trigger:"hover",children:[k.jsx(Hn.Target,{children:k.jsx(Ca,{children:k.jsx(sse,{})})}),k.jsx(Hn.Dropdown,{children:l.map(u=>k.jsx(Hn.Item,{leftSection:u.icon,onClick:u.onClick,disabled:u.disabled,children:n(u.title)},u.title))})]})]})};class _0e{constructor(){ve(this,"receiver");this.receiver=cs.Instance}execute(){this.receiver.restart()}}var o7={exports:{}};(function(n,e){(function(t,i){i()})(ya,function(){function t(c,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function i(c,u,h){var d=new XMLHttpRequest;d.open("GET",c),d.responseType="blob",d.onload=function(){l(d.response,u,h)},d.onerror=function(){},d.send()}function r(c){var u=new XMLHttpRequest;u.open("HEAD",c,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ya=="object"&&ya.global===ya?ya:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,u,h){var d=o.URL||o.webkitURL,f=document.createElement("a");u=u||c.name||"download",f.download=u,f.rel="noopener",typeof c=="string"?(f.href=c,f.origin===location.origin?s(f):r(f.href)?i(c,u,h):s(f,f.target="_blank")):(f.href=d.createObjectURL(c),setTimeout(function(){d.revokeObjectURL(f.href)},4e4),setTimeout(function(){s(f)},0))}:"msSaveOrOpenBlob"in navigator?function(c,u,h){if(u=u||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(t(c,h),u);else if(r(c))i(c,u,h);else{var d=document.createElement("a");d.href=c,d.target="_blank",setTimeout(function(){s(d)})}}:function(c,u,h,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof c=="string")return i(c,u,h);var f=c.type==="application/octet-stream",p=/constructor/i.test(o.HTMLElement)||o.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||f&&p||a)&&typeof FileReader<"u"){var v=new FileReader;v.onloadend=function(){var _=v.result;_=x?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=_:location=_,d=null},v.readAsDataURL(c)}else{var y=o.URL||o.webkitURL,w=y.createObjectURL(c);d?d.location=w:location.href=w,d=null,setTimeout(function(){y.revokeObjectURL(w)},4e4)}});o.saveAs=l.saveAs=l,n.exports=l})})(o7);var w0e=o7.exports;const b0e=Ia(w0e);class S0e{constructor(){ve(this,"receiver");this.receiver=cs.Instance}execute(){const e=this.receiver.save(),t=JSON.stringify(e,null,2),i=new Blob([t],{type:"application/json;charset=utf-8"});b0e(i,"floor_plan.json")}}const E0e=()=>{const{setActiveMode:n}=Lt(),e=R.useRef(null),t=async i=>{const r=await i.target.files.item(0).text();new Y9(r).execute()};return k.jsxs(k.Fragment,{children:[k.jsx("input",{ref:e,onChange:t,multiple:!1,type:"file",accept:".json",hidden:!0}),k.jsxs(Hn,{shadow:"md",children:[k.jsx(Hn.Target,{children:k.jsx("button",{className:"flex items-center justify-center border-none cursor-pointer bg-transparent -mt-0.5",children:k.jsx(Ase,{size:24})})}),k.jsxs(Hn.Dropdown,{children:[k.jsx(Hn.Label,{children:"Projekt"}),k.jsx(Hn.Item,{leftSection:k.jsx(ase,{size:16}),onClick:()=>{new S0e().execute()},children:k.jsx("span",{className:"text-sm ",children:"Zapisz"})}),k.jsx(Hn.Item,{leftSection:k.jsx(RV,{size:16}),onClick:()=>{var i;return(i=e.current)==null?void 0:i.click()},rightSection:k.jsx("span",{className:"text-xs text-gray-300",children:".json"}),children:k.jsx("span",{className:"text-sm",children:"Wczytaj"})}),k.jsx(Hn.Divider,{}),k.jsx(Hn.Item,{leftSection:k.jsx(Fse,{size:16}),onClick:()=>{n(bs.Edit),new _0e().execute()},children:k.jsx("span",{className:"text-sm",children:"Zacznij od nowa"})}),k.jsx(Hn.Divider,{}),k.jsxs(Hn.Label,{className:"text-gray-300 font-normal text-[10px]",children:["Made with ",k.jsx(wse,{size:14,className:"transform translate-y-1",color:"#ffaabb"})," by"," ",k.jsxs("a",{href:"https://github.com/MaciejPietro",target:"_blank",className:"text-blue-200 opacity-75 hover:opacity-100 transition-opacity inline-flex gap-1 items-center",children:["EmpeDev",k.jsx(ise,{size:14,className:"mt-0.5"})]})]})]})]})]})},M0e=()=>{const{activeTool:n,setTool:e,activeMode:t,floor:i,setSnap:r,snap:s}=Lt();return R.useState(0),R.useRef(),k.jsx("div",{className:"absolute",children:k.jsxs(Oa.Navbar,{className:"px-2 py-4 flex flex-col justify-between",children:[k.jsx("div",{children:k.jsx(E0e,{})}),k.jsx(I0,{children:k.jsxs(mc,{className:"flex flex-col",align:"center",children:[t===bs.Edit&&k.jsxs(k.Fragment,{children:[k.jsx(x0e,{}),k.jsx(U0,{icon:xse,label:"Przyciągaj do siatki",active:s,onClick:()=>{r(!s),dc(),vl({message:"Tryb przyciągania do siatki został "+(s?"wyłączony":"aktywowany"),icon:s?k.jsx(Vse,{}):k.jsx(Hse,{})})}})]}),k.jsx("div",{className:"h-px w-full bg-black/15"}),k.jsx(_ve,{})]})})]})})},T0e=[{icon:Pse,label:"Tryb edycji",mode:bs.Edit},{icon:Qre,label:"Tryb podglądu 3D",mode:bs.View3d}],A0e=()=>{const{activeMode:n,setActiveMode:e}=Lt();return k.jsx(k.Fragment,{children:k.jsx(I0,{grow:!0,children:k.jsx(mc,{className:"flex gap-2 pr-4",align:"center",children:T0e.map(t=>k.jsx(U0,{icon:t.icon,active:n===t.mode,label:t.label,position:"bottom",onClick:()=>{e(t.mode)}},t.label))})})})},C0e=({})=>{var l;const{focusedElement:n,setFocusedElement:e}=Lt(),[t,i]=R.useState({length:((l=n==null?void 0:n.length)==null?void 0:l.toFixed(2))||"0",wallType:(n==null?void 0:n.type)||Vs.Exterior}),r=()=>{n==null||n.delete(),e(null)};R.useEffect(()=>{const c=u=>{u.key==="Delete"&&r()};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}},[n]),R.useEffect(()=>{var c;if(n){const u=n,h=((c=u.length)==null?void 0:c.toFixed(2))||"0",d=(u==null?void 0:u.type)||Vs.Exterior;i(f=>({...f,length:parseFloat(h),wallType:d}))}},[n]);const s=(c,u)=>{i(h=>({...h,[c]:u||0})),n instanceof O0&&(n==null||n.setLength(u))},o=Object.values(CL).map(c=>({label:`${c.label} (${c.thickness}cm)`,value:c.type.toString()})),a=c=>{const u=n;u==null||u.setType(c),i(h=>({...h,wallType:c}))};return k.jsxs("div",{children:[k.jsx("h2",{className:"text-base font-medium my-0 -mt-2",children:"Sciana"}),k.jsx("div",{className:"mt-4",children:k.jsx(TE,{label:"Długość",description:"Długość ściany (cm)",value:t.length,onChange:c=>s("length",+c)})}),k.jsx("div",{className:"mt-4",children:k.jsx(Md,{label:"Typ",description:"Typ ściany",data:o,value:t.wallType.toString(),onChange:c=>c&&a(+c)})}),k.jsx("div",{className:"mt-4",children:k.jsxs("p",{children:["Kąt: ",n==null?void 0:n.angle]})}),k.jsx("div",{className:"mt-4",children:k.jsxs("div",{className:"flex gap-2 items-center",children:[k.jsx(ig,{onClick:r,size:32,variant:"default","aria-label":"ActionIcon with delete",children:k.jsx(AL,{className:"w-5 h-5 text-red-600"})}),k.jsx("span",{className:"text-xs text-gray-600",children:"(delete)"})]})})]})},P0e=Object.values(eoe).map(n=>({label:n.label,value:n.type.toString()})),R0e=Object.values(noe).map(n=>({label:n.label,value:n.type.toString()})),I0e=Object.values(toe).map(n=>({label:n.label,value:n.width.toString()})),L0e=({})=>{const{focusedElement:n,setFocusedElement:e}=Lt(),t=n,[i,r]=R.useState({type:t.type,orientation:t.orientation,width:t.length}),s=()=>{n==null||n.delete(),e(null)};R.useEffect(()=>{const c=u=>{u.key==="Delete"&&s()};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}},[n]);const o=c=>{t.setType(c),r(u=>({...u,type:c}))},a=c=>{t.setOrientation(c),r(u=>({...u,orientation:c}))},l=c=>{t.setLength(c),r(u=>({...u,width:c}))};return k.jsxs("div",{children:[k.jsx("h2",{className:"text-base font-medium my-0 -mt-2",children:"Drzwi"}),k.jsx("div",{className:"mt-4 ",children:k.jsx(Md,{label:"Typ",data:P0e,value:t.type.toString(),onChange:c=>c&&o(+c)})}),k.jsx("div",{className:"mt-3",children:k.jsx(Md,{label:"Pozycja",data:R0e,value:t.orientation.toString(),onChange:c=>c&&a(+c)})}),k.jsx("div",{className:"mt-4 ",children:k.jsx(Md,{label:"Szerokość",data:I0e,value:t.length.toString(),onChange:c=>c&&l(+c)})}),k.jsx("div",{className:"mt-4",children:k.jsxs("div",{className:"flex gap-2 items-center",children:[k.jsx(ig,{onClick:s,size:32,variant:"default","aria-label":"ActionIcon with delete",children:k.jsx(AL,{className:"w-5 h-5 text-red-600"})}),k.jsx("span",{className:"text-xs text-gray-600",children:"(delete)"})]})})]})},N0e=Object.values(qme).reverse().map(n=>({label:n.label,value:n.type.toString()})),k0e=[{value:xo,label:`${xo}cm`},{value:xo+(ec-xo)*.25,label:`${Math.floor((ec-xo)*.25)}cm`},{value:xo+(ec-xo)*.5,label:`${Math.floor((ec-xo)*.5)}cm`},{value:xo+(ec-xo)*.75,label:`${Math.floor((ec-xo)*.75)}cm`},{value:ec,label:`${ec}cm`}],O0e=[{value:0,label:`${Jc}cm`},{value:Jc+(Xh-Jc)*.33,label:`${Math.floor((Xh-Jc)*.33)}cm`},{value:Jc+(Xh-Jc)*.66,label:`${Math.floor((Xh-Jc)*.66)}cm`},{value:Xh,label:`${Xh}cm`}],D0e=[{value:0,label:`${eu}cm`},{value:eu+(Yh-eu)*.33,label:`${Math.floor((Yh-eu)*.33)}cm`},{value:eu+(Yh-eu)*.66,label:`${Math.floor((Yh-eu)*.66)}cm`},{value:Yh,label:`${Yh}cm`}],F0e=({})=>{const{focusedElement:n,setFocusedElement:e}=Lt(),t=n,[i,r]=R.useState({type:t.type,length:t.length,height:t.height,bottom:t.bottom}),s=()=>{n==null||n.delete(),e(null)};R.useEffect(()=>{const l=c=>{c.key==="Delete"&&s()};return window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}},[n]);const o=l=>{t.setType(l),r(c=>({...c,type:l}))},a=(l,c)=>{l==="length"&&(t.setLength(c),r(u=>({...u,length:c}))),(l==="height"||l==="bottom")&&(t[l]=c,r(u=>({...u,[l]:c})))};return k.jsxs("div",{children:[k.jsx("h2",{className:"text-base font-medium my-0 -mt-2",children:"Okno"}),k.jsx("div",{className:"mt-4 ",children:k.jsx(Md,{label:"Typ",data:N0e,value:t.type.toString(),onChange:l=>l&&o(+l)})}),k.jsxs("div",{className:"mt-4",children:[k.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold",children:[k.jsx(Yre,{size:20})," Szerokość"]}),k.jsx("div",{className:"mt-2 pl-1 pr-3",children:k.jsx(av,{color:"blue",size:"lg",showLabelOnHover:!1,label:l=>`${l}cm`,step:5,min:xo,max:ec,marks:k0e,value:t.length,onChange:l=>a("length",+l)})})]}),k.jsxs("div",{className:"mt-10",children:[k.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold",children:[k.jsx($re,{size:20}),"Wysokość"]}),k.jsx("div",{className:"mt-2 pl-1 pr-3",children:k.jsx(av,{color:"blue",size:"lg",showLabelOnHover:!1,label:l=>`${l}cm`,step:5,min:Jc,max:Xh,marks:O0e,value:t.height,onChange:l=>a("height",+l)})})]}),k.jsxs("div",{className:"mt-10",children:[k.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold",children:[k.jsx(Zre,{size:20})," Odległość od ziemi"]}),k.jsx("div",{className:"mt-2 pl-1 pr-3",children:k.jsx(av,{color:"blue",size:"lg",showLabelOnHover:!1,label:l=>`${l}cm`,step:5,min:eu,max:Yh,marks:D0e,value:t.bottom,onChange:l=>a("bottom",+l)})})]}),k.jsx("div",{className:"mt-10",children:k.jsxs("div",{className:"flex gap-2 items-center",children:[k.jsx(ig,{onClick:s,size:32,variant:"default","aria-label":"ActionIcon with delete",children:k.jsx(AL,{className:"w-5 h-5 text-red-600"})}),k.jsx("span",{className:"text-xs text-gray-600",children:"(delete)"})]})})]})};function U0e(){const[n,e]=R.useState(!0);R.useState({width:0});const{focusedElement:t,setFocusedElement:i}=Lt(),r=()=>{i(null),e(!1)};return R.useEffect(()=>{e(!!t)},[t]),k.jsx(k.Fragment,{children:k.jsxs(yk,{opened:n,withCloseButton:!0,onClose:r,size:"md",radius:"md",position:{top:64,right:10},children:[t instanceof O0?k.jsx(C0e,{}):null,t instanceof pa?k.jsx(L0e,{}):null,t instanceof ma?k.jsx(F0e,{}):null]})})}const B0e=()=>{const{helpMode:n,activeTool:e,setTool:t,activeToolSettings:i,setToolSettings:r}=Lt(),s=[{id:mt.WallAdd,icon:i.wallType?CL[i.wallType].icon:S2,title:"Rysuj ściany",active:e===mt.WallAdd,position:"bottom-start",onClick:()=>{t(mt.WallAdd),i!=null&&i.wallType||r({...i,wallType:Vs.Exterior}),n&&(dc(),vl({title:"✏️ Rysuj ściany",message:"Kliknij aby zacząć rysować ścianę. Kliknij na ⚫ na istniejącej ścianie aby zacząć rysowanie od niej",color:"blue"}))},options:[{icon:k.jsx(S2,{}),title:"Zewnętrzna",active:i.wallType===Vs.Exterior,onClick:()=>{t(mt.WallAdd),r({...i,wallType:Vs.Exterior})}},{icon:k.jsx(CV,{}),title:"Nośna",active:i.wallType===Vs.LoadBearing,onClick:()=>{t(mt.WallAdd),r({...i,wallType:Vs.LoadBearing})}},{icon:k.jsx(PV,{}),title:"Działowa",active:i.wallType===Vs.Partition,onClick:()=>{t(mt.WallAdd),r({...i,wallType:Vs.Partition})}}]},{id:mt.FurnitureAddDoor,icon:cse,title:"Dodaj drzwi",active:e===mt.FurnitureAddDoor,position:"bottom",onClick:()=>{t(mt.FurnitureAddDoor),n&&(dc(),vl({title:"🚪 Drzwi",message:"Kliknij na ścianę aby dodać drzwi",color:"blue"}))}},{id:mt.FurnitureAddWindow,icon:Xse,title:"Dodaj okno",active:e===mt.FurnitureAddWindow,position:"bottom",onClick:()=>{t(mt.FurnitureAddWindow),n&&(dc(),vl({title:"🪟 Okno",message:"Kliknij na ścianę aby dodać okno",color:"blue"}))}},{id:mt.FurnitureAddDoor,icon:Gre,title:"Wkrótce",active:e===mt.FurnitureAdd,position:"bottom",disabled:!0,onClick:()=>{}}];return k.jsx(k.Fragment,{children:s.map(({icon:o,...a})=>k.jsx(U0,{label:a.title,icon:o,onClick:a.onClick,position:a.position,disabled:a.disabled,active:a.active,options:a.options},a.title))})},z0e=()=>{const{activeTool:n,setTool:e,helpMode:t}=Lt(),i=[{id:mt.Edit,icon:Ose,title:"Wybierz",active:n===mt.Edit,onClick:()=>{e(mt.Edit)}},{id:mt.Remove,icon:hse,title:"Wymaż",active:n===mt.Remove,onClick:()=>{e(mt.Remove),n===mt.Remove?e(mt.Edit):t&&(dc(),vl({title:"🗑️ Tryb usuwania",message:"Kliknij na element aby go usunąć. ⚠️ Tej akcji nie będzie można cofnąć;",color:"blue"}))}},{id:mt.Measure,icon:Bse,title:"Narzędzie miara",active:n===mt.Measure,onClick:()=>{n===mt.Measure?e(mt.Edit):(e(mt.Measure),t&&(dc(),vl({title:"📐 Tryb miarki",message:"Kliknij na obszar roboczy aby zaznaczyć punkt początkowy miarki",color:"blue"})))}}];return k.jsx(k.Fragment,{children:i.map(({icon:r,...s})=>k.jsx(U0,{label:s.title,icon:r,onClick:s.onClick,position:"bottom",active:s.active},s.title))})},H0e=()=>{const{activeMode:n}=Lt();return k.jsxs(Oa.Header,{className:"flex justify-between pl-20 py-1.5",children:[k.jsx(mc,{children:n===bs.Edit?k.jsxs(k.Fragment,{children:[k.jsx(mc,{gap:4,children:k.jsx(z0e,{})}),k.jsx("div",{className:"w-px h-6 bg-black/25"}),k.jsx(mc,{gap:4,children:k.jsx(B0e,{})})]}):null}),k.jsxs("div",{children:[k.jsx(A0e,{}),k.jsx(U0e,{})]})]})};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ef="154",qh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Zh={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a7=0,jR=1,l7=2,W0e=3,c7=0,LE=1,cv=2,ha=3,Wo=0,Xr=1,cr=2,V0e=2,bl=0,Td=1,$R=2,XR=3,YR=4,u7=5,nd=100,h7=101,d7=102,qR=103,ZR=104,f7=200,p7=201,m7=202,g7=203,kk=204,Ok=205,y7=206,v7=207,x7=208,_7=209,w7=210,b7=0,S7=1,E7=2,mS=3,M7=4,T7=5,A7=6,C7=7,z0=0,P7=1,R7=2,Ma=0,I7=1,L7=2,N7=3,Dk=4,k7=5,Vu=300,Mc=301,Gu=302,Rm=303,Kv=304,dg=306,Im=1e3,si=1001,Qv=1002,Ri=1003,gS=1004,G0e=1004,uv=1005,j0e=1005,En=1006,Fk=1007,$0e=1007,ju=1008,KR=1008,Ks=1009,Uk=1010,Bk=1011,NE=1012,kE=1013,fl=1014,ur=1015,hr=1016,zk=1017,Hk=1018,Lu=1020,O7=1021,$i=1023,D7=1024,F7=1025,Nu=1026,Gd=1027,Wk=1028,Vk=1029,U7=1030,Gk=1031,jk=1033,X1=33776,Y1=33777,q1=33778,Z1=33779,QR=35840,JR=35841,eI=35842,tI=35843,B7=36196,nI=37492,iI=37496,rI=37808,sI=37809,oI=37810,aI=37811,lI=37812,cI=37813,uI=37814,hI=37815,dI=37816,fI=37817,pI=37818,mI=37819,gI=37820,yI=37821,K1=36492,z7=36283,vI=36284,xI=36285,_I=36286,H7=2200,W7=2201,V7=2202,Jv=2300,e0=2301,Q1=2302,dd=2400,fd=2401,t0=2402,OE=2500,$k=2501,X0e=0,Y0e=1,q0e=2,Xk=3e3,ku=3001,G7=3200,j7=3201,sh=0,$7=1,Ou="",Ht="srgb",Rs="srgb-linear",Yk="display-p3",Z0e=0,J1=7680,K0e=7681,Q0e=7682,J0e=7683,exe=34055,txe=34056,nxe=5386,ixe=512,rxe=513,sxe=514,oxe=515,axe=516,lxe=517,cxe=518,X7=519,Y7=512,q7=513,Z7=514,K7=515,Q7=516,J7=517,eX=518,tX=519,n0=35044,uxe=35048,hxe=35040,dxe=35045,fxe=35049,pxe=35041,mxe=35046,gxe=35050,yxe=35042,vxe="100",wI="300 es",yS=1035,pl=2e3,i0=2001;class Ll{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Ur=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let H4=1234567;const Ad=Math.PI/180,Lm=180/Math.PI;function Qs(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ur[n&255]+Ur[n>>8&255]+Ur[n>>16&255]+Ur[n>>24&255]+"-"+Ur[e&255]+Ur[e>>8&255]+"-"+Ur[e>>16&15|64]+Ur[e>>24&255]+"-"+Ur[t&63|128]+Ur[t>>8&255]+"-"+Ur[t>>16&255]+Ur[t>>24&255]+Ur[i&255]+Ur[i>>8&255]+Ur[i>>16&255]+Ur[i>>24&255]).toLowerCase()}function Si(n,e,t){return Math.max(e,Math.min(t,n))}function qk(n,e){return(n%e+e)%e}function xxe(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function _xe(n,e,t){return n!==e?(t-n)/(e-n):0}function hv(n,e,t){return(1-t)*n+t*e}function wxe(n,e,t,i){return hv(n,e,1-Math.exp(-t*i))}function bxe(n,e=1){return e-Math.abs(qk(n,e*2)-e)}function Sxe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Exe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Mxe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Txe(n,e){return n+Math.random()*(e-n)}function Axe(n){return n*(.5-Math.random())}function Cxe(n){n!==void 0&&(H4=n);let e=H4+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Pxe(n){return n*Ad}function Rxe(n){return n*Lm}function bI(n){return(n&n-1)===0&&n!==0}function nX(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function vS(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Ixe(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),u=o((e+i)/2),h=s((e-i)/2),d=o((e-i)/2),f=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":n.set(a*u,l*h,l*d,a*c);break;case"YZY":n.set(l*d,a*u,l*h,a*c);break;case"ZXZ":n.set(l*h,l*d,a*u,a*c);break;case"XZX":n.set(a*u,l*p,l*f,a*c);break;case"YXY":n.set(l*f,a*u,l*p,a*c);break;case"ZYZ":n.set(l*p,l*f,a*u,a*c);break;default:}}function $s(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Qt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Zk={DEG2RAD:Ad,RAD2DEG:Lm,generateUUID:Qs,clamp:Si,euclideanModulo:qk,mapLinear:xxe,inverseLerp:_xe,lerp:hv,damp:wxe,pingpong:bxe,smoothstep:Sxe,smootherstep:Exe,randInt:Mxe,randFloat:Txe,randFloatSpread:Axe,seededRandom:Cxe,degToRad:Pxe,radToDeg:Rxe,isPowerOfTwo:bI,ceilPowerOfTwo:nX,floorPowerOfTwo:vS,setQuaternionFromProperEuler:Ixe,normalize:Qt,denormalize:$s};class Ue{constructor(e=0,t=0){Ue.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Si(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Yt{constructor(e,t,i,r,s,o,a,l,c){Yt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],h=i[7],d=i[2],f=i[5],p=i[8],x=r[0],v=r[3],y=r[6],w=r[1],_=r[4],b=r[7],E=r[2],M=r[5],C=r[8];return s[0]=o*x+a*w+l*E,s[3]=o*v+a*_+l*M,s[6]=o*y+a*b+l*C,s[1]=c*x+u*w+h*E,s[4]=c*v+u*_+h*M,s[7]=c*y+u*b+h*C,s[2]=d*x+f*w+p*E,s[5]=d*v+f*_+p*M,s[8]=d*y+f*b+p*C,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,d=a*l-u*s,f=c*s-o*l,p=t*h+i*d+r*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/p;return e[0]=h*x,e[1]=(r*c-u*i)*x,e[2]=(a*i-r*o)*x,e[3]=d*x,e[4]=(u*t-r*l)*x,e[5]=(r*s-a*t)*x,e[6]=f*x,e[7]=(i*l-c*t)*x,e[8]=(o*t-i*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(oC.makeScale(e,t)),this}rotate(e){return this.premultiply(oC.makeRotation(-e)),this}translate(e,t){return this.premultiply(oC.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const oC=new Yt;function iX(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Lxe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Wp(n,e){return new Lxe[n](e)}function r0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const W4={};function dv(n){n in W4||(W4[n]=!0)}function um(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function aC(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const Nxe=new Yt().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),kxe=new Yt().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function Oxe(n){return n.convertSRGBToLinear().applyMatrix3(kxe)}function Dxe(n){return n.applyMatrix3(Nxe).convertLinearToSRGB()}const Fxe={[Rs]:n=>n,[Ht]:n=>n.convertSRGBToLinear(),[Yk]:Oxe},Uxe={[Rs]:n=>n,[Ht]:n=>n.convertLinearToSRGB(),[Yk]:Dxe},_o={enabled:!0,get legacyMode(){return!this.enabled},set legacyMode(n){this.enabled=!n},get workingColorSpace(){return Rs},set workingColorSpace(n){},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Fxe[e],r=Uxe[t];if(i===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let Nf;class Kk{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Nf===void 0&&(Nf=r0("canvas")),Nf.width=e.width,Nf.height=e.height;const i=Nf.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Nf}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=r0("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=um(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(um(t[i]/255)*255):t[i]=um(t[i]);return{data:t,width:e.width,height:e.height}}else return e}}let Bxe=0;class pd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Bxe++}),this.uuid=Qs(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(lC(r[o].image)):s.push(lC(r[o]))}else s=lC(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function lC(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Kk.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:{}}let zxe=0;class Rn extends Ll{constructor(e=Rn.DEFAULT_IMAGE,t=Rn.DEFAULT_MAPPING,i=si,r=si,s=En,o=ju,a=$i,l=Ks,c=Rn.DEFAULT_ANISOTROPY,u=Ou){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:zxe++}),this.uuid=Qs(),this.name="",this.source=new pd(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ue(0,0),this.repeat=new Ue(1,1),this.center=new Ue(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Yt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(dv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===ku?Ht:Ou),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Vu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Im:e.x=e.x-Math.floor(e.x);break;case si:e.x=e.x<0?0:1;break;case Qv:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Im:e.y=e.y-Math.floor(e.y);break;case si:e.y=e.y<0?0:1;break;case Qv:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return dv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Ht?ku:Xk}set encoding(e){dv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===ku?Ht:Ou}}Rn.DEFAULT_IMAGE=null;Rn.DEFAULT_MAPPING=Vu;Rn.DEFAULT_ANISOTROPY=1;class jt{constructor(e=0,t=0,i=0,r=1){jt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],f=l[5],p=l[9],x=l[2],v=l[6],y=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-x)<.01&&Math.abs(p-v)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+x)<.1&&Math.abs(p+v)<.1&&Math.abs(c+f+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(c+1)/2,b=(f+1)/2,E=(y+1)/2,M=(u+d)/4,C=(h+x)/4,P=(p+v)/4;return _>b&&_>E?_<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(_),r=M/i,s=C/i):b>E?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=M/r,s=P/r):E<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(E),i=C/s,r=P/s),this.set(i,r,s,t),this}let w=Math.sqrt((v-p)*(v-p)+(h-x)*(h-x)+(d-u)*(d-u));return Math.abs(w)<.001&&(w=1),this.x=(v-p)/w,this.y=(h-x)/w,this.z=(d-u)/w,this.w=Math.acos((c+f+y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class no extends Ll{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new jt(0,0,e,t),this.scissorTest=!1,this.viewport=new jt(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(dv("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===ku?Ht:Ou),this.texture=new Rn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:En,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new pd(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class DE extends Rn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ri,this.minFilter=Ri,this.wrapR=si,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Hxe extends no{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new DE(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Qk extends Rn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ri,this.minFilter=Ri,this.wrapR=si,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Wxe extends no{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Qk(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Vxe extends no{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class fr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],h=i[r+3];const d=s[o+0],f=s[o+1],p=s[o+2],x=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=d,e[t+1]=f,e[t+2]=p,e[t+3]=x;return}if(h!==x||l!==d||c!==f||u!==p){let v=1-a;const y=l*d+c*f+u*p+h*x,w=y>=0?1:-1,_=1-y*y;if(_>Number.EPSILON){const E=Math.sqrt(_),M=Math.atan2(E,y*w);v=Math.sin(v*M)/E,a=Math.sin(a*M)/E}const b=a*w;if(l=l*v+d*b,c=c*v+f*b,u=u*v+p*b,h=h*v+x*b,v===1-a){const E=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=E,c*=E,u*=E,h*=E}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],h=s[o],d=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*h+l*f-c*d,e[t+1]=l*p+u*d+c*h-a*f,e[t+2]=c*p+u*f+a*d-l*h,e[t+3]=u*p-a*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),h=a(s/2),d=l(i/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=d*u*h+c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h-d*f*p;break;case"YXZ":this._x=d*u*h+c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h+d*f*p;break;case"ZXY":this._x=d*u*h-c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h-d*f*p;break;case"ZYX":this._x=d*u*h-c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h+d*f*p;break;case"YZX":this._x=d*u*h+c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h-d*f*p;break;case"XZY":this._x=d*u*h-c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h+d*f*p;break;default:}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=i+a+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(i>a&&i>h){const f=2*Math.sqrt(1+i-a-h);this._w=(u-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>h){const f=2*Math.sqrt(1+a-i-h);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+h-i-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Si(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*h+this._w*d,this._x=i*h+this._x*d,this._y=r*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class V{constructor(e=0,t=0,i=0){V.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(V4.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(V4.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*i,u=l*i+a*t-s*r,h=l*r+s*i-o*t,d=-s*t-o*i-a*r;return this.x=c*l+d*-s+u*-a-h*-o,this.y=u*l+d*-o+h*-s-c*-a,this.z=h*l+d*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return cC.copy(this).projectOnVector(e),this.sub(cC)}reflect(e){return this.sub(cC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Si(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const cC=new V,V4=new fr;class Yn{constructor(e=new V(1/0,1/0,1/0),t=new V(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(jl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(jl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=jl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),kf.copy(e.boundingBox),kf.applyMatrix4(e.matrixWorld),this.union(kf);else{const r=e.geometry;if(r!==void 0)if(t&&r.attributes!==void 0&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)jl.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(jl)}else r.boundingBox===null&&r.computeBoundingBox(),kf.copy(r.boundingBox),kf.applyMatrix4(e.matrixWorld),this.union(kf)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,jl),jl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(iy),Y_.subVectors(this.max,iy),Of.subVectors(e.a,iy),Df.subVectors(e.b,iy),Ff.subVectors(e.c,iy),jc.subVectors(Df,Of),$c.subVectors(Ff,Df),_h.subVectors(Of,Ff);let t=[0,-jc.z,jc.y,0,-$c.z,$c.y,0,-_h.z,_h.y,jc.z,0,-jc.x,$c.z,0,-$c.x,_h.z,0,-_h.x,-jc.y,jc.x,0,-$c.y,$c.x,0,-_h.y,_h.x,0];return!uC(t,Of,Df,Ff,Y_)||(t=[1,0,0,0,1,0,0,0,1],!uC(t,Of,Df,Ff,Y_))?!1:(q_.crossVectors(jc,$c),t=[q_.x,q_.y,q_.z],uC(t,Of,Df,Ff,Y_))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,jl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(jl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Gl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Gl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Gl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Gl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Gl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Gl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Gl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Gl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Gl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Gl=[new V,new V,new V,new V,new V,new V,new V,new V],jl=new V,kf=new Yn,Of=new V,Df=new V,Ff=new V,jc=new V,$c=new V,_h=new V,iy=new V,Y_=new V,q_=new V,wh=new V;function uC(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){wh.fromArray(n,s);const a=r.x*Math.abs(wh.x)+r.y*Math.abs(wh.y)+r.z*Math.abs(wh.z),l=e.dot(wh),c=t.dot(wh),u=i.dot(wh);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Gxe=new Yn,ry=new V,hC=new V;class Ns{constructor(e=new V,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Gxe.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ry.subVectors(e,this.center);const t=ry.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(ry,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(hC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ry.copy(e.center).add(hC)),this.expandByPoint(ry.copy(e.center).sub(hC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const $l=new V,dC=new V,Z_=new V,Xc=new V,fC=new V,K_=new V,pC=new V;class Da{constructor(e=new V,t=new V(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$l)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=$l.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($l.copy(this.origin).addScaledVector(this.direction,t),$l.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){dC.copy(e).add(t).multiplyScalar(.5),Z_.copy(t).sub(e).normalize(),Xc.copy(this.origin).sub(dC);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Z_),a=Xc.dot(this.direction),l=-Xc.dot(Z_),c=Xc.lengthSq(),u=Math.abs(1-o*o);let h,d,f,p;if(u>0)if(h=o*l-a,d=o*a-l,p=s*u,h>=0)if(d>=-p)if(d<=p){const x=1/u;h*=x,d*=x,f=h*(h+o*d+2*a)+d*(o*h+d+2*l)+c}else d=s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d=-s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d<=-p?(h=Math.max(0,-(-o*s+a)),d=h>0?-s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c):d<=p?(h=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+c):(h=Math.max(0,-(o*s+a)),d=h>0?s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c);else d=o>0?-s:s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(dC).addScaledVector(Z_,d),f}intersectSphere(e,t){$l.subVectors(e.center,this.origin);const i=$l.dot(this.direction),r=$l.dot($l)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(i=(e.min.x-d.x)*c,r=(e.max.x-d.x)*c):(i=(e.max.x-d.x)*c,r=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),h>=0?(a=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(a=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,$l)!==null}intersectTriangle(e,t,i,r,s){fC.subVectors(t,e),K_.subVectors(i,e),pC.crossVectors(fC,K_);let o=this.direction.dot(pC),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Xc.subVectors(this.origin,e);const l=a*this.direction.dot(K_.crossVectors(Xc,K_));if(l<0)return null;const c=a*this.direction.dot(fC.cross(Xc));if(c<0||l+c>o)return null;const u=-a*Xc.dot(pC);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class dt{constructor(e,t,i,r,s,o,a,l,c,u,h,d,f,p,x,v){dt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,u,h,d,f,p,x,v)}set(e,t,i,r,s,o,a,l,c,u,h,d,f,p,x,v){const y=this.elements;return y[0]=e,y[4]=t,y[8]=i,y[12]=r,y[1]=s,y[5]=o,y[9]=a,y[13]=l,y[2]=c,y[6]=u,y[10]=h,y[14]=d,y[3]=f,y[7]=p,y[11]=x,y[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new dt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Uf.setFromMatrixColumn(e,0).length(),s=1/Uf.setFromMatrixColumn(e,1).length(),o=1/Uf.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=o*u,f=o*h,p=a*u,x=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+p*c,t[5]=d-x*c,t[9]=-a*l,t[2]=x-d*c,t[6]=p+f*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*u,f=l*h,p=c*u,x=c*h;t[0]=d+x*a,t[4]=p*a-f,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=x+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*u,f=l*h,p=c*u,x=c*h;t[0]=d-x*a,t[4]=-o*h,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=x-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*u,f=o*h,p=a*u,x=a*h;t[0]=l*u,t[4]=p*c-f,t[8]=d*c+x,t[1]=l*h,t[5]=x*c+d,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*c,p=a*l,x=a*c;t[0]=l*u,t[4]=x-d*h,t[8]=p*h+f,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*h+p,t[10]=d-x*h}else if(e.order==="XZY"){const d=o*l,f=o*c,p=a*l,x=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+x,t[5]=o*u,t[9]=f*h-p,t[2]=p*h-f,t[6]=a*u,t[10]=x*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(jxe,e,$xe)}lookAt(e,t,i){const r=this.elements;return Us.subVectors(e,t),Us.lengthSq()===0&&(Us.z=1),Us.normalize(),Yc.crossVectors(i,Us),Yc.lengthSq()===0&&(Math.abs(i.z)===1?Us.x+=1e-4:Us.z+=1e-4,Us.normalize(),Yc.crossVectors(i,Us)),Yc.normalize(),Q_.crossVectors(Us,Yc),r[0]=Yc.x,r[4]=Q_.x,r[8]=Us.x,r[1]=Yc.y,r[5]=Q_.y,r[9]=Us.y,r[2]=Yc.z,r[6]=Q_.z,r[10]=Us.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],h=i[5],d=i[9],f=i[13],p=i[2],x=i[6],v=i[10],y=i[14],w=i[3],_=i[7],b=i[11],E=i[15],M=r[0],C=r[4],P=r[8],T=r[12],I=r[1],U=r[5],j=r[9],B=r[13],z=r[2],$=r[6],H=r[10],Z=r[14],O=r[3],W=r[7],D=r[11],Y=r[15];return s[0]=o*M+a*I+l*z+c*O,s[4]=o*C+a*U+l*$+c*W,s[8]=o*P+a*j+l*H+c*D,s[12]=o*T+a*B+l*Z+c*Y,s[1]=u*M+h*I+d*z+f*O,s[5]=u*C+h*U+d*$+f*W,s[9]=u*P+h*j+d*H+f*D,s[13]=u*T+h*B+d*Z+f*Y,s[2]=p*M+x*I+v*z+y*O,s[6]=p*C+x*U+v*$+y*W,s[10]=p*P+x*j+v*H+y*D,s[14]=p*T+x*B+v*Z+y*Y,s[3]=w*M+_*I+b*z+E*O,s[7]=w*C+_*U+b*$+E*W,s[11]=w*P+_*j+b*H+E*D,s[15]=w*T+_*B+b*Z+E*Y,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14],p=e[3],x=e[7],v=e[11],y=e[15];return p*(+s*l*h-r*c*h-s*a*d+i*c*d+r*a*f-i*l*f)+x*(+t*l*f-t*c*d+s*o*d-r*o*f+r*c*u-s*l*u)+v*(+t*c*h-t*a*f-s*o*h+i*o*f+s*a*u-i*c*u)+y*(-r*a*u-t*l*h+t*a*d+r*o*h-i*o*d+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],x=e[13],v=e[14],y=e[15],w=h*v*c-x*d*c+x*l*f-a*v*f-h*l*y+a*d*y,_=p*d*c-u*v*c-p*l*f+o*v*f+u*l*y-o*d*y,b=u*x*c-p*h*c+p*a*f-o*x*f-u*a*y+o*h*y,E=p*h*l-u*x*l-p*a*d+o*x*d+u*a*v-o*h*v,M=t*w+i*_+r*b+s*E;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/M;return e[0]=w*C,e[1]=(x*d*s-h*v*s-x*r*f+i*v*f+h*r*y-i*d*y)*C,e[2]=(a*v*s-x*l*s+x*r*c-i*v*c-a*r*y+i*l*y)*C,e[3]=(h*l*s-a*d*s-h*r*c+i*d*c+a*r*f-i*l*f)*C,e[4]=_*C,e[5]=(u*v*s-p*d*s+p*r*f-t*v*f-u*r*y+t*d*y)*C,e[6]=(p*l*s-o*v*s-p*r*c+t*v*c+o*r*y-t*l*y)*C,e[7]=(o*d*s-u*l*s+u*r*c-t*d*c-o*r*f+t*l*f)*C,e[8]=b*C,e[9]=(p*h*s-u*x*s-p*i*f+t*x*f+u*i*y-t*h*y)*C,e[10]=(o*x*s-p*a*s+p*i*c-t*x*c-o*i*y+t*a*y)*C,e[11]=(u*a*s-o*h*s-u*i*c+t*h*c+o*i*f-t*a*f)*C,e[12]=E*C,e[13]=(u*x*r-p*h*r+p*i*d-t*x*d-u*i*v+t*h*v)*C,e[14]=(p*a*r-o*x*r-p*i*l+t*x*l+o*i*v-t*a*v)*C,e[15]=(o*h*r-u*a*r+u*i*l-t*h*l-o*i*d+t*a*d)*C,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,h=a+a,d=s*c,f=s*u,p=s*h,x=o*u,v=o*h,y=a*h,w=l*c,_=l*u,b=l*h,E=i.x,M=i.y,C=i.z;return r[0]=(1-(x+y))*E,r[1]=(f+b)*E,r[2]=(p-_)*E,r[3]=0,r[4]=(f-b)*M,r[5]=(1-(d+y))*M,r[6]=(v+w)*M,r[7]=0,r[8]=(p+_)*C,r[9]=(v-w)*C,r[10]=(1-(d+x))*C,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Uf.set(r[0],r[1],r[2]).length();const o=Uf.set(r[4],r[5],r[6]).length(),a=Uf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ta.copy(this);const c=1/s,u=1/o,h=1/a;return ta.elements[0]*=c,ta.elements[1]*=c,ta.elements[2]*=c,ta.elements[4]*=u,ta.elements[5]*=u,ta.elements[6]*=u,ta.elements[8]*=h,ta.elements[9]*=h,ta.elements[10]*=h,t.setFromRotationMatrix(ta),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=pl){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),h=(t+e)/(t-e),d=(i+r)/(i-r);let f,p;if(a===pl)f=-(o+s)/(o-s),p=-2*o*s/(o-s);else if(a===i0)f=-o/(o-s),p=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=pl){const l=this.elements,c=1/(t-e),u=1/(i-r),h=1/(o-s),d=(t+e)*c,f=(i+r)*u;let p,x;if(a===pl)p=(o+s)*h,x=-2*h;else if(a===i0)p=s*h,x=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=x,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Uf=new V,ta=new dt,jxe=new V(0,0,0),$xe=new V(1,1,1),Yc=new V,Q_=new V,Us=new V,G4=new dt,j4=new fr;class H0{constructor(e=0,t=0,i=0,r=H0.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],h=r[2],d=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(Si(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Si(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Si(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Si(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Si(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Si(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return G4.makeRotationFromQuaternion(e),this.setFromRotationMatrix(G4,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return j4.setFromEuler(this),this.setFromQuaternion(j4,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}H0.DEFAULT_ORDER="XYZ";class Cd{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Xxe=0;const $4=new V,Bf=new fr,Xl=new dt,J_=new V,sy=new V,Yxe=new V,qxe=new fr,X4=new V(1,0,0),Y4=new V(0,1,0),q4=new V(0,0,1),Zxe={type:"added"},Z4={type:"removed"};class _n extends Ll{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Xxe++}),this.uuid=Qs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_n.DEFAULT_UP.clone();const e=new V,t=new H0,i=new fr,r=new V(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new dt},normalMatrix:{value:new Yt}}),this.matrix=new dt,this.matrixWorld=new dt,this.matrixAutoUpdate=_n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=_n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Cd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Bf.setFromAxisAngle(e,t),this.quaternion.multiply(Bf),this}rotateOnWorldAxis(e,t){return Bf.setFromAxisAngle(e,t),this.quaternion.premultiply(Bf),this}rotateX(e){return this.rotateOnAxis(X4,e)}rotateY(e){return this.rotateOnAxis(Y4,e)}rotateZ(e){return this.rotateOnAxis(q4,e)}translateOnAxis(e,t){return $4.copy(e).applyQuaternion(this.quaternion),this.position.add($4.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(X4,e)}translateY(e){return this.translateOnAxis(Y4,e)}translateZ(e){return this.translateOnAxis(q4,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Xl.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?J_.copy(e):J_.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),sy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xl.lookAt(sy,J_,this.up):Xl.lookAt(J_,sy,this.up),this.quaternion.setFromRotationMatrix(Xl),r&&(Xl.extractRotation(r.matrixWorld),Bf.setFromRotationMatrix(Xl),this.quaternion.premultiply(Bf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?this:(e&&e.isObject3D&&(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Zxe)),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Z4)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Z4)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Xl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Xl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Xl),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,t);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sy,e,Yxe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sy,qxe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),d=o(e.skeletons),f=o(e.animations),p=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),h.length>0&&(i.shapes=h),d.length>0&&(i.skeletons=d),f.length>0&&(i.animations=f),p.length>0&&(i.nodes=p)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}_n.DEFAULT_UP=new V(0,1,0);_n.DEFAULT_MATRIX_AUTO_UPDATE=!0;_n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const na=new V,Yl=new V,mC=new V,ql=new V,zf=new V,Hf=new V,K4=new V,gC=new V,yC=new V,vC=new V;let ew=!1;class Bn{constructor(e=new V,t=new V,i=new V){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),na.subVectors(e,t),r.cross(na);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){na.subVectors(r,t),Yl.subVectors(i,t),mC.subVectors(e,t);const o=na.dot(na),a=na.dot(Yl),l=na.dot(mC),c=Yl.dot(Yl),u=Yl.dot(mC),h=o*c-a*a;if(h===0)return s.set(-2,-1,-1);const d=1/h,f=(c*l-a*u)*d,p=(o*u-a*l)*d;return s.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,ql),ql.x>=0&&ql.y>=0&&ql.x+ql.y<=1}static getUV(e,t,i,r,s,o,a,l){return ew===!1&&(ew=!0),this.getInterpolation(e,t,i,r,s,o,a,l)}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,ql),l.setScalar(0),l.addScaledVector(s,ql.x),l.addScaledVector(o,ql.y),l.addScaledVector(a,ql.z),l}static isFrontFacing(e,t,i,r){return na.subVectors(i,t),Yl.subVectors(e,t),na.cross(Yl).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return na.subVectors(this.c,this.b),Yl.subVectors(this.a,this.b),na.cross(Yl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Bn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Bn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return ew===!1&&(ew=!0),Bn.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return Bn.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Bn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Bn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;zf.subVectors(r,i),Hf.subVectors(s,i),gC.subVectors(e,i);const l=zf.dot(gC),c=Hf.dot(gC);if(l<=0&&c<=0)return t.copy(i);yC.subVectors(e,r);const u=zf.dot(yC),h=Hf.dot(yC);if(u>=0&&h<=u)return t.copy(r);const d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(zf,o);vC.subVectors(e,s);const f=zf.dot(vC),p=Hf.dot(vC);if(p>=0&&f<=p)return t.copy(s);const x=f*c-l*p;if(x<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(i).addScaledVector(Hf,a);const v=u*p-f*h;if(v<=0&&h-u>=0&&f-p>=0)return K4.subVectors(s,r),a=(h-u)/(h-u+(f-p)),t.copy(r).addScaledVector(K4,a);const y=1/(v+x+d);return o=x*y,a=d*y,t.copy(i).addScaledVector(zf,o).addScaledVector(Hf,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Kxe=0;class Ki extends Ll{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Kxe++}),this.uuid=Qs(),this.name="",this.type="Material",this.blending=Td,this.side=Wo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=kk,this.blendDst=Ok,this.blendEquation=nd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=mS,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=X7,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=J1,this.stencilZFail=J1,this.stencilZPass=J1,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0)continue;const r=this[t];r!==void 0&&(r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i)}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Td&&(i.blending=this.blending),this.side!==Wo&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const rX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ia={h:0,s:0,l:0},tw={h:0,s:0,l:0};function xC(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class ht{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ht){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,_o.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=_o.workingColorSpace){return this.r=e,this.g=t,this.b=i,_o.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=_o.workingColorSpace){if(e=qk(e,1),t=Si(t,0,1),i=Si(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=xC(o,s,e+1/3),this.g=xC(o,s,e),this.b=xC(o,s,e-1/3)}return _o.toWorkingColorSpace(this,r),this}setStyle(e,t=Ht){function i(s){s!==void 0&&parseFloat(s)<1}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ht){const i=rX[e.toLowerCase()];return i!==void 0&&this.setHex(i,t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=um(e.r),this.g=um(e.g),this.b=um(e.b),this}copyLinearToSRGB(e){return this.r=aC(e.r),this.g=aC(e.g),this.b=aC(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ht){return _o.fromWorkingColorSpace(Br.copy(this),e),Math.round(Si(Br.r*255,0,255))*65536+Math.round(Si(Br.g*255,0,255))*256+Math.round(Si(Br.b*255,0,255))}getHexString(e=Ht){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=_o.workingColorSpace){_o.fromWorkingColorSpace(Br.copy(this),t);const i=Br.r,r=Br.g,s=Br.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=_o.workingColorSpace){return _o.fromWorkingColorSpace(Br.copy(this),t),e.r=Br.r,e.g=Br.g,e.b=Br.b,e}getStyle(e=Ht){_o.fromWorkingColorSpace(Br.copy(this),e);const t=Br.r,i=Br.g,r=Br.b;return e!==Ht?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(ia),ia.h+=e,ia.s+=t,ia.l+=i,this.setHSL(ia.h,ia.s,ia.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(ia),e.getHSL(tw);const i=hv(ia.h,tw.h,t),r=hv(ia.s,tw.s,t),s=hv(ia.l,tw.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Br=new ht;ht.NAMES=rX;class Nc extends Ki{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=z0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const sc=Qxe();function Qxe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function gs(n){Math.abs(n)>65504,n=Si(n,-65504,65504),sc.floatView[0]=n;const e=sc.uint32View[0],t=e>>23&511;return sc.baseTable[t]+((e&8388607)>>sc.shiftTable[t])}function Wy(n){const e=n>>10;return sc.uint32View[0]=sc.mantissaTable[sc.offsetTable[e]+(n&1023)]+sc.exponentTable[e],sc.floatView[0]}const md={toHalfFloat:gs,fromHalfFloat:Wy},Oi=new V,nw=new Ue;class Mn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=n0,this.updateRange={offset:0,count:-1},this.gpuType=ur,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)nw.fromBufferAttribute(this,t),nw.applyMatrix3(e),this.setXY(t,nw.x,nw.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.applyMatrix3(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.applyMatrix4(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.applyNormalMatrix(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.transformDirection(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=$s(t,this.array)),t}setX(e,t){return this.normalized&&(t=Qt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=$s(t,this.array)),t}setY(e,t){return this.normalized&&(t=Qt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=$s(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Qt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=$s(t,this.array)),t}setW(e,t){return this.normalized&&(t=Qt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Qt(t,this.array),i=Qt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Qt(t,this.array),i=Qt(i,this.array),r=Qt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Qt(t,this.array),i=Qt(i,this.array),r=Qt(r,this.array),s=Qt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==n0&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class Jxe extends Mn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class e_e extends Mn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class t_e extends Mn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class n_e extends Mn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class Jk extends Mn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class i_e extends Mn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class e3 extends Mn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class r_e extends Mn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Wy(this.array[e*this.itemSize]);return this.normalized&&(t=$s(t,this.array)),t}setX(e,t){return this.normalized&&(t=Qt(t,this.array)),this.array[e*this.itemSize]=gs(t),this}getY(e){let t=Wy(this.array[e*this.itemSize+1]);return this.normalized&&(t=$s(t,this.array)),t}setY(e,t){return this.normalized&&(t=Qt(t,this.array)),this.array[e*this.itemSize+1]=gs(t),this}getZ(e){let t=Wy(this.array[e*this.itemSize+2]);return this.normalized&&(t=$s(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Qt(t,this.array)),this.array[e*this.itemSize+2]=gs(t),this}getW(e){let t=Wy(this.array[e*this.itemSize+3]);return this.normalized&&(t=$s(t,this.array)),t}setW(e,t){return this.normalized&&(t=Qt(t,this.array)),this.array[e*this.itemSize+3]=gs(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Qt(t,this.array),i=Qt(i,this.array)),this.array[e+0]=gs(t),this.array[e+1]=gs(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Qt(t,this.array),i=Qt(i,this.array),r=Qt(r,this.array)),this.array[e+0]=gs(t),this.array[e+1]=gs(i),this.array[e+2]=gs(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Qt(t,this.array),i=Qt(i,this.array),r=Qt(r,this.array),s=Qt(s,this.array)),this.array[e+0]=gs(t),this.array[e+1]=gs(i),this.array[e+2]=gs(r),this.array[e+3]=gs(s),this}}class xt extends Mn{constructor(e,t,i){super(new Float32Array(e),t,i)}}class s_e extends Mn{constructor(e,t,i){super(new Float64Array(e),t,i)}}let o_e=0;const yo=new dt,_C=new _n,Wf=new V,Bs=new Yn,oy=new Yn,ir=new V;class $t extends Ll{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:o_e++}),this.uuid=Qs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(iX(e)?e3:Jk)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Yt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return yo.makeRotationFromQuaternion(e),this.applyMatrix4(yo),this}rotateX(e){return yo.makeRotationX(e),this.applyMatrix4(yo),this}rotateY(e){return yo.makeRotationY(e),this.applyMatrix4(yo),this}rotateZ(e){return yo.makeRotationZ(e),this.applyMatrix4(yo),this}translate(e,t,i){return yo.makeTranslation(e,t,i),this.applyMatrix4(yo),this}scale(e,t,i){return yo.makeScale(e,t,i),this.applyMatrix4(yo),this}lookAt(e){return _C.lookAt(e),_C.updateMatrix(),this.applyMatrix4(_C.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Wf).negate(),this.translate(Wf.x,Wf.y,Wf.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new xt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){this.boundingBox.set(new V(-1/0,-1/0,-1/0),new V(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Bs.setFromBufferAttribute(s),this.morphTargetsRelative?(ir.addVectors(this.boundingBox.min,Bs.min),this.boundingBox.expandByPoint(ir),ir.addVectors(this.boundingBox.max,Bs.max),this.boundingBox.expandByPoint(ir)):(this.boundingBox.expandByPoint(Bs.min),this.boundingBox.expandByPoint(Bs.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ns);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){this.boundingSphere.set(new V,1/0);return}if(e){const i=this.boundingSphere.center;if(Bs.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];oy.setFromBufferAttribute(a),this.morphTargetsRelative?(ir.addVectors(Bs.min,oy.min),Bs.expandByPoint(ir),ir.addVectors(Bs.max,oy.max),Bs.expandByPoint(ir)):(Bs.expandByPoint(oy.min),Bs.expandByPoint(oy.max))}Bs.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)ir.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(ir));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)ir.fromBufferAttribute(a,c),l&&(Wf.fromBufferAttribute(e,c),ir.add(Wf)),r=Math.max(r,i.distanceToSquared(ir))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0)return;const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Mn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let I=0;I<a;I++)c[I]=new V,u[I]=new V;const h=new V,d=new V,f=new V,p=new Ue,x=new Ue,v=new Ue,y=new V,w=new V;function _(I,U,j){h.fromArray(r,I*3),d.fromArray(r,U*3),f.fromArray(r,j*3),p.fromArray(o,I*2),x.fromArray(o,U*2),v.fromArray(o,j*2),d.sub(h),f.sub(h),x.sub(p),v.sub(p);const B=1/(x.x*v.y-v.x*x.y);isFinite(B)&&(y.copy(d).multiplyScalar(v.y).addScaledVector(f,-x.y).multiplyScalar(B),w.copy(f).multiplyScalar(x.x).addScaledVector(d,-v.x).multiplyScalar(B),c[I].add(y),c[U].add(y),c[j].add(y),u[I].add(w),u[U].add(w),u[j].add(w))}let b=this.groups;b.length===0&&(b=[{start:0,count:i.length}]);for(let I=0,U=b.length;I<U;++I){const j=b[I],B=j.start,z=j.count;for(let $=B,H=B+z;$<H;$+=3)_(i[$+0],i[$+1],i[$+2])}const E=new V,M=new V,C=new V,P=new V;function T(I){C.fromArray(s,I*3),P.copy(C);const U=c[I];E.copy(U),E.sub(C.multiplyScalar(C.dot(U))).normalize(),M.crossVectors(P,U);const B=M.dot(u[I])<0?-1:1;l[I*4]=E.x,l[I*4+1]=E.y,l[I*4+2]=E.z,l[I*4+3]=B}for(let I=0,U=b.length;I<U;++I){const j=b[I],B=j.start,z=j.count;for(let $=B,H=B+z;$<H;$+=3)T(i[$+0]),T(i[$+1]),T(i[$+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Mn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let d=0,f=i.count;d<f;d++)i.setXYZ(d,0,0,0);const r=new V,s=new V,o=new V,a=new V,l=new V,c=new V,u=new V,h=new V;if(e)for(let d=0,f=e.count;d<f;d+=3){const p=e.getX(d+0),x=e.getX(d+1),v=e.getX(d+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,v),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,x),c.fromBufferAttribute(i,v),a.add(u),l.add(u),c.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(v,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)r.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),i.setXYZ(d+0,u.x,u.y,u.z),i.setXYZ(d+1,u.x,u.y,u.z),i.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ir.fromBufferAttribute(e,t),ir.normalize(),e.setXYZ(t,ir.x,ir.y,ir.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,d=new c.constructor(l.length*u);let f=0,p=0;for(let x=0,v=l.length;x<v;x++){a.isInterleavedBufferAttribute?f=l[x]*a.data.stride+a.offset:f=l[x]*u;for(let y=0;y<u;y++)d[p++]=c[f++]}return new Mn(d,u,h)}if(this.index===null)return this;const t=new $t,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const d=c[u],f=e(d,i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h];u.push(f.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Q4=new dt,bh=new Da,iw=new Ns,J4=new V,Vf=new V,Gf=new V,jf=new V,wC=new V,rw=new V,sw=new Ue,ow=new Ue,aw=new Ue,ez=new V,tz=new V,nz=new V,lw=new V,cw=new V;class oi extends _n{constructor(e=new $t,t=new Nc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){rw.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],h=s[l];u!==0&&(wC.fromBufferAttribute(h,e),o?rw.addScaledVector(wC,u):rw.addScaledVector(wC.sub(t),u))}t.add(rw)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),iw.copy(i.boundingSphere),iw.applyMatrix4(s),bh.copy(e.ray).recast(e.near),!(iw.containsPoint(bh.origin)===!1&&(bh.intersectSphere(iw,J4)===null||bh.origin.distanceToSquared(J4)>(e.far-e.near)**2))&&(Q4.copy(s).invert(),bh.copy(e.ray).applyMatrix4(Q4),!(i.boundingBox!==null&&bh.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,bh)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,d=s.groups,f=s.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,x=d.length;p<x;p++){const v=d[p],y=o[v.materialIndex],w=Math.max(v.start,f.start),_=Math.min(a.count,Math.min(v.start+v.count,f.start+f.count));for(let b=w,E=_;b<E;b+=3){const M=a.getX(b),C=a.getX(b+1),P=a.getX(b+2);r=uw(this,y,e,i,c,u,h,M,C,P),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=v.materialIndex,t.push(r))}}else{const p=Math.max(0,f.start),x=Math.min(a.count,f.start+f.count);for(let v=p,y=x;v<y;v+=3){const w=a.getX(v),_=a.getX(v+1),b=a.getX(v+2);r=uw(this,o,e,i,c,u,h,w,_,b),r&&(r.faceIndex=Math.floor(v/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let p=0,x=d.length;p<x;p++){const v=d[p],y=o[v.materialIndex],w=Math.max(v.start,f.start),_=Math.min(l.count,Math.min(v.start+v.count,f.start+f.count));for(let b=w,E=_;b<E;b+=3){const M=b,C=b+1,P=b+2;r=uw(this,y,e,i,c,u,h,M,C,P),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=v.materialIndex,t.push(r))}}else{const p=Math.max(0,f.start),x=Math.min(l.count,f.start+f.count);for(let v=p,y=x;v<y;v+=3){const w=v,_=v+1,b=v+2;r=uw(this,o,e,i,c,u,h,w,_,b),r&&(r.faceIndex=Math.floor(v/3),t.push(r))}}}}function a_e(n,e,t,i,r,s,o,a){let l;if(e.side===Xr?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Wo,a),l===null)return null;cw.copy(a),cw.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(cw);return c<t.near||c>t.far?null:{distance:c,point:cw.clone(),object:n}}function uw(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,Vf),n.getVertexPosition(l,Gf),n.getVertexPosition(c,jf);const u=a_e(n,e,t,i,Vf,Gf,jf,lw);if(u){r&&(sw.fromBufferAttribute(r,a),ow.fromBufferAttribute(r,l),aw.fromBufferAttribute(r,c),u.uv=Bn.getInterpolation(lw,Vf,Gf,jf,sw,ow,aw,new Ue)),s&&(sw.fromBufferAttribute(s,a),ow.fromBufferAttribute(s,l),aw.fromBufferAttribute(s,c),u.uv1=Bn.getInterpolation(lw,Vf,Gf,jf,sw,ow,aw,new Ue),u.uv2=u.uv1),o&&(ez.fromBufferAttribute(o,a),tz.fromBufferAttribute(o,l),nz.fromBufferAttribute(o,c),u.normal=Bn.getInterpolation(lw,Vf,Gf,jf,ez,tz,nz,new V),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const h={a,b:l,c,normal:new V,materialIndex:0};Bn.getNormal(Vf,Gf,jf,h.normal),u.face=h}return u}class Nl extends $t{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let d=0,f=0;p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new xt(c,3)),this.setAttribute("normal",new xt(u,3)),this.setAttribute("uv",new xt(h,2));function p(x,v,y,w,_,b,E,M,C,P,T){const I=b/C,U=E/P,j=b/2,B=E/2,z=M/2,$=C+1,H=P+1;let Z=0,O=0;const W=new V;for(let D=0;D<H;D++){const Y=D*U-B;for(let Q=0;Q<$;Q++){const re=Q*I-j;W[x]=re*w,W[v]=Y*_,W[y]=z,c.push(W.x,W.y,W.z),W[x]=0,W[v]=0,W[y]=M>0?1:-1,u.push(W.x,W.y,W.z),h.push(Q/C),h.push(1-D/P),Z+=1}}for(let D=0;D<P;D++)for(let Y=0;Y<C;Y++){const Q=d+Y+$*D,re=d+Y+$*(D+1),ce=d+(Y+1)+$*(D+1),oe=d+(Y+1)+$*D;l.push(Q,re,oe),l.push(re,ce,oe),O+=6}a.addGroup(f,O,T),f+=O,d+=Z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Nm(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?e[t][i]=null:e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function ns(n){const e={};for(let t=0;t<n.length;t++){const i=Nm(n[t]);for(const r in i)e[r]=i[r]}return e}function l_e(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function sX(n){return n.getRenderTarget()===null?n.outputColorSpace:Rs}const xS={clone:Nm,merge:ns};var c_e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,u_e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Is extends Ki{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=c_e,this.fragmentShader=u_e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Nm(e.uniforms),this.uniformsGroups=l_e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class W0 extends _n{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new dt,this.projectionMatrix=new dt,this.projectionMatrixInverse=new dt,this.coordinateSystem=pl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class ri extends W0{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Lm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ad*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Lm*2*Math.atan(Math.tan(Ad*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Ad*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const $f=-90,Xf=1;class oX extends _n{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null;const r=new ri($f,Xf,e,t);r.layers=this.layers,this.add(r);const s=new ri($f,Xf,e,t);s.layers=this.layers,this.add(s);const o=new ri($f,Xf,e,t);o.layers=this.layers,this.add(o);const a=new ri($f,Xf,e,t);a.layers=this.layers,this.add(a);const l=new ri($f,Xf,e,t);l.layers=this.layers,this.add(l);const c=new ri($f,Xf,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===pl)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===i0)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,s,o,a,l,c]=this.children,u=e.getRenderTarget(),h=e.toneMapping,d=e.xr.enabled;e.toneMapping=Ma,e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=f,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=h,e.xr.enabled=d,i.texture.needsPMREMUpdate=!0}}class V0 extends Rn{constructor(e,t,i,r,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Mc,super(e,t,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class t3 extends no{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(dv("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===ku?Ht:Ou),this.texture=new V0(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:En}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Nl(5,5,5),s=new Is({name:"CubemapFromEquirect",uniforms:Nm(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Xr,blending:bl});s.uniforms.tEquirect.value=t;const o=new oi(r,s),a=t.minFilter;return t.minFilter===ju&&(t.minFilter=En),new oX(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const bC=new V,h_e=new V,d_e=new Yt;class xs{constructor(e=new V(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=bC.subVectors(i,t).cross(h_e.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(bC),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||d_e.getNormalMatrix(e),r=this.coplanarPoint(bC).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Sh=new Ns,hw=new V;class FE{constructor(e=new xs,t=new xs,i=new xs,r=new xs,s=new xs,o=new xs){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=pl){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],h=r[6],d=r[7],f=r[8],p=r[9],x=r[10],v=r[11],y=r[12],w=r[13],_=r[14],b=r[15];if(i[0].setComponents(l-s,d-c,v-f,b-y).normalize(),i[1].setComponents(l+s,d+c,v+f,b+y).normalize(),i[2].setComponents(l+o,d+u,v+p,b+w).normalize(),i[3].setComponents(l-o,d-u,v-p,b-w).normalize(),i[4].setComponents(l-a,d-h,v-x,b-_).normalize(),t===pl)i[5].setComponents(l+a,d+h,v+x,b+_).normalize();else if(t===i0)i[5].setComponents(a,h,x,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Sh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Sh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Sh)}intersectsSprite(e){return Sh.center.set(0,0,0),Sh.radius=.7071067811865476,Sh.applyMatrix4(e.matrixWorld),this.intersectsSphere(Sh)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(hw.x=r.normal.x>0?e.max.x:e.min.x,hw.y=r.normal.y>0?e.max.y:e.min.y,hw.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(hw)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function aX(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function f_e(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,u){const h=c.array,d=c.usage,f=n.createBuffer();n.bindBuffer(u,f),n.bufferData(u,h,d),c.onUploadCallback();let p;if(h instanceof Float32Array)p=n.FLOAT;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)p=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)p=n.SHORT;else if(h instanceof Uint32Array)p=n.UNSIGNED_INT;else if(h instanceof Int32Array)p=n.INT;else if(h instanceof Int8Array)p=n.BYTE;else if(h instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:f,type:p,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,h){const d=u.array,f=u.updateRange;n.bindBuffer(h,c),f.count===-1?n.bufferSubData(h,0,d):(t?n.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):n.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const d=i.get(c);(!d||d.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const h=i.get(c);h===void 0?i.set(c,r(c,u)):h.version<c.version&&(s(h.buffer,c,u),h.version=c.version)}return{get:o,remove:a,update:l}}class tf extends $t{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,h=e/a,d=t/l,f=[],p=[],x=[],v=[];for(let y=0;y<u;y++){const w=y*d-o;for(let _=0;_<c;_++){const b=_*h-s;p.push(b,-w,0),x.push(0,0,1),v.push(_/a),v.push(1-y/l)}}for(let y=0;y<l;y++)for(let w=0;w<a;w++){const _=w+c*y,b=w+c*(y+1),E=w+1+c*(y+1),M=w+1+c*y;f.push(_,b,M),f.push(b,E,M)}this.setIndex(f),this.setAttribute("position",new xt(p,3)),this.setAttribute("normal",new xt(x,3)),this.setAttribute("uv",new xt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tf(e.width,e.height,e.widthSegments,e.heightSegments)}}var p_e=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,m_e=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,g_e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,y_e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,v_e=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,x_e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,__e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,w_e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,b_e=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,S_e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,E_e=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,M_e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,T_e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,A_e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,C_e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,P_e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,R_e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,I_e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,L_e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,N_e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,k_e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,O_e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,D_e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,F_e=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,U_e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,B_e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,z_e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,H_e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,W_e="gl_FragColor = linearToOutputTexel( gl_FragColor );",V_e=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,G_e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,j_e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,$_e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,X_e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Y_e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,q_e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Z_e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,K_e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Q_e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,J_e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,ewe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,twe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,nwe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,iwe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,rwe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,swe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,owe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,awe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lwe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,cwe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,uwe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,hwe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,dwe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,fwe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,pwe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,mwe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,gwe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,ywe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,vwe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,xwe=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,_we=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,wwe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,bwe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Swe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Ewe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Mwe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Twe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Awe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Cwe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Pwe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,Rwe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Iwe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Lwe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Nwe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,kwe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Owe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Dwe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Fwe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Uwe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Bwe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,zwe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Hwe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Wwe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Vwe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Gwe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,jwe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,$we=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Xwe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Ywe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,qwe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Zwe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Kwe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Qwe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Jwe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,e1e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,t1e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,n1e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,i1e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,r1e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,s1e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,o1e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,a1e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,l1e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,c1e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,u1e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const h1e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,d1e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,f1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,p1e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,m1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,g1e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,y1e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,v1e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,x1e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,_1e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,w1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,b1e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,S1e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,E1e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,M1e=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,T1e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,A1e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,C1e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,P1e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,R1e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,I1e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,L1e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,N1e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,k1e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,O1e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,D1e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,F1e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,U1e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,B1e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,z1e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,H1e=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,W1e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,V1e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,G1e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Xt={alphahash_fragment:p_e,alphahash_pars_fragment:m_e,alphamap_fragment:g_e,alphamap_pars_fragment:y_e,alphatest_fragment:v_e,alphatest_pars_fragment:x_e,aomap_fragment:__e,aomap_pars_fragment:w_e,begin_vertex:b_e,beginnormal_vertex:S_e,bsdfs:E_e,iridescence_fragment:M_e,bumpmap_pars_fragment:T_e,clipping_planes_fragment:A_e,clipping_planes_pars_fragment:C_e,clipping_planes_pars_vertex:P_e,clipping_planes_vertex:R_e,color_fragment:I_e,color_pars_fragment:L_e,color_pars_vertex:N_e,color_vertex:k_e,common:O_e,cube_uv_reflection_fragment:D_e,defaultnormal_vertex:F_e,displacementmap_pars_vertex:U_e,displacementmap_vertex:B_e,emissivemap_fragment:z_e,emissivemap_pars_fragment:H_e,colorspace_fragment:W_e,colorspace_pars_fragment:V_e,envmap_fragment:G_e,envmap_common_pars_fragment:j_e,envmap_pars_fragment:$_e,envmap_pars_vertex:X_e,envmap_physical_pars_fragment:swe,envmap_vertex:Y_e,fog_vertex:q_e,fog_pars_vertex:Z_e,fog_fragment:K_e,fog_pars_fragment:Q_e,gradientmap_pars_fragment:J_e,lightmap_fragment:ewe,lightmap_pars_fragment:twe,lights_lambert_fragment:nwe,lights_lambert_pars_fragment:iwe,lights_pars_begin:rwe,lights_toon_fragment:owe,lights_toon_pars_fragment:awe,lights_phong_fragment:lwe,lights_phong_pars_fragment:cwe,lights_physical_fragment:uwe,lights_physical_pars_fragment:hwe,lights_fragment_begin:dwe,lights_fragment_maps:fwe,lights_fragment_end:pwe,logdepthbuf_fragment:mwe,logdepthbuf_pars_fragment:gwe,logdepthbuf_pars_vertex:ywe,logdepthbuf_vertex:vwe,map_fragment:xwe,map_pars_fragment:_we,map_particle_fragment:wwe,map_particle_pars_fragment:bwe,metalnessmap_fragment:Swe,metalnessmap_pars_fragment:Ewe,morphcolor_vertex:Mwe,morphnormal_vertex:Twe,morphtarget_pars_vertex:Awe,morphtarget_vertex:Cwe,normal_fragment_begin:Pwe,normal_fragment_maps:Rwe,normal_pars_fragment:Iwe,normal_pars_vertex:Lwe,normal_vertex:Nwe,normalmap_pars_fragment:kwe,clearcoat_normal_fragment_begin:Owe,clearcoat_normal_fragment_maps:Dwe,clearcoat_pars_fragment:Fwe,iridescence_pars_fragment:Uwe,opaque_fragment:Bwe,packing:zwe,premultiplied_alpha_fragment:Hwe,project_vertex:Wwe,dithering_fragment:Vwe,dithering_pars_fragment:Gwe,roughnessmap_fragment:jwe,roughnessmap_pars_fragment:$we,shadowmap_pars_fragment:Xwe,shadowmap_pars_vertex:Ywe,shadowmap_vertex:qwe,shadowmask_pars_fragment:Zwe,skinbase_vertex:Kwe,skinning_pars_vertex:Qwe,skinning_vertex:Jwe,skinnormal_vertex:e1e,specularmap_fragment:t1e,specularmap_pars_fragment:n1e,tonemapping_fragment:i1e,tonemapping_pars_fragment:r1e,transmission_fragment:s1e,transmission_pars_fragment:o1e,uv_pars_fragment:a1e,uv_pars_vertex:l1e,uv_vertex:c1e,worldpos_vertex:u1e,background_vert:h1e,background_frag:d1e,backgroundCube_vert:f1e,backgroundCube_frag:p1e,cube_vert:m1e,cube_frag:g1e,depth_vert:y1e,depth_frag:v1e,distanceRGBA_vert:x1e,distanceRGBA_frag:_1e,equirect_vert:w1e,equirect_frag:b1e,linedashed_vert:S1e,linedashed_frag:E1e,meshbasic_vert:M1e,meshbasic_frag:T1e,meshlambert_vert:A1e,meshlambert_frag:C1e,meshmatcap_vert:P1e,meshmatcap_frag:R1e,meshnormal_vert:I1e,meshnormal_frag:L1e,meshphong_vert:N1e,meshphong_frag:k1e,meshphysical_vert:O1e,meshphysical_frag:D1e,meshtoon_vert:F1e,meshtoon_frag:U1e,points_vert:B1e,points_frag:z1e,shadow_vert:H1e,shadow_frag:W1e,sprite_vert:V1e,sprite_frag:G1e},rt={common:{diffuse:{value:new ht(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Yt},alphaMap:{value:null},alphaMapTransform:{value:new Yt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Yt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Yt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Yt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Yt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Yt},normalScale:{value:new Ue(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Yt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Yt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Yt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Yt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ht(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ht(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Yt},alphaTest:{value:0},uvTransform:{value:new Yt}},sprite:{diffuse:{value:new ht(16777215)},opacity:{value:1},center:{value:new Ue(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Yt},alphaMap:{value:null},alphaMapTransform:{value:new Yt},alphaTest:{value:0}}},ga={basic:{uniforms:ns([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.fog]),vertexShader:Xt.meshbasic_vert,fragmentShader:Xt.meshbasic_frag},lambert:{uniforms:ns([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,rt.lights,{emissive:{value:new ht(0)}}]),vertexShader:Xt.meshlambert_vert,fragmentShader:Xt.meshlambert_frag},phong:{uniforms:ns([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,rt.lights,{emissive:{value:new ht(0)},specular:{value:new ht(1118481)},shininess:{value:30}}]),vertexShader:Xt.meshphong_vert,fragmentShader:Xt.meshphong_frag},standard:{uniforms:ns([rt.common,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.roughnessmap,rt.metalnessmap,rt.fog,rt.lights,{emissive:{value:new ht(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xt.meshphysical_vert,fragmentShader:Xt.meshphysical_frag},toon:{uniforms:ns([rt.common,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.gradientmap,rt.fog,rt.lights,{emissive:{value:new ht(0)}}]),vertexShader:Xt.meshtoon_vert,fragmentShader:Xt.meshtoon_frag},matcap:{uniforms:ns([rt.common,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,{matcap:{value:null}}]),vertexShader:Xt.meshmatcap_vert,fragmentShader:Xt.meshmatcap_frag},points:{uniforms:ns([rt.points,rt.fog]),vertexShader:Xt.points_vert,fragmentShader:Xt.points_frag},dashed:{uniforms:ns([rt.common,rt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xt.linedashed_vert,fragmentShader:Xt.linedashed_frag},depth:{uniforms:ns([rt.common,rt.displacementmap]),vertexShader:Xt.depth_vert,fragmentShader:Xt.depth_frag},normal:{uniforms:ns([rt.common,rt.bumpmap,rt.normalmap,rt.displacementmap,{opacity:{value:1}}]),vertexShader:Xt.meshnormal_vert,fragmentShader:Xt.meshnormal_frag},sprite:{uniforms:ns([rt.sprite,rt.fog]),vertexShader:Xt.sprite_vert,fragmentShader:Xt.sprite_frag},background:{uniforms:{uvTransform:{value:new Yt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Xt.background_vert,fragmentShader:Xt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Xt.backgroundCube_vert,fragmentShader:Xt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Xt.cube_vert,fragmentShader:Xt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xt.equirect_vert,fragmentShader:Xt.equirect_frag},distanceRGBA:{uniforms:ns([rt.common,rt.displacementmap,{referencePosition:{value:new V},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xt.distanceRGBA_vert,fragmentShader:Xt.distanceRGBA_frag},shadow:{uniforms:ns([rt.lights,rt.fog,{color:{value:new ht(0)},opacity:{value:1}}]),vertexShader:Xt.shadow_vert,fragmentShader:Xt.shadow_frag}};ga.physical={uniforms:ns([ga.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Yt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Yt},clearcoatNormalScale:{value:new Ue(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Yt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Yt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Yt},sheen:{value:0},sheenColor:{value:new ht(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Yt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Yt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Yt},transmissionSamplerSize:{value:new Ue},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Yt},attenuationDistance:{value:0},attenuationColor:{value:new ht(0)},specularColor:{value:new ht(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Yt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Yt},anisotropyVector:{value:new Ue},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Yt}}]),vertexShader:Xt.meshphysical_vert,fragmentShader:Xt.meshphysical_frag};const dw={r:0,b:0,g:0};function j1e(n,e,t,i,r,s,o){const a=new ht(0);let l=s===!0?0:1,c,u,h=null,d=0,f=null;function p(v,y){let w=!1,_=y.isScene===!0?y.background:null;switch(_&&_.isTexture&&(_=(y.backgroundBlurriness>0?t:e).get(_)),_===null?x(a,l):_&&_.isColor&&(x(_,1),w=!0),n.xr.getEnvironmentBlendMode()){case"opaque":w=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,o),w=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,o),w=!0;break}(n.autoClear||w)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),_&&(_.isCubeTexture||_.mapping===dg)?(u===void 0&&(u=new oi(new Nl(1,1,1),new Is({name:"BackgroundCubeMaterial",uniforms:Nm(ga.backgroundCube.uniforms),vertexShader:ga.backgroundCube.vertexShader,fragmentShader:ga.backgroundCube.fragmentShader,side:Xr,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(M,C,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=_,u.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,u.material.toneMapped=_.colorSpace!==Ht,(h!==_||d!==_.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,h=_,d=_.version,f=n.toneMapping),u.layers.enableAll(),v.unshift(u,u.geometry,u.material,0,0,null)):_&&_.isTexture&&(c===void 0&&(c=new oi(new tf(2,2),new Is({name:"BackgroundMaterial",uniforms:Nm(ga.background.uniforms),vertexShader:ga.background.vertexShader,fragmentShader:ga.background.fragmentShader,side:Wo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=_,c.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,c.material.toneMapped=_.colorSpace!==Ht,_.matrixAutoUpdate===!0&&_.updateMatrix(),c.material.uniforms.uvTransform.value.copy(_.matrix),(h!==_||d!==_.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,h=_,d=_.version,f=n.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null))}function x(v,y){v.getRGB(dw,sX(n)),i.buffers.color.setClear(dw.r,dw.g,dw.b,y,o)}return{getClearColor:function(){return a},setClearColor:function(v,y=1){a.set(v),l=y,x(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,x(a,l)},render:p}}function $1e(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=v(null);let c=l,u=!1;function h(z,$,H,Z,O){let W=!1;if(o){const D=x(Z,H,$);c!==D&&(c=D,f(c.object)),W=y(z,Z,H,O),W&&w(z,Z,H,O)}else{const D=$.wireframe===!0;(c.geometry!==Z.id||c.program!==H.id||c.wireframe!==D)&&(c.geometry=Z.id,c.program=H.id,c.wireframe=D,W=!0)}O!==null&&t.update(O,n.ELEMENT_ARRAY_BUFFER),(W||u)&&(u=!1,P(z,$,H,Z),O!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(O).buffer))}function d(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function f(z){return i.isWebGL2?n.bindVertexArray(z):s.bindVertexArrayOES(z)}function p(z){return i.isWebGL2?n.deleteVertexArray(z):s.deleteVertexArrayOES(z)}function x(z,$,H){const Z=H.wireframe===!0;let O=a[z.id];O===void 0&&(O={},a[z.id]=O);let W=O[$.id];W===void 0&&(W={},O[$.id]=W);let D=W[Z];return D===void 0&&(D=v(d()),W[Z]=D),D}function v(z){const $=[],H=[],Z=[];for(let O=0;O<r;O++)$[O]=0,H[O]=0,Z[O]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:H,attributeDivisors:Z,object:z,attributes:{},index:null}}function y(z,$,H,Z){const O=c.attributes,W=$.attributes;let D=0;const Y=H.getAttributes();for(const Q in Y)if(Y[Q].location>=0){const ce=O[Q];let oe=W[Q];if(oe===void 0&&(Q==="instanceMatrix"&&z.instanceMatrix&&(oe=z.instanceMatrix),Q==="instanceColor"&&z.instanceColor&&(oe=z.instanceColor)),ce===void 0||ce.attribute!==oe||oe&&ce.data!==oe.data)return!0;D++}return c.attributesNum!==D||c.index!==Z}function w(z,$,H,Z){const O={},W=$.attributes;let D=0;const Y=H.getAttributes();for(const Q in Y)if(Y[Q].location>=0){let ce=W[Q];ce===void 0&&(Q==="instanceMatrix"&&z.instanceMatrix&&(ce=z.instanceMatrix),Q==="instanceColor"&&z.instanceColor&&(ce=z.instanceColor));const oe={};oe.attribute=ce,ce&&ce.data&&(oe.data=ce.data),O[Q]=oe,D++}c.attributes=O,c.attributesNum=D,c.index=Z}function _(){const z=c.newAttributes;for(let $=0,H=z.length;$<H;$++)z[$]=0}function b(z){E(z,0)}function E(z,$){const H=c.newAttributes,Z=c.enabledAttributes,O=c.attributeDivisors;H[z]=1,Z[z]===0&&(n.enableVertexAttribArray(z),Z[z]=1),O[z]!==$&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](z,$),O[z]=$)}function M(){const z=c.newAttributes,$=c.enabledAttributes;for(let H=0,Z=$.length;H<Z;H++)$[H]!==z[H]&&(n.disableVertexAttribArray(H),$[H]=0)}function C(z,$,H,Z,O,W,D){D===!0?n.vertexAttribIPointer(z,$,H,O,W):n.vertexAttribPointer(z,$,H,Z,O,W)}function P(z,$,H,Z){if(i.isWebGL2===!1&&(z.isInstancedMesh||Z.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const O=Z.attributes,W=H.getAttributes(),D=$.defaultAttributeValues;for(const Y in W){const Q=W[Y];if(Q.location>=0){let re=O[Y];if(re===void 0&&(Y==="instanceMatrix"&&z.instanceMatrix&&(re=z.instanceMatrix),Y==="instanceColor"&&z.instanceColor&&(re=z.instanceColor)),re!==void 0){const ce=re.normalized,oe=re.itemSize,he=t.get(re);if(he===void 0)continue;const Re=he.buffer,Oe=he.type,Ve=he.bytesPerElement,Je=i.isWebGL2===!0&&(Oe===n.INT||Oe===n.UNSIGNED_INT||re.gpuType===kE);if(re.isInterleavedBufferAttribute){const Fe=re.data,J=Fe.stride,ge=re.offset;if(Fe.isInstancedInterleavedBuffer){for(let de=0;de<Q.locationSize;de++)E(Q.location+de,Fe.meshPerAttribute);z.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=Fe.meshPerAttribute*Fe.count)}else for(let de=0;de<Q.locationSize;de++)b(Q.location+de);n.bindBuffer(n.ARRAY_BUFFER,Re);for(let de=0;de<Q.locationSize;de++)C(Q.location+de,oe/Q.locationSize,Oe,ce,J*Ve,(ge+oe/Q.locationSize*de)*Ve,Je)}else{if(re.isInstancedBufferAttribute){for(let Fe=0;Fe<Q.locationSize;Fe++)E(Q.location+Fe,re.meshPerAttribute);z.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let Fe=0;Fe<Q.locationSize;Fe++)b(Q.location+Fe);n.bindBuffer(n.ARRAY_BUFFER,Re);for(let Fe=0;Fe<Q.locationSize;Fe++)C(Q.location+Fe,oe/Q.locationSize,Oe,ce,oe*Ve,oe/Q.locationSize*Fe*Ve,Je)}}else if(D!==void 0){const ce=D[Y];if(ce!==void 0)switch(ce.length){case 2:n.vertexAttrib2fv(Q.location,ce);break;case 3:n.vertexAttrib3fv(Q.location,ce);break;case 4:n.vertexAttrib4fv(Q.location,ce);break;default:n.vertexAttrib1fv(Q.location,ce)}}}}M()}function T(){j();for(const z in a){const $=a[z];for(const H in $){const Z=$[H];for(const O in Z)p(Z[O].object),delete Z[O];delete $[H]}delete a[z]}}function I(z){if(a[z.id]===void 0)return;const $=a[z.id];for(const H in $){const Z=$[H];for(const O in Z)p(Z[O].object),delete Z[O];delete $[H]}delete a[z.id]}function U(z){for(const $ in a){const H=a[$];if(H[z.id]===void 0)continue;const Z=H[z.id];for(const O in Z)p(Z[O].object),delete Z[O];delete H[z.id]}}function j(){B(),u=!0,c!==l&&(c=l,f(c.object))}function B(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:j,resetDefaultState:B,dispose:T,releaseStatesOfGeometry:I,releaseStatesOfProgram:U,initAttributes:_,enableAttribute:b,disableUnusedAttributes:M}}function X1e(n,e,t,i){const r=i.isWebGL2;let s;function o(c){s=c}function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,h){if(h===0)return;let d,f;if(r)d=n,f="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null)return;d[f](s,c,u,h),t.update(u,s,h)}this.setMode=o,this.render=a,this.renderInstances=l}function Y1e(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(C){if(C==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";C="mediump"}return C==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),d=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),v=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),y=n.getParameter(n.MAX_VARYING_VECTORS),w=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),_=d>0,b=o||e.has("OES_texture_float"),E=_&&b,M=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:x,maxVertexUniforms:v,maxVaryings:y,maxFragmentUniforms:w,vertexTextures:_,floatFragmentTextures:b,floatVertexTextures:E,maxSamples:M}}function q1e(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new xs,a=new Yt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const f=h.length!==0||d||i!==0||r;return r=d,i=h.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,d){t=u(h,d,0)},this.setState=function(h,d,f){const p=h.clippingPlanes,x=h.clipIntersection,v=h.clipShadows,y=n.get(h);if(!r||p===null||p.length===0||s&&!v)s?u(null):c();else{const w=s?0:i,_=w*4;let b=y.clippingState||null;l.value=b,b=u(p,d,_,f);for(let E=0;E!==_;++E)b[E]=t[E];y.clippingState=b,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=w}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(h,d,f,p){const x=h!==null?h.length:0;let v=null;if(x!==0){if(v=l.value,p!==!0||v===null){const y=f+x*4,w=d.matrixWorldInverse;a.getNormalMatrix(w),(v===null||v.length<y)&&(v=new Float32Array(y));for(let _=0,b=f;_!==x;++_,b+=4)o.copy(h[_]).applyMatrix4(w,a),o.normal.toArray(v,b),v[b+3]=o.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,v}}function Z1e(n){let e=new WeakMap;function t(o,a){return a===Rm?o.mapping=Mc:a===Kv&&(o.mapping=Gu),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Rm||a===Kv)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new t3(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Ro extends W0{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Vp=4,iz=[.125,.215,.35,.446,.526,.582],Gp=20,SC=new Ro,rz=new ht;let EC=null;const Kh=(1+Math.sqrt(5))/2,Yf=1/Kh,sz=[new V(1,1,1),new V(-1,1,1),new V(1,1,-1),new V(-1,1,-1),new V(0,Kh,Yf),new V(0,Kh,-Yf),new V(Yf,0,Kh),new V(-Yf,0,Kh),new V(Kh,Yf,0),new V(-Kh,Yf,0)];class SI{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){EC=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=lz(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=az(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(EC),e.scissorTest=!1,fw(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Mc||e.mapping===Gu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),EC=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:En,minFilter:En,generateMipmaps:!1,type:hr,format:$i,colorSpace:Rs,depthBuffer:!1},r=oz(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=oz(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=K1e(s)),this._blurMaterial=Q1e(s,e,t)}return r}_compileMaterial(e){const t=new oi(this._lodPlanes[0],e);this._renderer.compile(t,SC)}_sceneToCubeUV(e,t,i,r){const a=new ri(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,d=u.toneMapping;u.getClearColor(rz),u.toneMapping=Ma,u.autoClear=!1;const f=new Nc({name:"PMREM.Background",side:Xr,depthWrite:!1,depthTest:!1}),p=new oi(new Nl,f);let x=!1;const v=e.background;v?v.isColor&&(f.color.copy(v),e.background=null,x=!0):(f.color.copy(rz),x=!0);for(let y=0;y<6;y++){const w=y%3;w===0?(a.up.set(0,l[y],0),a.lookAt(c[y],0,0)):w===1?(a.up.set(0,0,l[y]),a.lookAt(0,c[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,c[y]));const _=this._cubeSize;fw(r,w*_,y>2?_:0,_,_),u.setRenderTarget(r),x&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=d,u.autoClear=h,e.background=v}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Mc||e.mapping===Gu;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=lz()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=az());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new oi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;fw(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,SC)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=sz[(r-1)%sz.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial,u=3,h=new oi(this._lodPlanes[r],c),d=c.uniforms,f=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*Gp-1),x=s/p,v=isFinite(s)?1+Math.floor(u*x):Gp;v>Gp;const y=[];let w=0;for(let C=0;C<Gp;++C){const P=C/x,T=Math.exp(-P*P/2);y.push(T),C===0?w+=T:C<v&&(w+=2*T)}for(let C=0;C<y.length;C++)y[C]=y[C]/w;d.envMap.value=e.texture,d.samples.value=v,d.weights.value=y,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:_}=this;d.dTheta.value=p,d.mipInt.value=_-i;const b=this._sizeLods[r],E=3*b*(r>_-Vp?r-_+Vp:0),M=4*(this._cubeSize-b);fw(t,E,M,3*b,2*b),l.setRenderTarget(t),l.render(h,SC)}}function K1e(n){const e=[],t=[],i=[];let r=n;const s=n-Vp+1+iz.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-Vp?l=iz[o-n+Vp-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,h=1+c,d=[u,u,h,u,h,h,u,u,h,h,u,h],f=6,p=6,x=3,v=2,y=1,w=new Float32Array(x*p*f),_=new Float32Array(v*p*f),b=new Float32Array(y*p*f);for(let M=0;M<f;M++){const C=M%3*2/3-1,P=M>2?0:-1,T=[C,P,0,C+2/3,P,0,C+2/3,P+1,0,C,P,0,C+2/3,P+1,0,C,P+1,0];w.set(T,x*p*M),_.set(d,v*p*M);const I=[M,M,M,M,M,M];b.set(I,y*p*M)}const E=new $t;E.setAttribute("position",new Mn(w,x)),E.setAttribute("uv",new Mn(_,v)),E.setAttribute("faceIndex",new Mn(b,y)),e.push(E),r>Vp&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function oz(n,e,t){const i=new no(n,e,t);return i.texture.mapping=dg,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function fw(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Q1e(n,e,t){const i=new Float32Array(Gp),r=new V(0,1,0);return new Is({name:"SphericalGaussianBlur",defines:{n:Gp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:n3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:bl,depthTest:!1,depthWrite:!1})}function az(){return new Is({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:n3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:bl,depthTest:!1,depthWrite:!1})}function lz(){return new Is({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:n3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:bl,depthTest:!1,depthWrite:!1})}function n3(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function J1e(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Rm||l===Kv,u=l===Mc||l===Gu;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return t===null&&(t=new SI(n)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(c&&h&&h.height>0||u&&h&&r(h)){t===null&&(t=new SI(n));const d=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function ebe(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r}}}function tbe(n,e,t,i){const r={},s=new WeakMap;function o(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);for(const p in d.morphAttributes){const x=d.morphAttributes[p];for(let v=0,y=x.length;v<y;v++)e.remove(x[v])}d.removeEventListener("dispose",o),delete r[d.id];const f=s.get(d);f&&(e.remove(f),s.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(h,d){return r[d.id]===!0||(d.addEventListener("dispose",o),r[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const p in d)e.update(d[p],n.ARRAY_BUFFER);const f=h.morphAttributes;for(const p in f){const x=f[p];for(let v=0,y=x.length;v<y;v++)e.update(x[v],n.ARRAY_BUFFER)}}function c(h){const d=[],f=h.index,p=h.attributes.position;let x=0;if(f!==null){const w=f.array;x=f.version;for(let _=0,b=w.length;_<b;_+=3){const E=w[_+0],M=w[_+1],C=w[_+2];d.push(E,M,M,C,C,E)}}else{const w=p.array;x=p.version;for(let _=0,b=w.length/3-1;_<b;_+=3){const E=_+0,M=_+1,C=_+2;d.push(E,M,M,C,C,E)}}const v=new(iX(d)?e3:Jk)(d,1);v.version=x;const y=s.get(h);y&&e.remove(y),s.set(h,v)}function u(h){const d=s.get(h);if(d){const f=h.index;f!==null&&d.version<f.version&&c(h)}else c(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:u}}function nbe(n,e,t,i){const r=i.isWebGL2;let s;function o(d){s=d}let a,l;function c(d){a=d.type,l=d.bytesPerElement}function u(d,f){n.drawElements(s,f,a,d*l),t.update(f,s,1)}function h(d,f,p){if(p===0)return;let x,v;if(r)x=n,v="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",x===null)return;x[v](s,f,a,d*l,p),t.update(f,s,p)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=h}function ibe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function rbe(n,e){return n[0]-e[0]}function sbe(n,e){return Math.abs(e[1])-Math.abs(n[1])}function obe(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new jt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,h){const d=c.morphTargetInfluences;if(e.isWebGL2===!0){const f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=f!==void 0?f.length:0;let x=s.get(u);if(x===void 0||x.count!==p){let z=function(){j.dispose(),s.delete(u),u.removeEventListener("dispose",z)};x!==void 0&&x.texture.dispose();const w=u.morphAttributes.position!==void 0,_=u.morphAttributes.normal!==void 0,b=u.morphAttributes.color!==void 0,E=u.morphAttributes.position||[],M=u.morphAttributes.normal||[],C=u.morphAttributes.color||[];let P=0;w===!0&&(P=1),_===!0&&(P=2),b===!0&&(P=3);let T=u.attributes.position.count*P,I=1;T>e.maxTextureSize&&(I=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const U=new Float32Array(T*I*4*p),j=new DE(U,T,I,p);j.type=ur,j.needsUpdate=!0;const B=P*4;for(let $=0;$<p;$++){const H=E[$],Z=M[$],O=C[$],W=T*I*4*$;for(let D=0;D<H.count;D++){const Y=D*B;w===!0&&(o.fromBufferAttribute(H,D),U[W+Y+0]=o.x,U[W+Y+1]=o.y,U[W+Y+2]=o.z,U[W+Y+3]=0),_===!0&&(o.fromBufferAttribute(Z,D),U[W+Y+4]=o.x,U[W+Y+5]=o.y,U[W+Y+6]=o.z,U[W+Y+7]=0),b===!0&&(o.fromBufferAttribute(O,D),U[W+Y+8]=o.x,U[W+Y+9]=o.y,U[W+Y+10]=o.z,U[W+Y+11]=O.itemSize===4?o.w:1)}}x={count:p,texture:j,size:new Ue(T,I)},s.set(u,x),u.addEventListener("dispose",z)}let v=0;for(let w=0;w<d.length;w++)v+=d[w];const y=u.morphTargetsRelative?1:1-v;h.getUniforms().setValue(n,"morphTargetBaseInfluence",y),h.getUniforms().setValue(n,"morphTargetInfluences",d),h.getUniforms().setValue(n,"morphTargetsTexture",x.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",x.size)}else{const f=d===void 0?0:d.length;let p=i[u.id];if(p===void 0||p.length!==f){p=[];for(let _=0;_<f;_++)p[_]=[_,0];i[u.id]=p}for(let _=0;_<f;_++){const b=p[_];b[0]=_,b[1]=d[_]}p.sort(sbe);for(let _=0;_<8;_++)_<f&&p[_][1]?(a[_][0]=p[_][0],a[_][1]=p[_][1]):(a[_][0]=Number.MAX_SAFE_INTEGER,a[_][1]=0);a.sort(rbe);const x=u.morphAttributes.position,v=u.morphAttributes.normal;let y=0;for(let _=0;_<8;_++){const b=a[_],E=b[0],M=b[1];E!==Number.MAX_SAFE_INTEGER&&M?(x&&u.getAttribute("morphTarget"+_)!==x[E]&&u.setAttribute("morphTarget"+_,x[E]),v&&u.getAttribute("morphNormal"+_)!==v[E]&&u.setAttribute("morphNormal"+_,v[E]),r[_]=M,y+=M):(x&&u.hasAttribute("morphTarget"+_)===!0&&u.deleteAttribute("morphTarget"+_),v&&u.hasAttribute("morphNormal"+_)===!0&&u.deleteAttribute("morphNormal"+_),r[_]=0)}const w=u.morphTargetsRelative?1:1-y;h.getUniforms().setValue(n,"morphTargetBaseInfluence",w),h.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function abe(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,h=e.get(l,u);if(r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const d=l.skeleton;r.get(d)!==c&&(d.update(),r.set(d,c))}return h}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const lX=new Rn,cX=new DE,uX=new Qk,hX=new V0,cz=[],uz=[],hz=new Float32Array(16),dz=new Float32Array(9),fz=new Float32Array(4);function fg(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=cz[r];if(s===void 0&&(s=new Float32Array(r),cz[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Qi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ji(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function UE(n,e){let t=uz[e];t===void 0&&(t=new Int32Array(e),uz[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function lbe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function cbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qi(t,e))return;n.uniform2fv(this.addr,e),Ji(t,e)}}function ube(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Qi(t,e))return;n.uniform3fv(this.addr,e),Ji(t,e)}}function hbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qi(t,e))return;n.uniform4fv(this.addr,e),Ji(t,e)}}function dbe(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Qi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ji(t,e)}else{if(Qi(t,i))return;fz.set(i),n.uniformMatrix2fv(this.addr,!1,fz),Ji(t,i)}}function fbe(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Qi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ji(t,e)}else{if(Qi(t,i))return;dz.set(i),n.uniformMatrix3fv(this.addr,!1,dz),Ji(t,i)}}function pbe(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Qi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ji(t,e)}else{if(Qi(t,i))return;hz.set(i),n.uniformMatrix4fv(this.addr,!1,hz),Ji(t,i)}}function mbe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function gbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qi(t,e))return;n.uniform2iv(this.addr,e),Ji(t,e)}}function ybe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Qi(t,e))return;n.uniform3iv(this.addr,e),Ji(t,e)}}function vbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qi(t,e))return;n.uniform4iv(this.addr,e),Ji(t,e)}}function xbe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function _be(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qi(t,e))return;n.uniform2uiv(this.addr,e),Ji(t,e)}}function wbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Qi(t,e))return;n.uniform3uiv(this.addr,e),Ji(t,e)}}function bbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qi(t,e))return;n.uniform4uiv(this.addr,e),Ji(t,e)}}function Sbe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||lX,r)}function Ebe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||uX,r)}function Mbe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||hX,r)}function Tbe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||cX,r)}function Abe(n){switch(n){case 5126:return lbe;case 35664:return cbe;case 35665:return ube;case 35666:return hbe;case 35674:return dbe;case 35675:return fbe;case 35676:return pbe;case 5124:case 35670:return mbe;case 35667:case 35671:return gbe;case 35668:case 35672:return ybe;case 35669:case 35673:return vbe;case 5125:return xbe;case 36294:return _be;case 36295:return wbe;case 36296:return bbe;case 35678:case 36198:case 36298:case 36306:case 35682:return Sbe;case 35679:case 36299:case 36307:return Ebe;case 35680:case 36300:case 36308:case 36293:return Mbe;case 36289:case 36303:case 36311:case 36292:return Tbe}}function Cbe(n,e){n.uniform1fv(this.addr,e)}function Pbe(n,e){const t=fg(e,this.size,2);n.uniform2fv(this.addr,t)}function Rbe(n,e){const t=fg(e,this.size,3);n.uniform3fv(this.addr,t)}function Ibe(n,e){const t=fg(e,this.size,4);n.uniform4fv(this.addr,t)}function Lbe(n,e){const t=fg(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Nbe(n,e){const t=fg(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function kbe(n,e){const t=fg(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Obe(n,e){n.uniform1iv(this.addr,e)}function Dbe(n,e){n.uniform2iv(this.addr,e)}function Fbe(n,e){n.uniform3iv(this.addr,e)}function Ube(n,e){n.uniform4iv(this.addr,e)}function Bbe(n,e){n.uniform1uiv(this.addr,e)}function zbe(n,e){n.uniform2uiv(this.addr,e)}function Hbe(n,e){n.uniform3uiv(this.addr,e)}function Wbe(n,e){n.uniform4uiv(this.addr,e)}function Vbe(n,e,t){const i=this.cache,r=e.length,s=UE(t,r);Qi(i,s)||(n.uniform1iv(this.addr,s),Ji(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||lX,s[o])}function Gbe(n,e,t){const i=this.cache,r=e.length,s=UE(t,r);Qi(i,s)||(n.uniform1iv(this.addr,s),Ji(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||uX,s[o])}function jbe(n,e,t){const i=this.cache,r=e.length,s=UE(t,r);Qi(i,s)||(n.uniform1iv(this.addr,s),Ji(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||hX,s[o])}function $be(n,e,t){const i=this.cache,r=e.length,s=UE(t,r);Qi(i,s)||(n.uniform1iv(this.addr,s),Ji(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||cX,s[o])}function Xbe(n){switch(n){case 5126:return Cbe;case 35664:return Pbe;case 35665:return Rbe;case 35666:return Ibe;case 35674:return Lbe;case 35675:return Nbe;case 35676:return kbe;case 5124:case 35670:return Obe;case 35667:case 35671:return Dbe;case 35668:case 35672:return Fbe;case 35669:case 35673:return Ube;case 5125:return Bbe;case 36294:return zbe;case 36295:return Hbe;case 36296:return Wbe;case 35678:case 36198:case 36298:case 36306:case 35682:return Vbe;case 35679:case 36299:case 36307:return Gbe;case 35680:case 36300:case 36308:case 36293:return jbe;case 36289:case 36303:case 36311:case 36292:return $be}}class Ybe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=Abe(t.type)}}class qbe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=Xbe(t.type)}}class Zbe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const MC=/(\w+)(\])?(\[|\.)?/g;function pz(n,e){n.seq.push(e),n.map[e.id]=e}function Kbe(n,e,t){const i=n.name,r=i.length;for(MC.lastIndex=0;;){const s=MC.exec(i),o=MC.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){pz(t,c===void 0?new Ybe(a,n,e):new qbe(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new Zbe(a),pz(t,h)),t=h}}}class eb{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);Kbe(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function mz(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let Qbe=0;function Jbe(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function eSe(n){switch(n){case Rs:return["Linear","( value )"];case Ht:return["sRGB","( value )"];default:return["Linear","( value )"]}}function gz(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Jbe(n.getShaderSource(e),o)}else return r}function tSe(n,e){const t=eSe(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function nSe(n,e){let t;switch(e){case I7:t="Linear";break;case L7:t="Reinhard";break;case N7:t="OptimizedCineon";break;case Dk:t="ACESFilmic";break;case k7:t="Custom";break;default:t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function iSe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Vy).join(`
`)}function rSe(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function sSe(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Vy(n){return n!==""}function yz(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function vz(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const oSe=/^[ \t]*#include +<([\w\d./]+)>/gm;function EI(n){return n.replace(oSe,lSe)}const aSe=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function lSe(n,e){let t=Xt[e];if(t===void 0){const i=aSe.get(e);if(i!==void 0)t=Xt[i];else throw new Error("Can not resolve #include <"+e+">")}return EI(t)}const cSe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function xz(n){return n.replace(cSe,uSe)}function uSe(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function _z(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function hSe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===LE?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===cv?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ha&&(e="SHADOWMAP_TYPE_VSM"),e}function dSe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Mc:case Gu:e="ENVMAP_TYPE_CUBE";break;case dg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function fSe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Gu:e="ENVMAP_MODE_REFRACTION";break}return e}function pSe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case z0:e="ENVMAP_BLENDING_MULTIPLY";break;case P7:e="ENVMAP_BLENDING_MIX";break;case R7:e="ENVMAP_BLENDING_ADD";break}return e}function mSe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function gSe(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=hSe(t),c=dSe(t),u=fSe(t),h=pSe(t),d=mSe(t),f=t.isWebGL2?"":iSe(t),p=rSe(s),x=r.createProgram();let v,y,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Vy).join(`
`),v.length>0&&(v+=`
`),y=[f,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Vy).join(`
`),y.length>0&&(y+=`
`)):(v=[_z(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Vy).join(`
`),y=[f,_z(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ma?"#define TONE_MAPPING":"",t.toneMapping!==Ma?Xt.tonemapping_pars_fragment:"",t.toneMapping!==Ma?nSe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Xt.colorspace_pars_fragment,tSe("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Vy).join(`
`)),o=EI(o),o=yz(o,t),o=vz(o,t),a=EI(a),a=yz(a,t),a=vz(a,t),o=xz(o),a=xz(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,y=["#define varying in",t.glslVersion===wI?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===wI?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const _=w+v+o,b=w+y+a,E=mz(r,r.VERTEX_SHADER,_),M=mz(r,r.FRAGMENT_SHADER,b);if(r.attachShader(x,E),r.attachShader(x,M),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x),n.debug.checkShaderErrors){const T=r.getProgramInfoLog(x).trim(),I=r.getShaderInfoLog(E).trim(),U=r.getShaderInfoLog(M).trim();let j=!0,B=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(j=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,x,E,M);else{const z=gz(r,E,"vertex"),$=gz(r,M,"fragment")}else T!==""||(I===""||U==="")&&(B=!1);B&&(this.diagnostics={runnable:j,programLog:T,vertexShader:{log:I,prefix:v},fragmentShader:{log:U,prefix:y}})}r.deleteShader(E),r.deleteShader(M);let C;this.getUniforms=function(){return C===void 0&&(C=new eb(r,x)),C};let P;return this.getAttributes=function(){return P===void 0&&(P=sSe(r,x)),P},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Qbe++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=E,this.fragmentShader=M,this}let ySe=0;class vSe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new xSe(e),t.set(e,i)),i}}class xSe{constructor(e){this.id=ySe++,this.code=e,this.usedTimes=0}}function _Se(n,e,t,i,r,s,o){const a=new Cd,l=new vSe,c=[],u=r.isWebGL2,h=r.logarithmicDepthBuffer,d=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(T){return T===0?"uv":`uv${T}`}function v(T,I,U,j,B){const z=j.fog,$=B.geometry,H=T.isMeshStandardMaterial?j.environment:null,Z=(T.isMeshStandardMaterial?t:e).get(T.envMap||H),O=Z&&Z.mapping===dg?Z.image.height:null,W=p[T.type];T.precision!==null&&(f=r.getMaxPrecision(T.precision),T.precision);const D=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,Y=D!==void 0?D.length:0;let Q=0;$.morphAttributes.position!==void 0&&(Q=1),$.morphAttributes.normal!==void 0&&(Q=2),$.morphAttributes.color!==void 0&&(Q=3);let re,ce,oe,he;if(W){const Ei=ga[W];re=Ei.vertexShader,ce=Ei.fragmentShader}else re=T.vertexShader,ce=T.fragmentShader,l.update(T),oe=l.getVertexShaderID(T),he=l.getFragmentShaderID(T);const Re=n.getRenderTarget(),Oe=B.isInstancedMesh===!0,Ve=!!T.map,Je=!!T.matcap,Fe=!!Z,J=!!T.aoMap,ge=!!T.lightMap,de=!!T.bumpMap,Ae=!!T.normalMap,Ie=!!T.displacementMap,me=!!T.emissiveMap,ye=!!T.metalnessMap,ke=!!T.roughnessMap,Xe=T.anisotropy>0,Le=T.clearcoat>0,Ye=T.iridescence>0,q=T.sheen>0,X=T.transmission>0,pe=Xe&&!!T.anisotropyMap,_e=Le&&!!T.clearcoatMap,xe=Le&&!!T.clearcoatNormalMap,Me=Le&&!!T.clearcoatRoughnessMap,je=Ye&&!!T.iridescenceMap,qe=Ye&&!!T.iridescenceThicknessMap,Ne=q&&!!T.sheenColorMap,Qe=q&&!!T.sheenRoughnessMap,$e=!!T.specularMap,it=!!T.specularColorMap,se=!!T.specularIntensityMap,Se=X&&!!T.transmissionMap,Ze=X&&!!T.thicknessMap,lt=!!T.gradientMap,le=!!T.alphaMap,be=T.alphaTest>0,Te=!!T.alphaHash,tt=!!T.extensions,at=!!$.attributes.uv1,kt=!!$.attributes.uv2,en=!!$.attributes.uv3;return{isWebGL2:u,shaderID:W,shaderType:T.type,shaderName:T.name,vertexShader:re,fragmentShader:ce,defines:T.defines,customVertexShaderID:oe,customFragmentShaderID:he,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:f,instancing:Oe,instancingColor:Oe&&B.instanceColor!==null,supportsVertexTextures:d,outputColorSpace:Re===null?n.outputColorSpace:Re.isXRRenderTarget===!0?Re.texture.colorSpace:Rs,map:Ve,matcap:Je,envMap:Fe,envMapMode:Fe&&Z.mapping,envMapCubeUVHeight:O,aoMap:J,lightMap:ge,bumpMap:de,normalMap:Ae,displacementMap:d&&Ie,emissiveMap:me,normalMapObjectSpace:Ae&&T.normalMapType===$7,normalMapTangentSpace:Ae&&T.normalMapType===sh,metalnessMap:ye,roughnessMap:ke,anisotropy:Xe,anisotropyMap:pe,clearcoat:Le,clearcoatMap:_e,clearcoatNormalMap:xe,clearcoatRoughnessMap:Me,iridescence:Ye,iridescenceMap:je,iridescenceThicknessMap:qe,sheen:q,sheenColorMap:Ne,sheenRoughnessMap:Qe,specularMap:$e,specularColorMap:it,specularIntensityMap:se,transmission:X,transmissionMap:Se,thicknessMap:Ze,gradientMap:lt,opaque:T.transparent===!1&&T.blending===Td,alphaMap:le,alphaTest:be,alphaHash:Te,combine:T.combine,mapUv:Ve&&x(T.map.channel),aoMapUv:J&&x(T.aoMap.channel),lightMapUv:ge&&x(T.lightMap.channel),bumpMapUv:de&&x(T.bumpMap.channel),normalMapUv:Ae&&x(T.normalMap.channel),displacementMapUv:Ie&&x(T.displacementMap.channel),emissiveMapUv:me&&x(T.emissiveMap.channel),metalnessMapUv:ye&&x(T.metalnessMap.channel),roughnessMapUv:ke&&x(T.roughnessMap.channel),anisotropyMapUv:pe&&x(T.anisotropyMap.channel),clearcoatMapUv:_e&&x(T.clearcoatMap.channel),clearcoatNormalMapUv:xe&&x(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Me&&x(T.clearcoatRoughnessMap.channel),iridescenceMapUv:je&&x(T.iridescenceMap.channel),iridescenceThicknessMapUv:qe&&x(T.iridescenceThicknessMap.channel),sheenColorMapUv:Ne&&x(T.sheenColorMap.channel),sheenRoughnessMapUv:Qe&&x(T.sheenRoughnessMap.channel),specularMapUv:$e&&x(T.specularMap.channel),specularColorMapUv:it&&x(T.specularColorMap.channel),specularIntensityMapUv:se&&x(T.specularIntensityMap.channel),transmissionMapUv:Se&&x(T.transmissionMap.channel),thicknessMapUv:Ze&&x(T.thicknessMap.channel),alphaMapUv:le&&x(T.alphaMap.channel),vertexTangents:!!$.attributes.tangent&&(Ae||Xe),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!$.attributes.color&&$.attributes.color.itemSize===4,vertexUv1s:at,vertexUv2s:kt,vertexUv3s:en,pointsUvs:B.isPoints===!0&&!!$.attributes.uv&&(Ve||le),fog:!!z,useFog:T.fog===!0,fogExp2:z&&z.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:B.isSkinnedMesh===!0,morphTargets:$.morphAttributes.position!==void 0,morphNormals:$.morphAttributes.normal!==void 0,morphColors:$.morphAttributes.color!==void 0,morphTargetsCount:Y,morphTextureStride:Q,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&U.length>0,shadowMapType:n.shadowMap.type,toneMapping:T.toneMapped?n.toneMapping:Ma,useLegacyLights:n.useLegacyLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===cr,flipSided:T.side===Xr,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:tt&&T.extensions.derivatives===!0,extensionFragDepth:tt&&T.extensions.fragDepth===!0,extensionDrawBuffers:tt&&T.extensions.drawBuffers===!0,extensionShaderTextureLOD:tt&&T.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function y(T){const I=[];if(T.shaderID?I.push(T.shaderID):(I.push(T.customVertexShaderID),I.push(T.customFragmentShaderID)),T.defines!==void 0)for(const U in T.defines)I.push(U),I.push(T.defines[U]);return T.isRawShaderMaterial===!1&&(w(I,T),_(I,T),I.push(n.outputColorSpace)),I.push(T.customProgramCacheKey),I.join()}function w(T,I){T.push(I.precision),T.push(I.outputColorSpace),T.push(I.envMapMode),T.push(I.envMapCubeUVHeight),T.push(I.mapUv),T.push(I.alphaMapUv),T.push(I.lightMapUv),T.push(I.aoMapUv),T.push(I.bumpMapUv),T.push(I.normalMapUv),T.push(I.displacementMapUv),T.push(I.emissiveMapUv),T.push(I.metalnessMapUv),T.push(I.roughnessMapUv),T.push(I.anisotropyMapUv),T.push(I.clearcoatMapUv),T.push(I.clearcoatNormalMapUv),T.push(I.clearcoatRoughnessMapUv),T.push(I.iridescenceMapUv),T.push(I.iridescenceThicknessMapUv),T.push(I.sheenColorMapUv),T.push(I.sheenRoughnessMapUv),T.push(I.specularMapUv),T.push(I.specularColorMapUv),T.push(I.specularIntensityMapUv),T.push(I.transmissionMapUv),T.push(I.thicknessMapUv),T.push(I.combine),T.push(I.fogExp2),T.push(I.sizeAttenuation),T.push(I.morphTargetsCount),T.push(I.morphAttributeCount),T.push(I.numDirLights),T.push(I.numPointLights),T.push(I.numSpotLights),T.push(I.numSpotLightMaps),T.push(I.numHemiLights),T.push(I.numRectAreaLights),T.push(I.numDirLightShadows),T.push(I.numPointLightShadows),T.push(I.numSpotLightShadows),T.push(I.numSpotLightShadowsWithMaps),T.push(I.shadowMapType),T.push(I.toneMapping),T.push(I.numClippingPlanes),T.push(I.numClipIntersection),T.push(I.depthPacking)}function _(T,I){a.disableAll(),I.isWebGL2&&a.enable(0),I.supportsVertexTextures&&a.enable(1),I.instancing&&a.enable(2),I.instancingColor&&a.enable(3),I.matcap&&a.enable(4),I.envMap&&a.enable(5),I.normalMapObjectSpace&&a.enable(6),I.normalMapTangentSpace&&a.enable(7),I.clearcoat&&a.enable(8),I.iridescence&&a.enable(9),I.alphaTest&&a.enable(10),I.vertexColors&&a.enable(11),I.vertexAlphas&&a.enable(12),I.vertexUv1s&&a.enable(13),I.vertexUv2s&&a.enable(14),I.vertexUv3s&&a.enable(15),I.vertexTangents&&a.enable(16),I.anisotropy&&a.enable(17),T.push(a.mask),a.disableAll(),I.fog&&a.enable(0),I.useFog&&a.enable(1),I.flatShading&&a.enable(2),I.logarithmicDepthBuffer&&a.enable(3),I.skinning&&a.enable(4),I.morphTargets&&a.enable(5),I.morphNormals&&a.enable(6),I.morphColors&&a.enable(7),I.premultipliedAlpha&&a.enable(8),I.shadowMapEnabled&&a.enable(9),I.useLegacyLights&&a.enable(10),I.doubleSided&&a.enable(11),I.flipSided&&a.enable(12),I.useDepthPacking&&a.enable(13),I.dithering&&a.enable(14),I.transmission&&a.enable(15),I.sheen&&a.enable(16),I.opaque&&a.enable(17),I.pointsUvs&&a.enable(18),T.push(a.mask)}function b(T){const I=p[T.type];let U;if(I){const j=ga[I];U=xS.clone(j.uniforms)}else U=T.uniforms;return U}function E(T,I){let U;for(let j=0,B=c.length;j<B;j++){const z=c[j];if(z.cacheKey===I){U=z,++U.usedTimes;break}}return U===void 0&&(U=new gSe(n,I,T,s),c.push(U)),U}function M(T){if(--T.usedTimes===0){const I=c.indexOf(T);c[I]=c[c.length-1],c.pop(),T.destroy()}}function C(T){l.remove(T)}function P(){l.dispose()}return{getParameters:v,getProgramCacheKey:y,getUniforms:b,acquireProgram:E,releaseProgram:M,releaseShaderCache:C,programs:c,dispose:P}}function wSe(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function bSe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function wz(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function bz(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(h,d,f,p,x,v){let y=n[e];return y===void 0?(y={id:h.id,object:h,geometry:d,material:f,groupOrder:p,renderOrder:h.renderOrder,z:x,group:v},n[e]=y):(y.id=h.id,y.object=h,y.geometry=d,y.material=f,y.groupOrder=p,y.renderOrder=h.renderOrder,y.z=x,y.group=v),e++,y}function a(h,d,f,p,x,v){const y=o(h,d,f,p,x,v);f.transmission>0?i.push(y):f.transparent===!0?r.push(y):t.push(y)}function l(h,d,f,p,x,v){const y=o(h,d,f,p,x,v);f.transmission>0?i.unshift(y):f.transparent===!0?r.unshift(y):t.unshift(y)}function c(h,d){t.length>1&&t.sort(h||bSe),i.length>1&&i.sort(d||wz),r.length>1&&r.sort(d||wz)}function u(){for(let h=e,d=n.length;h<d;h++){const f=n[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function SSe(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new bz,n.set(i,[o])):r>=s.length?(o=new bz,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function ESe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new V,color:new ht};break;case"SpotLight":t={position:new V,direction:new V,color:new ht,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new V,color:new ht,distance:0,decay:0};break;case"HemisphereLight":t={direction:new V,skyColor:new ht,groundColor:new ht};break;case"RectAreaLight":t={color:new ht,position:new V,halfWidth:new V,halfHeight:new V};break}return n[e.id]=t,t}}}function MSe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let TSe=0;function ASe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function CSe(n,e){const t=new ESe,i=MSe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new V);const s=new V,o=new dt,a=new dt;function l(u,h){let d=0,f=0,p=0;for(let U=0;U<9;U++)r.probe[U].set(0,0,0);let x=0,v=0,y=0,w=0,_=0,b=0,E=0,M=0,C=0,P=0;u.sort(ASe);const T=h===!0?Math.PI:1;for(let U=0,j=u.length;U<j;U++){const B=u[U],z=B.color,$=B.intensity,H=B.distance,Z=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)d+=z.r*$*T,f+=z.g*$*T,p+=z.b*$*T;else if(B.isLightProbe)for(let O=0;O<9;O++)r.probe[O].addScaledVector(B.sh.coefficients[O],$);else if(B.isDirectionalLight){const O=t.get(B);if(O.color.copy(B.color).multiplyScalar(B.intensity*T),B.castShadow){const W=B.shadow,D=i.get(B);D.shadowBias=W.bias,D.shadowNormalBias=W.normalBias,D.shadowRadius=W.radius,D.shadowMapSize=W.mapSize,r.directionalShadow[x]=D,r.directionalShadowMap[x]=Z,r.directionalShadowMatrix[x]=B.shadow.matrix,b++}r.directional[x]=O,x++}else if(B.isSpotLight){const O=t.get(B);O.position.setFromMatrixPosition(B.matrixWorld),O.color.copy(z).multiplyScalar($*T),O.distance=H,O.coneCos=Math.cos(B.angle),O.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),O.decay=B.decay,r.spot[y]=O;const W=B.shadow;if(B.map&&(r.spotLightMap[C]=B.map,C++,W.updateMatrices(B),B.castShadow&&P++),r.spotLightMatrix[y]=W.matrix,B.castShadow){const D=i.get(B);D.shadowBias=W.bias,D.shadowNormalBias=W.normalBias,D.shadowRadius=W.radius,D.shadowMapSize=W.mapSize,r.spotShadow[y]=D,r.spotShadowMap[y]=Z,M++}y++}else if(B.isRectAreaLight){const O=t.get(B);O.color.copy(z).multiplyScalar($),O.halfWidth.set(B.width*.5,0,0),O.halfHeight.set(0,B.height*.5,0),r.rectArea[w]=O,w++}else if(B.isPointLight){const O=t.get(B);if(O.color.copy(B.color).multiplyScalar(B.intensity*T),O.distance=B.distance,O.decay=B.decay,B.castShadow){const W=B.shadow,D=i.get(B);D.shadowBias=W.bias,D.shadowNormalBias=W.normalBias,D.shadowRadius=W.radius,D.shadowMapSize=W.mapSize,D.shadowCameraNear=W.camera.near,D.shadowCameraFar=W.camera.far,r.pointShadow[v]=D,r.pointShadowMap[v]=Z,r.pointShadowMatrix[v]=B.shadow.matrix,E++}r.point[v]=O,v++}else if(B.isHemisphereLight){const O=t.get(B);O.skyColor.copy(B.color).multiplyScalar($*T),O.groundColor.copy(B.groundColor).multiplyScalar($*T),r.hemi[_]=O,_++}}w>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=rt.LTC_FLOAT_1,r.rectAreaLTC2=rt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0&&(r.rectAreaLTC1=rt.LTC_HALF_1,r.rectAreaLTC2=rt.LTC_HALF_2)),r.ambient[0]=d,r.ambient[1]=f,r.ambient[2]=p;const I=r.hash;(I.directionalLength!==x||I.pointLength!==v||I.spotLength!==y||I.rectAreaLength!==w||I.hemiLength!==_||I.numDirectionalShadows!==b||I.numPointShadows!==E||I.numSpotShadows!==M||I.numSpotMaps!==C)&&(r.directional.length=x,r.spot.length=y,r.rectArea.length=w,r.point.length=v,r.hemi.length=_,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=M,r.spotShadowMap.length=M,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=M+C-P,r.spotLightMap.length=C,r.numSpotLightShadowsWithMaps=P,I.directionalLength=x,I.pointLength=v,I.spotLength=y,I.rectAreaLength=w,I.hemiLength=_,I.numDirectionalShadows=b,I.numPointShadows=E,I.numSpotShadows=M,I.numSpotMaps=C,r.version=TSe++)}function c(u,h){let d=0,f=0,p=0,x=0,v=0;const y=h.matrixWorldInverse;for(let w=0,_=u.length;w<_;w++){const b=u[w];if(b.isDirectionalLight){const E=r.directional[d];E.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(y),d++}else if(b.isSpotLight){const E=r.spot[p];E.position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(y),E.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(y),p++}else if(b.isRectAreaLight){const E=r.rectArea[x];E.position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(y),a.identity(),o.copy(b.matrixWorld),o.premultiply(y),a.extractRotation(o),E.halfWidth.set(b.width*.5,0,0),E.halfHeight.set(0,b.height*.5,0),E.halfWidth.applyMatrix4(a),E.halfHeight.applyMatrix4(a),x++}else if(b.isPointLight){const E=r.point[f];E.position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(y),f++}else if(b.isHemisphereLight){const E=r.hemi[v];E.direction.setFromMatrixPosition(b.matrixWorld),E.direction.transformDirection(y),v++}}}return{setup:l,setupView:c,state:r}}function Sz(n,e){const t=new CSe(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(h){i.push(h)}function a(h){r.push(h)}function l(h){t.setup(i,h)}function c(h){t.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function PSe(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new Sz(n,e),t.set(s,[l])):o>=a.length?(l=new Sz(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class i3 extends Ki{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=G7,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class r3 extends Ki{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const RSe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,ISe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function LSe(n,e,t){let i=new FE;const r=new Ue,s=new Ue,o=new jt,a=new i3({depthPacking:j7}),l=new r3,c={},u=t.maxTextureSize,h={[Wo]:Xr,[Xr]:Wo,[cr]:cr},d=new Is({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ue},radius:{value:4}},vertexShader:RSe,fragmentShader:ISe}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new $t;p.setAttribute("position",new Mn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new oi(p,d),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=LE;let y=this.type;this.render=function(E,M,C){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||E.length===0)return;const P=n.getRenderTarget(),T=n.getActiveCubeFace(),I=n.getActiveMipmapLevel(),U=n.state;U.setBlending(bl),U.buffers.color.setClear(1,1,1,1),U.buffers.depth.setTest(!0),U.setScissorTest(!1);const j=y!==ha&&this.type===ha,B=y===ha&&this.type!==ha;for(let z=0,$=E.length;z<$;z++){const H=E[z],Z=H.shadow;if(Z===void 0||Z.autoUpdate===!1&&Z.needsUpdate===!1)continue;r.copy(Z.mapSize);const O=Z.getFrameExtents();if(r.multiply(O),s.copy(Z.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/O.x),r.x=s.x*O.x,Z.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/O.y),r.y=s.y*O.y,Z.mapSize.y=s.y)),Z.map===null||j===!0||B===!0){const D=this.type!==ha?{minFilter:Ri,magFilter:Ri}:{};Z.map!==null&&Z.map.dispose(),Z.map=new no(r.x,r.y,D),Z.map.texture.name=H.name+".shadowMap",Z.camera.updateProjectionMatrix()}n.setRenderTarget(Z.map),n.clear();const W=Z.getViewportCount();for(let D=0;D<W;D++){const Y=Z.getViewport(D);o.set(s.x*Y.x,s.y*Y.y,s.x*Y.z,s.y*Y.w),U.viewport(o),Z.updateMatrices(H,D),i=Z.getFrustum(),b(M,C,Z.camera,H,this.type)}Z.isPointLightShadow!==!0&&this.type===ha&&w(Z,C),Z.needsUpdate=!1}y=this.type,v.needsUpdate=!1,n.setRenderTarget(P,T,I)};function w(E,M){const C=e.update(x);d.defines.VSM_SAMPLES!==E.blurSamples&&(d.defines.VSM_SAMPLES=E.blurSamples,f.defines.VSM_SAMPLES=E.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),E.mapPass===null&&(E.mapPass=new no(r.x,r.y)),d.uniforms.shadow_pass.value=E.map.texture,d.uniforms.resolution.value=E.mapSize,d.uniforms.radius.value=E.radius,n.setRenderTarget(E.mapPass),n.clear(),n.renderBufferDirect(M,null,C,d,x,null),f.uniforms.shadow_pass.value=E.mapPass.texture,f.uniforms.resolution.value=E.mapSize,f.uniforms.radius.value=E.radius,n.setRenderTarget(E.map),n.clear(),n.renderBufferDirect(M,null,C,f,x,null)}function _(E,M,C,P){let T=null;const I=C.isPointLight===!0?E.customDistanceMaterial:E.customDepthMaterial;if(I!==void 0)T=I;else if(T=C.isPointLight===!0?l:a,n.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const U=T.uuid,j=M.uuid;let B=c[U];B===void 0&&(B={},c[U]=B);let z=B[j];z===void 0&&(z=T.clone(),B[j]=z),T=z}if(T.visible=M.visible,T.wireframe=M.wireframe,P===ha?T.side=M.shadowSide!==null?M.shadowSide:M.side:T.side=M.shadowSide!==null?M.shadowSide:h[M.side],T.alphaMap=M.alphaMap,T.alphaTest=M.alphaTest,T.map=M.map,T.clipShadows=M.clipShadows,T.clippingPlanes=M.clippingPlanes,T.clipIntersection=M.clipIntersection,T.displacementMap=M.displacementMap,T.displacementScale=M.displacementScale,T.displacementBias=M.displacementBias,T.wireframeLinewidth=M.wireframeLinewidth,T.linewidth=M.linewidth,C.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const U=n.properties.get(T);U.light=C}return T}function b(E,M,C,P,T){if(E.visible===!1)return;if(E.layers.test(M.layers)&&(E.isMesh||E.isLine||E.isPoints)&&(E.castShadow||E.receiveShadow&&T===ha)&&(!E.frustumCulled||i.intersectsObject(E))){E.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,E.matrixWorld);const j=e.update(E),B=E.material;if(Array.isArray(B)){const z=j.groups;for(let $=0,H=z.length;$<H;$++){const Z=z[$],O=B[Z.materialIndex];if(O&&O.visible){const W=_(E,O,P,T);n.renderBufferDirect(C,null,j,W,E,Z)}}}else if(B.visible){const z=_(E,B,P,T);n.renderBufferDirect(C,null,j,z,E,null)}}const U=E.children;for(let j=0,B=U.length;j<B;j++)b(U[j],M,C,P,T)}}function NSe(n,e,t){const i=t.isWebGL2;function r(){let le=!1;const be=new jt;let Te=null;const tt=new jt(0,0,0,0);return{setMask:function(at){Te!==at&&!le&&(n.colorMask(at,at,at,at),Te=at)},setLocked:function(at){le=at},setClear:function(at,kt,en,Ln,Ei){Ei===!0&&(at*=Ln,kt*=Ln,en*=Ln),be.set(at,kt,en,Ln),tt.equals(be)===!1&&(n.clearColor(at,kt,en,Ln),tt.copy(be))},reset:function(){le=!1,Te=null,tt.set(-1,0,0,0)}}}function s(){let le=!1,be=null,Te=null,tt=null;return{setTest:function(at){at?Re(n.DEPTH_TEST):Oe(n.DEPTH_TEST)},setMask:function(at){be!==at&&!le&&(n.depthMask(at),be=at)},setFunc:function(at){if(Te!==at){switch(at){case b7:n.depthFunc(n.NEVER);break;case S7:n.depthFunc(n.ALWAYS);break;case E7:n.depthFunc(n.LESS);break;case mS:n.depthFunc(n.LEQUAL);break;case M7:n.depthFunc(n.EQUAL);break;case T7:n.depthFunc(n.GEQUAL);break;case A7:n.depthFunc(n.GREATER);break;case C7:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Te=at}},setLocked:function(at){le=at},setClear:function(at){tt!==at&&(n.clearDepth(at),tt=at)},reset:function(){le=!1,be=null,Te=null,tt=null}}}function o(){let le=!1,be=null,Te=null,tt=null,at=null,kt=null,en=null,Ln=null,Ei=null;return{setTest:function(cn){le||(cn?Re(n.STENCIL_TEST):Oe(n.STENCIL_TEST))},setMask:function(cn){be!==cn&&!le&&(n.stencilMask(cn),be=cn)},setFunc:function(cn,Li,zi){(Te!==cn||tt!==Li||at!==zi)&&(n.stencilFunc(cn,Li,zi),Te=cn,tt=Li,at=zi)},setOp:function(cn,Li,zi){(kt!==cn||en!==Li||Ln!==zi)&&(n.stencilOp(cn,Li,zi),kt=cn,en=Li,Ln=zi)},setLocked:function(cn){le=cn},setClear:function(cn){Ei!==cn&&(n.clearStencil(cn),Ei=cn)},reset:function(){le=!1,be=null,Te=null,tt=null,at=null,kt=null,en=null,Ln=null,Ei=null}}}const a=new r,l=new s,c=new o,u=new WeakMap,h=new WeakMap;let d={},f={},p=new WeakMap,x=[],v=null,y=!1,w=null,_=null,b=null,E=null,M=null,C=null,P=null,T=!1,I=null,U=null,j=null,B=null,z=null;const $=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let H=!1,Z=0;const O=n.getParameter(n.VERSION);O.indexOf("WebGL")!==-1?(Z=parseFloat(/^WebGL (\d)/.exec(O)[1]),H=Z>=1):O.indexOf("OpenGL ES")!==-1&&(Z=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),H=Z>=2);let W=null,D={};const Y=n.getParameter(n.SCISSOR_BOX),Q=n.getParameter(n.VIEWPORT),re=new jt().fromArray(Y),ce=new jt().fromArray(Q);function oe(le,be,Te,tt){const at=new Uint8Array(4),kt=n.createTexture();n.bindTexture(le,kt),n.texParameteri(le,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(le,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let en=0;en<Te;en++)i&&(le===n.TEXTURE_3D||le===n.TEXTURE_2D_ARRAY)?n.texImage3D(be,0,n.RGBA,1,1,tt,0,n.RGBA,n.UNSIGNED_BYTE,at):n.texImage2D(be+en,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,at);return kt}const he={};he[n.TEXTURE_2D]=oe(n.TEXTURE_2D,n.TEXTURE_2D,1),he[n.TEXTURE_CUBE_MAP]=oe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(he[n.TEXTURE_2D_ARRAY]=oe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),he[n.TEXTURE_3D]=oe(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Re(n.DEPTH_TEST),l.setFunc(mS),Ie(!1),me(jR),Re(n.CULL_FACE),de(bl);function Re(le){d[le]!==!0&&(n.enable(le),d[le]=!0)}function Oe(le){d[le]!==!1&&(n.disable(le),d[le]=!1)}function Ve(le,be){return f[le]!==be?(n.bindFramebuffer(le,be),f[le]=be,i&&(le===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=be),le===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=be)),!0):!1}function Je(le,be){let Te=x,tt=!1;if(le)if(Te=p.get(be),Te===void 0&&(Te=[],p.set(be,Te)),le.isWebGLMultipleRenderTargets){const at=le.texture;if(Te.length!==at.length||Te[0]!==n.COLOR_ATTACHMENT0){for(let kt=0,en=at.length;kt<en;kt++)Te[kt]=n.COLOR_ATTACHMENT0+kt;Te.length=at.length,tt=!0}}else Te[0]!==n.COLOR_ATTACHMENT0&&(Te[0]=n.COLOR_ATTACHMENT0,tt=!0);else Te[0]!==n.BACK&&(Te[0]=n.BACK,tt=!0);tt&&(t.isWebGL2?n.drawBuffers(Te):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Te))}function Fe(le){return v!==le?(n.useProgram(le),v=le,!0):!1}const J={[nd]:n.FUNC_ADD,[h7]:n.FUNC_SUBTRACT,[d7]:n.FUNC_REVERSE_SUBTRACT};if(i)J[qR]=n.MIN,J[ZR]=n.MAX;else{const le=e.get("EXT_blend_minmax");le!==null&&(J[qR]=le.MIN_EXT,J[ZR]=le.MAX_EXT)}const ge={[f7]:n.ZERO,[p7]:n.ONE,[m7]:n.SRC_COLOR,[kk]:n.SRC_ALPHA,[w7]:n.SRC_ALPHA_SATURATE,[x7]:n.DST_COLOR,[y7]:n.DST_ALPHA,[g7]:n.ONE_MINUS_SRC_COLOR,[Ok]:n.ONE_MINUS_SRC_ALPHA,[_7]:n.ONE_MINUS_DST_COLOR,[v7]:n.ONE_MINUS_DST_ALPHA};function de(le,be,Te,tt,at,kt,en,Ln){if(le===bl){y===!0&&(Oe(n.BLEND),y=!1);return}if(y===!1&&(Re(n.BLEND),y=!0),le!==u7){if(le!==w||Ln!==T){if((_!==nd||M!==nd)&&(n.blendEquation(n.FUNC_ADD),_=nd,M=nd),Ln)switch(le){case Td:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case $R:n.blendFunc(n.ONE,n.ONE);break;case XR:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case YR:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:break}else switch(le){case Td:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case $R:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case XR:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case YR:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:break}b=null,E=null,C=null,P=null,w=le,T=Ln}return}at=at||be,kt=kt||Te,en=en||tt,(be!==_||at!==M)&&(n.blendEquationSeparate(J[be],J[at]),_=be,M=at),(Te!==b||tt!==E||kt!==C||en!==P)&&(n.blendFuncSeparate(ge[Te],ge[tt],ge[kt],ge[en]),b=Te,E=tt,C=kt,P=en),w=le,T=!1}function Ae(le,be){le.side===cr?Oe(n.CULL_FACE):Re(n.CULL_FACE);let Te=le.side===Xr;be&&(Te=!Te),Ie(Te),le.blending===Td&&le.transparent===!1?de(bl):de(le.blending,le.blendEquation,le.blendSrc,le.blendDst,le.blendEquationAlpha,le.blendSrcAlpha,le.blendDstAlpha,le.premultipliedAlpha),l.setFunc(le.depthFunc),l.setTest(le.depthTest),l.setMask(le.depthWrite),a.setMask(le.colorWrite);const tt=le.stencilWrite;c.setTest(tt),tt&&(c.setMask(le.stencilWriteMask),c.setFunc(le.stencilFunc,le.stencilRef,le.stencilFuncMask),c.setOp(le.stencilFail,le.stencilZFail,le.stencilZPass)),ke(le.polygonOffset,le.polygonOffsetFactor,le.polygonOffsetUnits),le.alphaToCoverage===!0?Re(n.SAMPLE_ALPHA_TO_COVERAGE):Oe(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ie(le){I!==le&&(le?n.frontFace(n.CW):n.frontFace(n.CCW),I=le)}function me(le){le!==a7?(Re(n.CULL_FACE),le!==U&&(le===jR?n.cullFace(n.BACK):le===l7?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Oe(n.CULL_FACE),U=le}function ye(le){le!==j&&(H&&n.lineWidth(le),j=le)}function ke(le,be,Te){le?(Re(n.POLYGON_OFFSET_FILL),(B!==be||z!==Te)&&(n.polygonOffset(be,Te),B=be,z=Te)):Oe(n.POLYGON_OFFSET_FILL)}function Xe(le){le?Re(n.SCISSOR_TEST):Oe(n.SCISSOR_TEST)}function Le(le){le===void 0&&(le=n.TEXTURE0+$-1),W!==le&&(n.activeTexture(le),W=le)}function Ye(le,be,Te){Te===void 0&&(W===null?Te=n.TEXTURE0+$-1:Te=W);let tt=D[Te];tt===void 0&&(tt={type:void 0,texture:void 0},D[Te]=tt),(tt.type!==le||tt.texture!==be)&&(W!==Te&&(n.activeTexture(Te),W=Te),n.bindTexture(le,be||he[le]),tt.type=le,tt.texture=be)}function q(){const le=D[W];le!==void 0&&le.type!==void 0&&(n.bindTexture(le.type,null),le.type=void 0,le.texture=void 0)}function X(){try{n.compressedTexImage2D.apply(n,arguments)}catch{}}function pe(){try{n.compressedTexImage3D.apply(n,arguments)}catch{}}function _e(){try{n.texSubImage2D.apply(n,arguments)}catch{}}function xe(){try{n.texSubImage3D.apply(n,arguments)}catch{}}function Me(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch{}}function je(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch{}}function qe(){try{n.texStorage2D.apply(n,arguments)}catch{}}function Ne(){try{n.texStorage3D.apply(n,arguments)}catch{}}function Qe(){try{n.texImage2D.apply(n,arguments)}catch{}}function $e(){try{n.texImage3D.apply(n,arguments)}catch{}}function it(le){re.equals(le)===!1&&(n.scissor(le.x,le.y,le.z,le.w),re.copy(le))}function se(le){ce.equals(le)===!1&&(n.viewport(le.x,le.y,le.z,le.w),ce.copy(le))}function Se(le,be){let Te=h.get(be);Te===void 0&&(Te=new WeakMap,h.set(be,Te));let tt=Te.get(le);tt===void 0&&(tt=n.getUniformBlockIndex(be,le.name),Te.set(le,tt))}function Ze(le,be){const tt=h.get(be).get(le);u.get(be)!==tt&&(n.uniformBlockBinding(be,tt,le.__bindingPointIndex),u.set(be,tt))}function lt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},W=null,D={},f={},p=new WeakMap,x=[],v=null,y=!1,w=null,_=null,b=null,E=null,M=null,C=null,P=null,T=!1,I=null,U=null,j=null,B=null,z=null,re.set(0,0,n.canvas.width,n.canvas.height),ce.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:Re,disable:Oe,bindFramebuffer:Ve,drawBuffers:Je,useProgram:Fe,setBlending:de,setMaterial:Ae,setFlipSided:Ie,setCullFace:me,setLineWidth:ye,setPolygonOffset:ke,setScissorTest:Xe,activeTexture:Le,bindTexture:Ye,unbindTexture:q,compressedTexImage2D:X,compressedTexImage3D:pe,texImage2D:Qe,texImage3D:$e,updateUBOMapping:Se,uniformBlockBinding:Ze,texStorage2D:qe,texStorage3D:Ne,texSubImage2D:_e,texSubImage3D:xe,compressedTexSubImage2D:Me,compressedTexSubImage3D:je,scissor:it,viewport:se,reset:lt}}function kSe(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let x;const v=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function w(q,X){return y?new OffscreenCanvas(q,X):r0("canvas")}function _(q,X,pe,_e){let xe=1;if((q.width>_e||q.height>_e)&&(xe=_e/Math.max(q.width,q.height)),xe<1||X===!0)if(typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&q instanceof ImageBitmap){const Me=X?vS:Math.floor,je=Me(xe*q.width),qe=Me(xe*q.height);x===void 0&&(x=w(je,qe));const Ne=pe?w(je,qe):x;return Ne.width=je,Ne.height=qe,Ne.getContext("2d").drawImage(q,0,0,je,qe),Ne}else return"data"in q,q;return q}function b(q){return bI(q.width)&&bI(q.height)}function E(q){return a?!1:q.wrapS!==si||q.wrapT!==si||q.minFilter!==Ri&&q.minFilter!==En}function M(q,X){return q.generateMipmaps&&X&&q.minFilter!==Ri&&q.minFilter!==En}function C(q){n.generateMipmap(q)}function P(q,X,pe,_e,xe=!1){if(a===!1)return X;if(q!==null&&n[q]!==void 0)return n[q];let Me=X;return X===n.RED&&(pe===n.FLOAT&&(Me=n.R32F),pe===n.HALF_FLOAT&&(Me=n.R16F),pe===n.UNSIGNED_BYTE&&(Me=n.R8)),X===n.RG&&(pe===n.FLOAT&&(Me=n.RG32F),pe===n.HALF_FLOAT&&(Me=n.RG16F),pe===n.UNSIGNED_BYTE&&(Me=n.RG8)),X===n.RGBA&&(pe===n.FLOAT&&(Me=n.RGBA32F),pe===n.HALF_FLOAT&&(Me=n.RGBA16F),pe===n.UNSIGNED_BYTE&&(Me=_e===Ht&&xe===!1?n.SRGB8_ALPHA8:n.RGBA8),pe===n.UNSIGNED_SHORT_4_4_4_4&&(Me=n.RGBA4),pe===n.UNSIGNED_SHORT_5_5_5_1&&(Me=n.RGB5_A1)),(Me===n.R16F||Me===n.R32F||Me===n.RG16F||Me===n.RG32F||Me===n.RGBA16F||Me===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Me}function T(q,X,pe){return M(q,pe)===!0||q.isFramebufferTexture&&q.minFilter!==Ri&&q.minFilter!==En?Math.log2(Math.max(X.width,X.height))+1:q.mipmaps!==void 0&&q.mipmaps.length>0?q.mipmaps.length:q.isCompressedTexture&&Array.isArray(q.image)?X.mipmaps.length:1}function I(q){return q===Ri||q===gS||q===uv?n.NEAREST:n.LINEAR}function U(q){const X=q.target;X.removeEventListener("dispose",U),B(X),X.isVideoTexture&&p.delete(X)}function j(q){const X=q.target;X.removeEventListener("dispose",j),$(X)}function B(q){const X=i.get(q);if(X.__webglInit===void 0)return;const pe=q.source,_e=v.get(pe);if(_e){const xe=_e[X.__cacheKey];xe.usedTimes--,xe.usedTimes===0&&z(q),Object.keys(_e).length===0&&v.delete(pe)}i.remove(q)}function z(q){const X=i.get(q);n.deleteTexture(X.__webglTexture);const pe=q.source,_e=v.get(pe);delete _e[X.__cacheKey],o.memory.textures--}function $(q){const X=q.texture,pe=i.get(q),_e=i.get(X);if(_e.__webglTexture!==void 0&&(n.deleteTexture(_e.__webglTexture),o.memory.textures--),q.depthTexture&&q.depthTexture.dispose(),q.isWebGLCubeRenderTarget)for(let xe=0;xe<6;xe++)n.deleteFramebuffer(pe.__webglFramebuffer[xe]),pe.__webglDepthbuffer&&n.deleteRenderbuffer(pe.__webglDepthbuffer[xe]);else{if(n.deleteFramebuffer(pe.__webglFramebuffer),pe.__webglDepthbuffer&&n.deleteRenderbuffer(pe.__webglDepthbuffer),pe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(pe.__webglMultisampledFramebuffer),pe.__webglColorRenderbuffer)for(let xe=0;xe<pe.__webglColorRenderbuffer.length;xe++)pe.__webglColorRenderbuffer[xe]&&n.deleteRenderbuffer(pe.__webglColorRenderbuffer[xe]);pe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(pe.__webglDepthRenderbuffer)}if(q.isWebGLMultipleRenderTargets)for(let xe=0,Me=X.length;xe<Me;xe++){const je=i.get(X[xe]);je.__webglTexture&&(n.deleteTexture(je.__webglTexture),o.memory.textures--),i.remove(X[xe])}i.remove(X),i.remove(q)}let H=0;function Z(){H=0}function O(){const q=H;return q>=l,H+=1,q}function W(q){const X=[];return X.push(q.wrapS),X.push(q.wrapT),X.push(q.wrapR||0),X.push(q.magFilter),X.push(q.minFilter),X.push(q.anisotropy),X.push(q.internalFormat),X.push(q.format),X.push(q.type),X.push(q.generateMipmaps),X.push(q.premultiplyAlpha),X.push(q.flipY),X.push(q.unpackAlignment),X.push(q.colorSpace),X.join()}function D(q,X){const pe=i.get(q);if(q.isVideoTexture&&Le(q),q.isRenderTargetTexture===!1&&q.version>0&&pe.__version!==q.version){const _e=q.image;if(_e!==null){if(_e.complete!==!1){Ve(pe,q,X);return}}}t.bindTexture(n.TEXTURE_2D,pe.__webglTexture,n.TEXTURE0+X)}function Y(q,X){const pe=i.get(q);if(q.version>0&&pe.__version!==q.version){Ve(pe,q,X);return}t.bindTexture(n.TEXTURE_2D_ARRAY,pe.__webglTexture,n.TEXTURE0+X)}function Q(q,X){const pe=i.get(q);if(q.version>0&&pe.__version!==q.version){Ve(pe,q,X);return}t.bindTexture(n.TEXTURE_3D,pe.__webglTexture,n.TEXTURE0+X)}function re(q,X){const pe=i.get(q);if(q.version>0&&pe.__version!==q.version){Je(pe,q,X);return}t.bindTexture(n.TEXTURE_CUBE_MAP,pe.__webglTexture,n.TEXTURE0+X)}const ce={[Im]:n.REPEAT,[si]:n.CLAMP_TO_EDGE,[Qv]:n.MIRRORED_REPEAT},oe={[Ri]:n.NEAREST,[gS]:n.NEAREST_MIPMAP_NEAREST,[uv]:n.NEAREST_MIPMAP_LINEAR,[En]:n.LINEAR,[Fk]:n.LINEAR_MIPMAP_NEAREST,[ju]:n.LINEAR_MIPMAP_LINEAR},he={[Y7]:n.NEVER,[tX]:n.ALWAYS,[q7]:n.LESS,[K7]:n.LEQUAL,[Z7]:n.EQUAL,[eX]:n.GEQUAL,[Q7]:n.GREATER,[J7]:n.NOTEQUAL};function Re(q,X,pe){if(pe?(n.texParameteri(q,n.TEXTURE_WRAP_S,ce[X.wrapS]),n.texParameteri(q,n.TEXTURE_WRAP_T,ce[X.wrapT]),(q===n.TEXTURE_3D||q===n.TEXTURE_2D_ARRAY)&&n.texParameteri(q,n.TEXTURE_WRAP_R,ce[X.wrapR]),n.texParameteri(q,n.TEXTURE_MAG_FILTER,oe[X.magFilter]),n.texParameteri(q,n.TEXTURE_MIN_FILTER,oe[X.minFilter])):(n.texParameteri(q,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(q,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(q===n.TEXTURE_3D||q===n.TEXTURE_2D_ARRAY)&&n.texParameteri(q,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),X.wrapS!==si||X.wrapT,n.texParameteri(q,n.TEXTURE_MAG_FILTER,I(X.magFilter)),n.texParameteri(q,n.TEXTURE_MIN_FILTER,I(X.minFilter)),X.minFilter!==Ri&&X.minFilter),X.compareFunction&&(n.texParameteri(q,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(q,n.TEXTURE_COMPARE_FUNC,he[X.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const _e=e.get("EXT_texture_filter_anisotropic");if(X.magFilter===Ri||X.minFilter!==uv&&X.minFilter!==ju||X.type===ur&&e.has("OES_texture_float_linear")===!1||a===!1&&X.type===hr&&e.has("OES_texture_half_float_linear")===!1)return;(X.anisotropy>1||i.get(X).__currentAnisotropy)&&(n.texParameterf(q,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(X.anisotropy,r.getMaxAnisotropy())),i.get(X).__currentAnisotropy=X.anisotropy)}}function Oe(q,X){let pe=!1;q.__webglInit===void 0&&(q.__webglInit=!0,X.addEventListener("dispose",U));const _e=X.source;let xe=v.get(_e);xe===void 0&&(xe={},v.set(_e,xe));const Me=W(X);if(Me!==q.__cacheKey){xe[Me]===void 0&&(xe[Me]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,pe=!0),xe[Me].usedTimes++;const je=xe[q.__cacheKey];je!==void 0&&(xe[q.__cacheKey].usedTimes--,je.usedTimes===0&&z(X)),q.__cacheKey=Me,q.__webglTexture=xe[Me].texture}return pe}function Ve(q,X,pe){let _e=n.TEXTURE_2D;(X.isDataArrayTexture||X.isCompressedArrayTexture)&&(_e=n.TEXTURE_2D_ARRAY),X.isData3DTexture&&(_e=n.TEXTURE_3D);const xe=Oe(q,X),Me=X.source;t.bindTexture(_e,q.__webglTexture,n.TEXTURE0+pe);const je=i.get(Me);if(Me.version!==je.__version||xe===!0){t.activeTexture(n.TEXTURE0+pe),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,X.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,X.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const qe=E(X)&&b(X.image)===!1;let Ne=_(X.image,qe,!1,u);Ne=Ye(X,Ne);const Qe=b(Ne)||a,$e=s.convert(X.format,X.colorSpace);let it=s.convert(X.type),se=P(X.internalFormat,$e,it,X.colorSpace);Re(_e,X,Qe);let Se;const Ze=X.mipmaps,lt=a&&X.isVideoTexture!==!0,le=je.__version===void 0||xe===!0,be=T(X,Ne,Qe);if(X.isDepthTexture)se=n.DEPTH_COMPONENT,a?X.type===ur?se=n.DEPTH_COMPONENT32F:X.type===fl?se=n.DEPTH_COMPONENT24:X.type===Lu?se=n.DEPTH24_STENCIL8:se=n.DEPTH_COMPONENT16:X.type,X.format===Nu&&se===n.DEPTH_COMPONENT&&X.type!==NE&&X.type!==fl&&(X.type=fl,it=s.convert(X.type)),X.format===Gd&&se===n.DEPTH_COMPONENT&&(se=n.DEPTH_STENCIL,X.type!==Lu&&(X.type=Lu,it=s.convert(X.type))),le&&(lt?t.texStorage2D(n.TEXTURE_2D,1,se,Ne.width,Ne.height):t.texImage2D(n.TEXTURE_2D,0,se,Ne.width,Ne.height,0,$e,it,null));else if(X.isDataTexture)if(Ze.length>0&&Qe){lt&&le&&t.texStorage2D(n.TEXTURE_2D,be,se,Ze[0].width,Ze[0].height);for(let Te=0,tt=Ze.length;Te<tt;Te++)Se=Ze[Te],lt?t.texSubImage2D(n.TEXTURE_2D,Te,0,0,Se.width,Se.height,$e,it,Se.data):t.texImage2D(n.TEXTURE_2D,Te,se,Se.width,Se.height,0,$e,it,Se.data);X.generateMipmaps=!1}else lt?(le&&t.texStorage2D(n.TEXTURE_2D,be,se,Ne.width,Ne.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ne.width,Ne.height,$e,it,Ne.data)):t.texImage2D(n.TEXTURE_2D,0,se,Ne.width,Ne.height,0,$e,it,Ne.data);else if(X.isCompressedTexture)if(X.isCompressedArrayTexture){lt&&le&&t.texStorage3D(n.TEXTURE_2D_ARRAY,be,se,Ze[0].width,Ze[0].height,Ne.depth);for(let Te=0,tt=Ze.length;Te<tt;Te++)Se=Ze[Te],X.format!==$i?$e!==null&&(lt?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Te,0,0,0,Se.width,Se.height,Ne.depth,$e,Se.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Te,se,Se.width,Se.height,Ne.depth,0,Se.data,0,0)):lt?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Te,0,0,0,Se.width,Se.height,Ne.depth,$e,it,Se.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Te,se,Se.width,Se.height,Ne.depth,0,$e,it,Se.data)}else{lt&&le&&t.texStorage2D(n.TEXTURE_2D,be,se,Ze[0].width,Ze[0].height);for(let Te=0,tt=Ze.length;Te<tt;Te++)Se=Ze[Te],X.format!==$i?$e!==null&&(lt?t.compressedTexSubImage2D(n.TEXTURE_2D,Te,0,0,Se.width,Se.height,$e,Se.data):t.compressedTexImage2D(n.TEXTURE_2D,Te,se,Se.width,Se.height,0,Se.data)):lt?t.texSubImage2D(n.TEXTURE_2D,Te,0,0,Se.width,Se.height,$e,it,Se.data):t.texImage2D(n.TEXTURE_2D,Te,se,Se.width,Se.height,0,$e,it,Se.data)}else if(X.isDataArrayTexture)lt?(le&&t.texStorage3D(n.TEXTURE_2D_ARRAY,be,se,Ne.width,Ne.height,Ne.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ne.width,Ne.height,Ne.depth,$e,it,Ne.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,se,Ne.width,Ne.height,Ne.depth,0,$e,it,Ne.data);else if(X.isData3DTexture)lt?(le&&t.texStorage3D(n.TEXTURE_3D,be,se,Ne.width,Ne.height,Ne.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ne.width,Ne.height,Ne.depth,$e,it,Ne.data)):t.texImage3D(n.TEXTURE_3D,0,se,Ne.width,Ne.height,Ne.depth,0,$e,it,Ne.data);else if(X.isFramebufferTexture){if(le)if(lt)t.texStorage2D(n.TEXTURE_2D,be,se,Ne.width,Ne.height);else{let Te=Ne.width,tt=Ne.height;for(let at=0;at<be;at++)t.texImage2D(n.TEXTURE_2D,at,se,Te,tt,0,$e,it,null),Te>>=1,tt>>=1}}else if(Ze.length>0&&Qe){lt&&le&&t.texStorage2D(n.TEXTURE_2D,be,se,Ze[0].width,Ze[0].height);for(let Te=0,tt=Ze.length;Te<tt;Te++)Se=Ze[Te],lt?t.texSubImage2D(n.TEXTURE_2D,Te,0,0,$e,it,Se):t.texImage2D(n.TEXTURE_2D,Te,se,$e,it,Se);X.generateMipmaps=!1}else lt?(le&&t.texStorage2D(n.TEXTURE_2D,be,se,Ne.width,Ne.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,$e,it,Ne)):t.texImage2D(n.TEXTURE_2D,0,se,$e,it,Ne);M(X,Qe)&&C(_e),je.__version=Me.version,X.onUpdate&&X.onUpdate(X)}q.__version=X.version}function Je(q,X,pe){if(X.image.length!==6)return;const _e=Oe(q,X),xe=X.source;t.bindTexture(n.TEXTURE_CUBE_MAP,q.__webglTexture,n.TEXTURE0+pe);const Me=i.get(xe);if(xe.version!==Me.__version||_e===!0){t.activeTexture(n.TEXTURE0+pe),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,X.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,X.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const je=X.isCompressedTexture||X.image[0].isCompressedTexture,qe=X.image[0]&&X.image[0].isDataTexture,Ne=[];for(let Te=0;Te<6;Te++)!je&&!qe?Ne[Te]=_(X.image[Te],!1,!0,c):Ne[Te]=qe?X.image[Te].image:X.image[Te],Ne[Te]=Ye(X,Ne[Te]);const Qe=Ne[0],$e=b(Qe)||a,it=s.convert(X.format,X.colorSpace),se=s.convert(X.type),Se=P(X.internalFormat,it,se,X.colorSpace),Ze=a&&X.isVideoTexture!==!0,lt=Me.__version===void 0||_e===!0;let le=T(X,Qe,$e);Re(n.TEXTURE_CUBE_MAP,X,$e);let be;if(je){Ze&&lt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,le,Se,Qe.width,Qe.height);for(let Te=0;Te<6;Te++){be=Ne[Te].mipmaps;for(let tt=0;tt<be.length;tt++){const at=be[tt];X.format!==$i?it!==null&&(Ze?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,tt,0,0,at.width,at.height,it,at.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,tt,Se,at.width,at.height,0,at.data)):Ze?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,tt,0,0,at.width,at.height,it,se,at.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,tt,Se,at.width,at.height,0,it,se,at.data)}}}else{be=X.mipmaps,Ze&&lt&&(be.length>0&&le++,t.texStorage2D(n.TEXTURE_CUBE_MAP,le,Se,Ne[0].width,Ne[0].height));for(let Te=0;Te<6;Te++)if(qe){Ze?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,Ne[Te].width,Ne[Te].height,it,se,Ne[Te].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,Se,Ne[Te].width,Ne[Te].height,0,it,se,Ne[Te].data);for(let tt=0;tt<be.length;tt++){const kt=be[tt].image[Te].image;Ze?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,tt+1,0,0,kt.width,kt.height,it,se,kt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,tt+1,Se,kt.width,kt.height,0,it,se,kt.data)}}else{Ze?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,it,se,Ne[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,Se,it,se,Ne[Te]);for(let tt=0;tt<be.length;tt++){const at=be[tt];Ze?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,tt+1,0,0,it,se,at.image[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,tt+1,Se,it,se,at.image[Te])}}}M(X,$e)&&C(n.TEXTURE_CUBE_MAP),Me.__version=xe.version,X.onUpdate&&X.onUpdate(X)}q.__version=X.version}function Fe(q,X,pe,_e,xe){const Me=s.convert(pe.format,pe.colorSpace),je=s.convert(pe.type),qe=P(pe.internalFormat,Me,je,pe.colorSpace);i.get(X).__hasExternalTextures||(xe===n.TEXTURE_3D||xe===n.TEXTURE_2D_ARRAY?t.texImage3D(xe,0,qe,X.width,X.height,X.depth,0,Me,je,null):t.texImage2D(xe,0,qe,X.width,X.height,0,Me,je,null)),t.bindFramebuffer(n.FRAMEBUFFER,q),Xe(X)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,_e,xe,i.get(pe).__webglTexture,0,ke(X)):(xe===n.TEXTURE_2D||xe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&xe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,_e,xe,i.get(pe).__webglTexture,0),t.bindFramebuffer(n.FRAMEBUFFER,null)}function J(q,X,pe){if(n.bindRenderbuffer(n.RENDERBUFFER,q),X.depthBuffer&&!X.stencilBuffer){let _e=n.DEPTH_COMPONENT16;if(pe||Xe(X)){const xe=X.depthTexture;xe&&xe.isDepthTexture&&(xe.type===ur?_e=n.DEPTH_COMPONENT32F:xe.type===fl&&(_e=n.DEPTH_COMPONENT24));const Me=ke(X);Xe(X)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Me,_e,X.width,X.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Me,_e,X.width,X.height)}else n.renderbufferStorage(n.RENDERBUFFER,_e,X.width,X.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,q)}else if(X.depthBuffer&&X.stencilBuffer){const _e=ke(X);pe&&Xe(X)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,_e,n.DEPTH24_STENCIL8,X.width,X.height):Xe(X)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,_e,n.DEPTH24_STENCIL8,X.width,X.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,X.width,X.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,q)}else{const _e=X.isWebGLMultipleRenderTargets===!0?X.texture:[X.texture];for(let xe=0;xe<_e.length;xe++){const Me=_e[xe],je=s.convert(Me.format,Me.colorSpace),qe=s.convert(Me.type),Ne=P(Me.internalFormat,je,qe,Me.colorSpace),Qe=ke(X);pe&&Xe(X)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Qe,Ne,X.width,X.height):Xe(X)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Qe,Ne,X.width,X.height):n.renderbufferStorage(n.RENDERBUFFER,Ne,X.width,X.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ge(q,X){if(X&&X.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,q),!(X.depthTexture&&X.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(X.depthTexture).__webglTexture||X.depthTexture.image.width!==X.width||X.depthTexture.image.height!==X.height)&&(X.depthTexture.image.width=X.width,X.depthTexture.image.height=X.height,X.depthTexture.needsUpdate=!0),D(X.depthTexture,0);const _e=i.get(X.depthTexture).__webglTexture,xe=ke(X);if(X.depthTexture.format===Nu)Xe(X)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,_e,0,xe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,_e,0);else if(X.depthTexture.format===Gd)Xe(X)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,_e,0,xe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,_e,0);else throw new Error("Unknown depthTexture format")}function de(q){const X=i.get(q),pe=q.isWebGLCubeRenderTarget===!0;if(q.depthTexture&&!X.__autoAllocateDepthBuffer){if(pe)throw new Error("target.depthTexture not supported in Cube render targets");ge(X.__webglFramebuffer,q)}else if(pe){X.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)t.bindFramebuffer(n.FRAMEBUFFER,X.__webglFramebuffer[_e]),X.__webglDepthbuffer[_e]=n.createRenderbuffer(),J(X.__webglDepthbuffer[_e],q,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,X.__webglFramebuffer),X.__webglDepthbuffer=n.createRenderbuffer(),J(X.__webglDepthbuffer,q,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ae(q,X,pe){const _e=i.get(q);X!==void 0&&Fe(_e.__webglFramebuffer,q,q.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D),pe!==void 0&&de(q)}function Ie(q){const X=q.texture,pe=i.get(q),_e=i.get(X);q.addEventListener("dispose",j),q.isWebGLMultipleRenderTargets!==!0&&(_e.__webglTexture===void 0&&(_e.__webglTexture=n.createTexture()),_e.__version=X.version,o.memory.textures++);const xe=q.isWebGLCubeRenderTarget===!0,Me=q.isWebGLMultipleRenderTargets===!0,je=b(q)||a;if(xe){pe.__webglFramebuffer=[];for(let qe=0;qe<6;qe++)pe.__webglFramebuffer[qe]=n.createFramebuffer()}else{if(pe.__webglFramebuffer=n.createFramebuffer(),Me&&r.drawBuffers){const qe=q.texture;for(let Ne=0,Qe=qe.length;Ne<Qe;Ne++){const $e=i.get(qe[Ne]);$e.__webglTexture===void 0&&($e.__webglTexture=n.createTexture(),o.memory.textures++)}}if(a&&q.samples>0&&Xe(q)===!1){const qe=Me?X:[X];pe.__webglMultisampledFramebuffer=n.createFramebuffer(),pe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,pe.__webglMultisampledFramebuffer);for(let Ne=0;Ne<qe.length;Ne++){const Qe=qe[Ne];pe.__webglColorRenderbuffer[Ne]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,pe.__webglColorRenderbuffer[Ne]);const $e=s.convert(Qe.format,Qe.colorSpace),it=s.convert(Qe.type),se=P(Qe.internalFormat,$e,it,Qe.colorSpace,q.isXRRenderTarget===!0),Se=ke(q);n.renderbufferStorageMultisample(n.RENDERBUFFER,Se,se,q.width,q.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ne,n.RENDERBUFFER,pe.__webglColorRenderbuffer[Ne])}n.bindRenderbuffer(n.RENDERBUFFER,null),q.depthBuffer&&(pe.__webglDepthRenderbuffer=n.createRenderbuffer(),J(pe.__webglDepthRenderbuffer,q,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(xe){t.bindTexture(n.TEXTURE_CUBE_MAP,_e.__webglTexture),Re(n.TEXTURE_CUBE_MAP,X,je);for(let qe=0;qe<6;qe++)Fe(pe.__webglFramebuffer[qe],q,X,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe);M(X,je)&&C(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Me){const qe=q.texture;for(let Ne=0,Qe=qe.length;Ne<Qe;Ne++){const $e=qe[Ne],it=i.get($e);t.bindTexture(n.TEXTURE_2D,it.__webglTexture),Re(n.TEXTURE_2D,$e,je),Fe(pe.__webglFramebuffer,q,$e,n.COLOR_ATTACHMENT0+Ne,n.TEXTURE_2D),M($e,je)&&C(n.TEXTURE_2D)}t.unbindTexture()}else{let qe=n.TEXTURE_2D;(q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&a&&(qe=q.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(qe,_e.__webglTexture),Re(qe,X,je),Fe(pe.__webglFramebuffer,q,X,n.COLOR_ATTACHMENT0,qe),M(X,je)&&C(qe),t.unbindTexture()}q.depthBuffer&&de(q)}function me(q){const X=b(q)||a,pe=q.isWebGLMultipleRenderTargets===!0?q.texture:[q.texture];for(let _e=0,xe=pe.length;_e<xe;_e++){const Me=pe[_e];if(M(Me,X)){const je=q.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,qe=i.get(Me).__webglTexture;t.bindTexture(je,qe),C(je),t.unbindTexture()}}}function ye(q){if(a&&q.samples>0&&Xe(q)===!1){const X=q.isWebGLMultipleRenderTargets?q.texture:[q.texture],pe=q.width,_e=q.height;let xe=n.COLOR_BUFFER_BIT;const Me=[],je=q.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,qe=i.get(q),Ne=q.isWebGLMultipleRenderTargets===!0;if(Ne)for(let Qe=0;Qe<X.length;Qe++)t.bindFramebuffer(n.FRAMEBUFFER,qe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Qe,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,qe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Qe,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,qe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,qe.__webglFramebuffer);for(let Qe=0;Qe<X.length;Qe++){Me.push(n.COLOR_ATTACHMENT0+Qe),q.depthBuffer&&Me.push(je);const $e=qe.__ignoreDepthValues!==void 0?qe.__ignoreDepthValues:!1;if($e===!1&&(q.depthBuffer&&(xe|=n.DEPTH_BUFFER_BIT),q.stencilBuffer&&(xe|=n.STENCIL_BUFFER_BIT)),Ne&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,qe.__webglColorRenderbuffer[Qe]),$e===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[je]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[je])),Ne){const it=i.get(X[Qe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,it,0)}n.blitFramebuffer(0,0,pe,_e,0,0,pe,_e,xe,n.NEAREST),f&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Me)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ne)for(let Qe=0;Qe<X.length;Qe++){t.bindFramebuffer(n.FRAMEBUFFER,qe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Qe,n.RENDERBUFFER,qe.__webglColorRenderbuffer[Qe]);const $e=i.get(X[Qe]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,qe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Qe,n.TEXTURE_2D,$e,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,qe.__webglMultisampledFramebuffer)}}function ke(q){return Math.min(h,q.samples)}function Xe(q){const X=i.get(q);return a&&q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&X.__useRenderToTexture!==!1}function Le(q){const X=o.render.frame;p.get(q)!==X&&(p.set(q,X),q.update())}function Ye(q,X){const pe=q.colorSpace,_e=q.format,xe=q.type;return q.isCompressedTexture===!0||q.format===yS||pe!==Rs&&pe!==Ou&&pe===Ht&&a===!1&&(e.has("EXT_sRGB")===!0&&_e===$i?(q.format=yS,q.minFilter=En,q.generateMipmaps=!1):X=Kk.sRGBToLinear(X)),X}this.allocateTextureUnit=O,this.resetTextureUnits=Z,this.setTexture2D=D,this.setTexture2DArray=Y,this.setTexture3D=Q,this.setTextureCube=re,this.rebindTextures=Ae,this.setupRenderTarget=Ie,this.updateRenderTargetMipmap=me,this.updateMultisampleRenderTarget=ye,this.setupDepthRenderbuffer=de,this.setupFrameBufferTexture=Fe,this.useMultisampledRTT=Xe}function dX(n,e,t){const i=t.isWebGL2;function r(s,o=Ou){let a;if(s===Ks)return n.UNSIGNED_BYTE;if(s===zk)return n.UNSIGNED_SHORT_4_4_4_4;if(s===Hk)return n.UNSIGNED_SHORT_5_5_5_1;if(s===Uk)return n.BYTE;if(s===Bk)return n.SHORT;if(s===NE)return n.UNSIGNED_SHORT;if(s===kE)return n.INT;if(s===fl)return n.UNSIGNED_INT;if(s===ur)return n.FLOAT;if(s===hr)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===O7)return n.ALPHA;if(s===$i)return n.RGBA;if(s===D7)return n.LUMINANCE;if(s===F7)return n.LUMINANCE_ALPHA;if(s===Nu)return n.DEPTH_COMPONENT;if(s===Gd)return n.DEPTH_STENCIL;if(s===yS)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===Wk)return n.RED;if(s===Vk)return n.RED_INTEGER;if(s===U7)return n.RG;if(s===Gk)return n.RG_INTEGER;if(s===jk)return n.RGBA_INTEGER;if(s===X1||s===Y1||s===q1||s===Z1)if(o===Ht)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===X1)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Y1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===q1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Z1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===X1)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Y1)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===q1)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Z1)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===QR||s===JR||s===eI||s===tI)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===QR)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===JR)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===eI)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===tI)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===B7)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===nI||s===iI)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===nI)return o===Ht?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===iI)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===rI||s===sI||s===oI||s===aI||s===lI||s===cI||s===uI||s===hI||s===dI||s===fI||s===pI||s===mI||s===gI||s===yI)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===rI)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===sI)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===oI)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===aI)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===lI)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===cI)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===uI)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===hI)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===dI)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===fI)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===pI)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===mI)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===gI)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===yI)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===K1)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===K1)return o===Ht?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===z7||s===vI||s===xI||s===_I)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===K1)return a.COMPRESSED_RED_RGTC1_EXT;if(s===vI)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===xI)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===_I)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Lu?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class fX extends ri{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class gd extends _n{constructor(){super(),this.isGroup=!0,this.type="Group"}}const OSe={type:"move"};class TC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new gd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new gd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new V,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new V),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new gd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new V,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new V),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const x of e.hand.values()){const v=t.getJointPose(x,i),y=this._getHandJoint(c,x);v!==null&&(y.matrix.fromArray(v.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=v.radius),y.visible=v!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],d=u.position.distanceTo(h.position),f=.02,p=.005;c.inputState.pinching&&d>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(OSe)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new gd;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class pX extends Rn{constructor(e,t,i,r,s,o,a,l,c,u){if(u=u!==void 0?u:Nu,u!==Nu&&u!==Gd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Nu&&(i=fl),i===void 0&&u===Gd&&(i=Lu),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Ri,this.minFilter=l!==void 0?l:Ri,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class DSe extends Ll{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,d=null,f=null,p=null;const x=t.getContextAttributes();let v=null,y=null;const w=[],_=[],b=new ri;b.layers.enable(1),b.viewport=new jt;const E=new ri;E.layers.enable(2),E.viewport=new jt;const M=[b,E],C=new fX;C.layers.enable(1),C.layers.enable(2);let P=null,T=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Y){let Q=w[Y];return Q===void 0&&(Q=new TC,w[Y]=Q),Q.getTargetRaySpace()},this.getControllerGrip=function(Y){let Q=w[Y];return Q===void 0&&(Q=new TC,w[Y]=Q),Q.getGripSpace()},this.getHand=function(Y){let Q=w[Y];return Q===void 0&&(Q=new TC,w[Y]=Q),Q.getHandSpace()};function I(Y){const Q=_.indexOf(Y.inputSource);if(Q===-1)return;const re=w[Q];re!==void 0&&(re.update(Y.inputSource,Y.frame,c||o),re.dispatchEvent({type:Y.type,data:Y.inputSource}))}function U(){r.removeEventListener("select",I),r.removeEventListener("selectstart",I),r.removeEventListener("selectend",I),r.removeEventListener("squeeze",I),r.removeEventListener("squeezestart",I),r.removeEventListener("squeezeend",I),r.removeEventListener("end",U),r.removeEventListener("inputsourceschange",j);for(let Y=0;Y<w.length;Y++){const Q=_[Y];Q!==null&&(_[Y]=null,w[Y].disconnect(Q))}P=null,T=null,e.setRenderTarget(v),f=null,d=null,h=null,r=null,y=null,D.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Y){s=Y,i.isPresenting},this.setReferenceSpaceType=function(Y){a=Y,i.isPresenting},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(Y){c=Y},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(Y){if(r=Y,r!==null){if(v=e.getRenderTarget(),r.addEventListener("select",I),r.addEventListener("selectstart",I),r.addEventListener("selectend",I),r.addEventListener("squeeze",I),r.addEventListener("squeezestart",I),r.addEventListener("squeezeend",I),r.addEventListener("end",U),r.addEventListener("inputsourceschange",j),x.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Q={antialias:r.renderState.layers===void 0?x.antialias:!0,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(r,t,Q),r.updateRenderState({baseLayer:f}),y=new no(f.framebufferWidth,f.framebufferHeight,{format:$i,type:Ks,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let Q=null,re=null,ce=null;x.depth&&(ce=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Q=x.stencil?Gd:Nu,re=x.stencil?Lu:fl);const oe={colorFormat:t.RGBA8,depthFormat:ce,scaleFactor:s};h=new XRWebGLBinding(r,t),d=h.createProjectionLayer(oe),r.updateRenderState({layers:[d]}),y=new no(d.textureWidth,d.textureHeight,{format:$i,type:Ks,depthTexture:new pX(d.textureWidth,d.textureHeight,re,void 0,void 0,void 0,void 0,void 0,void 0,Q),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0});const he=e.properties.get(y);he.__ignoreDepthValues=d.ignoreDepthValues}y.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),D.setContext(r),D.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function j(Y){for(let Q=0;Q<Y.removed.length;Q++){const re=Y.removed[Q],ce=_.indexOf(re);ce>=0&&(_[ce]=null,w[ce].disconnect(re))}for(let Q=0;Q<Y.added.length;Q++){const re=Y.added[Q];let ce=_.indexOf(re);if(ce===-1){for(let he=0;he<w.length;he++)if(he>=_.length){_.push(re),ce=he;break}else if(_[he]===null){_[he]=re,ce=he;break}if(ce===-1)break}const oe=w[ce];oe&&oe.connect(re)}}const B=new V,z=new V;function $(Y,Q,re){B.setFromMatrixPosition(Q.matrixWorld),z.setFromMatrixPosition(re.matrixWorld);const ce=B.distanceTo(z),oe=Q.projectionMatrix.elements,he=re.projectionMatrix.elements,Re=oe[14]/(oe[10]-1),Oe=oe[14]/(oe[10]+1),Ve=(oe[9]+1)/oe[5],Je=(oe[9]-1)/oe[5],Fe=(oe[8]-1)/oe[0],J=(he[8]+1)/he[0],ge=Re*Fe,de=Re*J,Ae=ce/(-Fe+J),Ie=Ae*-Fe;Q.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),Y.translateX(Ie),Y.translateZ(Ae),Y.matrixWorld.compose(Y.position,Y.quaternion,Y.scale),Y.matrixWorldInverse.copy(Y.matrixWorld).invert();const me=Re+Ae,ye=Oe+Ae,ke=ge-Ie,Xe=de+(ce-Ie),Le=Ve*Oe/ye*me,Ye=Je*Oe/ye*me;Y.projectionMatrix.makePerspective(ke,Xe,Le,Ye,me,ye),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert()}function H(Y,Q){Q===null?Y.matrixWorld.copy(Y.matrix):Y.matrixWorld.multiplyMatrices(Q.matrixWorld,Y.matrix),Y.matrixWorldInverse.copy(Y.matrixWorld).invert()}this.updateCamera=function(Y){if(r===null)return;C.near=E.near=b.near=Y.near,C.far=E.far=b.far=Y.far,(P!==C.near||T!==C.far)&&(r.updateRenderState({depthNear:C.near,depthFar:C.far}),P=C.near,T=C.far);const Q=Y.parent,re=C.cameras;H(C,Q);for(let ce=0;ce<re.length;ce++)H(re[ce],Q);re.length===2?$(C,b,E):C.projectionMatrix.copy(b.projectionMatrix),Z(Y,C,Q)};function Z(Y,Q,re){re===null?Y.matrix.copy(Q.matrixWorld):(Y.matrix.copy(re.matrixWorld),Y.matrix.invert(),Y.matrix.multiply(Q.matrixWorld)),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.updateMatrixWorld(!0);const ce=Y.children;for(let oe=0,he=ce.length;oe<he;oe++)ce[oe].updateMatrixWorld(!0);Y.projectionMatrix.copy(Q.projectionMatrix),Y.projectionMatrixInverse.copy(Q.projectionMatrixInverse),Y.isPerspectiveCamera&&(Y.fov=Lm*2*Math.atan(1/Y.projectionMatrix.elements[5]),Y.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(Y){l=Y,d!==null&&(d.fixedFoveation=Y),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=Y)};let O=null;function W(Y,Q){if(u=Q.getViewerPose(c||o),p=Q,u!==null){const re=u.views;f!==null&&(e.setRenderTargetFramebuffer(y,f.framebuffer),e.setRenderTarget(y));let ce=!1;re.length!==C.cameras.length&&(C.cameras.length=0,ce=!0);for(let oe=0;oe<re.length;oe++){const he=re[oe];let Re=null;if(f!==null)Re=f.getViewport(he);else{const Ve=h.getViewSubImage(d,he);Re=Ve.viewport,oe===0&&(e.setRenderTargetTextures(y,Ve.colorTexture,d.ignoreDepthValues?void 0:Ve.depthStencilTexture),e.setRenderTarget(y))}let Oe=M[oe];Oe===void 0&&(Oe=new ri,Oe.layers.enable(oe),Oe.viewport=new jt,M[oe]=Oe),Oe.matrix.fromArray(he.transform.matrix),Oe.matrix.decompose(Oe.position,Oe.quaternion,Oe.scale),Oe.projectionMatrix.fromArray(he.projectionMatrix),Oe.projectionMatrixInverse.copy(Oe.projectionMatrix).invert(),Oe.viewport.set(Re.x,Re.y,Re.width,Re.height),oe===0&&(C.matrix.copy(Oe.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),ce===!0&&C.cameras.push(Oe)}}for(let re=0;re<w.length;re++){const ce=_[re],oe=w[re];ce!==null&&oe!==void 0&&oe.update(ce,Q,c||o)}O&&O(Y,Q),Q.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Q}),p=null}const D=new aX;D.setAnimationLoop(W),this.setAnimationLoop=function(Y){O=Y},this.dispose=function(){}}}function FSe(n,e){function t(v,y){v.matrixAutoUpdate===!0&&v.updateMatrix(),y.value.copy(v.matrix)}function i(v,y){y.color.getRGB(v.fogColor.value,sX(n)),y.isFog?(v.fogNear.value=y.near,v.fogFar.value=y.far):y.isFogExp2&&(v.fogDensity.value=y.density)}function r(v,y,w,_,b){y.isMeshBasicMaterial||y.isMeshLambertMaterial?s(v,y):y.isMeshToonMaterial?(s(v,y),h(v,y)):y.isMeshPhongMaterial?(s(v,y),u(v,y)):y.isMeshStandardMaterial?(s(v,y),d(v,y),y.isMeshPhysicalMaterial&&f(v,y,b)):y.isMeshMatcapMaterial?(s(v,y),p(v,y)):y.isMeshDepthMaterial?s(v,y):y.isMeshDistanceMaterial?(s(v,y),x(v,y)):y.isMeshNormalMaterial?s(v,y):y.isLineBasicMaterial?(o(v,y),y.isLineDashedMaterial&&a(v,y)):y.isPointsMaterial?l(v,y,w,_):y.isSpriteMaterial?c(v,y):y.isShadowMaterial?(v.color.value.copy(y.color),v.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function s(v,y){v.opacity.value=y.opacity,y.color&&v.diffuse.value.copy(y.color),y.emissive&&v.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(v.map.value=y.map,t(y.map,v.mapTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,t(y.alphaMap,v.alphaMapTransform)),y.bumpMap&&(v.bumpMap.value=y.bumpMap,t(y.bumpMap,v.bumpMapTransform),v.bumpScale.value=y.bumpScale,y.side===Xr&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,t(y.normalMap,v.normalMapTransform),v.normalScale.value.copy(y.normalScale),y.side===Xr&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,t(y.displacementMap,v.displacementMapTransform),v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias),y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap,t(y.emissiveMap,v.emissiveMapTransform)),y.specularMap&&(v.specularMap.value=y.specularMap,t(y.specularMap,v.specularMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);const w=e.get(y).envMap;if(w&&(v.envMap.value=w,v.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=y.reflectivity,v.ior.value=y.ior,v.refractionRatio.value=y.refractionRatio),y.lightMap){v.lightMap.value=y.lightMap;const _=n.useLegacyLights===!0?Math.PI:1;v.lightMapIntensity.value=y.lightMapIntensity*_,t(y.lightMap,v.lightMapTransform)}y.aoMap&&(v.aoMap.value=y.aoMap,v.aoMapIntensity.value=y.aoMapIntensity,t(y.aoMap,v.aoMapTransform))}function o(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,y.map&&(v.map.value=y.map,t(y.map,v.mapTransform))}function a(v,y){v.dashSize.value=y.dashSize,v.totalSize.value=y.dashSize+y.gapSize,v.scale.value=y.scale}function l(v,y,w,_){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.size.value=y.size*w,v.scale.value=_*.5,y.map&&(v.map.value=y.map,t(y.map,v.uvTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,t(y.alphaMap,v.alphaMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest)}function c(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.rotation.value=y.rotation,y.map&&(v.map.value=y.map,t(y.map,v.mapTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,t(y.alphaMap,v.alphaMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest)}function u(v,y){v.specular.value.copy(y.specular),v.shininess.value=Math.max(y.shininess,1e-4)}function h(v,y){y.gradientMap&&(v.gradientMap.value=y.gradientMap)}function d(v,y){v.metalness.value=y.metalness,y.metalnessMap&&(v.metalnessMap.value=y.metalnessMap,t(y.metalnessMap,v.metalnessMapTransform)),v.roughness.value=y.roughness,y.roughnessMap&&(v.roughnessMap.value=y.roughnessMap,t(y.roughnessMap,v.roughnessMapTransform)),e.get(y).envMap&&(v.envMapIntensity.value=y.envMapIntensity)}function f(v,y,w){v.ior.value=y.ior,y.sheen>0&&(v.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),v.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(v.sheenColorMap.value=y.sheenColorMap,t(y.sheenColorMap,v.sheenColorMapTransform)),y.sheenRoughnessMap&&(v.sheenRoughnessMap.value=y.sheenRoughnessMap,t(y.sheenRoughnessMap,v.sheenRoughnessMapTransform))),y.clearcoat>0&&(v.clearcoat.value=y.clearcoat,v.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(v.clearcoatMap.value=y.clearcoatMap,t(y.clearcoatMap,v.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,t(y.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(v.clearcoatNormalMap.value=y.clearcoatNormalMap,t(y.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===Xr&&v.clearcoatNormalScale.value.negate())),y.iridescence>0&&(v.iridescence.value=y.iridescence,v.iridescenceIOR.value=y.iridescenceIOR,v.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(v.iridescenceMap.value=y.iridescenceMap,t(y.iridescenceMap,v.iridescenceMapTransform)),y.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=y.iridescenceThicknessMap,t(y.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),y.transmission>0&&(v.transmission.value=y.transmission,v.transmissionSamplerMap.value=w.texture,v.transmissionSamplerSize.value.set(w.width,w.height),y.transmissionMap&&(v.transmissionMap.value=y.transmissionMap,t(y.transmissionMap,v.transmissionMapTransform)),v.thickness.value=y.thickness,y.thicknessMap&&(v.thicknessMap.value=y.thicknessMap,t(y.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=y.attenuationDistance,v.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(v.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(v.anisotropyMap.value=y.anisotropyMap,t(y.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=y.specularIntensity,v.specularColor.value.copy(y.specularColor),y.specularColorMap&&(v.specularColorMap.value=y.specularColorMap,t(y.specularColorMap,v.specularColorMapTransform)),y.specularIntensityMap&&(v.specularIntensityMap.value=y.specularIntensityMap,t(y.specularIntensityMap,v.specularIntensityMapTransform))}function p(v,y){y.matcap&&(v.matcap.value=y.matcap)}function x(v,y){const w=e.get(y).light;v.referencePosition.value.setFromMatrixPosition(w.matrixWorld),v.nearDistance.value=w.shadow.camera.near,v.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function USe(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(w,_){const b=_.program;i.uniformBlockBinding(w,b)}function c(w,_){let b=r[w.id];b===void 0&&(p(w),b=u(w),r[w.id]=b,w.addEventListener("dispose",v));const E=_.program;i.updateUBOMapping(w,E);const M=e.render.frame;s[w.id]!==M&&(d(w),s[w.id]=M)}function u(w){const _=h();w.__bindingPointIndex=_;const b=n.createBuffer(),E=w.__size,M=w.usage;return n.bindBuffer(n.UNIFORM_BUFFER,b),n.bufferData(n.UNIFORM_BUFFER,E,M),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,b),b}function h(){for(let w=0;w<a;w++)if(o.indexOf(w)===-1)return o.push(w),w;return 0}function d(w){const _=r[w.id],b=w.uniforms,E=w.__cache;n.bindBuffer(n.UNIFORM_BUFFER,_);for(let M=0,C=b.length;M<C;M++){const P=b[M];if(f(P,M,E)===!0){const T=P.__offset,I=Array.isArray(P.value)?P.value:[P.value];let U=0;for(let j=0;j<I.length;j++){const B=I[j],z=x(B);typeof B=="number"?(P.__data[0]=B,n.bufferSubData(n.UNIFORM_BUFFER,T+U,P.__data)):B.isMatrix3?(P.__data[0]=B.elements[0],P.__data[1]=B.elements[1],P.__data[2]=B.elements[2],P.__data[3]=B.elements[0],P.__data[4]=B.elements[3],P.__data[5]=B.elements[4],P.__data[6]=B.elements[5],P.__data[7]=B.elements[0],P.__data[8]=B.elements[6],P.__data[9]=B.elements[7],P.__data[10]=B.elements[8],P.__data[11]=B.elements[0]):(B.toArray(P.__data,U),U+=z.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,T,P.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(w,_,b){const E=w.value;if(b[_]===void 0){if(typeof E=="number")b[_]=E;else{const M=Array.isArray(E)?E:[E],C=[];for(let P=0;P<M.length;P++)C.push(M[P].clone());b[_]=C}return!0}else if(typeof E=="number"){if(b[_]!==E)return b[_]=E,!0}else{const M=Array.isArray(b[_])?b[_]:[b[_]],C=Array.isArray(E)?E:[E];for(let P=0;P<M.length;P++){const T=M[P];if(T.equals(C[P])===!1)return T.copy(C[P]),!0}}return!1}function p(w){const _=w.uniforms;let b=0;const E=16;let M=0;for(let C=0,P=_.length;C<P;C++){const T=_[C],I={boundary:0,storage:0},U=Array.isArray(T.value)?T.value:[T.value];for(let j=0,B=U.length;j<B;j++){const z=U[j],$=x(z);I.boundary+=$.boundary,I.storage+=$.storage}if(T.__data=new Float32Array(I.storage/Float32Array.BYTES_PER_ELEMENT),T.__offset=b,C>0){M=b%E;const j=E-M;M!==0&&j-I.boundary<0&&(b+=E-M,T.__offset=b)}b+=I.storage}return M=b%E,M>0&&(b+=E-M),w.__size=b,w.__cache={},this}function x(w){const _={boundary:0,storage:0};return typeof w=="number"?(_.boundary=4,_.storage=4):w.isVector2?(_.boundary=8,_.storage=8):w.isVector3||w.isColor?(_.boundary=16,_.storage=12):w.isVector4?(_.boundary=16,_.storage=16):w.isMatrix3?(_.boundary=48,_.storage=48):w.isMatrix4?(_.boundary=64,_.storage=64):w.isTexture,_}function v(w){const _=w.target;_.removeEventListener("dispose",v);const b=o.indexOf(_.__bindingPointIndex);o.splice(b,1),n.deleteBuffer(r[_.id]),delete r[_.id],delete s[_.id]}function y(){for(const w in r)n.deleteBuffer(r[w]);o=[],r={},s={}}return{bind:l,update:c,dispose:y}}function BSe(){const n=r0("canvas");return n.style.display="block",n}class BE{constructor(e={}){const{canvas:t=BSe(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let d;i!==null?d=i.getContextAttributes().alpha:d=o;const f=new Uint32Array(4),p=new Int32Array(4);let x=null,v=null;const y=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Ht,this.useLegacyLights=!0,this.toneMapping=Ma,this.toneMappingExposure=1;const _=this;let b=!1,E=0,M=0,C=null,P=-1,T=null;const I=new jt,U=new jt;let j=null;const B=new ht(0);let z=0,$=t.width,H=t.height,Z=1,O=null,W=null;const D=new jt(0,0,$,H),Y=new jt(0,0,$,H);let Q=!1;const re=new FE;let ce=!1,oe=!1,he=null;const Re=new dt,Oe=new Ue,Ve=new V,Je={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Fe(){return C===null?Z:1}let J=i;function ge(N,K){for(let te=0;te<N.length;te++){const ee=N[te],ie=t.getContext(ee,K);if(ie!==null)return ie}return null}try{const N={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${ef}`),t.addEventListener("webglcontextlost",be,!1),t.addEventListener("webglcontextrestored",Te,!1),t.addEventListener("webglcontextcreationerror",tt,!1),J===null){const K=["webgl2","webgl","experimental-webgl"];if(_.isWebGL1Renderer===!0&&K.shift(),J=ge(K,N),J===null)throw ge(K)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&J instanceof WebGLRenderingContext,J.getShaderPrecisionFormat===void 0&&(J.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(N){throw N}let de,Ae,Ie,me,ye,ke,Xe,Le,Ye,q,X,pe,_e,xe,Me,je,qe,Ne,Qe,$e,it,se,Se,Ze;function lt(){de=new ebe(J),Ae=new Y1e(J,de,e),de.init(Ae),se=new dX(J,de,Ae),Ie=new NSe(J,de,Ae),me=new ibe(J),ye=new wSe,ke=new kSe(J,de,Ie,ye,Ae,se,me),Xe=new Z1e(_),Le=new J1e(_),Ye=new f_e(J,Ae),Se=new $1e(J,de,Ye,Ae),q=new tbe(J,Ye,me,Se),X=new abe(J,q,Ye,me),Qe=new obe(J,Ae,ke),je=new q1e(ye),pe=new _Se(_,Xe,Le,de,Ae,Se,je),_e=new FSe(_,ye),xe=new SSe,Me=new PSe(de,Ae),Ne=new j1e(_,Xe,Le,Ie,X,d,l),qe=new LSe(_,X,Ae),Ze=new USe(J,me,Ae,Ie),$e=new X1e(J,de,me,Ae),it=new nbe(J,de,me,Ae),me.programs=pe.programs,_.capabilities=Ae,_.extensions=de,_.properties=ye,_.renderLists=xe,_.shadowMap=qe,_.state=Ie,_.info=me}lt();const le=new DSe(_,J);this.xr=le,this.getContext=function(){return J},this.getContextAttributes=function(){return J.getContextAttributes()},this.forceContextLoss=function(){const N=de.get("WEBGL_lose_context");N&&N.loseContext()},this.forceContextRestore=function(){const N=de.get("WEBGL_lose_context");N&&N.restoreContext()},this.getPixelRatio=function(){return Z},this.setPixelRatio=function(N){N!==void 0&&(Z=N,this.setSize($,H,!1))},this.getSize=function(N){return N.set($,H)},this.setSize=function(N,K,te=!0){le.isPresenting||($=N,H=K,t.width=Math.floor(N*Z),t.height=Math.floor(K*Z),te===!0&&(t.style.width=N+"px",t.style.height=K+"px"),this.setViewport(0,0,N,K))},this.getDrawingBufferSize=function(N){return N.set($*Z,H*Z).floor()},this.setDrawingBufferSize=function(N,K,te){$=N,H=K,Z=te,t.width=Math.floor(N*te),t.height=Math.floor(K*te),this.setViewport(0,0,N,K)},this.getCurrentViewport=function(N){return N.copy(I)},this.getViewport=function(N){return N.copy(D)},this.setViewport=function(N,K,te,ee){N.isVector4?D.set(N.x,N.y,N.z,N.w):D.set(N,K,te,ee),Ie.viewport(I.copy(D).multiplyScalar(Z).floor())},this.getScissor=function(N){return N.copy(Y)},this.setScissor=function(N,K,te,ee){N.isVector4?Y.set(N.x,N.y,N.z,N.w):Y.set(N,K,te,ee),Ie.scissor(U.copy(Y).multiplyScalar(Z).floor())},this.getScissorTest=function(){return Q},this.setScissorTest=function(N){Ie.setScissorTest(Q=N)},this.setOpaqueSort=function(N){O=N},this.setTransparentSort=function(N){W=N},this.getClearColor=function(N){return N.copy(Ne.getClearColor())},this.setClearColor=function(){Ne.setClearColor.apply(Ne,arguments)},this.getClearAlpha=function(){return Ne.getClearAlpha()},this.setClearAlpha=function(){Ne.setClearAlpha.apply(Ne,arguments)},this.clear=function(N=!0,K=!0,te=!0){let ee=0;if(N){let ie=!1;if(C!==null){const we=C.texture.format;ie=we===jk||we===Gk||we===Vk}if(ie){const we=C.texture.type,Ce=we===Ks||we===fl||we===NE||we===Lu||we===zk||we===Hk,He=Ne.getClearColor(),We=Ne.getClearAlpha(),Ge=He.r,Be=He.g,gt=He.b;Ce?(f[0]=Ge,f[1]=Be,f[2]=gt,f[3]=We,J.clearBufferuiv(J.COLOR,0,f)):(p[0]=Ge,p[1]=Be,p[2]=gt,p[3]=We,J.clearBufferiv(J.COLOR,0,p))}else ee|=J.COLOR_BUFFER_BIT}K&&(ee|=J.DEPTH_BUFFER_BIT),te&&(ee|=J.STENCIL_BUFFER_BIT),J.clear(ee)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",be,!1),t.removeEventListener("webglcontextrestored",Te,!1),t.removeEventListener("webglcontextcreationerror",tt,!1),xe.dispose(),Me.dispose(),ye.dispose(),Xe.dispose(),Le.dispose(),X.dispose(),Se.dispose(),Ze.dispose(),pe.dispose(),le.dispose(),le.removeEventListener("sessionstart",cn),le.removeEventListener("sessionend",Li),he&&(he.dispose(),he=null),zi.stop()};function be(N){N.preventDefault(),b=!0}function Te(){b=!1;const N=me.autoReset,K=qe.enabled,te=qe.autoUpdate,ee=qe.needsUpdate,ie=qe.type;lt(),me.autoReset=N,qe.enabled=K,qe.autoUpdate=te,qe.needsUpdate=ee,qe.type=ie}function tt(N){}function at(N){const K=N.target;K.removeEventListener("dispose",at),kt(K)}function kt(N){en(N),ye.remove(N)}function en(N){const K=ye.get(N).programs;K!==void 0&&(K.forEach(function(te){pe.releaseProgram(te)}),N.isShaderMaterial&&pe.releaseShaderCache(N))}this.renderBufferDirect=function(N,K,te,ee,ie,we){K===null&&(K=Je);const Ce=ie.isMesh&&ie.matrixWorld.determinant()<0,He=cf(N,K,te,ee,ie);Ie.setMaterial(ee,Ce);let We=te.index,Ge=1;ee.wireframe===!0&&(We=q.getWireframeAttribute(te),Ge=2);const Be=te.drawRange,gt=te.attributes.position;let nt=Be.start*Ge,ot=(Be.start+Be.count)*Ge;we!==null&&(nt=Math.max(nt,we.start*Ge),ot=Math.min(ot,(we.start+we.count)*Ge)),We!==null?(nt=Math.max(nt,0),ot=Math.min(ot,We.count)):gt!=null&&(nt=Math.max(nt,0),ot=Math.min(ot,gt.count));const At=ot-nt;if(At<0||At===1/0)return;Se.setup(ie,ee,He,te,We);let Rt,Ct=$e;if(We!==null&&(Rt=Ye.get(We),Ct=it,Ct.setIndex(Rt)),ie.isMesh)ee.wireframe===!0?(Ie.setLineWidth(ee.wireframeLinewidth*Fe()),Ct.setMode(J.LINES)):Ct.setMode(J.TRIANGLES);else if(ie.isLine){let yt=ee.linewidth;yt===void 0&&(yt=1),Ie.setLineWidth(yt*Fe()),ie.isLineSegments?Ct.setMode(J.LINES):ie.isLineLoop?Ct.setMode(J.LINE_LOOP):Ct.setMode(J.LINE_STRIP)}else ie.isPoints?Ct.setMode(J.POINTS):ie.isSprite&&Ct.setMode(J.TRIANGLES);if(ie.isInstancedMesh)Ct.renderInstances(nt,At,ie.count);else if(te.isInstancedBufferGeometry){const yt=te._maxInstanceCount!==void 0?te._maxInstanceCount:1/0,Nt=Math.min(te.instanceCount,yt);Ct.renderInstances(nt,At,Nt)}else Ct.render(nt,At)},this.compile=function(N,K){function te(ee,ie,we){ee.transparent===!0&&ee.side===cr&&ee.forceSinglePass===!1?(ee.side=Xr,ee.needsUpdate=!0,Ir(ee,ie,we),ee.side=Wo,ee.needsUpdate=!0,Ir(ee,ie,we),ee.side=cr):Ir(ee,ie,we)}v=Me.get(N),v.init(),w.push(v),N.traverseVisible(function(ee){ee.isLight&&ee.layers.test(K.layers)&&(v.pushLight(ee),ee.castShadow&&v.pushShadow(ee))}),v.setupLights(_.useLegacyLights),N.traverse(function(ee){const ie=ee.material;if(ie)if(Array.isArray(ie))for(let we=0;we<ie.length;we++){const Ce=ie[we];te(Ce,N,ee)}else te(ie,N,ee)}),w.pop(),v=null};let Ln=null;function Ei(N){Ln&&Ln(N)}function cn(){zi.stop()}function Li(){zi.start()}const zi=new aX;zi.setAnimationLoop(Ei),typeof self<"u"&&zi.setContext(self),this.setAnimationLoop=function(N){Ln=N,le.setAnimationLoop(N),N===null?zi.stop():zi.start()},le.addEventListener("sessionstart",cn),le.addEventListener("sessionend",Li),this.render=function(N,K){if(K!==void 0&&K.isCamera!==!0||b===!0)return;N.matrixWorldAutoUpdate===!0&&N.updateMatrixWorld(),K.parent===null&&K.matrixWorldAutoUpdate===!0&&K.updateMatrixWorld(),le.enabled===!0&&le.isPresenting===!0&&(le.cameraAutoUpdate===!0&&le.updateCamera(K),K=le.getCamera()),N.isScene===!0&&N.onBeforeRender(_,N,K,C),v=Me.get(N,w.length),v.init(),w.push(v),Re.multiplyMatrices(K.projectionMatrix,K.matrixWorldInverse),re.setFromProjectionMatrix(Re),oe=this.localClippingEnabled,ce=je.init(this.clippingPlanes,oe),x=xe.get(N,y.length),x.init(),y.push(x),af(N,K,0,_.sortObjects),x.finish(),_.sortObjects===!0&&x.sort(O,W),this.info.render.frame++,ce===!0&&je.beginShadows();const te=v.state.shadowsArray;if(qe.render(te,N,K),ce===!0&&je.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ne.render(x,N),v.setupLights(_.useLegacyLights),K.isArrayCamera){const ee=K.cameras;for(let ie=0,we=ee.length;ie<we;ie++){const Ce=ee[ie];lf(x,N,Ce,Ce.viewport)}}else lf(x,N,K);C!==null&&(ke.updateMultisampleRenderTarget(C),ke.updateRenderTargetMipmap(C)),N.isScene===!0&&N.onAfterRender(_,N,K),Se.resetDefaultState(),P=-1,T=null,w.pop(),w.length>0?v=w[w.length-1]:v=null,y.pop(),y.length>0?x=y[y.length-1]:x=null};function af(N,K,te,ee){if(N.visible===!1)return;if(N.layers.test(K.layers)){if(N.isGroup)te=N.renderOrder;else if(N.isLOD)N.autoUpdate===!0&&N.update(K);else if(N.isLight)v.pushLight(N),N.castShadow&&v.pushShadow(N);else if(N.isSprite){if(!N.frustumCulled||re.intersectsSprite(N)){ee&&Ve.setFromMatrixPosition(N.matrixWorld).applyMatrix4(Re);const Ce=X.update(N),He=N.material;He.visible&&x.push(N,Ce,He,te,Ve.z,null)}}else if((N.isMesh||N.isLine||N.isPoints)&&(!N.frustumCulled||re.intersectsObject(N))){const Ce=X.update(N),He=N.material;if(ee&&(N.boundingSphere!==void 0?(N.boundingSphere===null&&N.computeBoundingSphere(),Ve.copy(N.boundingSphere.center)):(Ce.boundingSphere===null&&Ce.computeBoundingSphere(),Ve.copy(Ce.boundingSphere.center)),Ve.applyMatrix4(N.matrixWorld).applyMatrix4(Re)),Array.isArray(He)){const We=Ce.groups;for(let Ge=0,Be=We.length;Ge<Be;Ge++){const gt=We[Ge],nt=He[gt.materialIndex];nt&&nt.visible&&x.push(N,Ce,nt,te,Ve.z,gt)}}else He.visible&&x.push(N,Ce,He,te,Ve.z,null)}}const we=N.children;for(let Ce=0,He=we.length;Ce<He;Ce++)af(we[Ce],K,te,ee)}function lf(N,K,te,ee){const ie=N.opaque,we=N.transmissive,Ce=N.transparent;v.setupLightsView(te),ce===!0&&je.setGlobalState(_.clippingPlanes,te),we.length>0&&kl(ie,we,K,te),ee&&Ie.viewport(I.copy(ee)),ie.length>0&&Ba(ie,K,te),we.length>0&&Ba(we,K,te),Ce.length>0&&Ba(Ce,K,te),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function kl(N,K,te,ee){const ie=Ae.isWebGL2;he===null&&(he=new no(1,1,{generateMipmaps:!0,type:de.has("EXT_color_buffer_half_float")?hr:Ks,minFilter:ju,samples:ie?4:0})),_.getDrawingBufferSize(Oe),ie?he.setSize(Oe.x,Oe.y):he.setSize(vS(Oe.x),vS(Oe.y));const we=_.getRenderTarget();_.setRenderTarget(he),_.getClearColor(B),z=_.getClearAlpha(),z<1&&_.setClearColor(16777215,.5),_.clear();const Ce=_.toneMapping;_.toneMapping=Ma,Ba(N,te,ee),ke.updateMultisampleRenderTarget(he),ke.updateRenderTargetMipmap(he);let He=!1;for(let We=0,Ge=K.length;We<Ge;We++){const Be=K[We],gt=Be.object,nt=Be.geometry,ot=Be.material,At=Be.group;if(ot.side===cr&&gt.layers.test(ee.layers)){const Rt=ot.side;ot.side=Xr,ot.needsUpdate=!0,za(gt,te,ee,nt,ot,At),ot.side=Rt,ot.needsUpdate=!0,He=!0}}He===!0&&(ke.updateMultisampleRenderTarget(he),ke.updateRenderTargetMipmap(he)),_.setRenderTarget(we),_.setClearColor(B,z),_.toneMapping=Ce}function Ba(N,K,te){const ee=K.isScene===!0?K.overrideMaterial:null;for(let ie=0,we=N.length;ie<we;ie++){const Ce=N[ie],He=Ce.object,We=Ce.geometry,Ge=ee===null?Ce.material:ee,Be=Ce.group;He.layers.test(te.layers)&&za(He,K,te,We,Ge,Be)}}function za(N,K,te,ee,ie,we){N.onBeforeRender(_,K,te,ee,ie,we),N.modelViewMatrix.multiplyMatrices(te.matrixWorldInverse,N.matrixWorld),N.normalMatrix.getNormalMatrix(N.modelViewMatrix),ie.onBeforeRender(_,K,te,ee,N,we),ie.transparent===!0&&ie.side===cr&&ie.forceSinglePass===!1?(ie.side=Xr,ie.needsUpdate=!0,_.renderBufferDirect(te,K,ee,ie,N,we),ie.side=Wo,ie.needsUpdate=!0,_.renderBufferDirect(te,K,ee,ie,N,we),ie.side=cr):_.renderBufferDirect(te,K,ee,ie,N,we),N.onAfterRender(_,K,te,ee,ie,we)}function Ir(N,K,te){K.isScene!==!0&&(K=Je);const ee=ye.get(N),ie=v.state.lights,we=v.state.shadowsArray,Ce=ie.state.version,He=pe.getParameters(N,ie.state,we,K,te),We=pe.getProgramCacheKey(He);let Ge=ee.programs;ee.environment=N.isMeshStandardMaterial?K.environment:null,ee.fog=K.fog,ee.envMap=(N.isMeshStandardMaterial?Le:Xe).get(N.envMap||ee.environment),Ge===void 0&&(N.addEventListener("dispose",at),Ge=new Map,ee.programs=Ge);let Be=Ge.get(We);if(Be!==void 0){if(ee.currentProgram===Be&&ee.lightsStateVersion===Ce)return Zt(N,He),Be}else He.uniforms=pe.getUniforms(N),N.onBuild(te,He,_),N.onBeforeCompile(He,_),Be=pe.acquireProgram(He,We),Ge.set(We,Be),ee.uniforms=He.uniforms;const gt=ee.uniforms;(!N.isShaderMaterial&&!N.isRawShaderMaterial||N.clipping===!0)&&(gt.clippingPlanes=je.uniform),Zt(N,He),ee.needsLights=G(N),ee.lightsStateVersion=Ce,ee.needsLights&&(gt.ambientLightColor.value=ie.state.ambient,gt.lightProbe.value=ie.state.probe,gt.directionalLights.value=ie.state.directional,gt.directionalLightShadows.value=ie.state.directionalShadow,gt.spotLights.value=ie.state.spot,gt.spotLightShadows.value=ie.state.spotShadow,gt.rectAreaLights.value=ie.state.rectArea,gt.ltc_1.value=ie.state.rectAreaLTC1,gt.ltc_2.value=ie.state.rectAreaLTC2,gt.pointLights.value=ie.state.point,gt.pointLightShadows.value=ie.state.pointShadow,gt.hemisphereLights.value=ie.state.hemi,gt.directionalShadowMap.value=ie.state.directionalShadowMap,gt.directionalShadowMatrix.value=ie.state.directionalShadowMatrix,gt.spotShadowMap.value=ie.state.spotShadowMap,gt.spotLightMatrix.value=ie.state.spotLightMatrix,gt.spotLightMap.value=ie.state.spotLightMap,gt.pointShadowMap.value=ie.state.pointShadowMap,gt.pointShadowMatrix.value=ie.state.pointShadowMatrix);const nt=Be.getUniforms(),ot=eb.seqWithValue(nt.seq,gt);return ee.currentProgram=Be,ee.uniformsList=ot,Be}function Zt(N,K){const te=ye.get(N);te.outputColorSpace=K.outputColorSpace,te.instancing=K.instancing,te.skinning=K.skinning,te.morphTargets=K.morphTargets,te.morphNormals=K.morphNormals,te.morphColors=K.morphColors,te.morphTargetsCount=K.morphTargetsCount,te.numClippingPlanes=K.numClippingPlanes,te.numIntersection=K.numClipIntersection,te.vertexAlphas=K.vertexAlphas,te.vertexTangents=K.vertexTangents,te.toneMapping=K.toneMapping}function cf(N,K,te,ee,ie){K.isScene!==!0&&(K=Je),ke.resetTextureUnits();const we=K.fog,Ce=ee.isMeshStandardMaterial?K.environment:null,He=C===null?_.outputColorSpace:C.isXRRenderTarget===!0?C.texture.colorSpace:Rs,We=(ee.isMeshStandardMaterial?Le:Xe).get(ee.envMap||Ce),Ge=ee.vertexColors===!0&&!!te.attributes.color&&te.attributes.color.itemSize===4,Be=!!te.attributes.tangent&&(!!ee.normalMap||ee.anisotropy>0),gt=!!te.morphAttributes.position,nt=!!te.morphAttributes.normal,ot=!!te.morphAttributes.color,At=ee.toneMapped?_.toneMapping:Ma,Rt=te.morphAttributes.position||te.morphAttributes.normal||te.morphAttributes.color,Ct=Rt!==void 0?Rt.length:0,yt=ye.get(ee),Nt=v.state.lights;if(ce===!0&&(oe===!0||N!==T)){const zt=N===T&&ee.id===P;je.setState(ee,N,zt)}let St=!1;ee.version===yt.__version?(yt.needsLights&&yt.lightsStateVersion!==Nt.state.version||yt.outputColorSpace!==He||ie.isInstancedMesh&&yt.instancing===!1||!ie.isInstancedMesh&&yt.instancing===!0||ie.isSkinnedMesh&&yt.skinning===!1||!ie.isSkinnedMesh&&yt.skinning===!0||yt.envMap!==We||ee.fog===!0&&yt.fog!==we||yt.numClippingPlanes!==void 0&&(yt.numClippingPlanes!==je.numPlanes||yt.numIntersection!==je.numIntersection)||yt.vertexAlphas!==Ge||yt.vertexTangents!==Be||yt.morphTargets!==gt||yt.morphNormals!==nt||yt.morphColors!==ot||yt.toneMapping!==At||Ae.isWebGL2===!0&&yt.morphTargetsCount!==Ct)&&(St=!0):(St=!0,yt.__version=ee.version);let Wt=yt.currentProgram;St===!0&&(Wt=Ir(ee,K,ie));let Tn=!1,Dt=!1,An=!1;const pn=Wt.getUniforms(),Nn=yt.uniforms;if(Ie.useProgram(Wt.program)&&(Tn=!0,Dt=!0,An=!0),ee.id!==P&&(P=ee.id,Dt=!0),Tn||T!==N){if(pn.setValue(J,"projectionMatrix",N.projectionMatrix),Ae.logarithmicDepthBuffer&&pn.setValue(J,"logDepthBufFC",2/(Math.log(N.far+1)/Math.LN2)),T!==N&&(T=N,Dt=!0,An=!0),ee.isShaderMaterial||ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshStandardMaterial||ee.envMap){const zt=pn.map.cameraPosition;zt!==void 0&&zt.setValue(J,Ve.setFromMatrixPosition(N.matrixWorld))}(ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshLambertMaterial||ee.isMeshBasicMaterial||ee.isMeshStandardMaterial||ee.isShaderMaterial)&&pn.setValue(J,"isOrthographic",N.isOrthographicCamera===!0),(ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshLambertMaterial||ee.isMeshBasicMaterial||ee.isMeshStandardMaterial||ee.isShaderMaterial||ee.isShadowMaterial||ie.isSkinnedMesh)&&pn.setValue(J,"viewMatrix",N.matrixWorldInverse)}if(ie.isSkinnedMesh){pn.setOptional(J,ie,"bindMatrix"),pn.setOptional(J,ie,"bindMatrixInverse");const zt=ie.skeleton;zt&&Ae.floatVertexTextures&&(zt.boneTexture===null&&zt.computeBoneTexture(),pn.setValue(J,"boneTexture",zt.boneTexture,ke),pn.setValue(J,"boneTextureSize",zt.boneTextureSize))}const Mi=te.morphAttributes;if((Mi.position!==void 0||Mi.normal!==void 0||Mi.color!==void 0&&Ae.isWebGL2===!0)&&Qe.update(ie,te,Wt),(Dt||yt.receiveShadow!==ie.receiveShadow)&&(yt.receiveShadow=ie.receiveShadow,pn.setValue(J,"receiveShadow",ie.receiveShadow)),ee.isMeshGouraudMaterial&&ee.envMap!==null&&(Nn.envMap.value=We,Nn.flipEnvMap.value=We.isCubeTexture&&We.isRenderTargetTexture===!1?-1:1),Dt&&(pn.setValue(J,"toneMappingExposure",_.toneMappingExposure),yt.needsLights&&yg(Nn,An),we&&ee.fog===!0&&_e.refreshFogUniforms(Nn,we),_e.refreshMaterialUniforms(Nn,ee,Z,H,he),eb.upload(J,yt.uniformsList,Nn,ke)),ee.isShaderMaterial&&ee.uniformsNeedUpdate===!0&&(eb.upload(J,yt.uniformsList,Nn,ke),ee.uniformsNeedUpdate=!1),ee.isSpriteMaterial&&pn.setValue(J,"center",ie.center),pn.setValue(J,"modelViewMatrix",ie.modelViewMatrix),pn.setValue(J,"normalMatrix",ie.normalMatrix),pn.setValue(J,"modelMatrix",ie.matrixWorld),ee.isShaderMaterial||ee.isRawShaderMaterial){const zt=ee.uniformsGroups;for(let ai=0,wn=zt.length;ai<wn;ai++)if(Ae.isWebGL2){const an=zt[ai];Ze.update(an,Wt),Ze.bind(an,Wt)}}return Wt}function yg(N,K){N.ambientLightColor.needsUpdate=K,N.lightProbe.needsUpdate=K,N.directionalLights.needsUpdate=K,N.directionalLightShadows.needsUpdate=K,N.pointLights.needsUpdate=K,N.pointLightShadows.needsUpdate=K,N.spotLights.needsUpdate=K,N.spotLightShadows.needsUpdate=K,N.rectAreaLights.needsUpdate=K,N.hemisphereLights.needsUpdate=K}function G(N){return N.isMeshLambertMaterial||N.isMeshToonMaterial||N.isMeshPhongMaterial||N.isMeshStandardMaterial||N.isShadowMaterial||N.isShaderMaterial&&N.lights===!0}this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(N,K,te){ye.get(N.texture).__webglTexture=K,ye.get(N.depthTexture).__webglTexture=te;const ee=ye.get(N);ee.__hasExternalTextures=!0,ee.__hasExternalTextures&&(ee.__autoAllocateDepthBuffer=te===void 0,ee.__autoAllocateDepthBuffer||de.has("WEBGL_multisampled_render_to_texture")===!0&&(ee.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(N,K){const te=ye.get(N);te.__webglFramebuffer=K,te.__useDefaultFramebuffer=K===void 0},this.setRenderTarget=function(N,K=0,te=0){C=N,E=K,M=te;let ee=!0,ie=null,we=!1,Ce=!1;if(N){const We=ye.get(N);We.__useDefaultFramebuffer!==void 0?(Ie.bindFramebuffer(J.FRAMEBUFFER,null),ee=!1):We.__webglFramebuffer===void 0?ke.setupRenderTarget(N):We.__hasExternalTextures&&ke.rebindTextures(N,ye.get(N.texture).__webglTexture,ye.get(N.depthTexture).__webglTexture);const Ge=N.texture;(Ge.isData3DTexture||Ge.isDataArrayTexture||Ge.isCompressedArrayTexture)&&(Ce=!0);const Be=ye.get(N).__webglFramebuffer;N.isWebGLCubeRenderTarget?(ie=Be[K],we=!0):Ae.isWebGL2&&N.samples>0&&ke.useMultisampledRTT(N)===!1?ie=ye.get(N).__webglMultisampledFramebuffer:ie=Be,I.copy(N.viewport),U.copy(N.scissor),j=N.scissorTest}else I.copy(D).multiplyScalar(Z).floor(),U.copy(Y).multiplyScalar(Z).floor(),j=Q;if(Ie.bindFramebuffer(J.FRAMEBUFFER,ie)&&Ae.drawBuffers&&ee&&Ie.drawBuffers(N,ie),Ie.viewport(I),Ie.scissor(U),Ie.setScissorTest(j),we){const We=ye.get(N.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_CUBE_MAP_POSITIVE_X+K,We.__webglTexture,te)}else if(Ce){const We=ye.get(N.texture),Ge=K||0;J.framebufferTextureLayer(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,We.__webglTexture,te||0,Ge)}P=-1},this.readRenderTargetPixels=function(N,K,te,ee,ie,we,Ce){if(!(N&&N.isWebGLRenderTarget))return;let He=ye.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&&Ce!==void 0&&(He=He[Ce]),He){Ie.bindFramebuffer(J.FRAMEBUFFER,He);try{const We=N.texture,Ge=We.format,Be=We.type;if(Ge!==$i&&se.convert(Ge)!==J.getParameter(J.IMPLEMENTATION_COLOR_READ_FORMAT))return;const gt=Be===hr&&(de.has("EXT_color_buffer_half_float")||Ae.isWebGL2&&de.has("EXT_color_buffer_float"));if(Be!==Ks&&se.convert(Be)!==J.getParameter(J.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Be===ur&&(Ae.isWebGL2||de.has("OES_texture_float")||de.has("WEBGL_color_buffer_float")))&&!gt)return;K>=0&&K<=N.width-ee&&te>=0&&te<=N.height-ie&&J.readPixels(K,te,ee,ie,se.convert(Ge),se.convert(Be),we)}finally{const We=C!==null?ye.get(C).__webglFramebuffer:null;Ie.bindFramebuffer(J.FRAMEBUFFER,We)}}},this.copyFramebufferToTexture=function(N,K,te=0){const ee=Math.pow(2,-te),ie=Math.floor(K.image.width*ee),we=Math.floor(K.image.height*ee);ke.setTexture2D(K,0),J.copyTexSubImage2D(J.TEXTURE_2D,te,0,0,N.x,N.y,ie,we),Ie.unbindTexture()},this.copyTextureToTexture=function(N,K,te,ee=0){const ie=K.image.width,we=K.image.height,Ce=se.convert(te.format),He=se.convert(te.type);ke.setTexture2D(te,0),J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,te.flipY),J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),J.pixelStorei(J.UNPACK_ALIGNMENT,te.unpackAlignment),K.isDataTexture?J.texSubImage2D(J.TEXTURE_2D,ee,N.x,N.y,ie,we,Ce,He,K.image.data):K.isCompressedTexture?J.compressedTexSubImage2D(J.TEXTURE_2D,ee,N.x,N.y,K.mipmaps[0].width,K.mipmaps[0].height,Ce,K.mipmaps[0].data):J.texSubImage2D(J.TEXTURE_2D,ee,N.x,N.y,Ce,He,K.image),ee===0&&te.generateMipmaps&&J.generateMipmap(J.TEXTURE_2D),Ie.unbindTexture()},this.copyTextureToTexture3D=function(N,K,te,ee,ie=0){if(_.isWebGL1Renderer)return;const we=N.max.x-N.min.x+1,Ce=N.max.y-N.min.y+1,He=N.max.z-N.min.z+1,We=se.convert(ee.format),Ge=se.convert(ee.type);let Be;if(ee.isData3DTexture)ke.setTexture3D(ee,0),Be=J.TEXTURE_3D;else if(ee.isDataArrayTexture)ke.setTexture2DArray(ee,0),Be=J.TEXTURE_2D_ARRAY;else return;J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,ee.flipY),J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),J.pixelStorei(J.UNPACK_ALIGNMENT,ee.unpackAlignment);const gt=J.getParameter(J.UNPACK_ROW_LENGTH),nt=J.getParameter(J.UNPACK_IMAGE_HEIGHT),ot=J.getParameter(J.UNPACK_SKIP_PIXELS),At=J.getParameter(J.UNPACK_SKIP_ROWS),Rt=J.getParameter(J.UNPACK_SKIP_IMAGES),Ct=te.isCompressedTexture?te.mipmaps[0]:te.image;J.pixelStorei(J.UNPACK_ROW_LENGTH,Ct.width),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,Ct.height),J.pixelStorei(J.UNPACK_SKIP_PIXELS,N.min.x),J.pixelStorei(J.UNPACK_SKIP_ROWS,N.min.y),J.pixelStorei(J.UNPACK_SKIP_IMAGES,N.min.z),te.isDataTexture||te.isData3DTexture?J.texSubImage3D(Be,ie,K.x,K.y,K.z,we,Ce,He,We,Ge,Ct.data):te.isCompressedArrayTexture?J.compressedTexSubImage3D(Be,ie,K.x,K.y,K.z,we,Ce,He,We,Ct.data):J.texSubImage3D(Be,ie,K.x,K.y,K.z,we,Ce,He,We,Ge,Ct),J.pixelStorei(J.UNPACK_ROW_LENGTH,gt),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,nt),J.pixelStorei(J.UNPACK_SKIP_PIXELS,ot),J.pixelStorei(J.UNPACK_SKIP_ROWS,At),J.pixelStorei(J.UNPACK_SKIP_IMAGES,Rt),ie===0&&ee.generateMipmaps&&J.generateMipmap(Be),Ie.unbindTexture()},this.initTexture=function(N){N.isCubeTexture?ke.setTextureCube(N,0):N.isData3DTexture?ke.setTexture3D(N,0):N.isDataArrayTexture||N.isCompressedArrayTexture?ke.setTexture2DArray(N,0):ke.setTexture2D(N,0),Ie.unbindTexture()},this.resetState=function(){E=0,M=0,C=null,Ie.reset(),Se.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return pl}get physicallyCorrectLights(){return!this.useLegacyLights}set physicallyCorrectLights(e){this.useLegacyLights=!e}get outputEncoding(){return this.outputColorSpace===Ht?ku:Xk}set outputEncoding(e){this.outputColorSpace=e===ku?Ht:Rs}}class mX extends BE{}mX.prototype.isWebGL1Renderer=!0;class zE{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ht(e),this.density=t}clone(){return new zE(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class HE{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new ht(e),this.near=t,this.far=i}clone(){return new HE(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class km extends _n{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class WE{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=n0,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Qs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const es=new V;class Xs{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)es.fromBufferAttribute(this,t),es.applyMatrix4(e),this.setXYZ(t,es.x,es.y,es.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)es.fromBufferAttribute(this,t),es.applyNormalMatrix(e),this.setXYZ(t,es.x,es.y,es.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)es.fromBufferAttribute(this,t),es.transformDirection(e),this.setXYZ(t,es.x,es.y,es.z);return this}setX(e,t){return this.normalized&&(t=Qt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Qt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Qt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Qt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=$s(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=$s(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=$s(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=$s(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Qt(t,this.array),i=Qt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Qt(t,this.array),i=Qt(i,this.array),r=Qt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Qt(t,this.array),i=Qt(i,this.array),r=Qt(r,this.array),s=Qt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Mn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Xs(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class s3 extends Ki{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ht(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let qf;const ay=new V,Zf=new V,Kf=new V,Qf=new Ue,ly=new Ue,gX=new dt,pw=new V,cy=new V,mw=new V,Ez=new Ue,AC=new Ue,Mz=new Ue;class yX extends _n{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",qf===void 0){qf=new $t;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new WE(t,5);qf.setIndex([0,1,2,0,2,3]),qf.setAttribute("position",new Xs(i,3,0,!1)),qf.setAttribute("uv",new Xs(i,2,3,!1))}this.geometry=qf,this.material=e!==void 0?e:new s3,this.center=new Ue(.5,.5)}raycast(e,t){e.camera,Zf.setFromMatrixScale(this.matrixWorld),gX.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Kf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Zf.multiplyScalar(-Kf.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;gw(pw.set(-.5,-.5,0),Kf,o,Zf,r,s),gw(cy.set(.5,-.5,0),Kf,o,Zf,r,s),gw(mw.set(.5,.5,0),Kf,o,Zf,r,s),Ez.set(0,0),AC.set(1,0),Mz.set(1,1);let a=e.ray.intersectTriangle(pw,cy,mw,!1,ay);if(a===null&&(gw(cy.set(-.5,.5,0),Kf,o,Zf,r,s),AC.set(0,1),a=e.ray.intersectTriangle(pw,mw,cy,!1,ay),a===null))return;const l=e.ray.origin.distanceTo(ay);l<e.near||l>e.far||t.push({distance:l,point:ay.clone(),uv:Bn.getInterpolation(ay,pw,cy,mw,Ez,AC,Mz,new Ue),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function gw(n,e,t,i,r,s){Qf.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(ly.x=s*Qf.x-r*Qf.y,ly.y=r*Qf.x+s*Qf.y):ly.copy(Qf),n.copy(e),n.x+=ly.x,n.y+=ly.y,n.applyMatrix4(gX)}const yw=new V,Tz=new V;class vX extends _n{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){yw.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(yw);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){yw.setFromMatrixPosition(e.matrixWorld),Tz.setFromMatrixPosition(this.matrixWorld);const i=yw.distanceTo(Tz)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const Az=new V,Cz=new jt,Pz=new jt,zSe=new V,Rz=new dt,Jf=new V,CC=new Ns,Iz=new dt,PC=new Da;class xX extends oi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new dt,this.bindMatrixInverse=new dt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Yn),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Jf.fromBufferAttribute(t,i),this.applyBoneTransform(i,Jf),this.boundingBox.expandByPoint(Jf)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ns),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Jf.fromBufferAttribute(t,i),this.applyBoneTransform(i,Jf),this.boundingSphere.expandByPoint(Jf)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),CC.copy(this.boundingSphere),CC.applyMatrix4(r),e.ray.intersectsSphere(CC)!==!1&&(Iz.copy(r).invert(),PC.copy(e.ray).applyMatrix4(Iz),!(this.boundingBox!==null&&PC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,PC)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new jt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;Cz.fromBufferAttribute(r.attributes.skinIndex,e),Pz.fromBufferAttribute(r.attributes.skinWeight,e),Az.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=Pz.getComponent(s);if(o!==0){const a=Cz.getComponent(s);Rz.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(zSe.copy(Az).applyMatrix4(Rz),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return this.applyBoneTransform(e,t)}}class o3 extends _n{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Pd extends Rn{constructor(e=null,t=1,i=1,r,s,o,a,l,c=Ri,u=Ri,h,d){super(null,o,a,l,c,u,r,s,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Lz=new dt,HSe=new dt;class VE{constructor(e=[],t=[]){this.uuid=Qs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new dt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new dt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:HSe;Lz.multiplyMatrices(a,t[s]),Lz.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new VE(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=nX(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Pd(t,e,e,$i,ur);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(o=new o3),this.bones.push(o),this.boneInverses.push(new dt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Om extends Mn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ep=new dt,Nz=new dt,vw=[],kz=new Yn,WSe=new dt,uy=new oi,hy=new Ns;class _X extends oi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Om(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,WSe)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Yn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,ep),kz.copy(e.boundingBox).applyMatrix4(ep),this.boundingBox.union(kz)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ns),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,ep),hy.copy(e.boundingSphere).applyMatrix4(ep),this.boundingSphere.union(hy)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(uy.geometry=this.geometry,uy.material=this.material,uy.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),hy.copy(this.boundingSphere),hy.applyMatrix4(i),e.ray.intersectsSphere(hy)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,ep),Nz.multiplyMatrices(i,ep),uy.matrixWorld=Nz,uy.raycast(e,vw);for(let o=0,a=vw.length;o<a;o++){const l=vw[o];l.instanceId=s,l.object=this,t.push(l)}vw.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Om(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class pr extends Ki{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ht(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Oz=new V,Dz=new V,Fz=new dt,RC=new Da,xw=new Ns;let $u=class extends _n{constructor(e=new $t,t=new pr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)Oz.fromBufferAttribute(t,r-1),Dz.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Oz.distanceTo(Dz);e.setAttribute("lineDistance",new xt(i,1))}return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),xw.copy(i.boundingSphere),xw.applyMatrix4(r),xw.radius+=s,e.ray.intersectsSphere(xw)===!1)return;Fz.copy(r).invert(),RC.copy(e.ray).applyMatrix4(Fz);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new V,u=new V,h=new V,d=new V,f=this.isLineSegments?2:1,p=i.index,v=i.attributes.position;if(p!==null){const y=Math.max(0,o.start),w=Math.min(p.count,o.start+o.count);for(let _=y,b=w-1;_<b;_+=f){const E=p.getX(_),M=p.getX(_+1);if(c.fromBufferAttribute(v,E),u.fromBufferAttribute(v,M),RC.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(d);P<e.near||P>e.far||t.push({distance:P,point:h.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const y=Math.max(0,o.start),w=Math.min(v.count,o.start+o.count);for(let _=y,b=w-1;_<b;_+=f){if(c.fromBufferAttribute(v,_),u.fromBufferAttribute(v,_+1),RC.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(d);M<e.near||M>e.far||t.push({distance:M,point:h.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};const Uz=new V,Bz=new V;class Vo extends $u{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)Uz.fromBufferAttribute(t,r),Bz.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+Uz.distanceTo(Bz);e.setAttribute("lineDistance",new xt(i,1))}return this}}class wX extends $u{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class yd extends Ki{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ht(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const zz=new dt,MI=new Da,_w=new Ns,ww=new V;class fv extends _n{constructor(e=new $t,t=new yd){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),_w.copy(i.boundingSphere),_w.applyMatrix4(r),_w.radius+=s,e.ray.intersectsSphere(_w)===!1)return;zz.copy(r).invert(),MI.copy(e.ray).applyMatrix4(zz);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,h=i.attributes.position;if(c!==null){const d=Math.max(0,o.start),f=Math.min(c.count,o.start+o.count);for(let p=d,x=f;p<x;p++){const v=c.getX(p);ww.fromBufferAttribute(h,v),Hz(ww,v,l,r,e,t,this)}}else{const d=Math.max(0,o.start),f=Math.min(h.count,o.start+o.count);for(let p=d,x=f;p<x;p++)ww.fromBufferAttribute(h,p),Hz(ww,p,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Hz(n,e,t,i,r,s,o){const a=MI.distanceSqToPoint(n);if(a<t){const l=new V;MI.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class VSe extends Rn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:En,this.magFilter=s!==void 0?s:En,this.generateMipmaps=!1;const u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class GSe extends Rn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ri,this.minFilter=Ri,this.generateMipmaps=!1,this.needsUpdate=!0}}class a3 extends Rn{constructor(e,t,i,r,s,o,a,l,c,u,h,d){super(null,o,a,l,c,u,r,s,h,d),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class jSe extends a3{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=si}}class $Se extends Rn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Fa{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const u=i[r],d=i[r+1]-u,f=(o-u)/d;return(r+f)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Ue:new V);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new V,r=[],s=[],o=[],a=new V,l=new dt;for(let f=0;f<=e;f++){const p=f/e;r[f]=this.getTangentAt(p,new V)}s[0]=new V,o[0]=new V;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),h=Math.abs(r[0].y),d=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),h<=c&&(c=h,i.set(0,1,0)),d<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(Si(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,p))}o[f].crossVectors(r[f],s[f])}if(t===!0){let f=Math.acos(Si(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],f*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class GE extends Fa{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new Ue,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=l-this.aX,f=c-this.aY;l=d*u-f*h+this.aX,c=d*h+f*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class bX extends GE{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function l3(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,h){let d=(o-s)/c-(a-s)/(c+u)+(a-o)/u,f=(a-o)/u-(l-o)/(u+h)+(l-a)/h;d*=u,f*=u,r(o,a,d,f)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const bw=new V,IC=new l3,LC=new l3,NC=new l3;class SX extends Fa{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new V){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(bw.subVectors(r[0],r[1]).add(r[0]),c=bw);const h=r[a%s],d=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(bw.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=bw),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let p=Math.pow(c.distanceToSquared(h),f),x=Math.pow(h.distanceToSquared(d),f),v=Math.pow(d.distanceToSquared(u),f);x<1e-4&&(x=1),p<1e-4&&(p=x),v<1e-4&&(v=x),IC.initNonuniformCatmullRom(c.x,h.x,d.x,u.x,p,x,v),LC.initNonuniformCatmullRom(c.y,h.y,d.y,u.y,p,x,v),NC.initNonuniformCatmullRom(c.z,h.z,d.z,u.z,p,x,v)}else this.curveType==="catmullrom"&&(IC.initCatmullRom(c.x,h.x,d.x,u.x,this.tension),LC.initCatmullRom(c.y,h.y,d.y,u.y,this.tension),NC.initCatmullRom(c.z,h.z,d.z,u.z,this.tension));return i.set(IC.calc(l),LC.calc(l),NC.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new V().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Wz(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function XSe(n,e){const t=1-n;return t*t*e}function YSe(n,e){return 2*(1-n)*n*e}function qSe(n,e){return n*n*e}function pv(n,e,t,i){return XSe(n,e)+YSe(n,t)+qSe(n,i)}function ZSe(n,e){const t=1-n;return t*t*t*e}function KSe(n,e){const t=1-n;return 3*t*t*n*e}function QSe(n,e){return 3*(1-n)*n*n*e}function JSe(n,e){return n*n*n*e}function mv(n,e,t,i,r){return ZSe(n,e)+KSe(n,t)+QSe(n,i)+JSe(n,r)}class c3 extends Fa{constructor(e=new Ue,t=new Ue,i=new Ue,r=new Ue){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ue){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(mv(e,r.x,s.x,o.x,a.x),mv(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class EX extends Fa{constructor(e=new V,t=new V,i=new V,r=new V){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new V){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(mv(e,r.x,s.x,o.x,a.x),mv(e,r.y,s.y,o.y,a.y),mv(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class jE extends Fa{constructor(e=new Ue,t=new Ue){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ue){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ue){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class MX extends Fa{constructor(e=new V,t=new V){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new V){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new V){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class u3 extends Fa{constructor(e=new Ue,t=new Ue,i=new Ue){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ue){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(pv(e,r.x,s.x,o.x),pv(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class h3 extends Fa{constructor(e=new V,t=new V,i=new V){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new V){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(pv(e,r.x,s.x,o.x),pv(e,r.y,s.y,o.y),pv(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class d3 extends Fa{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ue){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return i.set(Wz(a,l.x,c.x,u.x,h.x),Wz(a,l.y,c.y,u.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Ue().fromArray(r))}return this}}var f3=Object.freeze({__proto__:null,ArcCurve:bX,CatmullRomCurve3:SX,CubicBezierCurve:c3,CubicBezierCurve3:EX,EllipseCurve:GE,LineCurve:jE,LineCurve3:MX,QuadraticBezierCurve:u3,QuadraticBezierCurve3:h3,SplineCurve:d3});class TX extends Fa{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new jE(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new f3[r.type]().fromJSON(r))}return this}}class s0 extends TX{constructor(e){super(),this.type="Path",this.currentPoint=new Ue,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new jE(this.currentPoint.clone(),new Ue(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new u3(this.currentPoint.clone(),new Ue(e,t),new Ue(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new c3(this.currentPoint.clone(),new Ue(e,t),new Ue(i,r),new Ue(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new d3(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new GE(e,t,i,r,s,o,a,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class G0 extends $t{constructor(e=[new Ue(0,-.5),new Ue(.5,0),new Ue(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Si(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,h=new V,d=new Ue,f=new V,p=new V,x=new V;let v=0,y=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:v=e[w+1].x-e[w].x,y=e[w+1].y-e[w].y,f.x=y*1,f.y=-v,f.z=y*0,x.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:v=e[w+1].x-e[w].x,y=e[w+1].y-e[w].y,f.x=y*1,f.y=-v,f.z=y*0,p.copy(f),f.x+=x.x,f.y+=x.y,f.z+=x.z,f.normalize(),l.push(f.x,f.y,f.z),x.copy(p)}for(let w=0;w<=t;w++){const _=i+w*u*r,b=Math.sin(_),E=Math.cos(_);for(let M=0;M<=e.length-1;M++){h.x=e[M].x*b,h.y=e[M].y,h.z=e[M].x*E,o.push(h.x,h.y,h.z),d.x=w/t,d.y=M/(e.length-1),a.push(d.x,d.y);const C=l[3*M+0]*b,P=l[3*M+1],T=l[3*M+0]*E;c.push(C,P,T)}}for(let w=0;w<t;w++)for(let _=0;_<e.length-1;_++){const b=_+w*e.length,E=b,M=b+e.length,C=b+e.length+1,P=b+1;s.push(E,M,P),s.push(C,P,M)}this.setIndex(s),this.setAttribute("position",new xt(o,3)),this.setAttribute("uv",new xt(a,2)),this.setAttribute("normal",new xt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new G0(e.points,e.segments,e.phiStart,e.phiLength)}}class $E extends G0{constructor(e=1,t=1,i=4,r=8){const s=new s0;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new $E(e.radius,e.length,e.capSegments,e.radialSegments)}}class XE extends $t{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new V,u=new Ue;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,d=3;h<=t;h++,d+=3){const f=i+h/t*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[d]/e+1)/2,u.y=(o[d+1]/e+1)/2,l.push(u.x,u.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new xt(o,3)),this.setAttribute("normal",new xt(a,3)),this.setAttribute("uv",new xt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new XE(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class nf extends $t{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],h=[],d=[],f=[];let p=0;const x=[],v=i/2;let y=0;w(),o===!1&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(u),this.setAttribute("position",new xt(h,3)),this.setAttribute("normal",new xt(d,3)),this.setAttribute("uv",new xt(f,2));function w(){const b=new V,E=new V;let M=0;const C=(t-e)/i;for(let P=0;P<=s;P++){const T=[],I=P/s,U=I*(t-e)+e;for(let j=0;j<=r;j++){const B=j/r,z=B*l+a,$=Math.sin(z),H=Math.cos(z);E.x=U*$,E.y=-I*i+v,E.z=U*H,h.push(E.x,E.y,E.z),b.set($,C,H).normalize(),d.push(b.x,b.y,b.z),f.push(B,1-I),T.push(p++)}x.push(T)}for(let P=0;P<r;P++)for(let T=0;T<s;T++){const I=x[T][P],U=x[T+1][P],j=x[T+1][P+1],B=x[T][P+1];u.push(I,U,B),u.push(U,j,B),M+=6}c.addGroup(y,M,0),y+=M}function _(b){const E=p,M=new Ue,C=new V;let P=0;const T=b===!0?e:t,I=b===!0?1:-1;for(let j=1;j<=r;j++)h.push(0,v*I,0),d.push(0,I,0),f.push(.5,.5),p++;const U=p;for(let j=0;j<=r;j++){const z=j/r*l+a,$=Math.cos(z),H=Math.sin(z);C.x=T*H,C.y=v*I,C.z=T*$,h.push(C.x,C.y,C.z),d.push(0,I,0),M.x=$*.5+.5,M.y=H*.5*I+.5,f.push(M.x,M.y),p++}for(let j=0;j<r;j++){const B=E+j,z=U+j;b===!0?u.push(z,z+1,B):u.push(z+1,z,B),P+=3}c.addGroup(y,P,b===!0?1:2),y+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class YE extends nf{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new YE(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class oh extends $t{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),u(),this.setAttribute("position",new xt(s,3)),this.setAttribute("normal",new xt(s.slice(),3)),this.setAttribute("uv",new xt(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(w){const _=new V,b=new V,E=new V;for(let M=0;M<t.length;M+=3)f(t[M+0],_),f(t[M+1],b),f(t[M+2],E),l(_,b,E,w)}function l(w,_,b,E){const M=E+1,C=[];for(let P=0;P<=M;P++){C[P]=[];const T=w.clone().lerp(b,P/M),I=_.clone().lerp(b,P/M),U=M-P;for(let j=0;j<=U;j++)j===0&&P===M?C[P][j]=T:C[P][j]=T.clone().lerp(I,j/U)}for(let P=0;P<M;P++)for(let T=0;T<2*(M-P)-1;T++){const I=Math.floor(T/2);T%2===0?(d(C[P][I+1]),d(C[P+1][I]),d(C[P][I])):(d(C[P][I+1]),d(C[P+1][I+1]),d(C[P+1][I]))}}function c(w){const _=new V;for(let b=0;b<s.length;b+=3)_.x=s[b+0],_.y=s[b+1],_.z=s[b+2],_.normalize().multiplyScalar(w),s[b+0]=_.x,s[b+1]=_.y,s[b+2]=_.z}function u(){const w=new V;for(let _=0;_<s.length;_+=3){w.x=s[_+0],w.y=s[_+1],w.z=s[_+2];const b=v(w)/2/Math.PI+.5,E=y(w)/Math.PI+.5;o.push(b,1-E)}p(),h()}function h(){for(let w=0;w<o.length;w+=6){const _=o[w+0],b=o[w+2],E=o[w+4],M=Math.max(_,b,E),C=Math.min(_,b,E);M>.9&&C<.1&&(_<.2&&(o[w+0]+=1),b<.2&&(o[w+2]+=1),E<.2&&(o[w+4]+=1))}}function d(w){s.push(w.x,w.y,w.z)}function f(w,_){const b=w*3;_.x=e[b+0],_.y=e[b+1],_.z=e[b+2]}function p(){const w=new V,_=new V,b=new V,E=new V,M=new Ue,C=new Ue,P=new Ue;for(let T=0,I=0;T<s.length;T+=9,I+=6){w.set(s[T+0],s[T+1],s[T+2]),_.set(s[T+3],s[T+4],s[T+5]),b.set(s[T+6],s[T+7],s[T+8]),M.set(o[I+0],o[I+1]),C.set(o[I+2],o[I+3]),P.set(o[I+4],o[I+5]),E.copy(w).add(_).add(b).divideScalar(3);const U=v(E);x(M,I+0,w,U),x(C,I+2,_,U),x(P,I+4,b,U)}}function x(w,_,b,E){E<0&&w.x===1&&(o[_]=w.x-1),b.x===0&&b.z===0&&(o[_]=E/2/Math.PI+.5)}function v(w){return Math.atan2(w.z,-w.x)}function y(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new oh(e.vertices,e.indices,e.radius,e.details)}}class qE extends oh{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qE(e.radius,e.detail)}}const Sw=new V,Ew=new V,kC=new V,Mw=new Bn;class AX extends $t{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Ad*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],h=new Array(3),d={},f=[];for(let p=0;p<l;p+=3){o?(c[0]=o.getX(p),c[1]=o.getX(p+1),c[2]=o.getX(p+2)):(c[0]=p,c[1]=p+1,c[2]=p+2);const{a:x,b:v,c:y}=Mw;if(x.fromBufferAttribute(a,c[0]),v.fromBufferAttribute(a,c[1]),y.fromBufferAttribute(a,c[2]),Mw.getNormal(kC),h[0]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,h[1]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,h[2]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let w=0;w<3;w++){const _=(w+1)%3,b=h[w],E=h[_],M=Mw[u[w]],C=Mw[u[_]],P=`${b}_${E}`,T=`${E}_${b}`;T in d&&d[T]?(kC.dot(d[T].normal)<=s&&(f.push(M.x,M.y,M.z),f.push(C.x,C.y,C.z)),d[T]=null):P in d||(d[P]={index0:c[w],index1:c[_],normal:kC.clone()})}}for(const p in d)if(d[p]){const{index0:x,index1:v}=d[p];Sw.fromBufferAttribute(a,x),Ew.fromBufferAttribute(a,v),f.push(Sw.x,Sw.y,Sw.z),f.push(Ew.x,Ew.y,Ew.z)}this.setAttribute("position",new xt(f,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Rd extends s0{constructor(e){super(e),this.uuid=Qs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new s0().fromJSON(r))}return this}}const eEe={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=CX(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,h,d,f;if(i&&(s=sEe(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let p=t;p<r;p+=t)h=n[p],d=n[p+1],h<a&&(a=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);f=Math.max(c-a,u-l),f=f!==0?32767/f:0}return o0(s,o,t,a,l,f,0),o}};function CX(n,e,t,i,r){let s,o;if(r===gEe(n,e,t,i)>0)for(s=e;s<t;s+=i)o=Vz(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=Vz(s,n[s],n[s+1],o);return o&&ZE(o,o.next)&&(l0(o),o=o.next),o}function jd(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(ZE(t,t.next)||pi(t.prev,t,t.next)===0)){if(l0(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function o0(n,e,t,i,r,s,o){if(!n)return;!o&&s&&uEe(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?nEe(n,i,r,s):tEe(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),l0(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=iEe(jd(n),e,t),o0(n,e,t,i,r,s,2)):o===2&&rEe(n,e,t,i,r,s):o0(jd(n),e,t,i,r,s,1);break}}}function tEe(n){const e=n.prev,t=n,i=n.next;if(pi(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=r<s?r<o?r:o:s<o?s:o,h=a<l?a<c?a:c:l<c?l:c,d=r>s?r>o?r:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c;let p=i.next;for(;p!==e;){if(p.x>=u&&p.x<=d&&p.y>=h&&p.y<=f&&jp(r,a,s,l,o,c,p.x,p.y)&&pi(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function nEe(n,e,t,i){const r=n.prev,s=n,o=n.next;if(pi(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,h=s.y,d=o.y,f=a<l?a<c?a:c:l<c?l:c,p=u<h?u<d?u:d:h<d?h:d,x=a>l?a>c?a:c:l>c?l:c,v=u>h?u>d?u:d:h>d?h:d,y=TI(f,p,e,t,i),w=TI(x,v,e,t,i);let _=n.prevZ,b=n.nextZ;for(;_&&_.z>=y&&b&&b.z<=w;){if(_.x>=f&&_.x<=x&&_.y>=p&&_.y<=v&&_!==r&&_!==o&&jp(a,u,l,h,c,d,_.x,_.y)&&pi(_.prev,_,_.next)>=0||(_=_.prevZ,b.x>=f&&b.x<=x&&b.y>=p&&b.y<=v&&b!==r&&b!==o&&jp(a,u,l,h,c,d,b.x,b.y)&&pi(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;_&&_.z>=y;){if(_.x>=f&&_.x<=x&&_.y>=p&&_.y<=v&&_!==r&&_!==o&&jp(a,u,l,h,c,d,_.x,_.y)&&pi(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=w;){if(b.x>=f&&b.x<=x&&b.y>=p&&b.y<=v&&b!==r&&b!==o&&jp(a,u,l,h,c,d,b.x,b.y)&&pi(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function iEe(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!ZE(r,s)&&PX(r,i,i.next,s)&&a0(r,s)&&a0(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),l0(i),l0(i.next),i=n=s),i=i.next}while(i!==n);return jd(i)}function rEe(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&fEe(o,a)){let l=RX(o,a);o=jd(o,o.next),l=jd(l,l.next),o0(o,e,t,i,r,s,0),o0(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function sEe(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=CX(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(dEe(c));for(r.sort(oEe),s=0;s<r.length;s++)t=aEe(r[s],t);return t}function oEe(n,e){return n.x-e.x}function aEe(n,e){const t=lEe(n,e);if(!t)return e;const i=RX(t,n);return jd(i,i.next),jd(t,t.next)}function lEe(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const d=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>i&&(i=d,r=t.x<t.next.x?t:t.next,d===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let u=1/0,h;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&jp(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(s-t.x),a0(t,n)&&(h<u||h===u&&(t.x>r.x||t.x===r.x&&cEe(r,t)))&&(r=t,u=h)),t=t.next;while(t!==a);return r}function cEe(n,e){return pi(n.prev,n,e.prev)<0&&pi(e.next,n,n.next)<0}function uEe(n,e,t,i){let r=n;do r.z===0&&(r.z=TI(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,hEe(r)}function hEe(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function TI(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function dEe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function jp(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function fEe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!pEe(n,e)&&(a0(n,e)&&a0(e,n)&&mEe(n,e)&&(pi(n.prev,n,e.prev)||pi(n,e.prev,e))||ZE(n,e)&&pi(n.prev,n,n.next)>0&&pi(e.prev,e,e.next)>0)}function pi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function ZE(n,e){return n.x===e.x&&n.y===e.y}function PX(n,e,t,i){const r=Aw(pi(n,e,t)),s=Aw(pi(n,e,i)),o=Aw(pi(t,i,n)),a=Aw(pi(t,i,e));return!!(r!==s&&o!==a||r===0&&Tw(n,t,e)||s===0&&Tw(n,i,e)||o===0&&Tw(t,n,i)||a===0&&Tw(t,e,i))}function Tw(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Aw(n){return n>0?1:n<0?-1:0}function pEe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&PX(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function a0(n,e){return pi(n.prev,n,n.next)<0?pi(n,e,n.next)>=0&&pi(n,n.prev,e)>=0:pi(n,e,n.prev)<0||pi(n,n.next,e)<0}function mEe(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function RX(n,e){const t=new AI(n.i,n.x,n.y),i=new AI(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function Vz(n,e,t,i){const r=new AI(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function l0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function AI(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function gEe(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Sl{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Sl.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];Gz(e),jz(i,e);let o=e.length;t.forEach(Gz);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,jz(i,t[l]);const a=eEe.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function Gz(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function jz(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class KE extends $t{constructor(e=new Rd([new Ue(.5,.5),new Ue(-.5,.5),new Ue(-.5,-.5),new Ue(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new xt(r,3)),this.setAttribute("uv",new xt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:.2,p=t.bevelSize!==void 0?t.bevelSize:f-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,v=t.bevelSegments!==void 0?t.bevelSegments:3;const y=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:yEe;let _,b=!1,E,M,C,P;y&&(_=y.getSpacedPoints(u),b=!0,d=!1,E=y.computeFrenetFrames(u,!1),M=new V,C=new V,P=new V),d||(v=0,f=0,p=0,x=0);const T=a.extractPoints(c);let I=T.shape;const U=T.holes;if(!Sl.isClockWise(I)){I=I.reverse();for(let J=0,ge=U.length;J<ge;J++){const de=U[J];Sl.isClockWise(de)&&(U[J]=de.reverse())}}const B=Sl.triangulateShape(I,U),z=I;for(let J=0,ge=U.length;J<ge;J++){const de=U[J];I=I.concat(de)}function $(J,ge,de){return J.clone().addScaledVector(ge,de)}const H=I.length,Z=B.length;function O(J,ge,de){let Ae,Ie,me;const ye=J.x-ge.x,ke=J.y-ge.y,Xe=de.x-J.x,Le=de.y-J.y,Ye=ye*ye+ke*ke,q=ye*Le-ke*Xe;if(Math.abs(q)>Number.EPSILON){const X=Math.sqrt(Ye),pe=Math.sqrt(Xe*Xe+Le*Le),_e=ge.x-ke/X,xe=ge.y+ye/X,Me=de.x-Le/pe,je=de.y+Xe/pe,qe=((Me-_e)*Le-(je-xe)*Xe)/(ye*Le-ke*Xe);Ae=_e+ye*qe-J.x,Ie=xe+ke*qe-J.y;const Ne=Ae*Ae+Ie*Ie;if(Ne<=2)return new Ue(Ae,Ie);me=Math.sqrt(Ne/2)}else{let X=!1;ye>Number.EPSILON?Xe>Number.EPSILON&&(X=!0):ye<-Number.EPSILON?Xe<-Number.EPSILON&&(X=!0):Math.sign(ke)===Math.sign(Le)&&(X=!0),X?(Ae=-ke,Ie=ye,me=Math.sqrt(Ye)):(Ae=ye,Ie=ke,me=Math.sqrt(Ye/2))}return new Ue(Ae/me,Ie/me)}const W=[];for(let J=0,ge=z.length,de=ge-1,Ae=J+1;J<ge;J++,de++,Ae++)de===ge&&(de=0),Ae===ge&&(Ae=0),W[J]=O(z[J],z[de],z[Ae]);const D=[];let Y,Q=W.concat();for(let J=0,ge=U.length;J<ge;J++){const de=U[J];Y=[];for(let Ae=0,Ie=de.length,me=Ie-1,ye=Ae+1;Ae<Ie;Ae++,me++,ye++)me===Ie&&(me=0),ye===Ie&&(ye=0),Y[Ae]=O(de[Ae],de[me],de[ye]);D.push(Y),Q=Q.concat(Y)}for(let J=0;J<v;J++){const ge=J/v,de=f*Math.cos(ge*Math.PI/2),Ae=p*Math.sin(ge*Math.PI/2)+x;for(let Ie=0,me=z.length;Ie<me;Ie++){const ye=$(z[Ie],W[Ie],Ae);Re(ye.x,ye.y,-de)}for(let Ie=0,me=U.length;Ie<me;Ie++){const ye=U[Ie];Y=D[Ie];for(let ke=0,Xe=ye.length;ke<Xe;ke++){const Le=$(ye[ke],Y[ke],Ae);Re(Le.x,Le.y,-de)}}}const re=p+x;for(let J=0;J<H;J++){const ge=d?$(I[J],Q[J],re):I[J];b?(C.copy(E.normals[0]).multiplyScalar(ge.x),M.copy(E.binormals[0]).multiplyScalar(ge.y),P.copy(_[0]).add(C).add(M),Re(P.x,P.y,P.z)):Re(ge.x,ge.y,0)}for(let J=1;J<=u;J++)for(let ge=0;ge<H;ge++){const de=d?$(I[ge],Q[ge],re):I[ge];b?(C.copy(E.normals[J]).multiplyScalar(de.x),M.copy(E.binormals[J]).multiplyScalar(de.y),P.copy(_[J]).add(C).add(M),Re(P.x,P.y,P.z)):Re(de.x,de.y,h/u*J)}for(let J=v-1;J>=0;J--){const ge=J/v,de=f*Math.cos(ge*Math.PI/2),Ae=p*Math.sin(ge*Math.PI/2)+x;for(let Ie=0,me=z.length;Ie<me;Ie++){const ye=$(z[Ie],W[Ie],Ae);Re(ye.x,ye.y,h+de)}for(let Ie=0,me=U.length;Ie<me;Ie++){const ye=U[Ie];Y=D[Ie];for(let ke=0,Xe=ye.length;ke<Xe;ke++){const Le=$(ye[ke],Y[ke],Ae);b?Re(Le.x,Le.y+_[u-1].y,_[u-1].x+de):Re(Le.x,Le.y,h+de)}}}ce(),oe();function ce(){const J=r.length/3;if(d){let ge=0,de=H*ge;for(let Ae=0;Ae<Z;Ae++){const Ie=B[Ae];Oe(Ie[2]+de,Ie[1]+de,Ie[0]+de)}ge=u+v*2,de=H*ge;for(let Ae=0;Ae<Z;Ae++){const Ie=B[Ae];Oe(Ie[0]+de,Ie[1]+de,Ie[2]+de)}}else{for(let ge=0;ge<Z;ge++){const de=B[ge];Oe(de[2],de[1],de[0])}for(let ge=0;ge<Z;ge++){const de=B[ge];Oe(de[0]+H*u,de[1]+H*u,de[2]+H*u)}}i.addGroup(J,r.length/3-J,0)}function oe(){const J=r.length/3;let ge=0;he(z,ge),ge+=z.length;for(let de=0,Ae=U.length;de<Ae;de++){const Ie=U[de];he(Ie,ge),ge+=Ie.length}i.addGroup(J,r.length/3-J,1)}function he(J,ge){let de=J.length;for(;--de>=0;){const Ae=de;let Ie=de-1;Ie<0&&(Ie=J.length-1);for(let me=0,ye=u+v*2;me<ye;me++){const ke=H*me,Xe=H*(me+1),Le=ge+Ae+ke,Ye=ge+Ie+ke,q=ge+Ie+Xe,X=ge+Ae+Xe;Ve(Le,Ye,q,X)}}}function Re(J,ge,de){l.push(J),l.push(ge),l.push(de)}function Oe(J,ge,de){Je(J),Je(ge),Je(de);const Ae=r.length/3,Ie=w.generateTopUV(i,r,Ae-3,Ae-2,Ae-1);Fe(Ie[0]),Fe(Ie[1]),Fe(Ie[2])}function Ve(J,ge,de,Ae){Je(J),Je(ge),Je(Ae),Je(ge),Je(de),Je(Ae);const Ie=r.length/3,me=w.generateSideWallUV(i,r,Ie-6,Ie-3,Ie-2,Ie-1);Fe(me[0]),Fe(me[1]),Fe(me[3]),Fe(me[1]),Fe(me[2]),Fe(me[3])}function Je(J){r.push(l[J*3+0]),r.push(l[J*3+1]),r.push(l[J*3+2])}function Fe(J){s.push(J.x),s.push(J.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return vEe(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new f3[r.type]().fromJSON(r)),new KE(i,e.options)}}const yEe={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new Ue(s,o),new Ue(a,l),new Ue(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],h=e[i*3+2],d=e[r*3],f=e[r*3+1],p=e[r*3+2],x=e[s*3],v=e[s*3+1],y=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Ue(o,1-l),new Ue(c,1-h),new Ue(d,1-p),new Ue(x,1-y)]:[new Ue(a,1-l),new Ue(u,1-h),new Ue(f,1-p),new Ue(v,1-y)]}};function vEe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class j0 extends oh{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new j0(e.radius,e.detail)}}class $0 extends oh{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $0(e.radius,e.detail)}}class QE extends $t{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let h=e;const d=(t-e)/r,f=new V,p=new Ue;for(let x=0;x<=r;x++){for(let v=0;v<=i;v++){const y=s+v/i*o;f.x=h*Math.cos(y),f.y=h*Math.sin(y),l.push(f.x,f.y,f.z),c.push(0,0,1),p.x=(f.x/t+1)/2,p.y=(f.y/t+1)/2,u.push(p.x,p.y)}h+=d}for(let x=0;x<r;x++){const v=x*(i+1);for(let y=0;y<i;y++){const w=y+v,_=w,b=w+i+1,E=w+i+2,M=w+1;a.push(_,b,M),a.push(b,E,M)}}this.setIndex(a),this.setAttribute("position",new xt(l,3)),this.setAttribute("normal",new xt(c,3)),this.setAttribute("uv",new xt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new QE(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class JE extends $t{constructor(e=new Rd([new Ue(0,.5),new Ue(-.5,-.5),new Ue(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new xt(r,3)),this.setAttribute("normal",new xt(s,3)),this.setAttribute("uv",new xt(o,2));function c(u){const h=r.length/3,d=u.extractPoints(t);let f=d.shape;const p=d.holes;Sl.isClockWise(f)===!1&&(f=f.reverse());for(let v=0,y=p.length;v<y;v++){const w=p[v];Sl.isClockWise(w)===!0&&(p[v]=w.reverse())}const x=Sl.triangulateShape(f,p);for(let v=0,y=p.length;v<y;v++){const w=p[v];f=f.concat(w)}for(let v=0,y=f.length;v<y;v++){const w=f[v];r.push(w.x,w.y,0),s.push(0,0,1),o.push(w.x,w.y)}for(let v=0,y=x.length;v<y;v++){const w=x[v],_=w[0]+h,b=w[1]+h,E=w[2]+h;i.push(_,b,E),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return xEe(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new JE(i,e.curveSegments)}}function xEe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class X0 extends $t{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new V,d=new V,f=[],p=[],x=[],v=[];for(let y=0;y<=i;y++){const w=[],_=y/i;let b=0;y===0&&o===0?b=.5/t:y===i&&l===Math.PI&&(b=-.5/t);for(let E=0;E<=t;E++){const M=E/t;h.x=-e*Math.cos(r+M*s)*Math.sin(o+_*a),h.y=e*Math.cos(o+_*a),h.z=e*Math.sin(r+M*s)*Math.sin(o+_*a),p.push(h.x,h.y,h.z),d.copy(h).normalize(),x.push(d.x,d.y,d.z),v.push(M+b,1-_),w.push(c++)}u.push(w)}for(let y=0;y<i;y++)for(let w=0;w<t;w++){const _=u[y][w+1],b=u[y][w],E=u[y+1][w],M=u[y+1][w+1];(y!==0||o>0)&&f.push(_,b,M),(y!==i-1||l<Math.PI)&&f.push(b,E,M)}this.setIndex(f),this.setAttribute("position",new xt(p,3)),this.setAttribute("normal",new xt(x,3)),this.setAttribute("uv",new xt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new X0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class eM extends oh{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new eM(e.radius,e.detail)}}class tM extends $t{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new V,h=new V,d=new V;for(let f=0;f<=i;f++)for(let p=0;p<=r;p++){const x=p/r*s,v=f/i*Math.PI*2;h.x=(e+t*Math.cos(v))*Math.cos(x),h.y=(e+t*Math.cos(v))*Math.sin(x),h.z=t*Math.sin(v),a.push(h.x,h.y,h.z),u.x=e*Math.cos(x),u.y=e*Math.sin(x),d.subVectors(h,u).normalize(),l.push(d.x,d.y,d.z),c.push(p/r),c.push(f/i)}for(let f=1;f<=i;f++)for(let p=1;p<=r;p++){const x=(r+1)*f+p-1,v=(r+1)*(f-1)+p-1,y=(r+1)*(f-1)+p,w=(r+1)*f+p;o.push(x,v,w),o.push(v,y,w)}this.setIndex(o),this.setAttribute("position",new xt(a,3)),this.setAttribute("normal",new xt(l,3)),this.setAttribute("uv",new xt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tM(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class nM extends $t{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],u=[],h=new V,d=new V,f=new V,p=new V,x=new V,v=new V,y=new V;for(let _=0;_<=i;++_){const b=_/i*s*Math.PI*2;w(b,s,o,e,f),w(b+.01,s,o,e,p),v.subVectors(p,f),y.addVectors(p,f),x.crossVectors(v,y),y.crossVectors(x,v),x.normalize(),y.normalize();for(let E=0;E<=r;++E){const M=E/r*Math.PI*2,C=-t*Math.cos(M),P=t*Math.sin(M);h.x=f.x+(C*y.x+P*x.x),h.y=f.y+(C*y.y+P*x.y),h.z=f.z+(C*y.z+P*x.z),l.push(h.x,h.y,h.z),d.subVectors(h,f).normalize(),c.push(d.x,d.y,d.z),u.push(_/i),u.push(E/r)}}for(let _=1;_<=i;_++)for(let b=1;b<=r;b++){const E=(r+1)*(_-1)+(b-1),M=(r+1)*_+(b-1),C=(r+1)*_+b,P=(r+1)*(_-1)+b;a.push(E,M,P),a.push(M,C,P)}this.setIndex(a),this.setAttribute("position",new xt(l,3)),this.setAttribute("normal",new xt(c,3)),this.setAttribute("uv",new xt(u,2));function w(_,b,E,M,C){const P=Math.cos(_),T=Math.sin(_),I=E/b*_,U=Math.cos(I);C.x=M*(2+U)*.5*P,C.y=M*(2+U)*T*.5,C.z=M*Math.sin(I)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nM(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class iM extends $t{constructor(e=new h3(new V(-1,-1,0),new V(-1,1,0),new V(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new V,l=new V,c=new Ue;let u=new V;const h=[],d=[],f=[],p=[];x(),this.setIndex(p),this.setAttribute("position",new xt(h,3)),this.setAttribute("normal",new xt(d,3)),this.setAttribute("uv",new xt(f,2));function x(){for(let _=0;_<t;_++)v(_);v(s===!1?t:0),w(),y()}function v(_){u=e.getPointAt(_/t,u);const b=o.normals[_],E=o.binormals[_];for(let M=0;M<=r;M++){const C=M/r*Math.PI*2,P=Math.sin(C),T=-Math.cos(C);l.x=T*b.x+P*E.x,l.y=T*b.y+P*E.y,l.z=T*b.z+P*E.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,h.push(a.x,a.y,a.z)}}function y(){for(let _=1;_<=t;_++)for(let b=1;b<=r;b++){const E=(r+1)*(_-1)+(b-1),M=(r+1)*_+(b-1),C=(r+1)*_+b,P=(r+1)*(_-1)+b;p.push(E,M,P),p.push(M,C,P)}}function w(){for(let _=0;_<=t;_++)for(let b=0;b<=r;b++)c.x=_/t,c.y=b/r,f.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new iM(new f3[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class p3 extends $t{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new V,s=new V;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const h=l[c],d=h.start,f=h.count;for(let p=d,x=d+f;p<x;p+=3)for(let v=0;v<3;v++){const y=a.getX(p+v),w=a.getX(p+(v+1)%3);r.fromBufferAttribute(o,y),s.fromBufferAttribute(o,w),$z(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,h=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,h),$z(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new xt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function $z(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var Xz=Object.freeze({__proto__:null,BoxGeometry:Nl,CapsuleGeometry:$E,CircleGeometry:XE,ConeGeometry:YE,CylinderGeometry:nf,DodecahedronGeometry:qE,EdgesGeometry:AX,ExtrudeGeometry:KE,IcosahedronGeometry:j0,LatheGeometry:G0,OctahedronGeometry:$0,PlaneGeometry:tf,PolyhedronGeometry:oh,RingGeometry:QE,ShapeGeometry:JE,SphereGeometry:X0,TetrahedronGeometry:eM,TorusGeometry:tM,TorusKnotGeometry:nM,TubeGeometry:iM,WireframeGeometry:p3});class IX extends Ki{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ht(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class LX extends Is{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class m3 extends Ki{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ht(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class NX extends m3{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ue(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Si(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ht(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ht(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ht(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class rM extends Ki{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ht(16777215),this.specular=new ht(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=z0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kX extends Ki{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ht(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class OX extends Ki{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class DX extends Ki{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=z0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class FX extends Ki{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ht(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class UX extends pr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function wo(n,e,t){return g3(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function vd(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function g3(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function BX(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function CI(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function y3(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function _Ee(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),h=[],d=[];for(let f=0;f<c.times.length;++f){const p=c.times[f]*r;if(!(p<t||p>=i)){h.push(c.times[f]);for(let x=0;x<u;++x)d.push(c.values[f*u+x])}}h.length!==0&&(c.times=vd(h,c.times.constructor),c.values=vd(d,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function wEe(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===l});if(c===void 0)continue;let u=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let d=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);const p=a.times.length-1;let x;if(s<=a.times[0]){const y=u,w=h-u;x=wo(a.values,y,w)}else if(s>=a.times[p]){const y=p*h+u,w=y+h-u;x=wo(a.values,y,w)}else{const y=a.createInterpolant(),w=u,_=h-u;y.evaluate(s),x=wo(y.resultBuffer,w,_)}l==="quaternion"&&new fr().fromArray(x).normalize().conjugate().toArray(x);const v=c.times.length;for(let y=0;y<v;++y){const w=y*f+d;if(l==="quaternion")fr.multiplyQuaternionsFlat(c.values,w,x,0,c.values,w);else{const _=f-d*2;for(let b=0;b<_;++b)c.values[w+b]-=x[b]}}}return n.blendMode=$k,n}const bEe={arraySlice:wo,convertArray:vd,isTypedArray:g3,getKeyframeOrder:BX,sortedArray:CI,flattenJSON:y3,subclip:_Ee,makeClipAdditive:wEe};class Y0{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class zX extends Y0{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:dd,endingEnd:dd}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case fd:s=e,a=2*t-i;break;case t0:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case fd:o=e,l=2*i-t;break;case t0:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,f=this._weightNext,p=(i-t)/(r-t),x=p*p,v=x*p,y=-d*v+2*d*x-d*p,w=(1+d)*v+(-1.5-2*d)*x+(-.5+d)*p+1,_=(-1-f)*v+(1.5+f)*x+.5*p,b=f*v-f*x;for(let E=0;E!==a;++E)s[E]=y*o[u+E]+w*o[c+E]+_*o[l+E]+b*o[h+E];return s}}class v3 extends Y0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),h=1-u;for(let d=0;d!==a;++d)s[d]=o[c+d]*h+o[l+d]*u;return s}}class HX extends Y0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ua{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=vd(t,this.TimeBufferType),this.values=vd(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:vd(e.times,Array),values:vd(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new HX(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new v3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new zX(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Jv:t=this.InterpolantFactoryMethodDiscrete;break;case e0:t=this.InterpolantFactoryMethodLinear;break;case Q1:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Jv;case this.InterpolantFactoryMethodLinear:return e0;case this.InterpolantFactoryMethodSmooth:return Q1}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=wo(i,s,o),this.values=wo(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){e=!1;break}if(o!==null&&o>l){e=!1;break}o=l}if(r!==void 0&&g3(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){e=!1;break}}return e}optimize(){const e=wo(this.times),t=wo(this.values),i=this.getValueSize(),r=this.getInterpolation()===Q1,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const h=a*i,d=h-i,f=h+i;for(let p=0;p!==i;++p){const x=t[h+p];if(x!==t[d+p]||x!==t[f+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*i,d=o*i;for(let f=0;f!==i;++f)t[d+f]=t[h+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=wo(e,0,o),this.values=wo(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=wo(this.times,0),t=wo(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ua.prototype.TimeBufferType=Float32Array;Ua.prototype.ValueBufferType=Float32Array;Ua.prototype.DefaultInterpolation=e0;class rf extends Ua{}rf.prototype.ValueTypeName="bool";rf.prototype.ValueBufferType=Array;rf.prototype.DefaultInterpolation=Jv;rf.prototype.InterpolantFactoryMethodLinear=void 0;rf.prototype.InterpolantFactoryMethodSmooth=void 0;class x3 extends Ua{}x3.prototype.ValueTypeName="color";class c0 extends Ua{}c0.prototype.ValueTypeName="number";class WX extends Y0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)fr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class pg extends Ua{InterpolantFactoryMethodLinear(e){return new WX(this.times,this.values,this.getValueSize(),e)}}pg.prototype.ValueTypeName="quaternion";pg.prototype.DefaultInterpolation=e0;pg.prototype.InterpolantFactoryMethodSmooth=void 0;class sf extends Ua{}sf.prototype.ValueTypeName="string";sf.prototype.ValueBufferType=Array;sf.prototype.DefaultInterpolation=Jv;sf.prototype.InterpolantFactoryMethodLinear=void 0;sf.prototype.InterpolantFactoryMethodSmooth=void 0;class u0 extends Ua{}u0.prototype.ValueTypeName="vector";class h0{constructor(e,t=-1,i,r=OE){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Qs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(EEe(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Ua.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=BX(l);l=CI(l,1,u),c=CI(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new c0(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const h=u[1];let d=r[h];d||(r[h]=d=[]),d.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return null;const i=function(h,d,f,p,x){if(f.length!==0){const v=[],y=[];y3(f,v,y,p),v.length!==0&&x.push(new h(d,v,y))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const d=c[h].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const f={};let p;for(p=0;p<d.length;p++)if(d[p].morphTargets)for(let x=0;x<d[p].morphTargets.length;x++)f[d[p].morphTargets[x]]=-1;for(const x in f){const v=[],y=[];for(let w=0;w!==d[p].morphTargets.length;++w){const _=d[p];v.push(_.time),y.push(_.morphTarget===x?1:0)}r.push(new c0(".morphTargetInfluence["+x+"]",v,y))}l=f.length*o}else{const f=".bones["+t[h].name+"]";i(u0,f+".position",d,"pos",r),i(pg,f+".quaternion",d,"rot",r),i(u0,f+".scale",d,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function SEe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return c0;case"vector":case"vector2":case"vector3":case"vector4":return u0;case"color":return x3;case"quaternion":return pg;case"bool":case"boolean":return rf;case"string":return sf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function EEe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=SEe(n.type);if(n.times===void 0){const t=[],i=[];y3(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const $d={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class q0{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=c.length;h<d;h+=2){const f=c[h],p=c[h+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}}const _3=new q0;class Rr{constructor(e){this.manager=e!==void 0?e:_3,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Rr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Zl={};class MEe extends Error{constructor(e,t){super(e),this.response=t}}class ls extends Rr{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=$d.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Zl[e]!==void 0){Zl[e].push({onLoad:t,onProgress:i,onError:r});return}Zl[e]=[],Zl[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status,typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Zl[e],h=c.body.getReader(),d=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),f=d?parseInt(d):0,p=f!==0;let x=0;const v=new ReadableStream({start(y){w();function w(){h.read().then(({done:_,value:b})=>{if(_)y.close();else{x+=b.byteLength;const E=new ProgressEvent("progress",{lengthComputable:p,loaded:x,total:f});for(let M=0,C=u.length;M<C;M++){const P=u[M];P.onProgress&&P.onProgress(E)}y.enqueue(b),w()}})}}});return new Response(v)}else throw new MEe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),d=h&&h[1]?h[1].toLowerCase():void 0,f=new TextDecoder(d);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{$d.add(e,c);const u=Zl[e];delete Zl[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=Zl[e];if(u===void 0)throw this.manager.itemError(e),c;delete Zl[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class TEe extends Rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ls(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r&&r(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=h0.parse(e[i]);t.push(r)}return t}}class AEe extends Rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new a3,l=new ls(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(h){l.load(e[h],function(d){const f=s.parse(d,!0);o[h]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},c+=1,c===6&&(f.mipmapCount===1&&(a.minFilter=En),a.image=o,a.format=f.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let h=0,d=e.length;h<d;++h)u(h);else l.load(e,function(h){const d=s.parse(h,!0);if(d.isCubemap){const f=d.mipmaps.length/d.mipmapCount;for(let p=0;p<f;p++){o[p]={mipmaps:[]};for(let x=0;x<d.mipmapCount;x++)o[p].mipmaps.push(d.mipmaps[p*d.mipmapCount+x]),o[p].format=d.format,o[p].width=d.width,o[p].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=En),a.format=d.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class d0 extends Rr{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=$d.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=r0("img");function l(){u(),$d.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){u(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class VX extends Rr{constructor(e){super(e)}load(e,t,i,r){const s=new V0;s.colorSpace=Ht;const o=new d0(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class w3 extends Rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Pd,a=new ls(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:si,o.wrapT=c.wrapT!==void 0?c.wrapT:si,o.magFilter=c.magFilter!==void 0?c.magFilter:En,o.minFilter=c.minFilter!==void 0?c.minFilter:En,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=ju),c.mipmapCount===1&&(o.minFilter=En),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c))},i,r),o}}class GX extends Rr{constructor(e){super(e)}load(e,t,i,r){const s=new Rn,o=new d0(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class ah extends _n{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ht(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class jX extends ah{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ht(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const OC=new dt,Yz=new V,qz=new V;class b3{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ue(512,512),this.map=null,this.mapPass=null,this.matrix=new dt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new FE,this._frameExtents=new Ue(1,1),this._viewportCount=1,this._viewports=[new jt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Yz.setFromMatrixPosition(e.matrixWorld),t.position.copy(Yz),qz.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(qz),t.updateMatrixWorld(),OC.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(OC),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(OC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class CEe extends b3{constructor(){super(new ri(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Lm*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class $X extends ah{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.target=new _n,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new CEe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Zz=new dt,dy=new V,DC=new V;class PEe extends b3{constructor(){super(new ri(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ue(4,2),this._viewportCount=6,this._viewports=[new jt(2,1,1,1),new jt(0,1,1,1),new jt(3,1,1,1),new jt(1,1,1,1),new jt(3,0,1,1),new jt(1,0,1,1)],this._cubeDirections=[new V(1,0,0),new V(-1,0,0),new V(0,0,1),new V(0,0,-1),new V(0,1,0),new V(0,-1,0)],this._cubeUps=[new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,0,1),new V(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),dy.setFromMatrixPosition(e.matrixWorld),i.position.copy(dy),DC.copy(i.position),DC.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(DC),i.updateMatrixWorld(),r.makeTranslation(-dy.x,-dy.y,-dy.z),Zz.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Zz)}}class XX extends ah{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new PEe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class REe extends b3{constructor(){super(new Ro(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class YX extends ah{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.target=new _n,this.shadow=new REe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class qX extends ah{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ZX extends ah{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class KX{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new V)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class sM extends ah{constructor(e=new KX,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class oM extends Rr{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new ls(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r&&r(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s],t[s]}const r=oM.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ht().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new ht().setHex(o.value);break;case"v2":r.uniforms[s].value=new Ue().fromArray(o.value);break;case"v3":r.uniforms[s].value=new V().fromArray(o.value);break;case"v4":r.uniforms[s].value=new jt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Yt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new dt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ue().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ue().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:IX,SpriteMaterial:s3,RawShaderMaterial:LX,ShaderMaterial:Is,PointsMaterial:yd,MeshPhysicalMaterial:NX,MeshStandardMaterial:m3,MeshPhongMaterial:rM,MeshToonMaterial:kX,MeshNormalMaterial:OX,MeshLambertMaterial:DX,MeshDepthMaterial:i3,MeshDistanceMaterial:r3,MeshBasicMaterial:Nc,MeshMatcapMaterial:FX,LineDashedMaterial:UX,LineBasicMaterial:pr,Material:Ki};return new t[e]}}class _S{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class S3 extends $t{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class QX extends Rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ls(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r&&r(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(f,p){if(t[p]!==void 0)return t[p];const v=f.interleavedBuffers[p],y=s(f,v.buffer),w=Wp(v.type,y),_=new WE(w,v.stride);return _.uuid=v.uuid,t[p]=_,_}function s(f,p){if(i[p]!==void 0)return i[p];const v=f.arrayBuffers[p],y=new Uint32Array(v).buffer;return i[p]=y,y}const o=e.isInstancedBufferGeometry?new S3:new $t,a=e.data.index;if(a!==void 0){const f=Wp(a.type,a.array);o.setIndex(new Mn(f,1))}const l=e.data.attributes;for(const f in l){const p=l[f];let x;if(p.isInterleavedBufferAttribute){const v=r(e.data,p.data);x=new Xs(v,p.itemSize,p.offset,p.normalized)}else{const v=Wp(p.type,p.array),y=p.isInstancedBufferAttribute?Om:Mn;x=new y(v,p.itemSize,p.normalized)}p.name!==void 0&&(x.name=p.name),p.usage!==void 0&&x.setUsage(p.usage),p.updateRange!==void 0&&(x.updateRange.offset=p.updateRange.offset,x.updateRange.count=p.updateRange.count),o.setAttribute(f,x)}const c=e.data.morphAttributes;if(c)for(const f in c){const p=c[f],x=[];for(let v=0,y=p.length;v<y;v++){const w=p[v];let _;if(w.isInterleavedBufferAttribute){const b=r(e.data,w.data);_=new Xs(b,w.itemSize,w.offset,w.normalized)}else{const b=Wp(w.type,w.array);_=new Mn(b,w.itemSize,w.normalized)}w.name!==void 0&&(_.name=w.name),x.push(_)}o.morphAttributes[f]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let f=0,p=h.length;f!==p;++f){const x=h[f];o.addGroup(x.start,x.count,x.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const f=new V;d.center!==void 0&&f.fromArray(d.center),o.boundingSphere=new Ns(f,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class IEe extends Rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?_S.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new ls(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(h){r!==void 0&&r(h);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e));return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?_S.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new ls(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let h=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Rd().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new VE().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new QX;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in Xz&&(a=Xz[l.type].fromJSON(l,t))}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new oM;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=h0.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:Wp(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new q0(t);s=new d0(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const h=e[c],d=h.url;if(Array.isArray(d)){const f=[];for(let p=0,x=d.length;p<x;p++){const v=d[p],y=a(v);y!==null&&(y instanceof HTMLImageElement?f.push(y):f.push(new Pd(y.data,y.width,y.height)))}r[h.uuid]=new pd(f)}else{const f=a(h.url);r[h.uuid]=new pd(f)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Wp(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new d0(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h],p=await s(f);p!==null&&(p instanceof HTMLImageElement?u.push(p):u.push(new Pd(p.data,p.width,p.height)))}i[l.uuid]=new pd(u)}else{const u=await s(l.url);i[l.uuid]=new pd(u)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:o[s]}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image,t[a.image];const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new V0,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Pd:u=new Rn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,LEe)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],Kz),u.wrapT=i(a.wrap[1],Kz)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,Qz)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,Qz)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,t,i,r,s){let o;function a(d){return t[d],t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const f=[];for(let p=0,x=d.length;p<x;p++){const v=d[p];i[v],f.push(i[v])}return f}return i[d],i[d]}}function c(d){return r[d],r[d]}let u,h;switch(e.type){case"Scene":o=new km,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ht(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new HE(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new zE(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new ri(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ro(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new qX(e.color,e.intensity);break;case"DirectionalLight":o=new YX(e.color,e.intensity);break;case"PointLight":o=new XX(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new ZX(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new $X(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new jX(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new sM().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),h=l(e.material),o=new xX(u,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),h=l(e.material),o=new oi(u,h);break;case"InstancedMesh":u=a(e.geometry),h=l(e.material);const d=e.count,f=e.instanceMatrix,p=e.instanceColor;o=new _X(u,h,d),o.instanceMatrix=new Om(new Float32Array(f.array),16),p!==void 0&&(o.instanceColor=new Om(new Float32Array(p.array),p.itemSize));break;case"LOD":o=new vX;break;case"Line":o=new $u(a(e.geometry),l(e.material));break;case"LineLoop":o=new wX(a(e.geometry),l(e.material));break;case"LineSegments":o=new Vo(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new fv(a(e.geometry),l(e.material));break;case"Sprite":o=new yX(l(e.material));break;case"Group":o=new gd;break;case"Bone":o=new o3;break;default:o=new _n}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let f=0;f<d.length;f++)o.add(this.parseObject(d[f],t,i,r,s))}if(e.animations!==void 0){const d=e.animations;for(let f=0;f<d.length;f++){const p=d[f];o.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let f=0;f<d.length;f++){const p=d[f],x=o.getObjectByProperty("uuid",p.object);x!==void 0&&o.addLevel(x,p.distance,p.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0||i.bind(r,i.bindMatrix)}})}}const LEe={UVMapping:Vu,CubeReflectionMapping:Mc,CubeRefractionMapping:Gu,EquirectangularReflectionMapping:Rm,EquirectangularRefractionMapping:Kv,CubeUVReflectionMapping:dg},Kz={RepeatWrapping:Im,ClampToEdgeWrapping:si,MirroredRepeatWrapping:Qv},Qz={NearestFilter:Ri,NearestMipmapNearestFilter:gS,NearestMipmapLinearFilter:uv,LinearFilter:En,LinearMipmapNearestFilter:Fk,LinearMipmapLinearFilter:ju};class NEe extends Rr{constructor(e){super(e),this.isImageBitmapLoader=!0,this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=$d.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){$d.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Cw;class E3{static getContext(){return Cw===void 0&&(Cw=new(window.AudioContext||window.webkitAudioContext)),Cw}static setContext(e){Cw=e}}class kEe extends Rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ls(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);E3.getContext().decodeAudioData(c,function(h){t(h)},a)}catch(c){a(c)}},i,r);function a(l){r&&r(l),s.manager.itemError(e)}}}class OEe extends sM{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new ht().set(e),s=new ht().set(t),o=new V(r.r,r.g,r.b),a=new V(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class DEe extends sM{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new ht().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const Jz=new dt,e5=new dt,Eh=new dt;class FEe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ri,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ri,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Eh.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Ad*t.fov*.5)/t.zoom;let a,l;e5.elements[12]=-r,Jz.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Eh.elements[0]=2*t.near/(l-a),Eh.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Eh),a=-o*t.aspect-s,l=o*t.aspect-s,Eh.elements[0]=2*t.near/(l-a),Eh.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Eh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(e5),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Jz)}}class M3{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=t5(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=t5();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function t5(){return(typeof performance>"u"?Date:performance).now()}const Mh=new V,n5=new fr,UEe=new V,Th=new V;class BEe extends _n{constructor(){super(),this.type="AudioListener",this.context=E3.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new M3}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Mh,n5,UEe),Th.set(0,0,-1).applyQuaternion(n5),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Mh.x,r),t.positionY.linearRampToValueAtTime(Mh.y,r),t.positionZ.linearRampToValueAtTime(Mh.z,r),t.forwardX.linearRampToValueAtTime(Th.x,r),t.forwardY.linearRampToValueAtTime(Th.y,r),t.forwardZ.linearRampToValueAtTime(Th.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Mh.x,Mh.y,Mh.z),t.setOrientation(Th.x,Th.y,Th.z,i.x,i.y,i.z)}}class JX extends _n{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0||this.hasPlaybackControl===!1)return;this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl!==!1)return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl!==!1)return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl!==!1)return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?!1:this.loop}setLoop(e){if(this.hasPlaybackControl!==!1)return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ah=new V,i5=new fr,zEe=new V,Ch=new V;class HEe extends JX{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ah,i5,zEe),Ch.set(0,0,1).applyQuaternion(i5);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ah.x,i),t.positionY.linearRampToValueAtTime(Ah.y,i),t.positionZ.linearRampToValueAtTime(Ah.z,i),t.orientationX.linearRampToValueAtTime(Ch.x,i),t.orientationY.linearRampToValueAtTime(Ch.y,i),t.orientationZ.linearRampToValueAtTime(Ch.z,i)}else t.setPosition(Ah.x,Ah.y,Ah.z),t.setOrientation(Ch.x,Ch.y,Ch.z)}}class WEe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class eY{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){fr.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;fr.multiplyQuaternionsFlat(e,o,e,t,e,i),fr.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const T3="\\[\\]\\.:\\/",VEe=new RegExp("["+T3+"]","g"),A3="[^"+T3+"]",GEe="[^"+T3.replace("\\.","")+"]",jEe=/((?:WC+[\/:])*)/.source.replace("WC",A3),$Ee=/(WCOD+)?/.source.replace("WCOD",GEe),XEe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",A3),YEe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",A3),qEe=new RegExp("^"+jEe+$Ee+XEe+YEe+"$"),ZEe=["material","materials","bones","map"];class KEe{constructor(e,t,i){const r=i||un.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class un{constructor(e,t,i){this.path=t,this.parsedPath=i||un.parseTrackName(t),this.node=un.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new un.Composite(e,t,i):new un(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(VEe,"")}static parseTrackName(e){const t=qEe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);ZEe.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=un.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return;if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material||!e.material.materials)return;e=e.material.materials;break;case"bones":if(!e.skeleton)return;e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material||!e.material.map)return;e=e.material.map;break;default:if(e[i]===void 0)return;e=e[i]}if(c!==void 0){if(e[c]===void 0)return;e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry||!e.geometry.morphAttributes)return;e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}un.Composite=KEe;un.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};un.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};un.prototype.GetterByBindingType=[un.prototype._getValue_direct,un.prototype._getValue_array,un.prototype._getValue_arrayElement,un.prototype._getValue_toArray];un.prototype.SetterByBindingTypeAndVersioning=[[un.prototype._setValue_direct,un.prototype._setValue_direct_setNeedsUpdate,un.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[un.prototype._setValue_array,un.prototype._setValue_array_setNeedsUpdate,un.prototype._setValue_array_setMatrixWorldNeedsUpdate],[un.prototype._setValue_arrayElement,un.prototype._setValue_arrayElement_setNeedsUpdate,un.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[un.prototype._setValue_fromArray,un.prototype._setValue_fromArray_setNeedsUpdate,un.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class QEe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Qs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const d=arguments[u],f=d.uuid;let p=t[f];if(p===void 0){p=l++,t[f]=p,e.push(d);for(let x=0,v=o;x!==v;++x)s[x].push(new un(d,i[x],r[x]))}else if(p<c){a=e[p];const x=--c,v=e[x];t[v.uuid]=p,e[p]=v,t[f]=x,e[x]=d;for(let y=0,w=o;y!==w;++y){const _=s[y],b=_[x];let E=_[p];_[p]=b,E===void 0&&(E=new un(d,i[y],r[y])),_[x]=E}}else e[p]}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const h=s++,d=e[h];t[d.uuid]=u,e[u]=d,t[c]=h,e[h]=l;for(let f=0,p=r;f!==p;++f){const x=i[f],v=x[h],y=x[u];x[u]=v,x[h]=y}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,h=t[u];if(h!==void 0)if(delete t[u],h<s){const d=--s,f=e[d],p=--o,x=e[p];t[f.uuid]=h,e[h]=f,t[x.uuid]=d,e[d]=x,e.pop();for(let v=0,y=r;v!==y;++v){const w=i[v],_=w[d],b=w[p];w[h]=_,w[d]=b,w.pop()}}else{const d=--o,f=e[d];d>0&&(t[f.uuid]=h),e[h]=f,e.pop();for(let p=0,x=r;p!==x;++p){const v=i[p];v[h]=v[d],v.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,h=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(h);for(let d=u,f=l.length;d!==f;++d){const p=l[d];h[d]=new un(p,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class tY{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:dd,endingEnd:dd};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=W7,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case $k:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case OE:default:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===V7;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===H7){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=fd,r.endingEnd=fd):(e?r.endingStart=this.zeroSlopeAtStart?fd:dd:r.endingStart=t0,t?r.endingEnd=this.zeroSlopeAtEnd?fd:dd:r.endingEnd=t0)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const JEe=new Float32Array(1);class eMe extends Ll{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let h=0;h!==s;++h){const d=r[h],f=d.name;let p=u[f];if(p!==void 0)++p.referenceCount,o[h]=p;else{if(p=o[h],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}const x=t&&t._propertyBindings[h].binding.parsedPath;p=new eY(un.create(i,f,x),d.ValueTypeName,d.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),o[h]=p}a[h].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete h[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new v3(new Float32Array(2),new Float32Array(2),1,JEe),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?h0.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=OE),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===i)return h;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new tY(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?h0.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=u,t[u]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class C3{constructor(e){this.value=e}clone(){return new C3(this.value.clone===void 0?this.value:this.value.clone())}}let tMe=0;class nMe extends Ll{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:tMe++}),this.name="",this.usage=n0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class wS extends WE{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class iMe{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class P3{constructor(e,t,i=0,r=1/0){this.ray=new Da(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Cd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera&&(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t)}intersectObject(e,t=!0,i=[]){return PI(e,this,i,t),i.sort(r5),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)PI(e[r],this,i,t);return i.sort(r5),i}}function r5(n,e){return n.distance-e.distance}function PI(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)PI(r[s],e,t,!0)}}class RI{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Si(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class rMe{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const s5=new Ue;class sMe{constructor(e=new Ue(1/0,1/0),t=new Ue(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=s5.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,s5).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const o5=new V,Pw=new V;class As{constructor(e=new V,t=new V){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){o5.subVectors(e,this.start),Pw.subVectors(this.end,this.start);const i=Pw.dot(Pw);let s=Pw.dot(o5)/i;return t&&(s=Si(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const a5=new V;class oMe extends _n{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new $t,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new xt(r,3));const s=new pr({fog:!1,toneMapped:!1});this.cone=new Vo(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),a5.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(a5),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const qc=new V,Rw=new dt,FC=new dt;class aMe extends Vo{constructor(e){const t=nY(e),i=new $t,r=[],s=[],o=new ht(0,0,1),a=new ht(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new xt(r,3)),i.setAttribute("color",new xt(s,3));const l=new pr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");FC.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Rw.multiplyMatrices(FC,a.matrixWorld),qc.setFromMatrixPosition(Rw),r.setXYZ(o,qc.x,qc.y,qc.z),Rw.multiplyMatrices(FC,a.parent.matrixWorld),qc.setFromMatrixPosition(Rw),r.setXYZ(o+1,qc.x,qc.y,qc.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function nY(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,nY(n.children[t]));return e}class lMe extends oi{constructor(e,t,i){const r=new X0(t,4,2),s=new Nc({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const cMe=new V,l5=new ht,c5=new ht;class uMe extends _n{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new $0(t);r.rotateY(Math.PI*.5),this.material=new Nc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Mn(o,3)),this.add(new oi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");l5.copy(this.light.color),c5.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?l5:c5;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(cMe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class hMe extends Vo{constructor(e=10,t=10,i=4473924,r=8947848){i=new ht(i),r=new ht(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let d=0,f=0,p=-a;d<=t;d++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const x=d===s?i:r;x.toArray(c,f),f+=3,x.toArray(c,f),f+=3,x.toArray(c,f),f+=3,x.toArray(c,f),f+=3}const u=new $t;u.setAttribute("position",new xt(l,3)),u.setAttribute("color",new xt(c,3));const h=new pr({vertexColors:!0,toneMapped:!1});super(u,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class dMe extends Vo{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new ht(s),o=new ht(o);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const d=h/t*(Math.PI*2),f=Math.sin(d)*e,p=Math.cos(d)*e;a.push(0,0,0),a.push(f,0,p);const x=h&1?s:o;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let h=0;h<i;h++){const d=h&1?s:o,f=e-e/i*h;for(let p=0;p<r;p++){let x=p/r*(Math.PI*2),v=Math.sin(x)*f,y=Math.cos(x)*f;a.push(v,0,y),l.push(d.r,d.g,d.b),x=(p+1)/r*(Math.PI*2),v=Math.sin(x)*f,y=Math.cos(x)*f,a.push(v,0,y),l.push(d.r,d.g,d.b)}}const c=new $t;c.setAttribute("position",new xt(a,3)),c.setAttribute("color",new xt(l,3));const u=new pr({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const u5=new V,Iw=new V,h5=new V;class fMe extends _n{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new $t;r.setAttribute("position",new xt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new pr({fog:!1,toneMapped:!1});this.lightPlane=new $u(r,s),this.add(this.lightPlane),r=new $t,r.setAttribute("position",new xt([0,0,0,0,0,1],3)),this.targetLine=new $u(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),u5.setFromMatrixPosition(this.light.matrixWorld),Iw.setFromMatrixPosition(this.light.target.matrixWorld),h5.subVectors(Iw,u5),this.lightPlane.lookAt(Iw),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Iw),this.targetLine.scale.z=h5.length()}}const Lw=new V,vi=new W0;class pMe extends Vo{constructor(e){const t=new $t,i=new pr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,x){l(p),l(x)}function l(p){r.push(0,0,0),s.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(r.length/3-1)}t.setAttribute("position",new xt(r,3)),t.setAttribute("color",new xt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new ht(16755200),u=new ht(16711680),h=new ht(43775),d=new ht(16777215),f=new ht(3355443);this.setColors(c,u,h,d,f)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;vi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ai("c",t,e,vi,0,0,-1),Ai("t",t,e,vi,0,0,1),Ai("n1",t,e,vi,-i,-r,-1),Ai("n2",t,e,vi,i,-r,-1),Ai("n3",t,e,vi,-i,r,-1),Ai("n4",t,e,vi,i,r,-1),Ai("f1",t,e,vi,-i,-r,1),Ai("f2",t,e,vi,i,-r,1),Ai("f3",t,e,vi,-i,r,1),Ai("f4",t,e,vi,i,r,1),Ai("u1",t,e,vi,i*.7,r*1.1,-1),Ai("u2",t,e,vi,-i*.7,r*1.1,-1),Ai("u3",t,e,vi,0,r*2,-1),Ai("cf1",t,e,vi,-i,0,1),Ai("cf2",t,e,vi,i,0,1),Ai("cf3",t,e,vi,0,-r,1),Ai("cf4",t,e,vi,0,r,1),Ai("cn1",t,e,vi,-i,0,-1),Ai("cn2",t,e,vi,i,0,-1),Ai("cn3",t,e,vi,0,-r,-1),Ai("cn4",t,e,vi,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ai(n,e,t,i,r,s,o){Lw.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],Lw.x,Lw.y,Lw.z)}}const Nw=new Yn;class mMe extends Vo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new $t;s.setIndex(new Mn(i,1)),s.setAttribute("position",new Mn(r,3)),super(s,new pr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(this.object!==void 0&&Nw.setFromObject(this.object),Nw.isEmpty())return;const t=Nw.min,i=Nw.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class gMe extends Vo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new $t;s.setIndex(new Mn(i,1)),s.setAttribute("position",new xt(r,3)),super(s,new pr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class yMe extends $u{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new $t;o.setAttribute("position",new xt(s,3)),o.computeBoundingSphere(),super(o,new pr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new $t;l.setAttribute("position",new xt(a,3)),l.computeBoundingSphere(),this.add(new oi(l,new Nc({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const d5=new V;let kw,UC;class vMe extends _n{constructor(e=new V(0,0,1),t=new V(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",kw===void 0&&(kw=new $t,kw.setAttribute("position",new xt([0,0,0,0,1,0],3)),UC=new nf(0,.5,1,5,1),UC.translate(0,-.5,0)),this.position.copy(t),this.line=new $u(kw,new pr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new oi(UC,new Nc({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{d5.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(d5,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class xMe extends Vo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new $t;r.setAttribute("position",new xt(t,3)),r.setAttribute("color",new xt(i,3));const s=new pr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new ht,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class _Me{constructor(){this.type="ShapePath",this.color=new ht,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new s0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(y){const w=[];for(let _=0,b=y.length;_<b;_++){const E=y[_],M=new Rd;M.curves=E.curves,w.push(M)}return w}function i(y,w){const _=w.length;let b=!1;for(let E=_-1,M=0;M<_;E=M++){let C=w[E],P=w[M],T=P.x-C.x,I=P.y-C.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(C=w[M],T=-T,P=w[E],I=-I),y.y<C.y||y.y>P.y)continue;if(y.y===C.y){if(y.x===C.x)return!0}else{const U=I*(y.x-C.x)-T*(y.y-C.y);if(U===0)return!0;if(U<0)continue;b=!b}}else{if(y.y!==C.y)continue;if(P.x<=y.x&&y.x<=C.x||C.x<=y.x&&y.x<=P.x)return!0}}return b}const r=Sl.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Rd,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const h=[],d=[];let f=[],p=0,x;d[p]=void 0,f[p]=[];for(let y=0,w=s.length;y<w;y++)a=s[y],x=a.getPoints(),o=r(x),o=e?!o:o,o?(!u&&d[p]&&p++,d[p]={s:new Rd,p:x},d[p].s.curves=a.curves,u&&p++,f[p]=[]):f[p].push({h:a,p:x[0]});if(!d[0])return t(s);if(d.length>1){let y=!1,w=0;for(let _=0,b=d.length;_<b;_++)h[_]=[];for(let _=0,b=d.length;_<b;_++){const E=f[_];for(let M=0;M<E.length;M++){const C=E[M];let P=!0;for(let T=0;T<d.length;T++)i(C.p,d[T].p)&&(_!==T&&w++,P?(P=!1,h[T].push(C)):y=!0);P&&h[_].push(C)}}w>0&&y===!1&&(f=h)}let v;for(let y=0,w=d.length;y<w;y++){l=d[y].s,c.push(l),v=f[y];for(let _=0,b=v.length;_<b;_++)l.holes.push(v[_].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ef}}));typeof window<"u"&&(window.__THREE__||(window.__THREE__=ef));const wMe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Dk,AddEquation:nd,AddOperation:R7,AdditiveAnimationBlendMode:$k,AdditiveBlending:$R,AlphaFormat:O7,AlwaysCompare:tX,AlwaysDepth:S7,AlwaysStencilFunc:X7,AmbientLight:qX,AmbientLightProbe:DEe,AnimationAction:tY,AnimationClip:h0,AnimationLoader:TEe,AnimationMixer:eMe,AnimationObjectGroup:QEe,AnimationUtils:bEe,ArcCurve:bX,ArrayCamera:fX,ArrowHelper:vMe,Audio:JX,AudioAnalyser:WEe,AudioContext:E3,AudioListener:BEe,AudioLoader:kEe,AxesHelper:xMe,BackSide:Xr,BasicDepthPacking:G7,BasicShadowMap:c7,Bone:o3,BooleanKeyframeTrack:rf,Box2:sMe,Box3:Yn,Box3Helper:gMe,BoxGeometry:Nl,BoxHelper:mMe,BufferAttribute:Mn,BufferGeometry:$t,BufferGeometryLoader:QX,ByteType:Uk,Cache:$d,Camera:W0,CameraHelper:pMe,CanvasTexture:$Se,CapsuleGeometry:$E,CatmullRomCurve3:SX,CineonToneMapping:N7,CircleGeometry:XE,ClampToEdgeWrapping:si,Clock:M3,Color:ht,ColorKeyframeTrack:x3,ColorManagement:_o,CompressedArrayTexture:jSe,CompressedTexture:a3,CompressedTextureLoader:AEe,ConeGeometry:YE,CubeCamera:oX,CubeReflectionMapping:Mc,CubeRefractionMapping:Gu,CubeTexture:V0,CubeTextureLoader:VX,CubeUVReflectionMapping:dg,CubicBezierCurve:c3,CubicBezierCurve3:EX,CubicInterpolant:zX,CullFaceBack:jR,CullFaceFront:l7,CullFaceFrontBack:W0e,CullFaceNone:a7,Curve:Fa,CurvePath:TX,CustomBlending:u7,CustomToneMapping:k7,CylinderGeometry:nf,Cylindrical:rMe,Data3DTexture:Qk,DataArrayTexture:DE,DataTexture:Pd,DataTextureLoader:w3,DataUtils:md,DecrementStencilOp:J0e,DecrementWrapStencilOp:txe,DefaultLoadingManager:_3,DepthFormat:Nu,DepthStencilFormat:Gd,DepthTexture:pX,DirectionalLight:YX,DirectionalLightHelper:fMe,DiscreteInterpolant:HX,DisplayP3ColorSpace:Yk,DodecahedronGeometry:qE,DoubleSide:cr,DstAlphaFactor:y7,DstColorFactor:x7,DynamicCopyUsage:gxe,DynamicDrawUsage:uxe,DynamicReadUsage:fxe,EdgesGeometry:AX,EllipseCurve:GE,EqualCompare:Z7,EqualDepth:M7,EqualStencilFunc:sxe,EquirectangularReflectionMapping:Rm,EquirectangularRefractionMapping:Kv,Euler:H0,EventDispatcher:Ll,ExtrudeGeometry:KE,FileLoader:ls,Float16BufferAttribute:r_e,Float32BufferAttribute:xt,Float64BufferAttribute:s_e,FloatType:ur,Fog:HE,FogExp2:zE,FramebufferTexture:GSe,FrontSide:Wo,Frustum:FE,GLBufferAttribute:iMe,GLSL1:vxe,GLSL3:wI,GreaterCompare:Q7,GreaterDepth:A7,GreaterEqualCompare:eX,GreaterEqualDepth:T7,GreaterEqualStencilFunc:cxe,GreaterStencilFunc:axe,GridHelper:hMe,Group:gd,HalfFloatType:hr,HemisphereLight:jX,HemisphereLightHelper:uMe,HemisphereLightProbe:OEe,IcosahedronGeometry:j0,ImageBitmapLoader:NEe,ImageLoader:d0,ImageUtils:Kk,IncrementStencilOp:Q0e,IncrementWrapStencilOp:exe,InstancedBufferAttribute:Om,InstancedBufferGeometry:S3,InstancedInterleavedBuffer:wS,InstancedMesh:_X,Int16BufferAttribute:n_e,Int32BufferAttribute:i_e,Int8BufferAttribute:Jxe,IntType:kE,InterleavedBuffer:WE,InterleavedBufferAttribute:Xs,Interpolant:Y0,InterpolateDiscrete:Jv,InterpolateLinear:e0,InterpolateSmooth:Q1,InvertStencilOp:nxe,KeepStencilOp:J1,KeyframeTrack:Ua,LOD:vX,LatheGeometry:G0,Layers:Cd,LessCompare:q7,LessDepth:E7,LessEqualCompare:K7,LessEqualDepth:mS,LessEqualStencilFunc:oxe,LessStencilFunc:rxe,Light:ah,LightProbe:sM,Line:$u,Line3:As,LineBasicMaterial:pr,LineCurve:jE,LineCurve3:MX,LineDashedMaterial:UX,LineLoop:wX,LineSegments:Vo,LinearEncoding:Xk,LinearFilter:En,LinearInterpolant:v3,LinearMipMapLinearFilter:KR,LinearMipMapNearestFilter:$0e,LinearMipmapLinearFilter:ju,LinearMipmapNearestFilter:Fk,LinearSRGBColorSpace:Rs,LinearToneMapping:I7,Loader:Rr,LoaderUtils:_S,LoadingManager:q0,LoopOnce:H7,LoopPingPong:V7,LoopRepeat:W7,LuminanceAlphaFormat:F7,LuminanceFormat:D7,MOUSE:qh,Material:Ki,MaterialLoader:oM,MathUtils:Zk,Matrix3:Yt,Matrix4:dt,MaxEquation:ZR,Mesh:oi,MeshBasicMaterial:Nc,MeshDepthMaterial:i3,MeshDistanceMaterial:r3,MeshLambertMaterial:DX,MeshMatcapMaterial:FX,MeshNormalMaterial:OX,MeshPhongMaterial:rM,MeshPhysicalMaterial:NX,MeshStandardMaterial:m3,MeshToonMaterial:kX,MinEquation:qR,MirroredRepeatWrapping:Qv,MixOperation:P7,MultiplyBlending:YR,MultiplyOperation:z0,NearestFilter:Ri,NearestMipMapLinearFilter:j0e,NearestMipMapNearestFilter:G0e,NearestMipmapLinearFilter:uv,NearestMipmapNearestFilter:gS,NeverCompare:Y7,NeverDepth:b7,NeverStencilFunc:ixe,NoBlending:bl,NoColorSpace:Ou,NoToneMapping:Ma,NormalAnimationBlendMode:OE,NormalBlending:Td,NotEqualCompare:J7,NotEqualDepth:C7,NotEqualStencilFunc:lxe,NumberKeyframeTrack:c0,Object3D:_n,ObjectLoader:IEe,ObjectSpaceNormalMap:$7,OctahedronGeometry:$0,OneFactor:p7,OneMinusDstAlphaFactor:v7,OneMinusDstColorFactor:_7,OneMinusSrcAlphaFactor:Ok,OneMinusSrcColorFactor:g7,OrthographicCamera:Ro,PCFShadowMap:LE,PCFSoftShadowMap:cv,PMREMGenerator:SI,Path:s0,PerspectiveCamera:ri,Plane:xs,PlaneGeometry:tf,PlaneHelper:yMe,PointLight:XX,PointLightHelper:lMe,Points:fv,PointsMaterial:yd,PolarGridHelper:dMe,PolyhedronGeometry:oh,PositionalAudio:HEe,PropertyBinding:un,PropertyMixer:eY,QuadraticBezierCurve:u3,QuadraticBezierCurve3:h3,Quaternion:fr,QuaternionKeyframeTrack:pg,QuaternionLinearInterpolant:WX,RED_GREEN_RGTC2_Format:xI,RED_RGTC1_Format:z7,REVISION:ef,RGBADepthPacking:j7,RGBAFormat:$i,RGBAIntegerFormat:jk,RGBA_ASTC_10x10_Format:mI,RGBA_ASTC_10x5_Format:dI,RGBA_ASTC_10x6_Format:fI,RGBA_ASTC_10x8_Format:pI,RGBA_ASTC_12x10_Format:gI,RGBA_ASTC_12x12_Format:yI,RGBA_ASTC_4x4_Format:rI,RGBA_ASTC_5x4_Format:sI,RGBA_ASTC_5x5_Format:oI,RGBA_ASTC_6x5_Format:aI,RGBA_ASTC_6x6_Format:lI,RGBA_ASTC_8x5_Format:cI,RGBA_ASTC_8x6_Format:uI,RGBA_ASTC_8x8_Format:hI,RGBA_BPTC_Format:K1,RGBA_ETC2_EAC_Format:iI,RGBA_PVRTC_2BPPV1_Format:tI,RGBA_PVRTC_4BPPV1_Format:eI,RGBA_S3TC_DXT1_Format:Y1,RGBA_S3TC_DXT3_Format:q1,RGBA_S3TC_DXT5_Format:Z1,RGB_ETC1_Format:B7,RGB_ETC2_Format:nI,RGB_PVRTC_2BPPV1_Format:JR,RGB_PVRTC_4BPPV1_Format:QR,RGB_S3TC_DXT1_Format:X1,RGFormat:U7,RGIntegerFormat:Gk,RawShaderMaterial:LX,Ray:Da,Raycaster:P3,RectAreaLight:ZX,RedFormat:Wk,RedIntegerFormat:Vk,ReinhardToneMapping:L7,RepeatWrapping:Im,ReplaceStencilOp:K0e,ReverseSubtractEquation:d7,RingGeometry:QE,SIGNED_RED_GREEN_RGTC2_Format:_I,SIGNED_RED_RGTC1_Format:vI,SRGBColorSpace:Ht,Scene:km,ShaderChunk:Xt,ShaderLib:ga,ShaderMaterial:Is,ShadowMaterial:IX,Shape:Rd,ShapeGeometry:JE,ShapePath:_Me,ShapeUtils:Sl,ShortType:Bk,Skeleton:VE,SkeletonHelper:aMe,SkinnedMesh:xX,Source:pd,Sphere:Ns,SphereGeometry:X0,Spherical:RI,SphericalHarmonics3:KX,SplineCurve:d3,SpotLight:$X,SpotLightHelper:oMe,Sprite:yX,SpriteMaterial:s3,SrcAlphaFactor:kk,SrcAlphaSaturateFactor:w7,SrcColorFactor:m7,StaticCopyUsage:mxe,StaticDrawUsage:n0,StaticReadUsage:dxe,StereoCamera:FEe,StreamCopyUsage:yxe,StreamDrawUsage:hxe,StreamReadUsage:pxe,StringKeyframeTrack:sf,SubtractEquation:h7,SubtractiveBlending:XR,TOUCH:Zh,TangentSpaceNormalMap:sh,TetrahedronGeometry:eM,Texture:Rn,TextureLoader:GX,TorusGeometry:tM,TorusKnotGeometry:nM,Triangle:Bn,TriangleFanDrawMode:q0e,TriangleStripDrawMode:Y0e,TrianglesDrawMode:X0e,TubeGeometry:iM,TwoPassDoubleSide:V0e,UVMapping:Vu,Uint16BufferAttribute:Jk,Uint32BufferAttribute:e3,Uint8BufferAttribute:e_e,Uint8ClampedBufferAttribute:t_e,Uniform:C3,UniformsGroup:nMe,UniformsLib:rt,UniformsUtils:xS,UnsignedByteType:Ks,UnsignedInt248Type:Lu,UnsignedIntType:fl,UnsignedShort4444Type:zk,UnsignedShort5551Type:Hk,UnsignedShortType:NE,VSMShadowMap:ha,Vector2:Ue,Vector3:V,Vector4:jt,VectorKeyframeTrack:u0,VideoTexture:VSe,WebGL1Renderer:mX,WebGL3DRenderTarget:Wxe,WebGLArrayRenderTarget:Hxe,WebGLCoordinateSystem:pl,WebGLCubeRenderTarget:t3,WebGLMultipleRenderTargets:Vxe,WebGLRenderTarget:no,WebGLRenderer:BE,WebGLUtils:dX,WebGPUCoordinateSystem:i0,WireframeGeometry:p3,WrapAroundEnding:t0,ZeroCurvatureEnding:dd,ZeroFactor:f7,ZeroSlopeEnding:fd,ZeroStencilOp:Z0e,_SRGBAFormat:yS,sRGBEncoding:ku},Symbol.toStringTag,{value:"Module"}));var iY={exports:{}},of={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */of.ConcurrentRoot=1;of.ContinuousEventPriority=4;of.DefaultEventPriority=16;of.DiscreteEventPriority=1;of.IdleEventPriority=536870912;of.LegacyRoot=0;iY.exports=of;var $p=iY.exports;function bMe(n){let e;const t=new Set,i=(c,u)=>{const h=typeof c=="function"?c(e):c;if(h!==e){const d=e;e=u?h:Object.assign({},e,h),t.forEach(f=>f(e,d))}},r=()=>e,s=(c,u=r,h=Object.is)=>{let d=u(e);function f(){const p=u(e);if(!h(d,p)){const x=d;c(d=p,x)}}return t.add(f),()=>t.delete(f)},l={setState:i,getState:r,subscribe:(c,u,h)=>u||h?s(c,u,h):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const SMe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),f5=SMe?R.useEffect:R.useLayoutEffect;function rY(n){const e=typeof n=="function"?bMe(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=R.useReducer(v=>v+1,0),o=e.getState(),a=R.useRef(o),l=R.useRef(i),c=R.useRef(r),u=R.useRef(!1),h=R.useRef();h.current===void 0&&(h.current=i(o));let d,f=!1;(a.current!==o||l.current!==i||c.current!==r||u.current)&&(d=i(o),f=!r(h.current,d)),f5(()=>{f&&(h.current=d),a.current=o,l.current=i,c.current=r,u.current=!1});const p=R.useRef(o);f5(()=>{const v=()=>{try{const w=e.getState(),_=l.current(w);c.current(h.current,_)||(a.current=w,h.current=_,s())}catch{u.current=!0,s()}},y=e.subscribe(v);return e.getState()!==p.current&&v(),y},[]);const x=f?d:h.current;return R.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var sY={exports:{}},oY={exports:{}},aY={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,W){var D=O.length;O.push(W);e:for(;0<D;){var Y=D-1>>>1,Q=O[Y];if(0<r(Q,W))O[Y]=W,O[D]=Q,D=Y;else break e}}function t(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var W=O[0],D=O.pop();if(D!==W){O[0]=D;e:for(var Y=0,Q=O.length,re=Q>>>1;Y<re;){var ce=2*(Y+1)-1,oe=O[ce],he=ce+1,Re=O[he];if(0>r(oe,D))he<Q&&0>r(Re,oe)?(O[Y]=Re,O[he]=D,Y=he):(O[Y]=oe,O[ce]=D,Y=ce);else if(he<Q&&0>r(Re,D))O[Y]=Re,O[he]=D,Y=he;else break e}}return W}function r(O,W){var D=O.sortIndex-W.sortIndex;return D!==0?D:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,p=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(O){for(var W=t(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=O)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function b(O){if(x=!1,_(O),!p)if(t(l)!==null)p=!0,H(E);else{var W=t(c);W!==null&&Z(b,W.startTime-O)}}function E(O,W){p=!1,x&&(x=!1,y(P),P=-1),f=!0;var D=d;try{for(_(W),h=t(l);h!==null&&(!(h.expirationTime>W)||O&&!U());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,d=h.priorityLevel;var Q=Y(h.expirationTime<=W);W=n.unstable_now(),typeof Q=="function"?h.callback=Q:h===t(l)&&i(l),_(W)}else i(l);h=t(l)}if(h!==null)var re=!0;else{var ce=t(c);ce!==null&&Z(b,ce.startTime-W),re=!1}return re}finally{h=null,d=D,f=!1}}var M=!1,C=null,P=-1,T=5,I=-1;function U(){return!(n.unstable_now()-I<T)}function j(){if(C!==null){var O=n.unstable_now();I=O;var W=!0;try{W=C(!0,O)}finally{W?B():(M=!1,C=null)}}else M=!1}var B;if(typeof w=="function")B=function(){w(j)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,$=z.port2;z.port1.onmessage=j,B=function(){$.postMessage(null)}}else B=function(){v(j,0)};function H(O){C=O,M||(M=!0,B())}function Z(O,W){P=v(function(){O(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){p||f||(p=!0,H(E))},n.unstable_forceFrameRate=function(O){0>O||125<O||(T=0<O?Math.floor(1e3/O):5)},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(d){case 1:case 2:case 3:var W=3;break;default:W=d}var D=d;d=W;try{return O()}finally{d=D}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var D=d;d=O;try{return W()}finally{d=D}},n.unstable_scheduleCallback=function(O,W,D){var Y=n.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?Y+D:Y):D=Y,O){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=D+Q,O={id:u++,callback:W,priorityLevel:O,startTime:D,expirationTime:Q,sortIndex:-1},D>Y?(O.sortIndex=D,e(c,O),t(l)===null&&O===t(c)&&(x?(y(P),P=-1):x=!0,Z(b,D-Y))):(O.sortIndex=Q,e(l,O),p||f||(p=!0,H(E))),O},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(O){var W=d;return function(){var D=d;d=W;try{return O.apply(this,arguments)}finally{d=D}}}})(aY);oY.exports=aY;var II=oY.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EMe=function(e){var t={},i=R,r=II,s=Object.assign;function o(m){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+m,S=1;S<arguments.length;S++)g+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),E=Symbol.iterator;function M(m){return m===null||typeof m!="object"?null:(m=E&&m[E]||m["@@iterator"],typeof m=="function"?m:null)}function C(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case u:return"Fragment";case c:return"Portal";case d:return"Profiler";case h:return"StrictMode";case v:return"Suspense";case y:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case p:return(m.displayName||"Context")+".Consumer";case f:return(m._context.displayName||"Context")+".Provider";case x:var g=m.render;return m=m.displayName,m||(m=g.displayName||g.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case w:return g=m.displayName||null,g!==null?g:C(m.type)||"Memo";case _:g=m._payload,m=m._init;try{return C(m(g))}catch{}}return null}function P(m){var g=m.type;switch(m.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=g.render,m=m.displayName||m.name||"",g.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C(g);case 8:return g===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function T(m){var g=m,S=m;if(m.alternate)for(;g.return;)g=g.return;else{m=g;do g=m,g.flags&4098&&(S=g.return),m=g.return;while(m)}return g.tag===3?S:null}function I(m){if(T(m)!==m)throw Error(o(188))}function U(m){var g=m.alternate;if(!g){if(g=T(m),g===null)throw Error(o(188));return g!==m?null:m}for(var S=m,A=g;;){var L=S.return;if(L===null)break;var F=L.alternate;if(F===null){if(A=L.return,A!==null){S=A;continue}break}if(L.child===F.child){for(F=L.child;F;){if(F===S)return I(L),m;if(F===A)return I(L),g;F=F.sibling}throw Error(o(188))}if(S.return!==A.return)S=L,A=F;else{for(var ne=!1,ue=L.child;ue;){if(ue===S){ne=!0,S=L,A=F;break}if(ue===A){ne=!0,A=L,S=F;break}ue=ue.sibling}if(!ne){for(ue=F.child;ue;){if(ue===S){ne=!0,S=F,A=L;break}if(ue===A){ne=!0,A=F,S=L;break}ue=ue.sibling}if(!ne)throw Error(o(189))}}if(S.alternate!==A)throw Error(o(190))}if(S.tag!==3)throw Error(o(188));return S.stateNode.current===S?m:g}function j(m){return m=U(m),m!==null?B(m):null}function B(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var g=B(m);if(g!==null)return g;m=m.sibling}return null}function z(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){if(m.tag!==4){var g=z(m);if(g!==null)return g}m=m.sibling}return null}var $=Array.isArray,H=e.getPublicInstance,Z=e.getRootHostContext,O=e.getChildHostContext,W=e.prepareForCommit,D=e.resetAfterCommit,Y=e.createInstance,Q=e.appendInitialChild,re=e.finalizeInitialChildren,ce=e.prepareUpdate,oe=e.shouldSetTextContent,he=e.createTextInstance,Re=e.scheduleTimeout,Oe=e.cancelTimeout,Ve=e.noTimeout,Je=e.isPrimaryRenderer,Fe=e.supportsMutation,J=e.supportsPersistence,ge=e.supportsHydration,de=e.getInstanceFromNode,Ae=e.preparePortalMount,Ie=e.getCurrentEventPriority,me=e.detachDeletedInstance,ye=e.supportsMicrotasks,ke=e.scheduleMicrotask,Xe=e.supportsTestSelectors,Le=e.findFiberRoot,Ye=e.getBoundingRect,q=e.getTextContent,X=e.isHiddenSubtree,pe=e.matchAccessibilityRole,_e=e.setFocusIfFocusable,xe=e.setupIntersectionObserver,Me=e.appendChild,je=e.appendChildToContainer,qe=e.commitTextUpdate,Ne=e.commitMount,Qe=e.commitUpdate,$e=e.insertBefore,it=e.insertInContainerBefore,se=e.removeChild,Se=e.removeChildFromContainer,Ze=e.resetTextContent,lt=e.hideInstance,le=e.hideTextInstance,be=e.unhideInstance,Te=e.unhideTextInstance,tt=e.clearContainer,at=e.cloneInstance,kt=e.createContainerChildSet,en=e.appendChildToContainerChildSet,Ln=e.finalizeContainerChildren,Ei=e.replaceContainerChildren,cn=e.cloneHiddenInstance,Li=e.cloneHiddenTextInstance,zi=e.canHydrateInstance,af=e.canHydrateTextInstance,lf=e.canHydrateSuspenseInstance,kl=e.isSuspenseInstancePending,Ba=e.isSuspenseInstanceFallback,za=e.registerSuspenseInstanceRetry,Ir=e.getNextHydratableSibling,Zt=e.getFirstHydratableChild,cf=e.getFirstHydratableChildWithinContainer,yg=e.getFirstHydratableChildWithinSuspenseInstance,G=e.hydrateInstance,N=e.hydrateTextInstance,K=e.hydrateSuspenseInstance,te=e.getNextHydratableInstanceAfterSuspenseInstance,ee=e.commitHydratedContainer,ie=e.commitHydratedSuspenseInstance,we=e.clearSuspenseBoundary,Ce=e.clearSuspenseBoundaryFromContainer,He=e.shouldDeleteUnhydratedTailInstances,We=e.didNotMatchHydratedContainerTextInstance,Ge=e.didNotMatchHydratedTextInstance,Be;function gt(m){if(Be===void 0)try{throw Error()}catch(S){var g=S.stack.trim().match(/\n( *(at )?)/);Be=g&&g[1]||""}return`
`+Be+m}var nt=!1;function ot(m,g){if(!m||nt)return"";nt=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(et){var A=et}Reflect.construct(m,[],g)}else{try{g.call()}catch(et){A=et}m.call(g.prototype)}else{try{throw Error()}catch(et){A=et}m()}}catch(et){if(et&&A&&typeof et.stack=="string"){for(var L=et.stack.split(`
`),F=A.stack.split(`
`),ne=L.length-1,ue=F.length-1;1<=ne&&0<=ue&&L[ne]!==F[ue];)ue--;for(;1<=ne&&0<=ue;ne--,ue--)if(L[ne]!==F[ue]){if(ne!==1||ue!==1)do if(ne--,ue--,0>ue||L[ne]!==F[ue]){var ze=`
`+L[ne].replace(" at new "," at ");return m.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",m.displayName)),ze}while(1<=ne&&0<=ue);break}}}finally{nt=!1,Error.prepareStackTrace=S}return(m=m?m.displayName||m.name:"")?gt(m):""}var At=Object.prototype.hasOwnProperty,Rt=[],Ct=-1;function yt(m){return{current:m}}function Nt(m){0>Ct||(m.current=Rt[Ct],Rt[Ct]=null,Ct--)}function St(m,g){Ct++,Rt[Ct]=m.current,m.current=g}var Wt={},Tn=yt(Wt),Dt=yt(!1),An=Wt;function pn(m,g){var S=m.type.contextTypes;if(!S)return Wt;var A=m.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===g)return A.__reactInternalMemoizedMaskedChildContext;var L={},F;for(F in S)L[F]=g[F];return A&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=g,m.__reactInternalMemoizedMaskedChildContext=L),L}function Nn(m){return m=m.childContextTypes,m!=null}function Mi(){Nt(Dt),Nt(Tn)}function zt(m,g,S){if(Tn.current!==Wt)throw Error(o(168));St(Tn,g),St(Dt,S)}function ai(m,g,S){var A=m.stateNode;if(g=g.childContextTypes,typeof A.getChildContext!="function")return S;A=A.getChildContext();for(var L in A)if(!(L in g))throw Error(o(108,P(m)||"Unknown",L));return s({},S,A)}function wn(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Wt,An=Tn.current,St(Tn,m),St(Dt,Dt.current),!0}function an(m,g,S){var A=m.stateNode;if(!A)throw Error(o(169));S?(m=ai(m,g,An),A.__reactInternalMemoizedMergedChildContext=m,Nt(Dt),Nt(Tn),St(Tn,m)):Nt(Dt),St(Dt,S)}var ti=Math.clz32?Math.clz32:Ha,Ol=Math.log,Kr=Math.LN2;function Ha(m){return m>>>=0,m===0?32:31-(Ol(m)/Kr|0)|0}var tx=64,nx=4194304;function vg(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function ix(m,g){var S=m.pendingLanes;if(S===0)return 0;var A=0,L=m.suspendedLanes,F=m.pingedLanes,ne=S&268435455;if(ne!==0){var ue=ne&~L;ue!==0?A=vg(ue):(F&=ne,F!==0&&(A=vg(F)))}else ne=S&~L,ne!==0?A=vg(ne):F!==0&&(A=vg(F));if(A===0)return 0;if(g!==0&&g!==A&&!(g&L)&&(L=A&-A,F=g&-g,L>=F||L===16&&(F&4194240)!==0))return g;if(A&4&&(A|=S&16),g=m.entangledLanes,g!==0)for(m=m.entanglements,g&=A;0<g;)S=31-ti(g),L=1<<S,A|=m[S],g&=~L;return A}function fq(m,g){switch(m){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pq(m,g){for(var S=m.suspendedLanes,A=m.pingedLanes,L=m.expirationTimes,F=m.pendingLanes;0<F;){var ne=31-ti(F),ue=1<<ne,ze=L[ne];ze===-1?(!(ue&S)||ue&A)&&(L[ne]=fq(ue,g)):ze<=g&&(m.expiredLanes|=ue),F&=~ue}}function mM(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function gM(m){for(var g=[],S=0;31>S;S++)g.push(m);return g}function xg(m,g,S){m.pendingLanes|=g,g!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,g=31-ti(g),m[g]=S}function mq(m,g){var S=m.pendingLanes&~g;m.pendingLanes=g,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=g,m.mutableReadLanes&=g,m.entangledLanes&=g,g=m.entanglements;var A=m.eventTimes;for(m=m.expirationTimes;0<S;){var L=31-ti(S),F=1<<L;g[L]=0,A[L]=-1,m[L]=-1,S&=~F}}function yM(m,g){var S=m.entangledLanes|=g;for(m=m.entanglements;S;){var A=31-ti(S),L=1<<A;L&g|m[A]&g&&(m[A]|=g),S&=~L}}var mn=0;function Q3(m){return m&=-m,1<m?4<m?m&268435455?16:536870912:4:1}var vM=r.unstable_scheduleCallback,J3=r.unstable_cancelCallback,gq=r.unstable_shouldYield,yq=r.unstable_requestPaint,er=r.unstable_now,xM=r.unstable_ImmediatePriority,vq=r.unstable_UserBlockingPriority,_M=r.unstable_NormalPriority,xq=r.unstable_IdlePriority,rx=null,Wa=null;function _q(m){if(Wa&&typeof Wa.onCommitFiberRoot=="function")try{Wa.onCommitFiberRoot(rx,m,void 0,(m.current.flags&128)===128)}catch{}}function wq(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var Va=typeof Object.is=="function"?Object.is:wq,Dl=null,sx=!1,wM=!1;function eO(m){Dl===null?Dl=[m]:Dl.push(m)}function bq(m){sx=!0,eO(m)}function Ga(){if(!wM&&Dl!==null){wM=!0;var m=0,g=mn;try{var S=Dl;for(mn=1;m<S.length;m++){var A=S[m];do A=A(!0);while(A!==null)}Dl=null,sx=!1}catch(L){throw Dl!==null&&(Dl=Dl.slice(m+1)),vM(xM,Ga),L}finally{mn=g,wM=!1}}return null}var Sq=a.ReactCurrentBatchConfig;function ox(m,g){if(Va(m,g))return!0;if(typeof m!="object"||m===null||typeof g!="object"||g===null)return!1;var S=Object.keys(m),A=Object.keys(g);if(S.length!==A.length)return!1;for(A=0;A<S.length;A++){var L=S[A];if(!At.call(g,L)||!Va(m[L],g[L]))return!1}return!0}function Eq(m){switch(m.tag){case 5:return gt(m.type);case 16:return gt("Lazy");case 13:return gt("Suspense");case 19:return gt("SuspenseList");case 0:case 2:case 15:return m=ot(m.type,!1),m;case 11:return m=ot(m.type.render,!1),m;case 1:return m=ot(m.type,!0),m;default:return""}}function Ko(m,g){if(m&&m.defaultProps){g=s({},g),m=m.defaultProps;for(var S in m)g[S]===void 0&&(g[S]=m[S]);return g}return g}var ax=yt(null),lx=null,uf=null,bM=null;function SM(){bM=uf=lx=null}function tO(m,g,S){Je?(St(ax,g._currentValue),g._currentValue=S):(St(ax,g._currentValue2),g._currentValue2=S)}function EM(m){var g=ax.current;Nt(ax),Je?m._currentValue=g:m._currentValue2=g}function MM(m,g,S){for(;m!==null;){var A=m.alternate;if((m.childLanes&g)!==g?(m.childLanes|=g,A!==null&&(A.childLanes|=g)):A!==null&&(A.childLanes&g)!==g&&(A.childLanes|=g),m===S)break;m=m.return}}function hf(m,g){lx=m,bM=uf=null,m=m.dependencies,m!==null&&m.firstContext!==null&&(m.lanes&g&&(Ds=!0),m.firstContext=null)}function lo(m){var g=Je?m._currentValue:m._currentValue2;if(bM!==m)if(m={context:m,memoizedValue:g,next:null},uf===null){if(lx===null)throw Error(o(308));uf=m,lx.dependencies={lanes:0,firstContext:m}}else uf=uf.next=m;return g}var ja=null,kc=!1;function TM(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nO(m,g){m=m.updateQueue,g.updateQueue===m&&(g.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function Fl(m,g){return{eventTime:m,lane:g,tag:0,payload:null,callback:null,next:null}}function Oc(m,g){var S=m.updateQueue;S!==null&&(S=S.shared,Ni!==null&&m.mode&1&&!(Jt&2)?(m=S.interleaved,m===null?(g.next=g,ja===null?ja=[S]:ja.push(S)):(g.next=m.next,m.next=g),S.interleaved=g):(m=S.pending,m===null?g.next=g:(g.next=m.next,m.next=g),S.pending=g))}function cx(m,g,S){if(g=g.updateQueue,g!==null&&(g=g.shared,(S&4194240)!==0)){var A=g.lanes;A&=m.pendingLanes,S|=A,g.lanes=S,yM(m,S)}}function iO(m,g){var S=m.updateQueue,A=m.alternate;if(A!==null&&(A=A.updateQueue,S===A)){var L=null,F=null;if(S=S.firstBaseUpdate,S!==null){do{var ne={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};F===null?L=F=ne:F=F.next=ne,S=S.next}while(S!==null);F===null?L=F=g:F=F.next=g}else L=F=g;S={baseState:A.baseState,firstBaseUpdate:L,lastBaseUpdate:F,shared:A.shared,effects:A.effects},m.updateQueue=S;return}m=S.lastBaseUpdate,m===null?S.firstBaseUpdate=g:m.next=g,S.lastBaseUpdate=g}function ux(m,g,S,A){var L=m.updateQueue;kc=!1;var F=L.firstBaseUpdate,ne=L.lastBaseUpdate,ue=L.shared.pending;if(ue!==null){L.shared.pending=null;var ze=ue,et=ze.next;ze.next=null,ne===null?F=et:ne.next=et,ne=ze;var bt=m.alternate;bt!==null&&(bt=bt.updateQueue,ue=bt.lastBaseUpdate,ue!==ne&&(ue===null?bt.firstBaseUpdate=et:ue.next=et,bt.lastBaseUpdate=ze))}if(F!==null){var Vt=L.baseState;ne=0,bt=et=ze=null,ue=F;do{var It=ue.lane,Fn=ue.eventTime;if((A&It)===It){bt!==null&&(bt=bt.next={eventTime:Fn,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var Tt=m,Or=ue;switch(It=g,Fn=S,Or.tag){case 1:if(Tt=Or.payload,typeof Tt=="function"){Vt=Tt.call(Fn,Vt,It);break e}Vt=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=Or.payload,It=typeof Tt=="function"?Tt.call(Fn,Vt,It):Tt,It==null)break e;Vt=s({},Vt,It);break e;case 2:kc=!0}}ue.callback!==null&&ue.lane!==0&&(m.flags|=64,It=L.effects,It===null?L.effects=[ue]:It.push(ue))}else Fn={eventTime:Fn,lane:It,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},bt===null?(et=bt=Fn,ze=Vt):bt=bt.next=Fn,ne|=It;if(ue=ue.next,ue===null){if(ue=L.shared.pending,ue===null)break;It=ue,ue=It.next,It.next=null,L.lastBaseUpdate=It,L.shared.pending=null}}while(!0);if(bt===null&&(ze=Vt),L.baseState=ze,L.firstBaseUpdate=et,L.lastBaseUpdate=bt,g=L.shared.interleaved,g!==null){L=g;do ne|=L.lane,L=L.next;while(L!==g)}else F===null&&(L.shared.lanes=0);_f|=ne,m.lanes=ne,m.memoizedState=Vt}}function rO(m,g,S){if(m=g.effects,g.effects=null,m!==null)for(g=0;g<m.length;g++){var A=m[g],L=A.callback;if(L!==null){if(A.callback=null,A=S,typeof L!="function")throw Error(o(191,L));L.call(A)}}}var sO=new i.Component().refs;function AM(m,g,S,A){g=m.memoizedState,S=S(A,g),S=S==null?g:s({},g,S),m.memoizedState=S,m.lanes===0&&(m.updateQueue.baseState=S)}var hx={isMounted:function(m){return(m=m._reactInternals)?T(m)===m:!1},enqueueSetState:function(m,g,S){m=m._reactInternals;var A=Jr(),L=Uc(m),F=Fl(A,L);F.payload=g,S!=null&&(F.callback=S),Oc(m,F),g=po(m,L,A),g!==null&&cx(g,m,L)},enqueueReplaceState:function(m,g,S){m=m._reactInternals;var A=Jr(),L=Uc(m),F=Fl(A,L);F.tag=1,F.payload=g,S!=null&&(F.callback=S),Oc(m,F),g=po(m,L,A),g!==null&&cx(g,m,L)},enqueueForceUpdate:function(m,g){m=m._reactInternals;var S=Jr(),A=Uc(m),L=Fl(S,A);L.tag=2,g!=null&&(L.callback=g),Oc(m,L),g=po(m,A,S),g!==null&&cx(g,m,A)}};function oO(m,g,S,A,L,F,ne){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(A,F,ne):g.prototype&&g.prototype.isPureReactComponent?!ox(S,A)||!ox(L,F):!0}function aO(m,g,S){var A=!1,L=Wt,F=g.contextType;return typeof F=="object"&&F!==null?F=lo(F):(L=Nn(g)?An:Tn.current,A=g.contextTypes,F=(A=A!=null)?pn(m,L):Wt),g=new g(S,F),m.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=hx,m.stateNode=g,g._reactInternals=m,A&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=L,m.__reactInternalMemoizedMaskedChildContext=F),g}function lO(m,g,S,A){m=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(S,A),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(S,A),g.state!==m&&hx.enqueueReplaceState(g,g.state,null)}function CM(m,g,S,A){var L=m.stateNode;L.props=S,L.state=m.memoizedState,L.refs=sO,TM(m);var F=g.contextType;typeof F=="object"&&F!==null?L.context=lo(F):(F=Nn(g)?An:Tn.current,L.context=pn(m,F)),L.state=m.memoizedState,F=g.getDerivedStateFromProps,typeof F=="function"&&(AM(m,g,F,S),L.state=m.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(g=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),g!==L.state&&hx.enqueueReplaceState(L,L.state,null),ux(m,S,L,A),L.state=m.memoizedState),typeof L.componentDidMount=="function"&&(m.flags|=4194308)}var df=[],ff=0,dx=null,fx=0,co=[],uo=0,lh=null,Ul=1,Bl="";function ch(m,g){df[ff++]=fx,df[ff++]=dx,dx=m,fx=g}function cO(m,g,S){co[uo++]=Ul,co[uo++]=Bl,co[uo++]=lh,lh=m;var A=Ul;m=Bl;var L=32-ti(A)-1;A&=~(1<<L),S+=1;var F=32-ti(g)+L;if(30<F){var ne=L-L%5;F=(A&(1<<ne)-1).toString(32),A>>=ne,L-=ne,Ul=1<<32-ti(g)+L|S<<L|A,Bl=F+m}else Ul=1<<F|S<<L|A,Bl=m}function PM(m){m.return!==null&&(ch(m,1),cO(m,1,0))}function RM(m){for(;m===dx;)dx=df[--ff],df[ff]=null,fx=df[--ff],df[ff]=null;for(;m===lh;)lh=co[--uo],co[uo]=null,Bl=co[--uo],co[uo]=null,Ul=co[--uo],co[uo]=null}var ks=null,Os=null,ni=!1,_g=!1,Qo=null;function uO(m,g){var S=mo(5,null,null,0);S.elementType="DELETED",S.stateNode=g,S.return=m,g=m.deletions,g===null?(m.deletions=[S],m.flags|=16):g.push(S)}function hO(m,g){switch(m.tag){case 5:return g=zi(g,m.type,m.pendingProps),g!==null?(m.stateNode=g,ks=m,Os=Zt(g),!0):!1;case 6:return g=af(g,m.pendingProps),g!==null?(m.stateNode=g,ks=m,Os=null,!0):!1;case 13:if(g=lf(g),g!==null){var S=lh!==null?{id:Ul,overflow:Bl}:null;return m.memoizedState={dehydrated:g,treeContext:S,retryLane:1073741824},S=mo(18,null,null,0),S.stateNode=g,S.return=m,m.child=S,ks=m,Os=null,!0}return!1;default:return!1}}function IM(m){return(m.mode&1)!==0&&(m.flags&128)===0}function LM(m){if(ni){var g=Os;if(g){var S=g;if(!hO(m,g)){if(IM(m))throw Error(o(418));g=Ir(S);var A=ks;g&&hO(m,g)?uO(A,S):(m.flags=m.flags&-4097|2,ni=!1,ks=m)}}else{if(IM(m))throw Error(o(418));m.flags=m.flags&-4097|2,ni=!1,ks=m}}}function dO(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;ks=m}function wg(m){if(!ge||m!==ks)return!1;if(!ni)return dO(m),ni=!0,!1;if(m.tag!==3&&(m.tag!==5||He(m.type)&&!oe(m.type,m.memoizedProps))){var g=Os;if(g){if(IM(m)){for(m=Os;m;)m=Ir(m);throw Error(o(418))}for(;g;)uO(m,g),g=Ir(g)}}if(dO(m),m.tag===13){if(!ge)throw Error(o(316));if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(o(317));Os=te(m)}else Os=ks?Ir(m.stateNode):null;return!0}function pf(){ge&&(Os=ks=null,_g=ni=!1)}function NM(m){Qo===null?Qo=[m]:Qo.push(m)}function bg(m,g,S){if(m=S.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(o(309));var A=S.stateNode}if(!A)throw Error(o(147,m));var L=A,F=""+m;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===F?g.ref:(g=function(ne){var ue=L.refs;ue===sO&&(ue=L.refs={}),ne===null?delete ue[F]:ue[F]=ne},g._stringRef=F,g)}if(typeof m!="string")throw Error(o(284));if(!S._owner)throw Error(o(290,m))}return m}function px(m,g){throw m=Object.prototype.toString.call(g),Error(o(31,m==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":m))}function fO(m){var g=m._init;return g(m._payload)}function pO(m){function g(Ee,fe){if(m){var De=Ee.deletions;De===null?(Ee.deletions=[fe],Ee.flags|=16):De.push(fe)}}function S(Ee,fe){if(!m)return null;for(;fe!==null;)g(Ee,fe),fe=fe.sibling;return null}function A(Ee,fe){for(Ee=new Map;fe!==null;)fe.key!==null?Ee.set(fe.key,fe):Ee.set(fe.index,fe),fe=fe.sibling;return Ee}function L(Ee,fe){return Ee=zc(Ee,fe),Ee.index=0,Ee.sibling=null,Ee}function F(Ee,fe,De){return Ee.index=De,m?(De=Ee.alternate,De!==null?(De=De.index,De<fe?(Ee.flags|=2,fe):De):(Ee.flags|=2,fe)):(Ee.flags|=1048576,fe)}function ne(Ee){return m&&Ee.alternate===null&&(Ee.flags|=2),Ee}function ue(Ee,fe,De,ft){return fe===null||fe.tag!==6?(fe=gT(De,Ee.mode,ft),fe.return=Ee,fe):(fe=L(fe,De),fe.return=Ee,fe)}function ze(Ee,fe,De,ft){var Et=De.type;return Et===u?bt(Ee,fe,De.props.children,ft,De.key):fe!==null&&(fe.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===_&&fO(Et)===fe.type)?(ft=L(fe,De.props),ft.ref=bg(Ee,fe,De),ft.return=Ee,ft):(ft=jx(De.type,De.key,De.props,null,Ee.mode,ft),ft.ref=bg(Ee,fe,De),ft.return=Ee,ft)}function et(Ee,fe,De,ft){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==De.containerInfo||fe.stateNode.implementation!==De.implementation?(fe=yT(De,Ee.mode,ft),fe.return=Ee,fe):(fe=L(fe,De.children||[]),fe.return=Ee,fe)}function bt(Ee,fe,De,ft,Et){return fe===null||fe.tag!==7?(fe=gh(De,Ee.mode,ft,Et),fe.return=Ee,fe):(fe=L(fe,De),fe.return=Ee,fe)}function Vt(Ee,fe,De){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return fe=gT(""+fe,Ee.mode,De),fe.return=Ee,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case l:return De=jx(fe.type,fe.key,fe.props,null,Ee.mode,De),De.ref=bg(Ee,null,fe),De.return=Ee,De;case c:return fe=yT(fe,Ee.mode,De),fe.return=Ee,fe;case _:var ft=fe._init;return Vt(Ee,ft(fe._payload),De)}if($(fe)||M(fe))return fe=gh(fe,Ee.mode,De,null),fe.return=Ee,fe;px(Ee,fe)}return null}function It(Ee,fe,De,ft){var Et=fe!==null?fe.key:null;if(typeof De=="string"&&De!==""||typeof De=="number")return Et!==null?null:ue(Ee,fe,""+De,ft);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case l:return De.key===Et?ze(Ee,fe,De,ft):null;case c:return De.key===Et?et(Ee,fe,De,ft):null;case _:return Et=De._init,It(Ee,fe,Et(De._payload),ft)}if($(De)||M(De))return Et!==null?null:bt(Ee,fe,De,ft,null);px(Ee,De)}return null}function Fn(Ee,fe,De,ft,Et){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return Ee=Ee.get(De)||null,ue(fe,Ee,""+ft,Et);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case l:return Ee=Ee.get(ft.key===null?De:ft.key)||null,ze(fe,Ee,ft,Et);case c:return Ee=Ee.get(ft.key===null?De:ft.key)||null,et(fe,Ee,ft,Et);case _:var Kt=ft._init;return Fn(Ee,fe,De,Kt(ft._payload),Et)}if($(ft)||M(ft))return Ee=Ee.get(De)||null,bt(fe,Ee,ft,Et,null);px(fe,ft)}return null}function Tt(Ee,fe,De,ft){for(var Et=null,Kt=null,Gt=fe,gn=fe=0,nr=null;Gt!==null&&gn<De.length;gn++){Gt.index>gn?(nr=Gt,Gt=null):nr=Gt.sibling;var yn=It(Ee,Gt,De[gn],ft);if(yn===null){Gt===null&&(Gt=nr);break}m&&Gt&&yn.alternate===null&&g(Ee,Gt),fe=F(yn,fe,gn),Kt===null?Et=yn:Kt.sibling=yn,Kt=yn,Gt=nr}if(gn===De.length)return S(Ee,Gt),ni&&ch(Ee,gn),Et;if(Gt===null){for(;gn<De.length;gn++)Gt=Vt(Ee,De[gn],ft),Gt!==null&&(fe=F(Gt,fe,gn),Kt===null?Et=Gt:Kt.sibling=Gt,Kt=Gt);return ni&&ch(Ee,gn),Et}for(Gt=A(Ee,Gt);gn<De.length;gn++)nr=Fn(Gt,Ee,gn,De[gn],ft),nr!==null&&(m&&nr.alternate!==null&&Gt.delete(nr.key===null?gn:nr.key),fe=F(nr,fe,gn),Kt===null?Et=nr:Kt.sibling=nr,Kt=nr);return m&&Gt.forEach(function(Hc){return g(Ee,Hc)}),ni&&ch(Ee,gn),Et}function Or(Ee,fe,De,ft){var Et=M(De);if(typeof Et!="function")throw Error(o(150));if(De=Et.call(De),De==null)throw Error(o(151));for(var Kt=Et=null,Gt=fe,gn=fe=0,nr=null,yn=De.next();Gt!==null&&!yn.done;gn++,yn=De.next()){Gt.index>gn?(nr=Gt,Gt=null):nr=Gt.sibling;var Hc=It(Ee,Gt,yn.value,ft);if(Hc===null){Gt===null&&(Gt=nr);break}m&&Gt&&Hc.alternate===null&&g(Ee,Gt),fe=F(Hc,fe,gn),Kt===null?Et=Hc:Kt.sibling=Hc,Kt=Hc,Gt=nr}if(yn.done)return S(Ee,Gt),ni&&ch(Ee,gn),Et;if(Gt===null){for(;!yn.done;gn++,yn=De.next())yn=Vt(Ee,yn.value,ft),yn!==null&&(fe=F(yn,fe,gn),Kt===null?Et=yn:Kt.sibling=yn,Kt=yn);return ni&&ch(Ee,gn),Et}for(Gt=A(Ee,Gt);!yn.done;gn++,yn=De.next())yn=Fn(Gt,Ee,gn,yn.value,ft),yn!==null&&(m&&yn.alternate!==null&&Gt.delete(yn.key===null?gn:yn.key),fe=F(yn,fe,gn),Kt===null?Et=yn:Kt.sibling=yn,Kt=yn);return m&&Gt.forEach(function(eZ){return g(Ee,eZ)}),ni&&ch(Ee,gn),Et}function go(Ee,fe,De,ft){if(typeof De=="object"&&De!==null&&De.type===u&&De.key===null&&(De=De.props.children),typeof De=="object"&&De!==null){switch(De.$$typeof){case l:e:{for(var Et=De.key,Kt=fe;Kt!==null;){if(Kt.key===Et){if(Et=De.type,Et===u){if(Kt.tag===7){S(Ee,Kt.sibling),fe=L(Kt,De.props.children),fe.return=Ee,Ee=fe;break e}}else if(Kt.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===_&&fO(Et)===Kt.type){S(Ee,Kt.sibling),fe=L(Kt,De.props),fe.ref=bg(Ee,Kt,De),fe.return=Ee,Ee=fe;break e}S(Ee,Kt);break}else g(Ee,Kt);Kt=Kt.sibling}De.type===u?(fe=gh(De.props.children,Ee.mode,ft,De.key),fe.return=Ee,Ee=fe):(ft=jx(De.type,De.key,De.props,null,Ee.mode,ft),ft.ref=bg(Ee,fe,De),ft.return=Ee,Ee=ft)}return ne(Ee);case c:e:{for(Kt=De.key;fe!==null;){if(fe.key===Kt)if(fe.tag===4&&fe.stateNode.containerInfo===De.containerInfo&&fe.stateNode.implementation===De.implementation){S(Ee,fe.sibling),fe=L(fe,De.children||[]),fe.return=Ee,Ee=fe;break e}else{S(Ee,fe);break}else g(Ee,fe);fe=fe.sibling}fe=yT(De,Ee.mode,ft),fe.return=Ee,Ee=fe}return ne(Ee);case _:return Kt=De._init,go(Ee,fe,Kt(De._payload),ft)}if($(De))return Tt(Ee,fe,De,ft);if(M(De))return Or(Ee,fe,De,ft);px(Ee,De)}return typeof De=="string"&&De!==""||typeof De=="number"?(De=""+De,fe!==null&&fe.tag===6?(S(Ee,fe.sibling),fe=L(fe,De),fe.return=Ee,Ee=fe):(S(Ee,fe),fe=gT(De,Ee.mode,ft),fe.return=Ee,Ee=fe),ne(Ee)):S(Ee,fe)}return go}var mf=pO(!0),mO=pO(!1),Sg={},ho=yt(Sg),Eg=yt(Sg),gf=yt(Sg);function $a(m){if(m===Sg)throw Error(o(174));return m}function kM(m,g){St(gf,g),St(Eg,m),St(ho,Sg),m=Z(g),Nt(ho),St(ho,m)}function yf(){Nt(ho),Nt(Eg),Nt(gf)}function gO(m){var g=$a(gf.current),S=$a(ho.current);g=O(S,m.type,g),S!==g&&(St(Eg,m),St(ho,g))}function OM(m){Eg.current===m&&(Nt(ho),Nt(Eg))}var li=yt(0);function mx(m){for(var g=m;g!==null;){if(g.tag===13){var S=g.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||kl(S)||Ba(S)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var DM=[];function FM(){for(var m=0;m<DM.length;m++){var g=DM[m];Je?g._workInProgressVersionPrimary=null:g._workInProgressVersionSecondary=null}DM.length=0}var gx=a.ReactCurrentDispatcher,fo=a.ReactCurrentBatchConfig,vf=0,yi=null,Lr=null,tr=null,yx=!1,Mg=!1,Tg=0,Mq=0;function Nr(){throw Error(o(321))}function UM(m,g){if(g===null)return!1;for(var S=0;S<g.length&&S<m.length;S++)if(!Va(m[S],g[S]))return!1;return!0}function BM(m,g,S,A,L,F){if(vf=F,yi=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,gx.current=m===null||m.memoizedState===null?Pq:Rq,m=S(A,L),Mg){F=0;do{if(Mg=!1,Tg=0,25<=F)throw Error(o(301));F+=1,tr=Lr=null,g.updateQueue=null,gx.current=Iq,m=S(A,L)}while(Mg)}if(gx.current=bx,g=Lr!==null&&Lr.next!==null,vf=0,tr=Lr=yi=null,yx=!1,g)throw Error(o(300));return m}function zM(){var m=Tg!==0;return Tg=0,m}function zl(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tr===null?yi.memoizedState=tr=m:tr=tr.next=m,tr}function Xa(){if(Lr===null){var m=yi.alternate;m=m!==null?m.memoizedState:null}else m=Lr.next;var g=tr===null?yi.memoizedState:tr.next;if(g!==null)tr=g,Lr=m;else{if(m===null)throw Error(o(310));Lr=m,m={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},tr===null?yi.memoizedState=tr=m:tr=tr.next=m}return tr}function uh(m,g){return typeof g=="function"?g(m):g}function vx(m){var g=Xa(),S=g.queue;if(S===null)throw Error(o(311));S.lastRenderedReducer=m;var A=Lr,L=A.baseQueue,F=S.pending;if(F!==null){if(L!==null){var ne=L.next;L.next=F.next,F.next=ne}A.baseQueue=L=F,S.pending=null}if(L!==null){F=L.next,A=A.baseState;var ue=ne=null,ze=null,et=F;do{var bt=et.lane;if((vf&bt)===bt)ze!==null&&(ze=ze.next={lane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),A=et.hasEagerState?et.eagerState:m(A,et.action);else{var Vt={lane:bt,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null};ze===null?(ue=ze=Vt,ne=A):ze=ze.next=Vt,yi.lanes|=bt,_f|=bt}et=et.next}while(et!==null&&et!==F);ze===null?ne=A:ze.next=ue,Va(A,g.memoizedState)||(Ds=!0),g.memoizedState=A,g.baseState=ne,g.baseQueue=ze,S.lastRenderedState=A}if(m=S.interleaved,m!==null){L=m;do F=L.lane,yi.lanes|=F,_f|=F,L=L.next;while(L!==m)}else L===null&&(S.lanes=0);return[g.memoizedState,S.dispatch]}function xx(m){var g=Xa(),S=g.queue;if(S===null)throw Error(o(311));S.lastRenderedReducer=m;var A=S.dispatch,L=S.pending,F=g.memoizedState;if(L!==null){S.pending=null;var ne=L=L.next;do F=m(F,ne.action),ne=ne.next;while(ne!==L);Va(F,g.memoizedState)||(Ds=!0),g.memoizedState=F,g.baseQueue===null&&(g.baseState=F),S.lastRenderedState=F}return[F,A]}function yO(){}function vO(m,g){var S=yi,A=Xa(),L=g(),F=!Va(A.memoizedState,L);if(F&&(A.memoizedState=L,Ds=!0),A=A.queue,Cg(wO.bind(null,S,A,m),[m]),A.getSnapshot!==g||F||tr!==null&&tr.memoizedState.tag&1){if(S.flags|=2048,Ag(9,_O.bind(null,S,A,L,g),void 0,null),Ni===null)throw Error(o(349));vf&30||xO(S,g,L)}return L}function xO(m,g,S){m.flags|=16384,m={getSnapshot:g,value:S},g=yi.updateQueue,g===null?(g={lastEffect:null,stores:null},yi.updateQueue=g,g.stores=[m]):(S=g.stores,S===null?g.stores=[m]:S.push(m))}function _O(m,g,S,A){g.value=S,g.getSnapshot=A,bO(g)&&po(m,1,-1)}function wO(m,g,S){return S(function(){bO(g)&&po(m,1,-1)})}function bO(m){var g=m.getSnapshot;m=m.value;try{var S=g();return!Va(m,S)}catch{return!0}}function HM(m){var g=zl();return typeof m=="function"&&(m=m()),g.memoizedState=g.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uh,lastRenderedState:m},g.queue=m,m=m.dispatch=Cq.bind(null,yi,m),[g.memoizedState,m]}function Ag(m,g,S,A){return m={tag:m,create:g,destroy:S,deps:A,next:null},g=yi.updateQueue,g===null?(g={lastEffect:null,stores:null},yi.updateQueue=g,g.lastEffect=m.next=m):(S=g.lastEffect,S===null?g.lastEffect=m.next=m:(A=S.next,S.next=m,m.next=A,g.lastEffect=m)),m}function SO(){return Xa().memoizedState}function _x(m,g,S,A){var L=zl();yi.flags|=m,L.memoizedState=Ag(1|g,S,void 0,A===void 0?null:A)}function wx(m,g,S,A){var L=Xa();A=A===void 0?null:A;var F=void 0;if(Lr!==null){var ne=Lr.memoizedState;if(F=ne.destroy,A!==null&&UM(A,ne.deps)){L.memoizedState=Ag(g,S,F,A);return}}yi.flags|=m,L.memoizedState=Ag(1|g,S,F,A)}function WM(m,g){return _x(8390656,8,m,g)}function Cg(m,g){return wx(2048,8,m,g)}function EO(m,g){return wx(4,2,m,g)}function MO(m,g){return wx(4,4,m,g)}function TO(m,g){if(typeof g=="function")return m=m(),g(m),function(){g(null)};if(g!=null)return m=m(),g.current=m,function(){g.current=null}}function AO(m,g,S){return S=S!=null?S.concat([m]):null,wx(4,4,TO.bind(null,g,m),S)}function VM(){}function CO(m,g){var S=Xa();g=g===void 0?null:g;var A=S.memoizedState;return A!==null&&g!==null&&UM(g,A[1])?A[0]:(S.memoizedState=[m,g],m)}function PO(m,g){var S=Xa();g=g===void 0?null:g;var A=S.memoizedState;return A!==null&&g!==null&&UM(g,A[1])?A[0]:(m=m(),S.memoizedState=[m,g],m)}function Tq(m,g){var S=mn;mn=S!==0&&4>S?S:4,m(!0);var A=fo.transition;fo.transition={};try{m(!1),g()}finally{mn=S,fo.transition=A}}function RO(){return Xa().memoizedState}function Aq(m,g,S){var A=Uc(m);S={lane:A,action:S,hasEagerState:!1,eagerState:null,next:null},IO(m)?LO(g,S):(NO(m,g,S),S=Jr(),m=po(m,A,S),m!==null&&kO(m,g,A))}function Cq(m,g,S){var A=Uc(m),L={lane:A,action:S,hasEagerState:!1,eagerState:null,next:null};if(IO(m))LO(g,L);else{NO(m,g,L);var F=m.alternate;if(m.lanes===0&&(F===null||F.lanes===0)&&(F=g.lastRenderedReducer,F!==null))try{var ne=g.lastRenderedState,ue=F(ne,S);if(L.hasEagerState=!0,L.eagerState=ue,Va(ue,ne))return}catch{}finally{}S=Jr(),m=po(m,A,S),m!==null&&kO(m,g,A)}}function IO(m){var g=m.alternate;return m===yi||g!==null&&g===yi}function LO(m,g){Mg=yx=!0;var S=m.pending;S===null?g.next=g:(g.next=S.next,S.next=g),m.pending=g}function NO(m,g,S){Ni!==null&&m.mode&1&&!(Jt&2)?(m=g.interleaved,m===null?(S.next=S,ja===null?ja=[g]:ja.push(g)):(S.next=m.next,m.next=S),g.interleaved=S):(m=g.pending,m===null?S.next=S:(S.next=m.next,m.next=S),g.pending=S)}function kO(m,g,S){if(S&4194240){var A=g.lanes;A&=m.pendingLanes,S|=A,g.lanes=S,yM(m,S)}}var bx={readContext:lo,useCallback:Nr,useContext:Nr,useEffect:Nr,useImperativeHandle:Nr,useInsertionEffect:Nr,useLayoutEffect:Nr,useMemo:Nr,useReducer:Nr,useRef:Nr,useState:Nr,useDebugValue:Nr,useDeferredValue:Nr,useTransition:Nr,useMutableSource:Nr,useSyncExternalStore:Nr,useId:Nr,unstable_isNewReconciler:!1},Pq={readContext:lo,useCallback:function(m,g){return zl().memoizedState=[m,g===void 0?null:g],m},useContext:lo,useEffect:WM,useImperativeHandle:function(m,g,S){return S=S!=null?S.concat([m]):null,_x(4194308,4,TO.bind(null,g,m),S)},useLayoutEffect:function(m,g){return _x(4194308,4,m,g)},useInsertionEffect:function(m,g){return _x(4,2,m,g)},useMemo:function(m,g){var S=zl();return g=g===void 0?null:g,m=m(),S.memoizedState=[m,g],m},useReducer:function(m,g,S){var A=zl();return g=S!==void 0?S(g):g,A.memoizedState=A.baseState=g,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:g},A.queue=m,m=m.dispatch=Aq.bind(null,yi,m),[A.memoizedState,m]},useRef:function(m){var g=zl();return m={current:m},g.memoizedState=m},useState:HM,useDebugValue:VM,useDeferredValue:function(m){var g=HM(m),S=g[0],A=g[1];return WM(function(){var L=fo.transition;fo.transition={};try{A(m)}finally{fo.transition=L}},[m]),S},useTransition:function(){var m=HM(!1),g=m[0];return m=Tq.bind(null,m[1]),zl().memoizedState=m,[g,m]},useMutableSource:function(){},useSyncExternalStore:function(m,g,S){var A=yi,L=zl();if(ni){if(S===void 0)throw Error(o(407));S=S()}else{if(S=g(),Ni===null)throw Error(o(349));vf&30||xO(A,g,S)}L.memoizedState=S;var F={value:S,getSnapshot:g};return L.queue=F,WM(wO.bind(null,A,F,m),[m]),A.flags|=2048,Ag(9,_O.bind(null,A,F,S,g),void 0,null),S},useId:function(){var m=zl(),g=Ni.identifierPrefix;if(ni){var S=Bl,A=Ul;S=(A&~(1<<32-ti(A)-1)).toString(32)+S,g=":"+g+"R"+S,S=Tg++,0<S&&(g+="H"+S.toString(32)),g+=":"}else S=Mq++,g=":"+g+"r"+S.toString(32)+":";return m.memoizedState=g},unstable_isNewReconciler:!1},Rq={readContext:lo,useCallback:CO,useContext:lo,useEffect:Cg,useImperativeHandle:AO,useInsertionEffect:EO,useLayoutEffect:MO,useMemo:PO,useReducer:vx,useRef:SO,useState:function(){return vx(uh)},useDebugValue:VM,useDeferredValue:function(m){var g=vx(uh),S=g[0],A=g[1];return Cg(function(){var L=fo.transition;fo.transition={};try{A(m)}finally{fo.transition=L}},[m]),S},useTransition:function(){var m=vx(uh)[0],g=Xa().memoizedState;return[m,g]},useMutableSource:yO,useSyncExternalStore:vO,useId:RO,unstable_isNewReconciler:!1},Iq={readContext:lo,useCallback:CO,useContext:lo,useEffect:Cg,useImperativeHandle:AO,useInsertionEffect:EO,useLayoutEffect:MO,useMemo:PO,useReducer:xx,useRef:SO,useState:function(){return xx(uh)},useDebugValue:VM,useDeferredValue:function(m){var g=xx(uh),S=g[0],A=g[1];return Cg(function(){var L=fo.transition;fo.transition={};try{A(m)}finally{fo.transition=L}},[m]),S},useTransition:function(){var m=xx(uh)[0],g=Xa().memoizedState;return[m,g]},useMutableSource:yO,useSyncExternalStore:vO,useId:RO,unstable_isNewReconciler:!1};function GM(m,g){try{var S="",A=g;do S+=Eq(A),A=A.return;while(A);var L=S}catch(F){L=`
Error generating stack: `+F.message+`
`+F.stack}return{value:m,source:g,stack:L}}function jM(m,g){try{}catch(S){setTimeout(function(){throw S})}}var Lq=typeof WeakMap=="function"?WeakMap:Map;function OO(m,g,S){S=Fl(-1,S),S.tag=3,S.payload={element:null};var A=g.value;return S.callback=function(){Ux||(Ux=!0,cT=A),jM(m,g)},S}function DO(m,g,S){S=Fl(-1,S),S.tag=3;var A=m.type.getDerivedStateFromError;if(typeof A=="function"){var L=g.value;S.payload=function(){return A(L)},S.callback=function(){jM(m,g)}}var F=m.stateNode;return F!==null&&typeof F.componentDidCatch=="function"&&(S.callback=function(){jM(m,g),typeof A!="function"&&(Dc===null?Dc=new Set([this]):Dc.add(this));var ne=g.stack;this.componentDidCatch(g.value,{componentStack:ne!==null?ne:""})}),S}function FO(m,g,S){var A=m.pingCache;if(A===null){A=m.pingCache=new Lq;var L=new Set;A.set(g,L)}else L=A.get(g),L===void 0&&(L=new Set,A.set(g,L));L.has(S)||(L.add(S),m=$q.bind(null,m,g,S),g.then(m,m))}function UO(m){do{var g;if((g=m.tag===13)&&(g=m.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return m;m=m.return}while(m!==null);return null}function BO(m,g,S,A,L){return m.mode&1?(m.flags|=65536,m.lanes=L,m):(m===g?m.flags|=65536:(m.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(g=Fl(-1,1),g.tag=2,Oc(S,g))),S.lanes|=1),m)}function Ya(m){m.flags|=4}function zO(m,g){if(m!==null&&m.child===g.child)return!0;if(g.flags&16)return!1;for(m=g.child;m!==null;){if(m.flags&12854||m.subtreeFlags&12854)return!1;m=m.sibling}return!0}var Pg,Rg,Sx,Ex;if(Fe)Pg=function(m,g){for(var S=g.child;S!==null;){if(S.tag===5||S.tag===6)Q(m,S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===g)break;for(;S.sibling===null;){if(S.return===null||S.return===g)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},Rg=function(){},Sx=function(m,g,S,A,L){if(m=m.memoizedProps,m!==A){var F=g.stateNode,ne=$a(ho.current);S=ce(F,S,m,A,L,ne),(g.updateQueue=S)&&Ya(g)}},Ex=function(m,g,S,A){S!==A&&Ya(g)};else if(J){Pg=function(m,g,S,A){for(var L=g.child;L!==null;){if(L.tag===5){var F=L.stateNode;S&&A&&(F=cn(F,L.type,L.memoizedProps,L)),Q(m,F)}else if(L.tag===6)F=L.stateNode,S&&A&&(F=Li(F,L.memoizedProps,L)),Q(m,F);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)F=L.child,F!==null&&(F.return=L),Pg(m,L,!0,!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===g)break;for(;L.sibling===null;){if(L.return===null||L.return===g)return;L=L.return}L.sibling.return=L.return,L=L.sibling}};var HO=function(m,g,S,A){for(var L=g.child;L!==null;){if(L.tag===5){var F=L.stateNode;S&&A&&(F=cn(F,L.type,L.memoizedProps,L)),en(m,F)}else if(L.tag===6)F=L.stateNode,S&&A&&(F=Li(F,L.memoizedProps,L)),en(m,F);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)F=L.child,F!==null&&(F.return=L),HO(m,L,!0,!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===g)break;for(;L.sibling===null;){if(L.return===null||L.return===g)return;L=L.return}L.sibling.return=L.return,L=L.sibling}};Rg=function(m,g){var S=g.stateNode;if(!zO(m,g)){m=S.containerInfo;var A=kt(m);HO(A,g,!1,!1),S.pendingChildren=A,Ya(g),Ln(m,A)}},Sx=function(m,g,S,A,L){var F=m.stateNode,ne=m.memoizedProps;if((m=zO(m,g))&&ne===A)g.stateNode=F;else{var ue=g.stateNode,ze=$a(ho.current),et=null;ne!==A&&(et=ce(ue,S,ne,A,L,ze)),m&&et===null?g.stateNode=F:(F=at(F,et,S,ne,A,g,m,ue),re(F,S,A,L,ze)&&Ya(g),g.stateNode=F,m?Ya(g):Pg(F,g,!1,!1))}},Ex=function(m,g,S,A){S!==A?(m=$a(gf.current),S=$a(ho.current),g.stateNode=he(A,m,S,g),Ya(g)):g.stateNode=m.stateNode}}else Rg=function(){},Sx=function(){},Ex=function(){};function Ig(m,g){if(!ni)switch(m.tailMode){case"hidden":g=m.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?m.tail=null:S.sibling=null;break;case"collapsed":S=m.tail;for(var A=null;S!==null;)S.alternate!==null&&(A=S),S=S.sibling;A===null?g||m.tail===null?m.tail=null:m.tail.sibling=null:A.sibling=null}}function kr(m){var g=m.alternate!==null&&m.alternate.child===m.child,S=0,A=0;if(g)for(var L=m.child;L!==null;)S|=L.lanes|L.childLanes,A|=L.subtreeFlags&14680064,A|=L.flags&14680064,L.return=m,L=L.sibling;else for(L=m.child;L!==null;)S|=L.lanes|L.childLanes,A|=L.subtreeFlags,A|=L.flags,L.return=m,L=L.sibling;return m.subtreeFlags|=A,m.childLanes=S,g}function Nq(m,g,S){var A=g.pendingProps;switch(RM(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(g),null;case 1:return Nn(g.type)&&Mi(),kr(g),null;case 3:return A=g.stateNode,yf(),Nt(Dt),Nt(Tn),FM(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(m===null||m.child===null)&&(wg(g)?Ya(g):m===null||m.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,Qo!==null&&(dT(Qo),Qo=null))),Rg(m,g),kr(g),null;case 5:OM(g),S=$a(gf.current);var L=g.type;if(m!==null&&g.stateNode!=null)Sx(m,g,L,A,S),m.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!A){if(g.stateNode===null)throw Error(o(166));return kr(g),null}if(m=$a(ho.current),wg(g)){if(!ge)throw Error(o(175));m=G(g.stateNode,g.type,g.memoizedProps,S,m,g,!_g),g.updateQueue=m,m!==null&&Ya(g)}else{var F=Y(L,A,S,m,g);Pg(F,g,!1,!1),g.stateNode=F,re(F,L,A,S,m)&&Ya(g)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return kr(g),null;case 6:if(m&&g.stateNode!=null)Ex(m,g,m.memoizedProps,A);else{if(typeof A!="string"&&g.stateNode===null)throw Error(o(166));if(m=$a(gf.current),S=$a(ho.current),wg(g)){if(!ge)throw Error(o(176));if(m=g.stateNode,A=g.memoizedProps,(S=N(m,A,g,!_g))&&(L=ks,L!==null))switch(F=(L.mode&1)!==0,L.tag){case 3:We(L.stateNode.containerInfo,m,A,F);break;case 5:Ge(L.type,L.memoizedProps,L.stateNode,m,A,F)}S&&Ya(g)}else g.stateNode=he(A,m,S,g)}return kr(g),null;case 13:if(Nt(li),A=g.memoizedState,ni&&Os!==null&&g.mode&1&&!(g.flags&128)){for(m=Os;m;)m=Ir(m);return pf(),g.flags|=98560,g}if(A!==null&&A.dehydrated!==null){if(A=wg(g),m===null){if(!A)throw Error(o(318));if(!ge)throw Error(o(344));if(m=g.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(o(317));K(m,g)}else pf(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;return kr(g),null}return Qo!==null&&(dT(Qo),Qo=null),g.flags&128?(g.lanes=S,g):(A=A!==null,S=!1,m===null?wg(g):S=m.memoizedState!==null,A&&!S&&(g.child.flags|=8192,g.mode&1&&(m===null||li.current&1?Hi===0&&(Hi=3):pT())),g.updateQueue!==null&&(g.flags|=4),kr(g),null);case 4:return yf(),Rg(m,g),m===null&&Ae(g.stateNode.containerInfo),kr(g),null;case 10:return EM(g.type._context),kr(g),null;case 17:return Nn(g.type)&&Mi(),kr(g),null;case 19:if(Nt(li),L=g.memoizedState,L===null)return kr(g),null;if(A=(g.flags&128)!==0,F=L.rendering,F===null)if(A)Ig(L,!1);else{if(Hi!==0||m!==null&&m.flags&128)for(m=g.child;m!==null;){if(F=mx(m),F!==null){for(g.flags|=128,Ig(L,!1),m=F.updateQueue,m!==null&&(g.updateQueue=m,g.flags|=4),g.subtreeFlags=0,m=S,A=g.child;A!==null;)S=A,L=m,S.flags&=14680066,F=S.alternate,F===null?(S.childLanes=0,S.lanes=L,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=F.childLanes,S.lanes=F.lanes,S.child=F.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=F.memoizedProps,S.memoizedState=F.memoizedState,S.updateQueue=F.updateQueue,S.type=F.type,L=F.dependencies,S.dependencies=L===null?null:{lanes:L.lanes,firstContext:L.firstContext}),A=A.sibling;return St(li,li.current&1|2),g.child}m=m.sibling}L.tail!==null&&er()>lT&&(g.flags|=128,A=!0,Ig(L,!1),g.lanes=4194304)}else{if(!A)if(m=mx(F),m!==null){if(g.flags|=128,A=!0,m=m.updateQueue,m!==null&&(g.updateQueue=m,g.flags|=4),Ig(L,!0),L.tail===null&&L.tailMode==="hidden"&&!F.alternate&&!ni)return kr(g),null}else 2*er()-L.renderingStartTime>lT&&S!==1073741824&&(g.flags|=128,A=!0,Ig(L,!1),g.lanes=4194304);L.isBackwards?(F.sibling=g.child,g.child=F):(m=L.last,m!==null?m.sibling=F:g.child=F,L.last=F)}return L.tail!==null?(g=L.tail,L.rendering=g,L.tail=g.sibling,L.renderingStartTime=er(),g.sibling=null,m=li.current,St(li,A?m&1|2:m&1),g):(kr(g),null);case 22:case 23:return fT(),A=g.memoizedState!==null,m!==null&&m.memoizedState!==null!==A&&(g.flags|=8192),A&&g.mode&1?Fs&1073741824&&(kr(g),Fe&&g.subtreeFlags&6&&(g.flags|=8192)):kr(g),null;case 24:return null;case 25:return null}throw Error(o(156,g.tag))}var kq=a.ReactCurrentOwner,Ds=!1;function Qr(m,g,S,A){g.child=m===null?mO(g,null,S,A):mf(g,m.child,S,A)}function WO(m,g,S,A,L){S=S.render;var F=g.ref;return hf(g,L),A=BM(m,g,S,A,F,L),S=zM(),m!==null&&!Ds?(g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~L,Hl(m,g,L)):(ni&&S&&PM(g),g.flags|=1,Qr(m,g,A,L),g.child)}function VO(m,g,S,A,L){if(m===null){var F=S.type;return typeof F=="function"&&!mT(F)&&F.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(g.tag=15,g.type=F,GO(m,g,F,A,L)):(m=jx(S.type,null,A,g,g.mode,L),m.ref=g.ref,m.return=g,g.child=m)}if(F=m.child,!(m.lanes&L)){var ne=F.memoizedProps;if(S=S.compare,S=S!==null?S:ox,S(ne,A)&&m.ref===g.ref)return Hl(m,g,L)}return g.flags|=1,m=zc(F,A),m.ref=g.ref,m.return=g,g.child=m}function GO(m,g,S,A,L){if(m!==null&&ox(m.memoizedProps,A)&&m.ref===g.ref)if(Ds=!1,(m.lanes&L)!==0)m.flags&131072&&(Ds=!0);else return g.lanes=m.lanes,Hl(m,g,L);return $M(m,g,S,A,L)}function jO(m,g,S){var A=g.pendingProps,L=A.children,F=m!==null?m.memoizedState:null;if(A.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null},St(xf,Fs),Fs|=S;else if(S&1073741824)g.memoizedState={baseLanes:0,cachePool:null},A=F!==null?F.baseLanes:S,St(xf,Fs),Fs|=A;else return m=F!==null?F.baseLanes|S:S,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:m,cachePool:null},g.updateQueue=null,St(xf,Fs),Fs|=m,null;else F!==null?(A=F.baseLanes|S,g.memoizedState=null):A=S,St(xf,Fs),Fs|=A;return Qr(m,g,L,S),g.child}function $O(m,g){var S=g.ref;(m===null&&S!==null||m!==null&&m.ref!==S)&&(g.flags|=512,g.flags|=2097152)}function $M(m,g,S,A,L){var F=Nn(S)?An:Tn.current;return F=pn(g,F),hf(g,L),S=BM(m,g,S,A,F,L),A=zM(),m!==null&&!Ds?(g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~L,Hl(m,g,L)):(ni&&A&&PM(g),g.flags|=1,Qr(m,g,S,L),g.child)}function XO(m,g,S,A,L){if(Nn(S)){var F=!0;wn(g)}else F=!1;if(hf(g,L),g.stateNode===null)m!==null&&(m.alternate=null,g.alternate=null,g.flags|=2),aO(g,S,A),CM(g,S,A,L),A=!0;else if(m===null){var ne=g.stateNode,ue=g.memoizedProps;ne.props=ue;var ze=ne.context,et=S.contextType;typeof et=="object"&&et!==null?et=lo(et):(et=Nn(S)?An:Tn.current,et=pn(g,et));var bt=S.getDerivedStateFromProps,Vt=typeof bt=="function"||typeof ne.getSnapshotBeforeUpdate=="function";Vt||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(ue!==A||ze!==et)&&lO(g,ne,A,et),kc=!1;var It=g.memoizedState;ne.state=It,ux(g,A,ne,L),ze=g.memoizedState,ue!==A||It!==ze||Dt.current||kc?(typeof bt=="function"&&(AM(g,S,bt,A),ze=g.memoizedState),(ue=kc||oO(g,S,ue,A,It,ze,et))?(Vt||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount()),typeof ne.componentDidMount=="function"&&(g.flags|=4194308)):(typeof ne.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=A,g.memoizedState=ze),ne.props=A,ne.state=ze,ne.context=et,A=ue):(typeof ne.componentDidMount=="function"&&(g.flags|=4194308),A=!1)}else{ne=g.stateNode,nO(m,g),ue=g.memoizedProps,et=g.type===g.elementType?ue:Ko(g.type,ue),ne.props=et,Vt=g.pendingProps,It=ne.context,ze=S.contextType,typeof ze=="object"&&ze!==null?ze=lo(ze):(ze=Nn(S)?An:Tn.current,ze=pn(g,ze));var Fn=S.getDerivedStateFromProps;(bt=typeof Fn=="function"||typeof ne.getSnapshotBeforeUpdate=="function")||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(ue!==Vt||It!==ze)&&lO(g,ne,A,ze),kc=!1,It=g.memoizedState,ne.state=It,ux(g,A,ne,L);var Tt=g.memoizedState;ue!==Vt||It!==Tt||Dt.current||kc?(typeof Fn=="function"&&(AM(g,S,Fn,A),Tt=g.memoizedState),(et=kc||oO(g,S,et,A,It,Tt,ze)||!1)?(bt||typeof ne.UNSAFE_componentWillUpdate!="function"&&typeof ne.componentWillUpdate!="function"||(typeof ne.componentWillUpdate=="function"&&ne.componentWillUpdate(A,Tt,ze),typeof ne.UNSAFE_componentWillUpdate=="function"&&ne.UNSAFE_componentWillUpdate(A,Tt,ze)),typeof ne.componentDidUpdate=="function"&&(g.flags|=4),typeof ne.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof ne.componentDidUpdate!="function"||ue===m.memoizedProps&&It===m.memoizedState||(g.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||ue===m.memoizedProps&&It===m.memoizedState||(g.flags|=1024),g.memoizedProps=A,g.memoizedState=Tt),ne.props=A,ne.state=Tt,ne.context=ze,A=et):(typeof ne.componentDidUpdate!="function"||ue===m.memoizedProps&&It===m.memoizedState||(g.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||ue===m.memoizedProps&&It===m.memoizedState||(g.flags|=1024),A=!1)}return XM(m,g,S,A,F,L)}function XM(m,g,S,A,L,F){$O(m,g);var ne=(g.flags&128)!==0;if(!A&&!ne)return L&&an(g,S,!1),Hl(m,g,F);A=g.stateNode,kq.current=g;var ue=ne&&typeof S.getDerivedStateFromError!="function"?null:A.render();return g.flags|=1,m!==null&&ne?(g.child=mf(g,m.child,null,F),g.child=mf(g,null,ue,F)):Qr(m,g,ue,F),g.memoizedState=A.state,L&&an(g,S,!0),g.child}function YO(m){var g=m.stateNode;g.pendingContext?zt(m,g.pendingContext,g.pendingContext!==g.context):g.context&&zt(m,g.context,!1),kM(m,g.containerInfo)}function qO(m,g,S,A,L){return pf(),NM(L),g.flags|=256,Qr(m,g,S,A),g.child}var Mx={dehydrated:null,treeContext:null,retryLane:0};function Tx(m){return{baseLanes:m,cachePool:null}}function ZO(m,g,S){var A=g.pendingProps,L=li.current,F=!1,ne=(g.flags&128)!==0,ue;if((ue=ne)||(ue=m!==null&&m.memoizedState===null?!1:(L&2)!==0),ue?(F=!0,g.flags&=-129):(m===null||m.memoizedState!==null)&&(L|=1),St(li,L&1),m===null)return LM(g),m=g.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?(g.mode&1?Ba(m)?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(L=A.children,m=A.fallback,F?(A=g.mode,F=g.child,L={mode:"hidden",children:L},!(A&1)&&F!==null?(F.childLanes=0,F.pendingProps=L):F=$x(L,A,0,null),m=gh(m,A,S,null),F.return=g,m.return=g,F.sibling=m,g.child=F,g.child.memoizedState=Tx(S),g.memoizedState=Mx,m):YM(g,L));if(L=m.memoizedState,L!==null){if(ue=L.dehydrated,ue!==null){if(ne)return g.flags&256?(g.flags&=-257,Ax(m,g,S,Error(o(422)))):g.memoizedState!==null?(g.child=m.child,g.flags|=128,null):(F=A.fallback,L=g.mode,A=$x({mode:"visible",children:A.children},L,0,null),F=gh(F,L,S,null),F.flags|=2,A.return=g,F.return=g,A.sibling=F,g.child=A,g.mode&1&&mf(g,m.child,null,S),g.child.memoizedState=Tx(S),g.memoizedState=Mx,F);if(!(g.mode&1))g=Ax(m,g,S,null);else if(Ba(ue))g=Ax(m,g,S,Error(o(419)));else if(A=(S&m.childLanes)!==0,Ds||A){if(A=Ni,A!==null){switch(S&-S){case 4:F=2;break;case 16:F=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:F=32;break;case 536870912:F=268435456;break;default:F=0}A=F&(A.suspendedLanes|S)?0:F,A!==0&&A!==L.retryLane&&(L.retryLane=A,po(m,A,-1))}pT(),g=Ax(m,g,S,Error(o(421)))}else kl(ue)?(g.flags|=128,g.child=m.child,g=Xq.bind(null,m),za(ue,g),g=null):(S=L.treeContext,ge&&(Os=yg(ue),ks=g,ni=!0,Qo=null,_g=!1,S!==null&&(co[uo++]=Ul,co[uo++]=Bl,co[uo++]=lh,Ul=S.id,Bl=S.overflow,lh=g)),g=YM(g,g.pendingProps.children),g.flags|=4096);return g}return F?(A=QO(m,g,A.children,A.fallback,S),F=g.child,L=m.child.memoizedState,F.memoizedState=L===null?Tx(S):{baseLanes:L.baseLanes|S,cachePool:null},F.childLanes=m.childLanes&~S,g.memoizedState=Mx,A):(S=KO(m,g,A.children,S),g.memoizedState=null,S)}return F?(A=QO(m,g,A.children,A.fallback,S),F=g.child,L=m.child.memoizedState,F.memoizedState=L===null?Tx(S):{baseLanes:L.baseLanes|S,cachePool:null},F.childLanes=m.childLanes&~S,g.memoizedState=Mx,A):(S=KO(m,g,A.children,S),g.memoizedState=null,S)}function YM(m,g){return g=$x({mode:"visible",children:g},m.mode,0,null),g.return=m,m.child=g}function KO(m,g,S,A){var L=m.child;return m=L.sibling,S=zc(L,{mode:"visible",children:S}),!(g.mode&1)&&(S.lanes=A),S.return=g,S.sibling=null,m!==null&&(A=g.deletions,A===null?(g.deletions=[m],g.flags|=16):A.push(m)),g.child=S}function QO(m,g,S,A,L){var F=g.mode;m=m.child;var ne=m.sibling,ue={mode:"hidden",children:S};return!(F&1)&&g.child!==m?(S=g.child,S.childLanes=0,S.pendingProps=ue,g.deletions=null):(S=zc(m,ue),S.subtreeFlags=m.subtreeFlags&14680064),ne!==null?A=zc(ne,A):(A=gh(A,F,L,null),A.flags|=2),A.return=g,S.return=g,S.sibling=A,g.child=S,A}function Ax(m,g,S,A){return A!==null&&NM(A),mf(g,m.child,null,S),m=YM(g,g.pendingProps.children),m.flags|=2,g.memoizedState=null,m}function JO(m,g,S){m.lanes|=g;var A=m.alternate;A!==null&&(A.lanes|=g),MM(m.return,g,S)}function qM(m,g,S,A,L){var F=m.memoizedState;F===null?m.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:A,tail:S,tailMode:L}:(F.isBackwards=g,F.rendering=null,F.renderingStartTime=0,F.last=A,F.tail=S,F.tailMode=L)}function eD(m,g,S){var A=g.pendingProps,L=A.revealOrder,F=A.tail;if(Qr(m,g,A.children,S),A=li.current,A&2)A=A&1|2,g.flags|=128;else{if(m!==null&&m.flags&128)e:for(m=g.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&JO(m,S,g);else if(m.tag===19)JO(m,S,g);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===g)break e;for(;m.sibling===null;){if(m.return===null||m.return===g)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}A&=1}if(St(li,A),!(g.mode&1))g.memoizedState=null;else switch(L){case"forwards":for(S=g.child,L=null;S!==null;)m=S.alternate,m!==null&&mx(m)===null&&(L=S),S=S.sibling;S=L,S===null?(L=g.child,g.child=null):(L=S.sibling,S.sibling=null),qM(g,!1,L,S,F);break;case"backwards":for(S=null,L=g.child,g.child=null;L!==null;){if(m=L.alternate,m!==null&&mx(m)===null){g.child=L;break}m=L.sibling,L.sibling=S,S=L,L=m}qM(g,!0,S,null,F);break;case"together":qM(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function Hl(m,g,S){if(m!==null&&(g.dependencies=m.dependencies),_f|=g.lanes,!(S&g.childLanes))return null;if(m!==null&&g.child!==m.child)throw Error(o(153));if(g.child!==null){for(m=g.child,S=zc(m,m.pendingProps),g.child=S,S.return=g;m.sibling!==null;)m=m.sibling,S=S.sibling=zc(m,m.pendingProps),S.return=g;S.sibling=null}return g.child}function Oq(m,g,S){switch(g.tag){case 3:YO(g),pf();break;case 5:gO(g);break;case 1:Nn(g.type)&&wn(g);break;case 4:kM(g,g.stateNode.containerInfo);break;case 10:tO(g,g.type._context,g.memoizedProps.value);break;case 13:var A=g.memoizedState;if(A!==null)return A.dehydrated!==null?(St(li,li.current&1),g.flags|=128,null):S&g.child.childLanes?ZO(m,g,S):(St(li,li.current&1),m=Hl(m,g,S),m!==null?m.sibling:null);St(li,li.current&1);break;case 19:if(A=(S&g.childLanes)!==0,m.flags&128){if(A)return eD(m,g,S);g.flags|=128}var L=g.memoizedState;if(L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),St(li,li.current),A)break;return null;case 22:case 23:return g.lanes=0,jO(m,g,S)}return Hl(m,g,S)}function Dq(m,g){switch(RM(g),g.tag){case 1:return Nn(g.type)&&Mi(),m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 3:return yf(),Nt(Dt),Nt(Tn),FM(),m=g.flags,m&65536&&!(m&128)?(g.flags=m&-65537|128,g):null;case 5:return OM(g),null;case 13:if(Nt(li),m=g.memoizedState,m!==null&&m.dehydrated!==null){if(g.alternate===null)throw Error(o(340));pf()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 19:return Nt(li),null;case 4:return yf(),null;case 10:return EM(g.type._context),null;case 22:case 23:return fT(),null;case 24:return null;default:return null}}var Cx=!1,hh=!1,Fq=typeof WeakSet=="function"?WeakSet:Set,ct=null;function Px(m,g){var S=m.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(A){ms(m,g,A)}else S.current=null}function ZM(m,g,S){try{S()}catch(A){ms(m,g,A)}}var tD=!1;function Uq(m,g){for(W(m.containerInfo),ct=g;ct!==null;)if(m=ct,g=m.child,(m.subtreeFlags&1028)!==0&&g!==null)g.return=m,ct=g;else for(;ct!==null;){m=ct;try{var S=m.alternate;if(m.flags&1024)switch(m.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var A=S.memoizedProps,L=S.memoizedState,F=m.stateNode,ne=F.getSnapshotBeforeUpdate(m.elementType===m.type?A:Ko(m.type,A),L);F.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:Fe&&tt(m.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ue){ms(m,m.return,ue)}if(g=m.sibling,g!==null){g.return=m.return,ct=g;break}ct=m.return}return S=tD,tD=!1,S}function dh(m,g,S){var A=g.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var L=A=A.next;do{if((L.tag&m)===m){var F=L.destroy;L.destroy=void 0,F!==void 0&&ZM(g,S,F)}L=L.next}while(L!==A)}}function Lg(m,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&m)===m){var A=S.create;S.destroy=A()}S=S.next}while(S!==g)}}function KM(m){var g=m.ref;if(g!==null){var S=m.stateNode;switch(m.tag){case 5:m=H(S);break;default:m=S}typeof g=="function"?g(m):g.current=m}}function nD(m,g,S){if(Wa&&typeof Wa.onCommitFiberUnmount=="function")try{Wa.onCommitFiberUnmount(rx,g)}catch{}switch(g.tag){case 0:case 11:case 14:case 15:if(m=g.updateQueue,m!==null&&(m=m.lastEffect,m!==null)){var A=m=m.next;do{var L=A,F=L.destroy;L=L.tag,F!==void 0&&(L&2||L&4)&&ZM(g,S,F),A=A.next}while(A!==m)}break;case 1:if(Px(g,S),m=g.stateNode,typeof m.componentWillUnmount=="function")try{m.props=g.memoizedProps,m.state=g.memoizedState,m.componentWillUnmount()}catch(ne){ms(g,S,ne)}break;case 5:Px(g,S);break;case 4:Fe?lD(m,g,S):J&&J&&(g=g.stateNode.containerInfo,S=kt(g),Ei(g,S))}}function iD(m,g,S){for(var A=g;;)if(nD(m,A,S),A.child===null||Fe&&A.tag===4){if(A===g)break;for(;A.sibling===null;){if(A.return===null||A.return===g)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else A.child.return=A,A=A.child}function rD(m){var g=m.alternate;g!==null&&(m.alternate=null,rD(g)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(g=m.stateNode,g!==null&&me(g)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function sD(m){return m.tag===5||m.tag===3||m.tag===4}function oD(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||sD(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function aD(m){if(Fe){e:{for(var g=m.return;g!==null;){if(sD(g))break e;g=g.return}throw Error(o(160))}var S=g;switch(S.tag){case 5:g=S.stateNode,S.flags&32&&(Ze(g),S.flags&=-33),S=oD(m),JM(m,S,g);break;case 3:case 4:g=S.stateNode.containerInfo,S=oD(m),QM(m,S,g);break;default:throw Error(o(161))}}}function QM(m,g,S){var A=m.tag;if(A===5||A===6)m=m.stateNode,g?it(S,m,g):je(S,m);else if(A!==4&&(m=m.child,m!==null))for(QM(m,g,S),m=m.sibling;m!==null;)QM(m,g,S),m=m.sibling}function JM(m,g,S){var A=m.tag;if(A===5||A===6)m=m.stateNode,g?$e(S,m,g):Me(S,m);else if(A!==4&&(m=m.child,m!==null))for(JM(m,g,S),m=m.sibling;m!==null;)JM(m,g,S),m=m.sibling}function lD(m,g,S){for(var A=g,L=!1,F,ne;;){if(!L){L=A.return;e:for(;;){if(L===null)throw Error(o(160));switch(F=L.stateNode,L.tag){case 5:ne=!1;break e;case 3:F=F.containerInfo,ne=!0;break e;case 4:F=F.containerInfo,ne=!0;break e}L=L.return}L=!0}if(A.tag===5||A.tag===6)iD(m,A,S),ne?Se(F,A.stateNode):se(F,A.stateNode);else if(A.tag===18)ne?Ce(F,A.stateNode):we(F,A.stateNode);else if(A.tag===4){if(A.child!==null){F=A.stateNode.containerInfo,ne=!0,A.child.return=A,A=A.child;continue}}else if(nD(m,A,S),A.child!==null){A.child.return=A,A=A.child;continue}if(A===g)break;for(;A.sibling===null;){if(A.return===null||A.return===g)return;A=A.return,A.tag===4&&(L=!1)}A.sibling.return=A.return,A=A.sibling}}function eT(m,g){if(Fe){switch(g.tag){case 0:case 11:case 14:case 15:dh(3,g,g.return),Lg(3,g),dh(5,g,g.return);return;case 1:return;case 5:var S=g.stateNode;if(S!=null){var A=g.memoizedProps;m=m!==null?m.memoizedProps:A;var L=g.type,F=g.updateQueue;g.updateQueue=null,F!==null&&Qe(S,F,L,m,A,g)}return;case 6:if(g.stateNode===null)throw Error(o(162));S=g.memoizedProps,qe(g.stateNode,m!==null?m.memoizedProps:S,S);return;case 3:ge&&m!==null&&m.memoizedState.isDehydrated&&ee(g.stateNode.containerInfo);return;case 12:return;case 13:Rx(g);return;case 19:Rx(g);return;case 17:return}throw Error(o(163))}switch(g.tag){case 0:case 11:case 14:case 15:dh(3,g,g.return),Lg(3,g),dh(5,g,g.return);return;case 12:return;case 13:Rx(g);return;case 19:Rx(g);return;case 3:ge&&m!==null&&m.memoizedState.isDehydrated&&ee(g.stateNode.containerInfo);break;case 22:case 23:return}e:if(J){switch(g.tag){case 1:case 5:case 6:break e;case 3:case 4:g=g.stateNode,Ei(g.containerInfo,g.pendingChildren);break e}throw Error(o(163))}}function Rx(m){var g=m.updateQueue;if(g!==null){m.updateQueue=null;var S=m.stateNode;S===null&&(S=m.stateNode=new Fq),g.forEach(function(A){var L=Yq.bind(null,m,A);S.has(A)||(S.add(A),A.then(L,L))})}}function Bq(m,g){for(ct=g;ct!==null;){g=ct;var S=g.deletions;if(S!==null)for(var A=0;A<S.length;A++){var L=S[A];try{var F=m;Fe?lD(F,L,g):iD(F,L,g);var ne=L.alternate;ne!==null&&(ne.return=null),L.return=null}catch(Et){ms(L,g,Et)}}if(S=g.child,g.subtreeFlags&12854&&S!==null)S.return=g,ct=S;else for(;ct!==null;){g=ct;try{var ue=g.flags;if(ue&32&&Fe&&Ze(g.stateNode),ue&512){var ze=g.alternate;if(ze!==null){var et=ze.ref;et!==null&&(typeof et=="function"?et(null):et.current=null)}}if(ue&8192)switch(g.tag){case 13:if(g.memoizedState!==null){var bt=g.alternate;(bt===null||bt.memoizedState===null)&&(aT=er())}break;case 22:var Vt=g.memoizedState!==null,It=g.alternate,Fn=It!==null&&It.memoizedState!==null;if(S=g,Fe){e:if(A=S,L=Vt,F=null,Fe)for(var Tt=A;;){if(Tt.tag===5){if(F===null){F=Tt;var Or=Tt.stateNode;L?lt(Or):be(Tt.stateNode,Tt.memoizedProps)}}else if(Tt.tag===6){if(F===null){var go=Tt.stateNode;L?le(go):Te(go,Tt.memoizedProps)}}else if((Tt.tag!==22&&Tt.tag!==23||Tt.memoizedState===null||Tt===A)&&Tt.child!==null){Tt.child.return=Tt,Tt=Tt.child;continue}if(Tt===A)break;for(;Tt.sibling===null;){if(Tt.return===null||Tt.return===A)break e;F===Tt&&(F=null),Tt=Tt.return}F===Tt&&(F=null),Tt.sibling.return=Tt.return,Tt=Tt.sibling}}if(Vt&&!Fn&&S.mode&1){ct=S;for(var Ee=S.child;Ee!==null;){for(S=ct=Ee;ct!==null;){A=ct;var fe=A.child;switch(A.tag){case 0:case 11:case 14:case 15:dh(4,A,A.return);break;case 1:Px(A,A.return);var De=A.stateNode;if(typeof De.componentWillUnmount=="function"){var ft=A.return;try{De.props=A.memoizedProps,De.state=A.memoizedState,De.componentWillUnmount()}catch(Et){ms(A,ft,Et)}}break;case 5:Px(A,A.return);break;case 22:if(A.memoizedState!==null){hD(S);continue}}fe!==null?(fe.return=A,ct=fe):hD(S)}Ee=Ee.sibling}}}switch(ue&4102){case 2:aD(g),g.flags&=-3;break;case 6:aD(g),g.flags&=-3,eT(g.alternate,g);break;case 4096:g.flags&=-4097;break;case 4100:g.flags&=-4097,eT(g.alternate,g);break;case 4:eT(g.alternate,g)}}catch(Et){ms(g,g.return,Et)}if(S=g.sibling,S!==null){S.return=g.return,ct=S;break}ct=g.return}}}function zq(m,g,S){ct=m,cD(m)}function cD(m,g,S){for(var A=(m.mode&1)!==0;ct!==null;){var L=ct,F=L.child;if(L.tag===22&&A){var ne=L.memoizedState!==null||Cx;if(!ne){var ue=L.alternate,ze=ue!==null&&ue.memoizedState!==null||hh;ue=Cx;var et=hh;if(Cx=ne,(hh=ze)&&!et)for(ct=L;ct!==null;)ne=ct,ze=ne.child,ne.tag===22&&ne.memoizedState!==null?dD(L):ze!==null?(ze.return=ne,ct=ze):dD(L);for(;F!==null;)ct=F,cD(F),F=F.sibling;ct=L,Cx=ue,hh=et}uD(m)}else L.subtreeFlags&8772&&F!==null?(F.return=L,ct=F):uD(m)}}function uD(m){for(;ct!==null;){var g=ct;if(g.flags&8772){var S=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:hh||Lg(5,g);break;case 1:var A=g.stateNode;if(g.flags&4&&!hh)if(S===null)A.componentDidMount();else{var L=g.elementType===g.type?S.memoizedProps:Ko(g.type,S.memoizedProps);A.componentDidUpdate(L,S.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var F=g.updateQueue;F!==null&&rO(g,F,A);break;case 3:var ne=g.updateQueue;if(ne!==null){if(S=null,g.child!==null)switch(g.child.tag){case 5:S=H(g.child.stateNode);break;case 1:S=g.child.stateNode}rO(g,ne,S)}break;case 5:var ue=g.stateNode;S===null&&g.flags&4&&Ne(ue,g.type,g.memoizedProps,g);break;case 6:break;case 4:break;case 12:break;case 13:if(ge&&g.memoizedState===null){var ze=g.alternate;if(ze!==null){var et=ze.memoizedState;if(et!==null){var bt=et.dehydrated;bt!==null&&ie(bt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}hh||g.flags&512&&KM(g)}catch(Vt){ms(g,g.return,Vt)}}if(g===m){ct=null;break}if(S=g.sibling,S!==null){S.return=g.return,ct=S;break}ct=g.return}}function hD(m){for(;ct!==null;){var g=ct;if(g===m){ct=null;break}var S=g.sibling;if(S!==null){S.return=g.return,ct=S;break}ct=g.return}}function dD(m){for(;ct!==null;){var g=ct;try{switch(g.tag){case 0:case 11:case 15:var S=g.return;try{Lg(4,g)}catch(ze){ms(g,S,ze)}break;case 1:var A=g.stateNode;if(typeof A.componentDidMount=="function"){var L=g.return;try{A.componentDidMount()}catch(ze){ms(g,L,ze)}}var F=g.return;try{KM(g)}catch(ze){ms(g,F,ze)}break;case 5:var ne=g.return;try{KM(g)}catch(ze){ms(g,ne,ze)}}}catch(ze){ms(g,g.return,ze)}if(g===m){ct=null;break}var ue=g.sibling;if(ue!==null){ue.return=g.return,ct=ue;break}ct=g.return}}var Ix=0,Lx=1,Nx=2,kx=3,Ox=4;if(typeof Symbol=="function"&&Symbol.for){var Ng=Symbol.for;Ix=Ng("selector.component"),Lx=Ng("selector.has_pseudo_class"),Nx=Ng("selector.role"),kx=Ng("selector.test_id"),Ox=Ng("selector.text")}function tT(m){var g=de(m);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(o(364));return g}if(m=Le(m),m===null)throw Error(o(362));return m.stateNode.current}function nT(m,g){switch(g.$$typeof){case Ix:if(m.type===g.value)return!0;break;case Lx:e:{g=g.value,m=[m,0];for(var S=0;S<m.length;){var A=m[S++],L=m[S++],F=g[L];if(A.tag!==5||!X(A)){for(;F!=null&&nT(A,F);)L++,F=g[L];if(L===g.length){g=!0;break e}else for(A=A.child;A!==null;)m.push(A,L),A=A.sibling}}g=!1}return g;case Nx:if(m.tag===5&&pe(m.stateNode,g.value))return!0;break;case Ox:if((m.tag===5||m.tag===6)&&(m=q(m),m!==null&&0<=m.indexOf(g.value)))return!0;break;case kx:if(m.tag===5&&(m=m.memoizedProps["data-testname"],typeof m=="string"&&m.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function iT(m){switch(m.$$typeof){case Ix:return"<"+(C(m.value)||"Unknown")+">";case Lx:return":has("+(iT(m)||"")+")";case Nx:return'[role="'+m.value+'"]';case Ox:return'"'+m.value+'"';case kx:return'[data-testname="'+m.value+'"]';default:throw Error(o(365))}}function fD(m,g){var S=[];m=[m,0];for(var A=0;A<m.length;){var L=m[A++],F=m[A++],ne=g[F];if(L.tag!==5||!X(L)){for(;ne!=null&&nT(L,ne);)F++,ne=g[F];if(F===g.length)S.push(L);else for(L=L.child;L!==null;)m.push(L,F),L=L.sibling}}return S}function rT(m,g){if(!Xe)throw Error(o(363));m=tT(m),m=fD(m,g),g=[],m=Array.from(m);for(var S=0;S<m.length;){var A=m[S++];if(A.tag===5)X(A)||g.push(A.stateNode);else for(A=A.child;A!==null;)m.push(A),A=A.sibling}return g}var Hq=Math.ceil,Dx=a.ReactCurrentDispatcher,sT=a.ReactCurrentOwner,Ti=a.ReactCurrentBatchConfig,Jt=0,Ni=null,ki=null,gr=0,Fs=0,xf=yt(0),Hi=0,kg=null,_f=0,Fx=0,oT=0,Og=null,fs=null,aT=0,lT=1/0;function wf(){lT=er()+500}var Ux=!1,cT=null,Dc=null,Bx=!1,Fc=null,zx=0,Dg=0,uT=null,Hx=-1,Wx=0;function Jr(){return Jt&6?er():Hx!==-1?Hx:Hx=er()}function Uc(m){return m.mode&1?Jt&2&&gr!==0?gr&-gr:Sq.transition!==null?(Wx===0&&(m=tx,tx<<=1,!(tx&4194240)&&(tx=64),Wx=m),Wx):(m=mn,m!==0?m:Ie()):1}function po(m,g,S){if(50<Dg)throw Dg=0,uT=null,Error(o(185));var A=Vx(m,g);return A===null?null:(xg(A,g,S),(!(Jt&2)||A!==Ni)&&(A===Ni&&(!(Jt&2)&&(Fx|=g),Hi===4&&Bc(A,gr)),ps(A,S),g===1&&Jt===0&&!(m.mode&1)&&(wf(),sx&&Ga())),A)}function Vx(m,g){m.lanes|=g;var S=m.alternate;for(S!==null&&(S.lanes|=g),S=m,m=m.return;m!==null;)m.childLanes|=g,S=m.alternate,S!==null&&(S.childLanes|=g),S=m,m=m.return;return S.tag===3?S.stateNode:null}function ps(m,g){var S=m.callbackNode;pq(m,g);var A=ix(m,m===Ni?gr:0);if(A===0)S!==null&&J3(S),m.callbackNode=null,m.callbackPriority=0;else if(g=A&-A,m.callbackPriority!==g){if(S!=null&&J3(S),g===1)m.tag===0?bq(mD.bind(null,m)):eO(mD.bind(null,m)),ye?ke(function(){Jt===0&&Ga()}):vM(xM,Ga),S=null;else{switch(Q3(A)){case 1:S=xM;break;case 4:S=vq;break;case 16:S=_M;break;case 536870912:S=xq;break;default:S=_M}S=ED(S,pD.bind(null,m))}m.callbackPriority=g,m.callbackNode=S}}function pD(m,g){if(Hx=-1,Wx=0,Jt&6)throw Error(o(327));var S=m.callbackNode;if(mh()&&m.callbackNode!==S)return null;var A=ix(m,m===Ni?gr:0);if(A===0)return null;if(A&30||A&m.expiredLanes||g)g=Gx(m,A);else{g=A;var L=Jt;Jt|=2;var F=vD();(Ni!==m||gr!==g)&&(wf(),fh(m,g));do try{Gq();break}catch(ue){yD(m,ue)}while(!0);SM(),Dx.current=F,Jt=L,ki!==null?g=0:(Ni=null,gr=0,g=Hi)}if(g!==0){if(g===2&&(L=mM(m),L!==0&&(A=L,g=hT(m,L))),g===1)throw S=kg,fh(m,0),Bc(m,A),ps(m,er()),S;if(g===6)Bc(m,A);else{if(L=m.current.alternate,!(A&30)&&!Wq(L)&&(g=Gx(m,A),g===2&&(F=mM(m),F!==0&&(A=F,g=hT(m,F))),g===1))throw S=kg,fh(m,0),Bc(m,A),ps(m,er()),S;switch(m.finishedWork=L,m.finishedLanes=A,g){case 0:case 1:throw Error(o(345));case 2:ph(m,fs);break;case 3:if(Bc(m,A),(A&130023424)===A&&(g=aT+500-er(),10<g)){if(ix(m,0)!==0)break;if(L=m.suspendedLanes,(L&A)!==A){Jr(),m.pingedLanes|=m.suspendedLanes&L;break}m.timeoutHandle=Re(ph.bind(null,m,fs),g);break}ph(m,fs);break;case 4:if(Bc(m,A),(A&4194240)===A)break;for(g=m.eventTimes,L=-1;0<A;){var ne=31-ti(A);F=1<<ne,ne=g[ne],ne>L&&(L=ne),A&=~F}if(A=L,A=er()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*Hq(A/1960))-A,10<A){m.timeoutHandle=Re(ph.bind(null,m,fs),A);break}ph(m,fs);break;case 5:ph(m,fs);break;default:throw Error(o(329))}}}return ps(m,er()),m.callbackNode===S?pD.bind(null,m):null}function hT(m,g){var S=Og;return m.current.memoizedState.isDehydrated&&(fh(m,g).flags|=256),m=Gx(m,g),m!==2&&(g=fs,fs=S,g!==null&&dT(g)),m}function dT(m){fs===null?fs=m:fs.push.apply(fs,m)}function Wq(m){for(var g=m;;){if(g.flags&16384){var S=g.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var A=0;A<S.length;A++){var L=S[A],F=L.getSnapshot;L=L.value;try{if(!Va(F(),L))return!1}catch{return!1}}}if(S=g.child,g.subtreeFlags&16384&&S!==null)S.return=g,g=S;else{if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Bc(m,g){for(g&=~oT,g&=~Fx,m.suspendedLanes|=g,m.pingedLanes&=~g,m=m.expirationTimes;0<g;){var S=31-ti(g),A=1<<S;m[S]=-1,g&=~A}}function mD(m){if(Jt&6)throw Error(o(327));mh();var g=ix(m,0);if(!(g&1))return ps(m,er()),null;var S=Gx(m,g);if(m.tag!==0&&S===2){var A=mM(m);A!==0&&(g=A,S=hT(m,A))}if(S===1)throw S=kg,fh(m,0),Bc(m,g),ps(m,er()),S;if(S===6)throw Error(o(345));return m.finishedWork=m.current.alternate,m.finishedLanes=g,ph(m,fs),ps(m,er()),null}function gD(m){Fc!==null&&Fc.tag===0&&!(Jt&6)&&mh();var g=Jt;Jt|=1;var S=Ti.transition,A=mn;try{if(Ti.transition=null,mn=1,m)return m()}finally{mn=A,Ti.transition=S,Jt=g,!(Jt&6)&&Ga()}}function fT(){Fs=xf.current,Nt(xf)}function fh(m,g){m.finishedWork=null,m.finishedLanes=0;var S=m.timeoutHandle;if(S!==Ve&&(m.timeoutHandle=Ve,Oe(S)),ki!==null)for(S=ki.return;S!==null;){var A=S;switch(RM(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&Mi();break;case 3:yf(),Nt(Dt),Nt(Tn),FM();break;case 5:OM(A);break;case 4:yf();break;case 13:Nt(li);break;case 19:Nt(li);break;case 10:EM(A.type._context);break;case 22:case 23:fT()}S=S.return}if(Ni=m,ki=m=zc(m.current,null),gr=Fs=g,Hi=0,kg=null,oT=Fx=_f=0,fs=Og=null,ja!==null){for(g=0;g<ja.length;g++)if(S=ja[g],A=S.interleaved,A!==null){S.interleaved=null;var L=A.next,F=S.pending;if(F!==null){var ne=F.next;F.next=L,A.next=ne}S.pending=A}ja=null}return m}function yD(m,g){do{var S=ki;try{if(SM(),gx.current=bx,yx){for(var A=yi.memoizedState;A!==null;){var L=A.queue;L!==null&&(L.pending=null),A=A.next}yx=!1}if(vf=0,tr=Lr=yi=null,Mg=!1,Tg=0,sT.current=null,S===null||S.return===null){Hi=1,kg=g,ki=null;break}e:{var F=m,ne=S.return,ue=S,ze=g;if(g=gr,ue.flags|=32768,ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var et=ze,bt=ue,Vt=bt.tag;if(!(bt.mode&1)&&(Vt===0||Vt===11||Vt===15)){var It=bt.alternate;It?(bt.updateQueue=It.updateQueue,bt.memoizedState=It.memoizedState,bt.lanes=It.lanes):(bt.updateQueue=null,bt.memoizedState=null)}var Fn=UO(ne);if(Fn!==null){Fn.flags&=-257,BO(Fn,ne,ue,F,g),Fn.mode&1&&FO(F,et,g),g=Fn,ze=et;var Tt=g.updateQueue;if(Tt===null){var Or=new Set;Or.add(ze),g.updateQueue=Or}else Tt.add(ze);break e}else{if(!(g&1)){FO(F,et,g),pT();break e}ze=Error(o(426))}}else if(ni&&ue.mode&1){var go=UO(ne);if(go!==null){!(go.flags&65536)&&(go.flags|=256),BO(go,ne,ue,F,g),NM(ze);break e}}F=ze,Hi!==4&&(Hi=2),Og===null?Og=[F]:Og.push(F),ze=GM(ze,ue),ue=ne;do{switch(ue.tag){case 3:ue.flags|=65536,g&=-g,ue.lanes|=g;var Ee=OO(ue,ze,g);iO(ue,Ee);break e;case 1:F=ze;var fe=ue.type,De=ue.stateNode;if(!(ue.flags&128)&&(typeof fe.getDerivedStateFromError=="function"||De!==null&&typeof De.componentDidCatch=="function"&&(Dc===null||!Dc.has(De)))){ue.flags|=65536,g&=-g,ue.lanes|=g;var ft=DO(ue,F,g);iO(ue,ft);break e}}ue=ue.return}while(ue!==null)}_D(S)}catch(Et){g=Et,ki===S&&S!==null&&(ki=S=S.return);continue}break}while(!0)}function vD(){var m=Dx.current;return Dx.current=bx,m===null?bx:m}function pT(){(Hi===0||Hi===3||Hi===2)&&(Hi=4),Ni===null||!(_f&268435455)&&!(Fx&268435455)||Bc(Ni,gr)}function Gx(m,g){var S=Jt;Jt|=2;var A=vD();Ni===m&&gr===g||fh(m,g);do try{Vq();break}catch(L){yD(m,L)}while(!0);if(SM(),Jt=S,Dx.current=A,ki!==null)throw Error(o(261));return Ni=null,gr=0,Hi}function Vq(){for(;ki!==null;)xD(ki)}function Gq(){for(;ki!==null&&!gq();)xD(ki)}function xD(m){var g=SD(m.alternate,m,Fs);m.memoizedProps=m.pendingProps,g===null?_D(m):ki=g,sT.current=null}function _D(m){var g=m;do{var S=g.alternate;if(m=g.return,g.flags&32768){if(S=Dq(S,g),S!==null){S.flags&=32767,ki=S;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Hi=6,ki=null;return}}else if(S=Nq(S,g,Fs),S!==null){ki=S;return}if(g=g.sibling,g!==null){ki=g;return}ki=g=m}while(g!==null);Hi===0&&(Hi=5)}function ph(m,g){var S=mn,A=Ti.transition;try{Ti.transition=null,mn=1,jq(m,g,S)}finally{Ti.transition=A,mn=S}return null}function jq(m,g,S){do mh();while(Fc!==null);if(Jt&6)throw Error(o(327));var A=m.finishedWork,L=m.finishedLanes;if(A===null)return null;if(m.finishedWork=null,m.finishedLanes=0,A===m.current)throw Error(o(177));m.callbackNode=null,m.callbackPriority=0;var F=A.lanes|A.childLanes;if(mq(m,F),m===Ni&&(ki=Ni=null,gr=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||Bx||(Bx=!0,ED(_M,function(){return mh(),null})),F=(A.flags&15990)!==0,A.subtreeFlags&15990||F){F=Ti.transition,Ti.transition=null;var ne=mn;mn=1;var ue=Jt;Jt|=4,sT.current=null,Uq(m,A),Bq(m,A),D(m.containerInfo),m.current=A,zq(A),yq(),Jt=ue,mn=ne,Ti.transition=F}else m.current=A;if(Bx&&(Bx=!1,Fc=m,zx=L),F=m.pendingLanes,F===0&&(Dc=null),_q(A.stateNode),ps(m,er()),g!==null)for(S=m.onRecoverableError,A=0;A<g.length;A++)S(g[A]);if(Ux)throw Ux=!1,m=cT,cT=null,m;return zx&1&&m.tag!==0&&mh(),F=m.pendingLanes,F&1?m===uT?Dg++:(Dg=0,uT=m):Dg=0,Ga(),null}function mh(){if(Fc!==null){var m=Q3(zx),g=Ti.transition,S=mn;try{if(Ti.transition=null,mn=16>m?16:m,Fc===null)var A=!1;else{if(m=Fc,Fc=null,zx=0,Jt&6)throw Error(o(331));var L=Jt;for(Jt|=4,ct=m.current;ct!==null;){var F=ct,ne=F.child;if(ct.flags&16){var ue=F.deletions;if(ue!==null){for(var ze=0;ze<ue.length;ze++){var et=ue[ze];for(ct=et;ct!==null;){var bt=ct;switch(bt.tag){case 0:case 11:case 15:dh(8,bt,F)}var Vt=bt.child;if(Vt!==null)Vt.return=bt,ct=Vt;else for(;ct!==null;){bt=ct;var It=bt.sibling,Fn=bt.return;if(rD(bt),bt===et){ct=null;break}if(It!==null){It.return=Fn,ct=It;break}ct=Fn}}}var Tt=F.alternate;if(Tt!==null){var Or=Tt.child;if(Or!==null){Tt.child=null;do{var go=Or.sibling;Or.sibling=null,Or=go}while(Or!==null)}}ct=F}}if(F.subtreeFlags&2064&&ne!==null)ne.return=F,ct=ne;else e:for(;ct!==null;){if(F=ct,F.flags&2048)switch(F.tag){case 0:case 11:case 15:dh(9,F,F.return)}var Ee=F.sibling;if(Ee!==null){Ee.return=F.return,ct=Ee;break e}ct=F.return}}var fe=m.current;for(ct=fe;ct!==null;){ne=ct;var De=ne.child;if(ne.subtreeFlags&2064&&De!==null)De.return=ne,ct=De;else e:for(ne=fe;ct!==null;){if(ue=ct,ue.flags&2048)try{switch(ue.tag){case 0:case 11:case 15:Lg(9,ue)}}catch(Et){ms(ue,ue.return,Et)}if(ue===ne){ct=null;break e}var ft=ue.sibling;if(ft!==null){ft.return=ue.return,ct=ft;break e}ct=ue.return}}if(Jt=L,Ga(),Wa&&typeof Wa.onPostCommitFiberRoot=="function")try{Wa.onPostCommitFiberRoot(rx,m)}catch{}A=!0}return A}finally{mn=S,Ti.transition=g}}return!1}function wD(m,g,S){g=GM(S,g),g=OO(m,g,1),Oc(m,g),g=Jr(),m=Vx(m,1),m!==null&&(xg(m,1,g),ps(m,g))}function ms(m,g,S){if(m.tag===3)wD(m,m,S);else for(;g!==null;){if(g.tag===3){wD(g,m,S);break}else if(g.tag===1){var A=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Dc===null||!Dc.has(A))){m=GM(S,m),m=DO(g,m,1),Oc(g,m),m=Jr(),g=Vx(g,1),g!==null&&(xg(g,1,m),ps(g,m));break}}g=g.return}}function $q(m,g,S){var A=m.pingCache;A!==null&&A.delete(g),g=Jr(),m.pingedLanes|=m.suspendedLanes&S,Ni===m&&(gr&S)===S&&(Hi===4||Hi===3&&(gr&130023424)===gr&&500>er()-aT?fh(m,0):oT|=S),ps(m,g)}function bD(m,g){g===0&&(m.mode&1?(g=nx,nx<<=1,!(nx&130023424)&&(nx=4194304)):g=1);var S=Jr();m=Vx(m,g),m!==null&&(xg(m,g,S),ps(m,S))}function Xq(m){var g=m.memoizedState,S=0;g!==null&&(S=g.retryLane),bD(m,S)}function Yq(m,g){var S=0;switch(m.tag){case 13:var A=m.stateNode,L=m.memoizedState;L!==null&&(S=L.retryLane);break;case 19:A=m.stateNode;break;default:throw Error(o(314))}A!==null&&A.delete(g),bD(m,S)}var SD;SD=function(m,g,S){if(m!==null)if(m.memoizedProps!==g.pendingProps||Dt.current)Ds=!0;else{if(!(m.lanes&S)&&!(g.flags&128))return Ds=!1,Oq(m,g,S);Ds=!!(m.flags&131072)}else Ds=!1,ni&&g.flags&1048576&&cO(g,fx,g.index);switch(g.lanes=0,g.tag){case 2:var A=g.type;m!==null&&(m.alternate=null,g.alternate=null,g.flags|=2),m=g.pendingProps;var L=pn(g,Tn.current);hf(g,S),L=BM(null,g,A,m,L,S);var F=zM();return g.flags|=1,typeof L=="object"&&L!==null&&typeof L.render=="function"&&L.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,Nn(A)?(F=!0,wn(g)):F=!1,g.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,TM(g),L.updater=hx,g.stateNode=L,L._reactInternals=g,CM(g,A,m,S),g=XM(null,g,A,!0,F,S)):(g.tag=0,ni&&F&&PM(g),Qr(null,g,L,S),g=g.child),g;case 16:A=g.elementType;e:{switch(m!==null&&(m.alternate=null,g.alternate=null,g.flags|=2),m=g.pendingProps,L=A._init,A=L(A._payload),g.type=A,L=g.tag=Zq(A),m=Ko(A,m),L){case 0:g=$M(null,g,A,m,S);break e;case 1:g=XO(null,g,A,m,S);break e;case 11:g=WO(null,g,A,m,S);break e;case 14:g=VO(null,g,A,Ko(A.type,m),S);break e}throw Error(o(306,A,""))}return g;case 0:return A=g.type,L=g.pendingProps,L=g.elementType===A?L:Ko(A,L),$M(m,g,A,L,S);case 1:return A=g.type,L=g.pendingProps,L=g.elementType===A?L:Ko(A,L),XO(m,g,A,L,S);case 3:e:{if(YO(g),m===null)throw Error(o(387));A=g.pendingProps,F=g.memoizedState,L=F.element,nO(m,g),ux(g,A,null,S);var ne=g.memoizedState;if(A=ne.element,ge&&F.isDehydrated)if(F={element:A,isDehydrated:!1,cache:ne.cache,transitions:ne.transitions},g.updateQueue.baseState=F,g.memoizedState=F,g.flags&256){L=Error(o(423)),g=qO(m,g,A,S,L);break e}else if(A!==L){L=Error(o(424)),g=qO(m,g,A,S,L);break e}else for(ge&&(Os=cf(g.stateNode.containerInfo),ks=g,ni=!0,Qo=null,_g=!1),S=mO(g,null,A,S),g.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(pf(),A===L){g=Hl(m,g,S);break e}Qr(m,g,A,S)}g=g.child}return g;case 5:return gO(g),m===null&&LM(g),A=g.type,L=g.pendingProps,F=m!==null?m.memoizedProps:null,ne=L.children,oe(A,L)?ne=null:F!==null&&oe(A,F)&&(g.flags|=32),$O(m,g),Qr(m,g,ne,S),g.child;case 6:return m===null&&LM(g),null;case 13:return ZO(m,g,S);case 4:return kM(g,g.stateNode.containerInfo),A=g.pendingProps,m===null?g.child=mf(g,null,A,S):Qr(m,g,A,S),g.child;case 11:return A=g.type,L=g.pendingProps,L=g.elementType===A?L:Ko(A,L),WO(m,g,A,L,S);case 7:return Qr(m,g,g.pendingProps,S),g.child;case 8:return Qr(m,g,g.pendingProps.children,S),g.child;case 12:return Qr(m,g,g.pendingProps.children,S),g.child;case 10:e:{if(A=g.type._context,L=g.pendingProps,F=g.memoizedProps,ne=L.value,tO(g,A,ne),F!==null)if(Va(F.value,ne)){if(F.children===L.children&&!Dt.current){g=Hl(m,g,S);break e}}else for(F=g.child,F!==null&&(F.return=g);F!==null;){var ue=F.dependencies;if(ue!==null){ne=F.child;for(var ze=ue.firstContext;ze!==null;){if(ze.context===A){if(F.tag===1){ze=Fl(-1,S&-S),ze.tag=2;var et=F.updateQueue;if(et!==null){et=et.shared;var bt=et.pending;bt===null?ze.next=ze:(ze.next=bt.next,bt.next=ze),et.pending=ze}}F.lanes|=S,ze=F.alternate,ze!==null&&(ze.lanes|=S),MM(F.return,S,g),ue.lanes|=S;break}ze=ze.next}}else if(F.tag===10)ne=F.type===g.type?null:F.child;else if(F.tag===18){if(ne=F.return,ne===null)throw Error(o(341));ne.lanes|=S,ue=ne.alternate,ue!==null&&(ue.lanes|=S),MM(ne,S,g),ne=F.sibling}else ne=F.child;if(ne!==null)ne.return=F;else for(ne=F;ne!==null;){if(ne===g){ne=null;break}if(F=ne.sibling,F!==null){F.return=ne.return,ne=F;break}ne=ne.return}F=ne}Qr(m,g,L.children,S),g=g.child}return g;case 9:return L=g.type,A=g.pendingProps.children,hf(g,S),L=lo(L),A=A(L),g.flags|=1,Qr(m,g,A,S),g.child;case 14:return A=g.type,L=Ko(A,g.pendingProps),L=Ko(A.type,L),VO(m,g,A,L,S);case 15:return GO(m,g,g.type,g.pendingProps,S);case 17:return A=g.type,L=g.pendingProps,L=g.elementType===A?L:Ko(A,L),m!==null&&(m.alternate=null,g.alternate=null,g.flags|=2),g.tag=1,Nn(A)?(m=!0,wn(g)):m=!1,hf(g,S),aO(g,A,L),CM(g,A,L,S),XM(null,g,A,!0,m,S);case 19:return eD(m,g,S);case 22:return jO(m,g,S)}throw Error(o(156,g.tag))};function ED(m,g){return vM(m,g)}function qq(m,g,S,A){this.tag=m,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mo(m,g,S,A){return new qq(m,g,S,A)}function mT(m){return m=m.prototype,!(!m||!m.isReactComponent)}function Zq(m){if(typeof m=="function")return mT(m)?1:0;if(m!=null){if(m=m.$$typeof,m===x)return 11;if(m===w)return 14}return 2}function zc(m,g){var S=m.alternate;return S===null?(S=mo(m.tag,g,m.key,m.mode),S.elementType=m.elementType,S.type=m.type,S.stateNode=m.stateNode,S.alternate=m,m.alternate=S):(S.pendingProps=g,S.type=m.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=m.flags&14680064,S.childLanes=m.childLanes,S.lanes=m.lanes,S.child=m.child,S.memoizedProps=m.memoizedProps,S.memoizedState=m.memoizedState,S.updateQueue=m.updateQueue,g=m.dependencies,S.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},S.sibling=m.sibling,S.index=m.index,S.ref=m.ref,S}function jx(m,g,S,A,L,F){var ne=2;if(A=m,typeof m=="function")mT(m)&&(ne=1);else if(typeof m=="string")ne=5;else e:switch(m){case u:return gh(S.children,L,F,g);case h:ne=8,L|=8;break;case d:return m=mo(12,S,g,L|2),m.elementType=d,m.lanes=F,m;case v:return m=mo(13,S,g,L),m.elementType=v,m.lanes=F,m;case y:return m=mo(19,S,g,L),m.elementType=y,m.lanes=F,m;case b:return $x(S,L,F,g);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case f:ne=10;break e;case p:ne=9;break e;case x:ne=11;break e;case w:ne=14;break e;case _:ne=16,A=null;break e}throw Error(o(130,m==null?m:typeof m,""))}return g=mo(ne,S,g,L),g.elementType=m,g.type=A,g.lanes=F,g}function gh(m,g,S,A){return m=mo(7,m,A,g),m.lanes=S,m}function $x(m,g,S,A){return m=mo(22,m,A,g),m.elementType=b,m.lanes=S,m.stateNode={},m}function gT(m,g,S){return m=mo(6,m,null,g),m.lanes=S,m}function yT(m,g,S){return g=mo(4,m.children!==null?m.children:[],m.key,g),g.lanes=S,g.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},g}function Kq(m,g,S,A,L){this.tag=g,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ve,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gM(0),this.expirationTimes=gM(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gM(0),this.identifierPrefix=A,this.onRecoverableError=L,ge&&(this.mutableSourceEagerHydrationData=null)}function MD(m,g,S,A,L,F,ne,ue,ze){return m=new Kq(m,g,S,ue,ze),g===1?(g=1,F===!0&&(g|=8)):g=0,F=mo(3,null,null,g),m.current=F,F.stateNode=m,F.memoizedState={element:A,isDehydrated:S,cache:null,transitions:null},TM(F),m}function TD(m){if(!m)return Wt;m=m._reactInternals;e:{if(T(m)!==m||m.tag!==1)throw Error(o(170));var g=m;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(Nn(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(o(171))}if(m.tag===1){var S=m.type;if(Nn(S))return ai(m,S,g)}return g}function AD(m){var g=m._reactInternals;if(g===void 0)throw typeof m.render=="function"?Error(o(188)):(m=Object.keys(m).join(","),Error(o(268,m)));return m=j(g),m===null?null:m.stateNode}function CD(m,g){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var S=m.retryLane;m.retryLane=S!==0&&S<g?S:g}}function vT(m,g){CD(m,g),(m=m.alternate)&&CD(m,g)}function Qq(m){return m=j(m),m===null?null:m.stateNode}function Jq(){return null}return t.attemptContinuousHydration=function(m){if(m.tag===13){var g=Jr();po(m,134217728,g),vT(m,134217728)}},t.attemptHydrationAtCurrentPriority=function(m){if(m.tag===13){var g=Jr(),S=Uc(m);po(m,S,g),vT(m,S)}},t.attemptSynchronousHydration=function(m){switch(m.tag){case 3:var g=m.stateNode;if(g.current.memoizedState.isDehydrated){var S=vg(g.pendingLanes);S!==0&&(yM(g,S|1),ps(g,er()),!(Jt&6)&&(wf(),Ga()))}break;case 13:var A=Jr();gD(function(){return po(m,1,A)}),vT(m,1)}},t.batchedUpdates=function(m,g){var S=Jt;Jt|=1;try{return m(g)}finally{Jt=S,Jt===0&&(wf(),sx&&Ga())}},t.createComponentSelector=function(m){return{$$typeof:Ix,value:m}},t.createContainer=function(m,g,S,A,L,F,ne){return MD(m,g,!1,null,S,A,L,F,ne)},t.createHasPseudoClassSelector=function(m){return{$$typeof:Lx,value:m}},t.createHydrationContainer=function(m,g,S,A,L,F,ne,ue,ze){return m=MD(S,A,!0,m,L,F,ne,ue,ze),m.context=TD(null),S=m.current,A=Jr(),L=Uc(S),F=Fl(A,L),F.callback=g??null,Oc(S,F),m.current.lanes=L,xg(m,L,A),ps(m,A),m},t.createPortal=function(m,g,S){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:A==null?null:""+A,children:m,containerInfo:g,implementation:S}},t.createRoleSelector=function(m){return{$$typeof:Nx,value:m}},t.createTestNameSelector=function(m){return{$$typeof:kx,value:m}},t.createTextSelector=function(m){return{$$typeof:Ox,value:m}},t.deferredUpdates=function(m){var g=mn,S=Ti.transition;try{return Ti.transition=null,mn=16,m()}finally{mn=g,Ti.transition=S}},t.discreteUpdates=function(m,g,S,A,L){var F=mn,ne=Ti.transition;try{return Ti.transition=null,mn=1,m(g,S,A,L)}finally{mn=F,Ti.transition=ne,Jt===0&&wf()}},t.findAllNodes=rT,t.findBoundingRects=function(m,g){if(!Xe)throw Error(o(363));g=rT(m,g),m=[];for(var S=0;S<g.length;S++)m.push(Ye(g[S]));for(g=m.length-1;0<g;g--){S=m[g];for(var A=S.x,L=A+S.width,F=S.y,ne=F+S.height,ue=g-1;0<=ue;ue--)if(g!==ue){var ze=m[ue],et=ze.x,bt=et+ze.width,Vt=ze.y,It=Vt+ze.height;if(A>=et&&F>=Vt&&L<=bt&&ne<=It){m.splice(g,1);break}else if(A!==et||S.width!==ze.width||It<F||Vt>ne){if(!(F!==Vt||S.height!==ze.height||bt<A||et>L)){et>A&&(ze.width+=et-A,ze.x=A),bt<L&&(ze.width=L-et),m.splice(g,1);break}}else{Vt>F&&(ze.height+=Vt-F,ze.y=F),It<ne&&(ze.height=ne-Vt),m.splice(g,1);break}}}return m},t.findHostInstance=AD,t.findHostInstanceWithNoPortals=function(m){return m=U(m),m=m!==null?z(m):null,m===null?null:m.stateNode},t.findHostInstanceWithWarning=function(m){return AD(m)},t.flushControlled=function(m){var g=Jt;Jt|=1;var S=Ti.transition,A=mn;try{Ti.transition=null,mn=1,m()}finally{mn=A,Ti.transition=S,Jt=g,Jt===0&&(wf(),Ga())}},t.flushPassiveEffects=mh,t.flushSync=gD,t.focusWithin=function(m,g){if(!Xe)throw Error(o(363));for(m=tT(m),g=fD(m,g),g=Array.from(g),m=0;m<g.length;){var S=g[m++];if(!X(S)){if(S.tag===5&&_e(S.stateNode))return!0;for(S=S.child;S!==null;)g.push(S),S=S.sibling}}return!1},t.getCurrentUpdatePriority=function(){return mn},t.getFindAllNodesFailureDescription=function(m,g){if(!Xe)throw Error(o(363));var S=0,A=[];m=[tT(m),0];for(var L=0;L<m.length;){var F=m[L++],ne=m[L++],ue=g[ne];if((F.tag!==5||!X(F))&&(nT(F,ue)&&(A.push(iT(ue)),ne++,ne>S&&(S=ne)),ne<g.length))for(F=F.child;F!==null;)m.push(F,ne),F=F.sibling}if(S<g.length){for(m=[];S<g.length;S++)m.push(iT(g[S]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+m.join(" > ")}return null},t.getPublicRootInstance=function(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return H(m.child.stateNode);default:return m.child.stateNode}},t.injectIntoDevTools=function(m){if(m={bundleType:m.bundleType,version:m.version,rendererPackageName:m.rendererPackageName,rendererConfig:m.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:Qq,findFiberByHostInstance:m.findFiberByHostInstance||Jq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")m=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)m=!0;else{try{rx=g.inject(m),Wa=g}catch{}m=!!g.checkDCE}}return m},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(m,g,S,A){if(!Xe)throw Error(o(363));m=rT(m,g);var L=xe(m,S,A).disconnect;return{disconnect:function(){L()}}},t.registerMutableSourceForHydration=function(m,g){var S=g._getVersion;S=S(g._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[g,S]:m.mutableSourceEagerHydrationData.push(g,S)},t.runWithPriority=function(m,g){var S=mn;try{return mn=m,g()}finally{mn=S}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(m,g,S,A){var L=g.current,F=Jr(),ne=Uc(L);return S=TD(S),g.context===null?g.context=S:g.pendingContext=S,g=Fl(F,ne),g.payload={element:m},A=A===void 0?null:A,A!==null&&(g.callback=A),Oc(L,g),m=po(L,ne,F),m!==null&&cx(m,L,ne),ne},t};sY.exports=EMe;var MMe=sY.exports;const TMe=Ia(MMe),AMe=n=>typeof n=="object"&&typeof n.then=="function",xd=[];function lY(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function cY(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of xd)if(lY(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=xd.indexOf(r);s!==-1&&xd.splice(s,1)},promise:(AMe(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(xd.push(r),!t)throw r.promise}const CMe=(n,e,t)=>cY(n,e,!1,t),PMe=(n,e,t)=>void cY(n,e,!0,t),RMe=n=>{if(n===void 0||n.length===0)xd.splice(0,xd.length);else{const e=xd.find(t=>lY(n,t.keys,t.equal));e&&e.remove()}},R3={},I3=n=>void Object.assign(R3,n);function IMe(n,e){function t(u,{args:h=[],attach:d,...f},p){let x=`${u[0].toUpperCase()}${u.slice(1)}`,v;if(u==="primitive"){if(f.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const y=f.object;v=Ep(y,{type:u,root:p,attach:d,primitive:!0})}else{const y=R3[x];if(!y)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");v=Ep(new y(...h),{type:u,root:p,attach:d,memoizedProps:{args:h}})}return v.__r3f.attach===void 0&&(v instanceof $t?v.__r3f.attach="geometry":v instanceof Ki&&(v.__r3f.attach="material")),x!=="inject"&&HC(v,f),v}function i(u,h){let d=!1;if(h){var f,p;(f=h.__r3f)!=null&&f.attach?zC(u,h,h.__r3f.attach):h.isObject3D&&u.isObject3D&&(u.add(h),d=!0),d||(p=u.__r3f)==null||p.objects.push(h),h.__r3f||Ep(h,{}),h.__r3f.parent=u,NI(h),Mp(h)}}function r(u,h,d){let f=!1;if(h){var p,x;if((p=h.__r3f)!=null&&p.attach)zC(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){h.parent=u,h.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:h});const v=u.children.filter(w=>w!==h),y=v.indexOf(d);u.children=[...v.slice(0,y),h,...v.slice(y)],f=!0}f||(x=u.__r3f)==null||x.objects.push(h),h.__r3f||Ep(h,{}),h.__r3f.parent=u,NI(h),Mp(h)}}function s(u,h,d=!1){u&&[...u].forEach(f=>o(h,f,d))}function o(u,h,d){if(h){var f,p,x;if(h.__r3f&&(h.__r3f.parent=null),(f=u.__r3f)!=null&&f.objects&&(u.__r3f.objects=u.__r3f.objects.filter(b=>b!==h)),(p=h.__r3f)!=null&&p.attach)v5(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){var v;u.remove(h),(v=h.__r3f)!=null&&v.root&&BMe(tb(h),h)}const w=(x=h.__r3f)==null?void 0:x.primitive,_=!w&&(d===void 0?h.dispose!==null:d);if(!w){var y;s((y=h.__r3f)==null?void 0:y.objects,h,_),s(h.children,h,_)}if(delete h.__r3f,_&&h.dispose&&h.type!=="Scene"){const b=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?II.unstable_scheduleCallback(II.unstable_IdlePriority,b):b()}Mp(u)}}function a(u,h,d,f){var p;const x=(p=u.__r3f)==null?void 0:p.parent;if(!x)return;const v=t(h,d,u.__r3f.root);if(u.children){for(const y of u.children)y.__r3f&&i(v,y);u.children=u.children.filter(y=>!y.__r3f)}u.__r3f.objects.forEach(y=>i(v,y)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(x,u),v.parent&&(v.__r3f.autoRemovedBeforeAppend=!0),i(x,v),v.raycast&&v.__r3f.eventCount&&tb(v).getState().internal.interaction.push(v),[f,f.alternate].forEach(y=>{y!==null&&(y.stateNode=v,y.ref&&(typeof y.ref=="function"?y.ref(v):y.ref.current=v))})}const l=()=>{};return{reconciler:TMe({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,h)=>{if(!h)return;const d=u.getState().scene;d.__r3f&&(d.__r3f.root=u,i(d,h))},removeChildFromContainer:(u,h)=>{h&&o(u.getState().scene,h)},insertInContainerBefore:(u,h,d)=>{if(!h||!d)return;const f=u.getState().scene;f.__r3f&&r(f,h,d)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var h;return!!((h=u==null?void 0:u.__r3f)!=null?h:{}).handlers},prepareUpdate(u,h,d,f){var p;if(((p=u==null?void 0:u.__r3f)!=null?p:{}).primitive&&f.object&&f.object!==u)return[!0];{const{args:v=[],children:y,...w}=f,{args:_=[],children:b,...E}=d;if(!Array.isArray(v))throw new Error("R3F: the args prop must be an array!");if(v.some((C,P)=>C!==_[P]))return[!0];const M=gY(u,w,E,!0);return M.changes.length?[!1,M]:null}},commitUpdate(u,[h,d],f,p,x,v){h?a(u,f,x,v):HC(u,d)},commitMount(u,h,d,f){var p;const x=(p=u.__r3f)!=null?p:{};u.raycast&&x.handlers&&x.eventCount&&tb(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Ep(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var h;const{attach:d,parent:f}=(h=u.__r3f)!=null?h:{};d&&f&&v5(f,u,d),u.isObject3D&&(u.visible=!1),Mp(u)},unhideInstance(u,h){var d;const{attach:f,parent:p}=(d=u.__r3f)!=null?d:{};f&&p&&zC(p,u,f),(u.isObject3D&&h.visible==null||h.visible)&&(u.visible=!0),Mp(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():$p.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Wn.fun(performance.now)?performance.now:Wn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Wn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Wn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:HC}}var p5,m5;const BC=n=>"colorSpace"in n||"outputColorSpace"in n,uY=()=>{var n;return(n=R3.ColorManagement)!=null?n:null},hY=n=>n&&n.isOrthographicCamera,LMe=n=>n&&n.hasOwnProperty("current"),Z0=typeof window<"u"&&((p5=window.document)!=null&&p5.createElement||((m5=window.navigator)==null?void 0:m5.product)==="ReactNative")?R.useLayoutEffect:R.useEffect;function dY(n){const e=R.useRef(n);return Z0(()=>void(e.current=n),[n]),e}function NMe({set:n}){return Z0(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class fY extends R.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}fY.getDerivedStateFromError=()=>({error:!0});const pY="__default",g5=new Map,kMe=n=>n&&!!n.memoized&&!!n.changes;function mY(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const fy=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function tb(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Wn={obj:n=>n===Object(n)&&!Wn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Wn.str(n)||Wn.num(n)||Wn.boo(n))return n===e;const s=Wn.obj(n);if(s&&i==="reference")return n===e;const o=Wn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!Wn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(Wn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function OMe(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function DMe(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Ep(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function LI(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const y5=/-\d+$/;function zC(n,e,t){if(Wn.str(t)){if(y5.test(t)){const s=t.replace(y5,""),{target:o,key:a}=LI(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=LI(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function v5(n,e,t){var i,r;if(Wn.str(t)){const{target:s,key:o}=LI(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function gY(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){const u=n.__r3f,h=Object.entries(r),d=[];if(c){const p=Object.keys(l);for(let x=0;x<p.length;x++)r.hasOwnProperty(p[x])||h.unshift([p[x],pY+"remove"])}h.forEach(([p,x])=>{var v;if((v=n.__r3f)!=null&&v.primitive&&p==="object"||Wn.equ(x,l[p]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(p))return d.push([p,x,!0,[]]);let y=[];p.includes("-")&&(y=p.split("-")),d.push([p,x,!1,y]);for(const w in r){const _=r[w];w.startsWith(`${p}-`)&&d.push([w,_,!1,w.split("-")])}});const f={...r};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(f.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(f.attach=u.memoizedProps.attach),{memoized:f,changes:d}}const FMe=typeof process<"u"&&!1;function HC(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=kMe(e)?e:gY(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let u=0;u<a.length;u++){let[h,d,f,p]=a[u];if(BC(n)){const w="srgb",_="srgb-linear";h==="encoding"?(h="colorSpace",d=d===3001?w:_):h==="outputEncoding"&&(h="outputColorSpace",d=d===3001?w:_)}let x=n,v=x[h];if(p.length&&(v=p.reduce((y,w)=>y[w],n),!(v&&v.set))){const[y,...w]=p.reverse();x=w.reverse().reduce((_,b)=>_[b],n),h=y}if(d===pY+"remove")if(x.constructor){let y=g5.get(x.constructor);y||(y=new x.constructor,g5.set(x.constructor,y)),d=y[h]}else d=0;if(f&&i)d?i.handlers[h]=d:delete i.handlers[h],i.eventCount=Object.keys(i.handlers).length;else if(v&&v.set&&(v.copy||v instanceof Cd)){if(Array.isArray(d))v.fromArray?v.fromArray(d):v.set(...d);else if(v.copy&&d&&d.constructor&&(FMe?v.constructor.name===d.constructor.name:v.constructor===d.constructor))v.copy(d);else if(d!==void 0){const y=v instanceof ht;!y&&v.setScalar?v.setScalar(d):v instanceof Cd&&d instanceof Cd?v.mask=d.mask:v.set(d),!uY()&&s&&!s.linear&&y&&v.convertSRGBToLinear()}}else if(x[h]=d,x[h]instanceof Rn&&x[h].format===$i&&x[h].type===Ks&&s){const y=x[h];BC(y)&&BC(s.gl)?y.colorSpace=s.gl.outputColorSpace:y.encoding=s.gl.outputEncoding}Mp(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const u=tb(n).getState().internal,h=u.interaction.indexOf(n);h>-1&&u.interaction.splice(h,1),i.eventCount&&u.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&NI(n),n}function Mp(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function NI(n){n.onUpdate==null||n.onUpdate(n)}function yY(n,e){n.manual||(hY(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Ow(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function UMe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return $p.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return $p.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return $p.ContinuousEventPriority;default:return $p.DefaultEventPriority}}function vY(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function BMe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{vY(t.capturedMap,e,i,r)})}function zMe(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],h=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+h*h))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var h;return(h=c.__r3f)==null?void 0:h.handlers["onPointer"+u]}))}function i(l,c){const u=n.getState(),h=new Set,d=[],f=c?c(u.internal.interaction):u.internal.interaction;for(let y=0;y<f.length;y++){const w=fy(f[y]);w&&(w.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function p(y){const w=fy(y);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var _;w.events.compute==null||w.events.compute(l,w,(_=w.previousRoot)==null?void 0:_.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(y,!0):[]}let x=f.flatMap(p).sort((y,w)=>{const _=fy(y.object),b=fy(w.object);return!_||!b?y.distance-w.distance:b.events.priority-_.events.priority||y.distance-w.distance}).filter(y=>{const w=Ow(y);return h.has(w)?!1:(h.add(w),!0)});u.events.filter&&(x=u.events.filter(x,u));for(const y of x){let w=y.object;for(;w;){var v;(v=w.__r3f)!=null&&v.eventCount&&d.push({...y,eventObject:w}),w=w.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let y of u.internal.capturedMap.get(l.pointerId).values())h.has(Ow(y.intersection))||d.push(y.intersection);return d}function r(l,c,u,h){const d=n.getState();if(l.length){const f={stopped:!1};for(const p of l){const x=fy(p.object)||d,{raycaster:v,pointer:y,camera:w,internal:_}=x,b=new V(y.x,y.y,0).unproject(w),E=I=>{var U,j;return(U=(j=_.capturedMap.get(I))==null?void 0:j.has(p.eventObject))!=null?U:!1},M=I=>{const U={intersection:p,target:c.target};_.capturedMap.has(I)?_.capturedMap.get(I).set(p.eventObject,U):_.capturedMap.set(I,new Map([[p.eventObject,U]])),c.target.setPointerCapture(I)},C=I=>{const U=_.capturedMap.get(I);U&&vY(_.capturedMap,p.eventObject,U,I)};let P={};for(let I in c){let U=c[I];typeof U!="function"&&(P[I]=U)}let T={...p,...P,pointer:y,intersections:l,stopped:f.stopped,delta:u,unprojectedPoint:b,ray:v.ray,camera:w,stopPropagation(){const I="pointerId"in c&&_.capturedMap.get(c.pointerId);if((!I||I.has(p.eventObject))&&(T.stopped=f.stopped=!0,_.hovered.size&&Array.from(_.hovered.values()).find(U=>U.eventObject===p.eventObject))){const U=l.slice(0,l.indexOf(p));s([...U,p])}},target:{hasPointerCapture:E,setPointerCapture:M,releasePointerCapture:C},currentTarget:{hasPointerCapture:E,setPointerCapture:M,releasePointerCapture:C},nativeEvent:c};if(h(T),f.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(h=>h.object===u.object&&h.index===u.index&&h.instanceId===u.instanceId)){const d=u.eventObject.__r3f,f=d==null?void 0:d.handlers;if(c.hovered.delete(Ow(u)),d!=null&&d.eventCount){const p={...u,intersections:l};f.onPointerOut==null||f.onPointerOut(p),f.onPointerLeave==null||f.onPointerLeave(p)}}}function o(l,c){for(let u=0;u<c.length;u++){const h=c[u].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:h,internal:d}=n.getState();d.lastEvent.current=u;const f=l==="onPointerMove",p=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",v=i(u,f?t:void 0),y=p?e(u):0;l==="onPointerDown"&&(d.initialClick=[u.offsetX,u.offsetY],d.initialHits=v.map(_=>_.eventObject)),p&&!v.length&&y<=2&&(o(u,d.interaction),h&&h(u)),f&&s(v);function w(_){const b=_.eventObject,E=b.__r3f,M=E==null?void 0:E.handlers;if(E!=null&&E.eventCount)if(f){if(M.onPointerOver||M.onPointerEnter||M.onPointerOut||M.onPointerLeave){const C=Ow(_),P=d.hovered.get(C);P?P.stopped&&_.stopPropagation():(d.hovered.set(C,_),M.onPointerOver==null||M.onPointerOver(_),M.onPointerEnter==null||M.onPointerEnter(_))}M.onPointerMove==null||M.onPointerMove(_)}else{const C=M[l];C?(!p||d.initialHits.includes(b))&&(o(u,d.interaction.filter(P=>!d.initialHits.includes(P))),C(_)):p&&d.initialHits.includes(b)&&o(u,d.interaction.filter(P=>!d.initialHits.includes(P)))}}r(v,u,y,w)}}return{handlePointer:a}}const HMe=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],xY=n=>!!(n!=null&&n.render),L3=R.createContext(null),WMe=(n,e)=>{const t=rY((a,l)=>{const c=new V,u=new V,h=new V;function d(y=l().camera,w=u,_=l().size){const{width:b,height:E,top:M,left:C}=_,P=b/E;w instanceof V?h.copy(w):h.set(...w);const T=y.getWorldPosition(c).distanceTo(h);if(hY(y))return{width:b/y.zoom,height:E/y.zoom,top:M,left:C,factor:1,distance:T,aspect:P};{const I=y.fov*Math.PI/180,U=2*Math.tan(I/2)*T,j=U*(b/E);return{width:j,height:U,top:M,left:C,factor:b/j,distance:T,aspect:P}}}let f;const p=y=>a(w=>({performance:{...w.performance,current:y}})),x=new Ue;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(y=1)=>n(l(),y),advance:(y,w)=>e(y,w,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new M3,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const y=l();f&&clearTimeout(f),y.performance.current!==y.performance.min&&p(y.performance.min),f=setTimeout(()=>p(l().performance.max),y.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:y=>a(w=>({...w,events:{...w.events,...y}})),setSize:(y,w,_,b,E)=>{const M=l().camera,C={width:y,height:w,top:b||0,left:E||0,updateStyle:_};a(P=>({size:C,viewport:{...P.viewport,...d(M,u,C)}}))},setDpr:y=>a(w=>{const _=mY(y);return{viewport:{...w.viewport,dpr:_,initialDpr:w.viewport.initialDpr||_}}}),setFrameloop:(y="always")=>{const w=l().clock;w.stop(),w.elapsedTime=0,y!=="never"&&(w.start(),w.elapsedTime=0),a(()=>({frameloop:y}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:R.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(y,w,_)=>{const b=l().internal;return b.priority=b.priority+(w>0?1:0),b.subscribers.push({ref:y,priority:w,store:_}),b.subscribers=b.subscribers.sort((E,M)=>E.priority-M.priority),()=>{const E=l().internal;E!=null&&E.subscribers&&(E.priority=E.priority-(w>0?1:0),E.subscribers=E.subscribers.filter(M=>M.ref!==y))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:h}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var d;r=l,s=c.dpr,yY(a,l),u.setPixelRatio(c.dpr);const f=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,f)}a!==o&&(o=a,h(f=>({viewport:{...f.viewport,...f.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Dw,VMe=new Set,GMe=new Set,jMe=new Set;function WC(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function py(n,e){switch(n){case"before":return WC(VMe,e);case"after":return WC(GMe,e);case"tail":return WC(jMe,e)}}let VC,GC;function jC(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),VC=e.internal.subscribers,Dw=0;Dw<VC.length;Dw++)GC=VC[Dw],GC.ref.current(GC.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function $Me(n){let e=!1,t=!1,i,r,s;function o(c){r=requestAnimationFrame(o),e=!0,i=0,py("before",c),t=!0;for(const h of n.values()){var u;s=h.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(i+=jC(c,s))}if(t=!1,py("after",c),i===0)return py("tail",c),e=!1,cancelAnimationFrame(r)}function a(c,u=1){var h;if(!c)return n.forEach(d=>a(d.store.getState(),u));(h=c.gl.xr)!=null&&h.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,h,d){if(u&&py("before",c),h)jC(c,h,d);else for(const f of n.values())jC(c,f.store.getState());u&&py("after",c)}return{loop:o,invalidate:a,advance:l}}function N3(){const n=R.useContext(L3);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Pi(n=t=>t,e){return N3()(n,e)}function aM(n,e=0){const t=N3(),i=t.getState().internal.subscribe,r=dY(n);return Z0(()=>i(r,e,t),[e,i,t]),null}const x5=new WeakMap;function _Y(n,e){return function(t,...i){let r=x5.get(t);return r||(r=new t,x5.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,OMe(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function Dm(n,e,t,i){const r=Array.isArray(e)?e:[e],s=CMe(_Y(t,i),[n,...r],{equal:Wn.equ});return Array.isArray(e)?s:s[0]}Dm.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return PMe(_Y(t),[n,...i])};Dm.clear=function(n,e){const t=Array.isArray(e)?e:[e];return RMe([n,...t])};const Fm=new Map,{invalidate:_5,advance:w5}=$Me(Fm),{reconciler:f0,applyProps:au}=IMe(Fm,UMe),tp={objects:"shallow",strict:!1},XMe=(n,e)=>{const t=typeof n=="function"?n(e):n;return xY(t)?t:new BE({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function YMe(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function qMe(n){const e=Fm.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store,r=typeof reportError=="function"?reportError:console.error,s=i||WMe(_5,w5),o=t||f0.createContainer(s,$p.ConcurrentRoot,null,!1,null,"",r,null);e||Fm.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:h,size:d,scene:f,events:p,onCreated:x,shadows:v=!1,linear:y=!1,flat:w=!1,legacy:_=!1,orthographic:b=!1,frameloop:E="always",dpr:M=[1,2],performance:C,raycaster:P,camera:T,onPointerMissed:I}=u,U=s.getState(),j=U.gl;U.gl||U.set({gl:j=XMe(h,n)});let B=U.raycaster;B||U.set({raycaster:B=new P3});const{params:z,...$}=P||{};if(Wn.equ($,B,tp)||au(B,{...$}),Wn.equ(z,B.params,tp)||au(B,{params:{...B.params,...z}}),!U.camera||U.camera===c&&!Wn.equ(c,T,tp)){c=T;const D=T instanceof W0,Y=D?T:b?new Ro(0,0,0,0,.1,1e3):new ri(75,0,.1,1e3);D||(Y.position.z=5,T&&(au(Y,T),("aspect"in T||"left"in T||"right"in T||"bottom"in T||"top"in T)&&(Y.manual=!0,Y.updateProjectionMatrix())),!U.camera&&!(T!=null&&T.rotation)&&Y.lookAt(0,0,0)),U.set({camera:Y}),B.camera=Y}if(!U.scene){let D;f instanceof km?D=f:(D=new km,f&&au(D,f)),U.set({scene:Ep(D)})}if(!U.xr){var H;const D=(re,ce)=>{const oe=s.getState();oe.frameloop!=="never"&&w5(re,!0,oe,ce)},Y=()=>{const re=s.getState();re.gl.xr.enabled=re.gl.xr.isPresenting,re.gl.xr.setAnimationLoop(re.gl.xr.isPresenting?D:null),re.gl.xr.isPresenting||_5(re)},Q={connect(){const re=s.getState().gl;re.xr.addEventListener("sessionstart",Y),re.xr.addEventListener("sessionend",Y)},disconnect(){const re=s.getState().gl;re.xr.removeEventListener("sessionstart",Y),re.xr.removeEventListener("sessionend",Y)}};typeof((H=j.xr)==null?void 0:H.addEventListener)=="function"&&Q.connect(),U.set({xr:Q})}if(j.shadowMap){const D=j.shadowMap.enabled,Y=j.shadowMap.type;if(j.shadowMap.enabled=!!v,Wn.boo(v))j.shadowMap.type=cv;else if(Wn.str(v)){var Z;const Q={basic:c7,percentage:LE,soft:cv,variance:ha};j.shadowMap.type=(Z=Q[v])!=null?Z:cv}else Wn.obj(v)&&Object.assign(j.shadowMap,v);(D!==j.shadowMap.enabled||Y!==j.shadowMap.type)&&(j.shadowMap.needsUpdate=!0)}const O=uY();O&&("enabled"in O?O.enabled=!_:"legacyMode"in O&&(O.legacyMode=_)),l||au(j,{outputEncoding:y?3e3:3001,toneMapping:w?Ma:Dk}),U.legacy!==_&&U.set(()=>({legacy:_})),U.linear!==y&&U.set(()=>({linear:y})),U.flat!==w&&U.set(()=>({flat:w})),h&&!Wn.fun(h)&&!xY(h)&&!Wn.equ(h,j,tp)&&au(j,h),p&&!U.events.handlers&&U.set({events:p(s)});const W=YMe(n,d);return Wn.equ(W,U.size,tp)||U.setSize(W.width,W.height,W.updateStyle,W.top,W.left),M&&U.viewport.dpr!==mY(M)&&U.setDpr(M),U.frameloop!==E&&U.setFrameloop(E),U.onPointerMissed||U.set({onPointerMissed:I}),C&&!Wn.equ(C,U.performance,tp)&&U.set(D=>({performance:{...D.performance,...C}})),a=x,l=!0,this},render(u){return l||this.configure(),f0.updateContainer(k.jsx(ZMe,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){wY(n)}}}function ZMe({store:n,children:e,onCreated:t,rootElement:i}){return Z0(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),k.jsx(L3.Provider,{value:n,children:e})}function wY(n,e){const t=Fm.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),f0.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),DMe(r),Fm.delete(n)}catch{}},500)})}}function KMe(n,e,t){return k.jsx(QMe,{children:n,container:e,state:t},e.uuid)}function QMe({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=N3(),[a]=R.useState(()=>new P3),[l]=R.useState(()=>new Ue),c=R.useCallback((h,d)=>{const f={...h};Object.keys(h).forEach(x=>{(HMe.includes(x)||h[x]!==d[x]&&d[x])&&delete f[x]});let p;if(d&&r){const x=d.camera;p=h.viewport.getCurrentViewport(x,new V,r),x!==h.camera&&yY(x,r)}return{...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...d==null?void 0:d.events,...i},size:{...h.size,...r},viewport:{...h.viewport,...p},...s}},[n]),[u]=R.useState(()=>{const h=o.getState();return rY((f,p)=>({...h,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...i},size:{...h.size,...r},...s,set:f,get:p,setEvents:x=>f(v=>({...v,events:{...v.events,...x}}))}))});return R.useEffect(()=>{const h=o.subscribe(d=>u.setState(f=>c(d,f)));return()=>{h()}},[c]),R.useEffect(()=>{u.setState(h=>c(o.getState(),h))},[c]),R.useEffect(()=>()=>{u.destroy()},[]),k.jsx(k.Fragment,{children:f0.createPortal(k.jsx(L3.Provider,{value:u,children:e}),u,null)})}f0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:R.version});function kI(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?i=setTimeout(l,e-u):(i=null,t||(a=n.apply(s,r),s=r=null))}var c=function(){s=this,r=arguments,o=Date.now();var u=t&&!i;return i||(i=setTimeout(l,e)),u&&(a=n.apply(s,r),s=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},c}kI.debounce=kI;var JMe=kI;const b5=Ia(JMe);function eTe(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=R.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=R.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,h=R.useRef(!1);R.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[d,f,p]=R.useMemo(()=>{const w=()=>{if(!l.current.element)return;const{left:_,top:b,width:E,height:M,bottom:C,right:P,x:T,y:I}=l.current.element.getBoundingClientRect(),U={left:_,top:b,width:E,height:M,bottom:C,right:P,x:T,y:I};l.current.element instanceof HTMLElement&&r&&(U.height=l.current.element.offsetHeight,U.width=l.current.element.offsetWidth),Object.freeze(U),h.current&&!rTe(l.current.lastBounds,U)&&a(l.current.lastBounds=U)};return[w,u?b5(w,u):w,c?b5(w,c):w]},[a,r,c,u]);function x(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function v(){l.current.element&&(l.current.resizeObserver=new s(p),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(w=>w.addEventListener("scroll",p,{capture:!0,passive:!0})))}const y=w=>{!w||w===l.current.element||(x(),l.current.element=w,l.current.scrollContainers=bY(w),v())};return nTe(p,!!t),tTe(f),R.useEffect(()=>{x(),v()},[t,p,f]),R.useEffect(()=>x,[]),[y,o,d]}function tTe(n){R.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function nTe(n,e){R.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function bY(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...bY(n.parentElement)]}const iTe=["x","y","top","bottom","left","right","width","height"],rTe=(n,e)=>iTe.every(t=>n[t]===e[t]);var sTe=Object.defineProperty,oTe=Object.defineProperties,aTe=Object.getOwnPropertyDescriptors,S5=Object.getOwnPropertySymbols,lTe=Object.prototype.hasOwnProperty,cTe=Object.prototype.propertyIsEnumerable,E5=(n,e,t)=>e in n?sTe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,M5=(n,e)=>{for(var t in e||(e={}))lTe.call(e,t)&&E5(n,t,e[t]);if(S5)for(var t of S5(e))cTe.call(e,t)&&E5(n,t,e[t]);return n},uTe=(n,e)=>oTe(n,aTe(e)),T5,A5;typeof window<"u"&&((T5=window.document)!=null&&T5.createElement||((A5=window.navigator)==null?void 0:A5.product)==="ReactNative")?R.useLayoutEffect:R.useEffect;function SY(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=SY(i,e,t);if(r)return r;i=i.sibling}}function EY(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const C5=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=C5;return}return C5.apply(this,arguments)};const k3=EY(R.createContext(null));class MY extends R.Component{render(){return R.createElement(k3.Provider,{value:this._reactInternals},this.props.children)}}function hTe(){const n=R.useContext(k3);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=R.useId();return R.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=SY(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function dTe(){const n=hTe(),[e]=R.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==k3&&!e.has(r)&&e.set(r,R.useContext(EY(r)))}t=t.return}return e}function fTe(){const n=dTe();return R.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>R.createElement(e,null,R.createElement(t.Provider,uTe(M5({},i),{value:n.get(t)}))),e=>R.createElement(MY,M5({},e))),[n])}const $C={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function pTe(n){const{handlePointer:e}=zMe(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys($C).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=$C[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=$C[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const mTe=R.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=pTe,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:h,legacy:d,orthographic:f,frameloop:p,dpr:x,performance:v,raycaster:y,camera:w,scene:_,onPointerMissed:b,onCreated:E,...M},C){R.useMemo(()=>I3(wMe),[]);const P=fTe(),[T,I]=eTe({scroll:!0,debounce:{scroll:50,resize:0},...i}),U=R.useRef(null),j=R.useRef(null);R.useImperativeHandle(C,()=>U.current);const B=dY(b),[z,$]=R.useState(!1),[H,Z]=R.useState(!1);if(z)throw z;if(H)throw H;const O=R.useRef(null);Z0(()=>{const D=U.current;I.width>0&&I.height>0&&D&&(O.current||(O.current=qMe(D)),O.current.configure({gl:s,events:o,shadows:c,linear:u,flat:h,legacy:d,orthographic:f,frameloop:p,dpr:x,performance:v,raycaster:y,camera:w,scene:_,size:I,onPointerMissed:(...Y)=>B.current==null?void 0:B.current(...Y),onCreated:Y=>{Y.events.connect==null||Y.events.connect(a?LMe(a)?a.current:a:j.current),l&&Y.setEvents({compute:(Q,re)=>{const ce=Q[l+"X"],oe=Q[l+"Y"];re.pointer.set(ce/re.size.width*2-1,-(oe/re.size.height)*2+1),re.raycaster.setFromCamera(re.pointer,re.camera)}}),E==null||E(Y)}}),O.current.render(k.jsx(P,{children:k.jsx(fY,{set:Z,children:k.jsx(R.Suspense,{fallback:k.jsx(NMe,{set:$}),children:e})})})))}),R.useEffect(()=>{const D=U.current;if(D)return()=>wY(D)},[]);const W=a?"none":"auto";return k.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:W,...r},...M,children:k.jsx("div",{ref:T,style:{width:"100%",height:"100%"},children:k.jsx("canvas",{ref:U,style:{display:"block"},children:t})})})}),gTe=R.forwardRef(function(e,t){return k.jsx(MY,{children:k.jsx(mTe,{...e,ref:t})})});var O3,P5=JS;O3=P5.createRoot,P5.hydrateRoot;const K0=new V,D3=new V,yTe=new V,R5=new Ue;function vTe(n,e,t){const i=K0.setFromMatrixPosition(n.matrixWorld);i.project(e);const r=t.width/2,s=t.height/2;return[i.x*r+r,-(i.y*s)+s]}function xTe(n,e){const t=K0.setFromMatrixPosition(n.matrixWorld),i=D3.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),s=e.getWorldDirection(yTe);return r.angleTo(s)>Math.PI/2}function _Te(n,e,t,i){const r=K0.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),R5.set(s.x,s.y),t.setFromCamera(R5,e);const o=t.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function wTe(n,e){if(e instanceof Ro)return e.zoom;if(e instanceof ri){const t=K0.setFromMatrixPosition(n.matrixWorld),i=D3.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function bTe(n,e,t){if(e instanceof ri||e instanceof Ro){const i=K0.setFromMatrixPosition(n.matrixWorld),r=D3.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const OI=n=>Math.abs(n)<1e-10?0:n;function TY(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=OI(e[r]*n.elements[r])+(r!==15?",":")");return t+i}const STe=(n=>e=>TY(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),ETe=(n=>(e,t)=>TY(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function MTe(n){return n&&typeof n=="object"&&"current"in n}const lM=R.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:h,onOcclude:d,castShadow:f,receiveShadow:p,material:x,geometry:v,zIndexRange:y=[16777271,0],calculatePosition:w=vTe,as:_="div",wrapperClass:b,pointerEvents:E="auto",...M},C)=>{const{gl:P,camera:T,scene:I,size:U,raycaster:j,events:B,viewport:z}=Pi(),[$]=R.useState(()=>document.createElement(_)),H=R.useRef(),Z=R.useRef(null),O=R.useRef(0),W=R.useRef([0,0]),D=R.useRef(null),Y=R.useRef(null),Q=(a==null?void 0:a.current)||B.connected||P.domElement.parentNode,re=R.useRef(null),ce=R.useRef(!1),oe=R.useMemo(()=>h&&h!=="blending"||Array.isArray(h)&&h.length&&MTe(h[0]),[h]);R.useLayoutEffect(()=>{const Je=P.domElement;h&&h==="blending"?(Je.style.zIndex=`${Math.floor(y[0]/2)}`,Je.style.position="absolute",Je.style.pointerEvents="none"):(Je.style.zIndex=null,Je.style.position=null,Je.style.pointerEvents=null)},[h]),R.useLayoutEffect(()=>{if(Z.current){const Je=H.current=O3($);if(I.updateMatrixWorld(),u)$.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Fe=w(Z.current,T,U);$.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Fe[0]}px,${Fe[1]}px,0);transform-origin:0 0;`}return Q&&(r?Q.prepend($):Q.appendChild($)),()=>{Q&&Q.removeChild($),Je.unmount()}}},[Q,u]),R.useLayoutEffect(()=>{b&&($.className=b)},[b]);const he=R.useMemo(()=>u?{position:"absolute",top:0,left:0,width:U.width,height:U.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-U.height/2,left:-U.width/2,width:U.width,height:U.height},...t},[t,s,o,U,u]),Re=R.useMemo(()=>({position:"absolute",pointerEvents:E}),[E]);R.useLayoutEffect(()=>{if(ce.current=!1,u){var Je;(Je=H.current)==null||Je.render(R.createElement("div",{ref:D,style:he},R.createElement("div",{ref:Y,style:Re},R.createElement("div",{ref:C,className:i,style:t,children:n}))))}else{var Fe;(Fe=H.current)==null||Fe.render(R.createElement("div",{ref:C,style:he,className:i,children:n}))}});const Oe=R.useRef(!0);aM(Je=>{if(Z.current){T.updateMatrixWorld(),Z.current.updateWorldMatrix(!0,!1);const Fe=u?W.current:w(Z.current,T,U);if(u||Math.abs(O.current-T.zoom)>e||Math.abs(W.current[0]-Fe[0])>e||Math.abs(W.current[1]-Fe[1])>e){const J=xTe(Z.current,T);let ge=!1;oe&&(Array.isArray(h)?ge=h.map(me=>me.current):h!=="blending"&&(ge=[I]));const de=Oe.current;if(ge){const me=_Te(Z.current,T,j,ge);Oe.current=me&&!J}else Oe.current=!J;de!==Oe.current&&(d?d(!Oe.current):$.style.display=Oe.current?"block":"none");const Ae=Math.floor(y[0]/2),Ie=h?oe?[y[0],Ae]:[Ae-1,0]:y;if($.style.zIndex=`${bTe(Z.current,T,Ie)}`,u){const[me,ye]=[U.width/2,U.height/2],ke=T.projectionMatrix.elements[5]*ye,{isOrthographicCamera:Xe,top:Le,left:Ye,bottom:q,right:X}=T,pe=STe(T.matrixWorldInverse),_e=Xe?`scale(${ke})translate(${OI(-(X+Ye)/2)}px,${OI((Le+q)/2)}px)`:`translateZ(${ke}px)`;let xe=Z.current.matrixWorld;c&&(xe=T.matrixWorldInverse.clone().transpose().copyPosition(xe).scale(Z.current.scale),xe.elements[3]=xe.elements[7]=xe.elements[11]=0,xe.elements[15]=1),$.style.width=U.width+"px",$.style.height=U.height+"px",$.style.perspective=Xe?"":`${ke}px`,D.current&&Y.current&&(D.current.style.transform=`${_e}${pe}translate(${me}px,${ye}px)`,Y.current.style.transform=ETe(xe,1/((l||10)/400)))}else{const me=l===void 0?1:wTe(Z.current,T)*l;$.style.transform=`translate3d(${Fe[0]}px,${Fe[1]}px,0) scale(${me})`}W.current=Fe,O.current=T.zoom}}if(!oe&&re.current&&!ce.current)if(u){if(D.current){const Fe=D.current.children[0];if(Fe!=null&&Fe.clientWidth&&Fe!=null&&Fe.clientHeight){const{isOrthographicCamera:J}=T;if(J||v)M.scale&&(Array.isArray(M.scale)?M.scale instanceof V?re.current.scale.copy(M.scale.clone().divideScalar(1)):re.current.scale.set(1/M.scale[0],1/M.scale[1],1/M.scale[2]):re.current.scale.setScalar(1/M.scale));else{const ge=(l||10)/400,de=Fe.clientWidth*ge,Ae=Fe.clientHeight*ge;re.current.scale.set(de,Ae,1)}ce.current=!0}}}else{const Fe=$.children[0];if(Fe!=null&&Fe.clientWidth&&Fe!=null&&Fe.clientHeight){const J=1/z.factor,ge=Fe.clientWidth*J,de=Fe.clientHeight*J;re.current.scale.set(ge,de,1),ce.current=!0}re.current.lookAt(Je.camera.position)}});const Ve=R.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return R.createElement("group",Ta({},M,{ref:Z}),h&&!oe&&R.createElement("mesh",{castShadow:f,receiveShadow:p,ref:re},v||R.createElement("planeGeometry",null),x||R.createElement("shaderMaterial",{side:cr,vertexShader:Ve.vertexShader,fragmentShader:Ve.fragmentShader})))}),TTe=parseInt(ef.replace(/\D+/g,"")),AY=TTe>=125?"uv1":"uv2";var To=Uint8Array,wu=Uint16Array,DI=Uint32Array,CY=new To([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),PY=new To([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ATe=new To([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),RY=function(n,e){for(var t=new wu(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new DI(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},IY=RY(CY,2),LY=IY[0],CTe=IY[1];LY[28]=258,CTe[258]=28;var PTe=RY(PY,0),RTe=PTe[0],FI=new wu(32768);for(var Qn=0;Qn<32768;++Qn){var Zc=(Qn&43690)>>>1|(Qn&21845)<<1;Zc=(Zc&52428)>>>2|(Zc&13107)<<2,Zc=(Zc&61680)>>>4|(Zc&3855)<<4,FI[Qn]=((Zc&65280)>>>8|(Zc&255)<<8)>>>1}var gv=function(n,e,t){for(var i=n.length,r=0,s=new wu(e);r<i;++r)++s[n[r]-1];var o=new wu(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new wu(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],u=e-n[r],h=o[n[r]-1]++<<u,d=h|(1<<u)-1;h<=d;++h)a[FI[h]>>>l]=c}else for(a=new wu(i),r=0;r<i;++r)n[r]&&(a[r]=FI[o[n[r]-1]++]>>>15-n[r]);return a},Q0=new To(288);for(var Qn=0;Qn<144;++Qn)Q0[Qn]=8;for(var Qn=144;Qn<256;++Qn)Q0[Qn]=9;for(var Qn=256;Qn<280;++Qn)Q0[Qn]=7;for(var Qn=280;Qn<288;++Qn)Q0[Qn]=8;var NY=new To(32);for(var Qn=0;Qn<32;++Qn)NY[Qn]=5;var ITe=gv(Q0,9,1),LTe=gv(NY,5,1),XC=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ra=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},YC=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},NTe=function(n){return(n/8|0)+(n&7&&1)},kTe=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof wu?wu:n instanceof DI?DI:To)(t-e);return i.set(n.subarray(e,t)),i},OTe=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new To(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new To(i*3));var o=function(he){var Re=e.length;if(he>Re){var Oe=new To(Math.max(Re*2,he));Oe.set(e),e=Oe}},a=t.f||0,l=t.p||0,c=t.b||0,u=t.l,h=t.d,d=t.m,f=t.n,p=i*8;do{if(!u){t.f=a=ra(n,l,1);var x=ra(n,l+1,3);if(l+=3,x)if(x==1)u=ITe,h=LTe,d=9,f=5;else if(x==2){var _=ra(n,l,31)+257,b=ra(n,l+10,15)+4,E=_+ra(n,l+5,31)+1;l+=14;for(var M=new To(E),C=new To(19),P=0;P<b;++P)C[ATe[P]]=ra(n,l+P*3,7);l+=b*3;for(var T=XC(C),I=(1<<T)-1,U=gv(C,T,1),P=0;P<E;){var j=U[ra(n,l,I)];l+=j&15;var v=j>>>4;if(v<16)M[P++]=v;else{var B=0,z=0;for(v==16?(z=3+ra(n,l,3),l+=2,B=M[P-1]):v==17?(z=3+ra(n,l,7),l+=3):v==18&&(z=11+ra(n,l,127),l+=7);z--;)M[P++]=B}}var $=M.subarray(0,_),H=M.subarray(_);d=XC($),f=XC(H),u=gv($,d,1),h=gv(H,f,1)}else throw"invalid block type";else{var v=NTe(l)+4,y=n[v-4]|n[v-3]<<8,w=v+y;if(w>i){if(s)throw"unexpected EOF";break}r&&o(c+y),e.set(n.subarray(v,w),c),t.b=c+=y,t.p=l=w*8;continue}if(l>p){if(s)throw"unexpected EOF";break}}r&&o(c+131072);for(var Z=(1<<d)-1,O=(1<<f)-1,W=l;;W=l){var B=u[YC(n,l)&Z],D=B>>>4;if(l+=B&15,l>p){if(s)throw"unexpected EOF";break}if(!B)throw"invalid length/literal";if(D<256)e[c++]=D;else if(D==256){W=l,u=null;break}else{var Y=D-254;if(D>264){var P=D-257,Q=CY[P];Y=ra(n,l,(1<<Q)-1)+LY[P],l+=Q}var re=h[YC(n,l)&O],ce=re>>>4;if(!re)throw"invalid distance";l+=re&15;var H=RTe[ce];if(ce>3){var Q=PY[ce];H+=YC(n,l)&(1<<Q)-1,l+=Q}if(l>p){if(s)throw"unexpected EOF";break}r&&o(c+131072);for(var oe=c+Y;c<oe;c+=4)e[c]=e[c-H],e[c+1]=e[c+1-H],e[c+2]=e[c+2-H],e[c+3]=e[c+3-H];c=oe}}t.l=u,t.p=W,t.b=c,u&&(a=1,t.m=d,t.d=h,t.n=f)}while(!a);return c==e.length?e:kTe(e,0,c)},DTe=new To(0),FTe=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Fw(n,e){return OTe((FTe(n),n.subarray(2,-4)),e)}var UTe=typeof TextDecoder<"u"&&new TextDecoder,BTe=0;try{UTe.decode(DTe,{stream:!0}),BTe=1}catch{}const zTe=n=>n&&n.isCubeTexture;class HTe extends oi{constructor(e,t){var i,r;const s=zTe(e),a=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,16*7),h=4*c,d=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${l}.0`],f=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,p=d.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(ef.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,x={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},v=new j0(1,16),y=new Is({uniforms:x,fragmentShader:p,vertexShader:f,side:cr});super(v,y)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var WTe=Object.defineProperty,VTe=(n,e,t)=>e in n?WTe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ot=(n,e,t)=>(VTe(n,typeof e!="symbol"?e+"":e,t),t);const Uw=new Da,I5=new xs,GTe=Math.cos(70*(Math.PI/180)),L5=(n,e)=>(n%e+e)%e;let jTe=class extends Ll{constructor(e,t){super(),Ot(this,"object"),Ot(this,"domElement"),Ot(this,"enabled",!0),Ot(this,"target",new V),Ot(this,"minDistance",0),Ot(this,"maxDistance",1/0),Ot(this,"minZoom",0),Ot(this,"maxZoom",1/0),Ot(this,"minPolarAngle",0),Ot(this,"maxPolarAngle",Math.PI),Ot(this,"minAzimuthAngle",-1/0),Ot(this,"maxAzimuthAngle",1/0),Ot(this,"enableDamping",!1),Ot(this,"dampingFactor",.05),Ot(this,"enableZoom",!0),Ot(this,"zoomSpeed",1),Ot(this,"enableRotate",!0),Ot(this,"rotateSpeed",1),Ot(this,"enablePan",!0),Ot(this,"panSpeed",1),Ot(this,"screenSpacePanning",!0),Ot(this,"keyPanSpeed",7),Ot(this,"zoomToCursor",!1),Ot(this,"autoRotate",!1),Ot(this,"autoRotateSpeed",2),Ot(this,"reverseOrbit",!1),Ot(this,"reverseHorizontalOrbit",!1),Ot(this,"reverseVerticalOrbit",!1),Ot(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ot(this,"mouseButtons",{LEFT:qh.ROTATE,MIDDLE:qh.DOLLY,RIGHT:qh.PAN}),Ot(this,"touches",{ONE:Zh.ROTATE,TWO:Zh.DOLLY_PAN}),Ot(this,"target0"),Ot(this,"position0"),Ot(this,"zoom0"),Ot(this,"_domElementKeyEvents",null),Ot(this,"getPolarAngle"),Ot(this,"getAzimuthalAngle"),Ot(this,"setPolarAngle"),Ot(this,"setAzimuthalAngle"),Ot(this,"getDistance"),Ot(this,"listenToKeyEvents"),Ot(this,"stopListenToKeyEvents"),Ot(this,"saveState"),Ot(this,"reset"),Ot(this,"update"),Ot(this,"connect"),Ot(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=se=>{let Se=L5(se,2*Math.PI),Ze=u.phi;Ze<0&&(Ze+=2*Math.PI),Se<0&&(Se+=2*Math.PI);let lt=Math.abs(Se-Ze);2*Math.PI-lt<lt&&(Se<Ze?Se+=2*Math.PI:Ze+=2*Math.PI),h.phi=Se-Ze,i.update()},this.setAzimuthalAngle=se=>{let Se=L5(se,2*Math.PI),Ze=u.theta;Ze<0&&(Ze+=2*Math.PI),Se<0&&(Se+=2*Math.PI);let lt=Math.abs(Se-Ze);2*Math.PI-lt<lt&&(Se<Ze?Se+=2*Math.PI:Ze+=2*Math.PI),h.theta=Se-Ze,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=se=>{se.addEventListener("keydown",xe),this._domElementKeyEvents=se},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",xe),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const se=new V,Se=new V(0,1,0),Ze=new fr().setFromUnitVectors(e.up,Se),lt=Ze.clone().invert(),le=new V,be=new fr,Te=2*Math.PI;return function(){const at=i.object.position;Ze.setFromUnitVectors(e.up,Se),lt.copy(Ze).invert(),se.copy(at).sub(i.target),se.applyQuaternion(Ze),u.setFromVector3(se),i.autoRotate&&l===a.NONE&&z(j()),i.enableDamping?(u.theta+=h.theta*i.dampingFactor,u.phi+=h.phi*i.dampingFactor):(u.theta+=h.theta,u.phi+=h.phi);let kt=i.minAzimuthAngle,en=i.maxAzimuthAngle;isFinite(kt)&&isFinite(en)&&(kt<-Math.PI?kt+=Te:kt>Math.PI&&(kt-=Te),en<-Math.PI?en+=Te:en>Math.PI&&(en-=Te),kt<=en?u.theta=Math.max(kt,Math.min(en,u.theta)):u.theta=u.theta>(kt+en)/2?Math.max(kt,u.theta):Math.min(en,u.theta)),u.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,u.phi)),u.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(f,i.dampingFactor):i.target.add(f),i.zoomToCursor&&T||i.object.isOrthographicCamera?u.radius=Q(u.radius):u.radius=Q(u.radius*d),se.setFromSpherical(u),se.applyQuaternion(lt),at.copy(i.target).add(se),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(h.theta*=1-i.dampingFactor,h.phi*=1-i.dampingFactor,f.multiplyScalar(1-i.dampingFactor)):(h.set(0,0,0),f.set(0,0,0));let Ln=!1;if(i.zoomToCursor&&T){let Ei=null;if(i.object instanceof ri&&i.object.isPerspectiveCamera){const cn=se.length();Ei=Q(cn*d);const Li=cn-Ei;i.object.position.addScaledVector(C,Li),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const cn=new V(P.x,P.y,0);cn.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/d)),i.object.updateProjectionMatrix(),Ln=!0;const Li=new V(P.x,P.y,0);Li.unproject(i.object),i.object.position.sub(Li).add(cn),i.object.updateMatrixWorld(),Ei=se.length()}else i.zoomToCursor=!1;Ei!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Ei).add(i.object.position):(Uw.origin.copy(i.object.position),Uw.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Uw.direction))<GTe?e.lookAt(i.target):(I5.setFromNormalAndCoplanarPoint(i.object.up,i.target),Uw.intersectPlane(I5,i.target))))}else i.object instanceof Ro&&i.object.isOrthographicCamera&&(Ln=d!==1,Ln&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/d)),i.object.updateProjectionMatrix()));return d=1,T=!1,Ln||le.distanceToSquared(i.object.position)>c||8*(1-be.dot(i.object.quaternion))>c?(i.dispatchEvent(r),le.copy(i.object.position),be.copy(i.object.quaternion),Ln=!1,!0):!1}})(),this.connect=se=>{i.domElement=se,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",qe),i.domElement.addEventListener("pointerdown",Le),i.domElement.addEventListener("pointercancel",q),i.domElement.addEventListener("wheel",_e)},this.dispose=()=>{var se,Se,Ze,lt,le,be;i.domElement&&(i.domElement.style.touchAction="auto"),(se=i.domElement)==null||se.removeEventListener("contextmenu",qe),(Se=i.domElement)==null||Se.removeEventListener("pointerdown",Le),(Ze=i.domElement)==null||Ze.removeEventListener("pointercancel",q),(lt=i.domElement)==null||lt.removeEventListener("wheel",_e),(le=i.domElement)==null||le.ownerDocument.removeEventListener("pointermove",Ye),(be=i.domElement)==null||be.ownerDocument.removeEventListener("pointerup",q),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",xe)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new RI,h=new RI;let d=1;const f=new V,p=new Ue,x=new Ue,v=new Ue,y=new Ue,w=new Ue,_=new Ue,b=new Ue,E=new Ue,M=new Ue,C=new V,P=new Ue;let T=!1;const I=[],U={};function j(){return 2*Math.PI/60/60*i.autoRotateSpeed}function B(){return Math.pow(.95,i.zoomSpeed)}function z(se){i.reverseOrbit||i.reverseHorizontalOrbit?h.theta+=se:h.theta-=se}function $(se){i.reverseOrbit||i.reverseVerticalOrbit?h.phi+=se:h.phi-=se}const H=(()=>{const se=new V;return function(Ze,lt){se.setFromMatrixColumn(lt,0),se.multiplyScalar(-Ze),f.add(se)}})(),Z=(()=>{const se=new V;return function(Ze,lt){i.screenSpacePanning===!0?se.setFromMatrixColumn(lt,1):(se.setFromMatrixColumn(lt,0),se.crossVectors(i.object.up,se)),se.multiplyScalar(Ze),f.add(se)}})(),O=(()=>{const se=new V;return function(Ze,lt){const le=i.domElement;if(le&&i.object instanceof ri&&i.object.isPerspectiveCamera){const be=i.object.position;se.copy(be).sub(i.target);let Te=se.length();Te*=Math.tan(i.object.fov/2*Math.PI/180),H(2*Ze*Te/le.clientHeight,i.object.matrix),Z(2*lt*Te/le.clientHeight,i.object.matrix)}else le&&i.object instanceof Ro&&i.object.isOrthographicCamera?(H(Ze*(i.object.right-i.object.left)/i.object.zoom/le.clientWidth,i.object.matrix),Z(lt*(i.object.top-i.object.bottom)/i.object.zoom/le.clientHeight,i.object.matrix)):i.enablePan=!1}})();function W(se){i.object instanceof ri&&i.object.isPerspectiveCamera||i.object instanceof Ro&&i.object.isOrthographicCamera?d/=se:i.enableZoom=!1}function D(se){i.object instanceof ri&&i.object.isPerspectiveCamera||i.object instanceof Ro&&i.object.isOrthographicCamera?d*=se:i.enableZoom=!1}function Y(se){if(!i.zoomToCursor||!i.domElement)return;T=!0;const Se=i.domElement.getBoundingClientRect(),Ze=se.clientX-Se.left,lt=se.clientY-Se.top,le=Se.width,be=Se.height;P.x=Ze/le*2-1,P.y=-(lt/be)*2+1,C.set(P.x,P.y,1).unproject(i.object).sub(i.object.position).normalize()}function Q(se){return Math.max(i.minDistance,Math.min(i.maxDistance,se))}function re(se){p.set(se.clientX,se.clientY)}function ce(se){Y(se),b.set(se.clientX,se.clientY)}function oe(se){y.set(se.clientX,se.clientY)}function he(se){x.set(se.clientX,se.clientY),v.subVectors(x,p).multiplyScalar(i.rotateSpeed);const Se=i.domElement;Se&&(z(2*Math.PI*v.x/Se.clientHeight),$(2*Math.PI*v.y/Se.clientHeight)),p.copy(x),i.update()}function Re(se){E.set(se.clientX,se.clientY),M.subVectors(E,b),M.y>0?W(B()):M.y<0&&D(B()),b.copy(E),i.update()}function Oe(se){w.set(se.clientX,se.clientY),_.subVectors(w,y).multiplyScalar(i.panSpeed),O(_.x,_.y),y.copy(w),i.update()}function Ve(se){Y(se),se.deltaY<0?D(B()):se.deltaY>0&&W(B()),i.update()}function Je(se){let Se=!1;switch(se.code){case i.keys.UP:O(0,i.keyPanSpeed),Se=!0;break;case i.keys.BOTTOM:O(0,-i.keyPanSpeed),Se=!0;break;case i.keys.LEFT:O(i.keyPanSpeed,0),Se=!0;break;case i.keys.RIGHT:O(-i.keyPanSpeed,0),Se=!0;break}Se&&(se.preventDefault(),i.update())}function Fe(){if(I.length==1)p.set(I[0].pageX,I[0].pageY);else{const se=.5*(I[0].pageX+I[1].pageX),Se=.5*(I[0].pageY+I[1].pageY);p.set(se,Se)}}function J(){if(I.length==1)y.set(I[0].pageX,I[0].pageY);else{const se=.5*(I[0].pageX+I[1].pageX),Se=.5*(I[0].pageY+I[1].pageY);y.set(se,Se)}}function ge(){const se=I[0].pageX-I[1].pageX,Se=I[0].pageY-I[1].pageY,Ze=Math.sqrt(se*se+Se*Se);b.set(0,Ze)}function de(){i.enableZoom&&ge(),i.enablePan&&J()}function Ae(){i.enableZoom&&ge(),i.enableRotate&&Fe()}function Ie(se){if(I.length==1)x.set(se.pageX,se.pageY);else{const Ze=it(se),lt=.5*(se.pageX+Ze.x),le=.5*(se.pageY+Ze.y);x.set(lt,le)}v.subVectors(x,p).multiplyScalar(i.rotateSpeed);const Se=i.domElement;Se&&(z(2*Math.PI*v.x/Se.clientHeight),$(2*Math.PI*v.y/Se.clientHeight)),p.copy(x)}function me(se){if(I.length==1)w.set(se.pageX,se.pageY);else{const Se=it(se),Ze=.5*(se.pageX+Se.x),lt=.5*(se.pageY+Se.y);w.set(Ze,lt)}_.subVectors(w,y).multiplyScalar(i.panSpeed),O(_.x,_.y),y.copy(w)}function ye(se){const Se=it(se),Ze=se.pageX-Se.x,lt=se.pageY-Se.y,le=Math.sqrt(Ze*Ze+lt*lt);E.set(0,le),M.set(0,Math.pow(E.y/b.y,i.zoomSpeed)),W(M.y),b.copy(E)}function ke(se){i.enableZoom&&ye(se),i.enablePan&&me(se)}function Xe(se){i.enableZoom&&ye(se),i.enableRotate&&Ie(se)}function Le(se){var Se,Ze;i.enabled!==!1&&(I.length===0&&((Se=i.domElement)==null||Se.ownerDocument.addEventListener("pointermove",Ye),(Ze=i.domElement)==null||Ze.ownerDocument.addEventListener("pointerup",q)),Ne(se),se.pointerType==="touch"?Me(se):X(se))}function Ye(se){i.enabled!==!1&&(se.pointerType==="touch"?je(se):pe(se))}function q(se){var Se,Ze,lt;Qe(se),I.length===0&&((Se=i.domElement)==null||Se.releasePointerCapture(se.pointerId),(Ze=i.domElement)==null||Ze.ownerDocument.removeEventListener("pointermove",Ye),(lt=i.domElement)==null||lt.ownerDocument.removeEventListener("pointerup",q)),i.dispatchEvent(o),l=a.NONE}function X(se){let Se;switch(se.button){case 0:Se=i.mouseButtons.LEFT;break;case 1:Se=i.mouseButtons.MIDDLE;break;case 2:Se=i.mouseButtons.RIGHT;break;default:Se=-1}switch(Se){case qh.DOLLY:if(i.enableZoom===!1)return;ce(se),l=a.DOLLY;break;case qh.ROTATE:if(se.ctrlKey||se.metaKey||se.shiftKey){if(i.enablePan===!1)return;oe(se),l=a.PAN}else{if(i.enableRotate===!1)return;re(se),l=a.ROTATE}break;case qh.PAN:if(se.ctrlKey||se.metaKey||se.shiftKey){if(i.enableRotate===!1)return;re(se),l=a.ROTATE}else{if(i.enablePan===!1)return;oe(se),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function pe(se){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;he(se);break;case a.DOLLY:if(i.enableZoom===!1)return;Re(se);break;case a.PAN:if(i.enablePan===!1)return;Oe(se);break}}function _e(se){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(se.preventDefault(),i.dispatchEvent(s),Ve(se),i.dispatchEvent(o))}function xe(se){i.enabled===!1||i.enablePan===!1||Je(se)}function Me(se){switch($e(se),I.length){case 1:switch(i.touches.ONE){case Zh.ROTATE:if(i.enableRotate===!1)return;Fe(),l=a.TOUCH_ROTATE;break;case Zh.PAN:if(i.enablePan===!1)return;J(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case Zh.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;de(),l=a.TOUCH_DOLLY_PAN;break;case Zh.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ae(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function je(se){switch($e(se),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ie(se),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;me(se),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ke(se),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Xe(se),i.update();break;default:l=a.NONE}}function qe(se){i.enabled!==!1&&se.preventDefault()}function Ne(se){I.push(se)}function Qe(se){delete U[se.pointerId];for(let Se=0;Se<I.length;Se++)if(I[Se].pointerId==se.pointerId){I.splice(Se,1);return}}function $e(se){let Se=U[se.pointerId];Se===void 0&&(Se=new Ue,U[se.pointerId]=Se),Se.set(se.pageX,se.pageY)}function it(se){const Se=se.pointerId===I[0].pointerId?I[1]:I[0];return U[Se.pointerId]}t!==void 0&&this.connect(t),this.update()}};class $Te extends w3{constructor(e){super(e),this.type=hr}parse(e){const o=function(P,T){switch(P){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(T||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(T||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(T||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(T||""))}},u=`
`,h=function(P,T,I){T=T||1024;let j=P.pos,B=-1,z=0,$="",H=String.fromCharCode.apply(null,new Uint16Array(P.subarray(j,j+128)));for(;0>(B=H.indexOf(u))&&z<T&&j<P.byteLength;)$+=H,z+=H.length,j+=128,H+=String.fromCharCode.apply(null,new Uint16Array(P.subarray(j,j+128)));return-1<B?(P.pos+=z+B+1,$+H.slice(0,B)):!1},d=function(P){const T=/^#\?(\S+)/,I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,U=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,j=/^\s*FORMAT=(\S+)\s*$/,B=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,z={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let $,H;for((P.pos>=P.byteLength||!($=h(P)))&&o(1,"no header found"),(H=$.match(T))||o(3,"bad initial token"),z.valid|=1,z.programtype=H[1],z.string+=$+`
`;$=h(P),$!==!1;){if(z.string+=$+`
`,$.charAt(0)==="#"){z.comments+=$+`
`;continue}if((H=$.match(I))&&(z.gamma=parseFloat(H[1])),(H=$.match(U))&&(z.exposure=parseFloat(H[1])),(H=$.match(j))&&(z.valid|=2,z.format=H[1]),(H=$.match(B))&&(z.valid|=4,z.height=parseInt(H[1],10),z.width=parseInt(H[2],10)),z.valid&2&&z.valid&4)break}return z.valid&2||o(3,"missing format specifier"),z.valid&4||o(3,"missing image size specifier"),z},f=function(P,T,I){const U=T;if(U<8||U>32767||P[0]!==2||P[1]!==2||P[2]&128)return new Uint8Array(P);U!==(P[2]<<8|P[3])&&o(3,"wrong scanline width");const j=new Uint8Array(4*T*I);j.length||o(4,"unable to allocate buffer space");let B=0,z=0;const $=4*U,H=new Uint8Array(4),Z=new Uint8Array($);let O=I;for(;O>0&&z<P.byteLength;){z+4>P.byteLength&&o(1),H[0]=P[z++],H[1]=P[z++],H[2]=P[z++],H[3]=P[z++],(H[0]!=2||H[1]!=2||(H[2]<<8|H[3])!=U)&&o(3,"bad rgbe scanline format");let W=0,D;for(;W<$&&z<P.byteLength;){D=P[z++];const Q=D>128;if(Q&&(D-=128),(D===0||W+D>$)&&o(3,"bad scanline data"),Q){const re=P[z++];for(let ce=0;ce<D;ce++)Z[W++]=re}else Z.set(P.subarray(z,z+D),W),W+=D,z+=D}const Y=U;for(let Q=0;Q<Y;Q++){let re=0;j[B]=Z[Q+re],re+=U,j[B+1]=Z[Q+re],re+=U,j[B+2]=Z[Q+re],re+=U,j[B+3]=Z[Q+re],B+=4}O--}return j},p=function(P,T,I,U){const j=P[T+3],B=Math.pow(2,j-128)/255;I[U+0]=P[T+0]*B,I[U+1]=P[T+1]*B,I[U+2]=P[T+2]*B,I[U+3]=1},x=function(P,T,I,U){const j=P[T+3],B=Math.pow(2,j-128)/255;I[U+0]=md.toHalfFloat(Math.min(P[T+0]*B,65504)),I[U+1]=md.toHalfFloat(Math.min(P[T+1]*B,65504)),I[U+2]=md.toHalfFloat(Math.min(P[T+2]*B,65504)),I[U+3]=md.toHalfFloat(1)},v=new Uint8Array(e);v.pos=0;const y=d(v),w=y.width,_=y.height,b=f(v.subarray(v.pos),w,_);let E,M,C;switch(this.type){case ur:C=b.length/4;const P=new Float32Array(C*4);for(let I=0;I<C;I++)p(b,I*4,P,I*4);E=P,M=ur;break;case hr:C=b.length/4;const T=new Uint16Array(C*4);for(let I=0;I<C;I++)x(b,I*4,T,I*4);E=T,M=hr;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:w,height:_,data:E,header:y.string,gamma:y.gamma,exposure:y.exposure,type:M}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){switch(o.type){case ur:case hr:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=En,o.magFilter=En,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,i,r)}}const my="colorSpace"in new Rn;class XTe extends w3{constructor(e){super(e),this.type=hr}parse(e){const T=Math.pow(2.7182818,2.2);function I(G,N){for(var K=0,te=0;te<65536;++te)(te==0||G[te>>3]&1<<(te&7))&&(N[K++]=te);for(var ee=K-1;K<65536;)N[K++]=0;return ee}function U(G){for(var N=0;N<16384;N++)G[N]={},G[N].len=0,G[N].lit=0,G[N].p=null}const j={l:0,c:0,lc:0};function B(G,N,K,te,ee){for(;K<G;)N=N<<8|se(te,ee),K+=8;K-=G,j.l=N>>K&(1<<G)-1,j.c=N,j.lc=K}const z=new Array(59);function $(G){for(var N=0;N<=58;++N)z[N]=0;for(var N=0;N<65537;++N)z[G[N]]+=1;for(var K=0,N=58;N>0;--N){var te=K+z[N]>>1;z[N]=K,K=te}for(var N=0;N<65537;++N){var ee=G[N];ee>0&&(G[N]=ee|z[ee]++<<6)}}function H(G,N,K,te,ee,ie,we){for(var Ce=K,He=0,We=0;ee<=ie;ee++){if(Ce.value-K.value>te)return!1;B(6,He,We,G,Ce);var Ge=j.l;if(He=j.c,We=j.lc,we[ee]=Ge,Ge==63){if(Ce.value-K.value>te)throw"Something wrong with hufUnpackEncTable";B(8,He,We,G,Ce);var Be=j.l+6;if(He=j.c,We=j.lc,ee+Be>ie+1)throw"Something wrong with hufUnpackEncTable";for(;Be--;)we[ee++]=0;ee--}else if(Ge>=59){var Be=Ge-59+2;if(ee+Be>ie+1)throw"Something wrong with hufUnpackEncTable";for(;Be--;)we[ee++]=0;ee--}}$(we)}function Z(G){return G&63}function O(G){return G>>6}function W(G,N,K,te){for(;N<=K;N++){var ee=O(G[N]),ie=Z(G[N]);if(ee>>ie)throw"Invalid table entry";if(ie>14){var we=te[ee>>ie-14];if(we.len)throw"Invalid table entry";if(we.lit++,we.p){var Ce=we.p;we.p=new Array(we.lit);for(var He=0;He<we.lit-1;++He)we.p[He]=Ce[He]}else we.p=new Array(1);we.p[we.lit-1]=N}else if(ie)for(var We=0,He=1<<14-ie;He>0;He--){var we=te[(ee<<14-ie)+We];if(we.len||we.p)throw"Invalid table entry";we.len=ie,we.lit=N,We++}}return!0}const D={c:0,lc:0};function Y(G,N,K,te){G=G<<8|se(K,te),N+=8,D.c=G,D.lc=N}const Q={c:0,lc:0};function re(G,N,K,te,ee,ie,we,Ce,He,We){if(G==N){te<8&&(Y(K,te,ee,we),K=D.c,te=D.lc),te-=8;var Ge=K>>te,Ge=new Uint8Array([Ge])[0];if(He.value+Ge>We)return!1;for(var Be=Ce[He.value-1];Ge-- >0;)Ce[He.value++]=Be}else if(He.value<We)Ce[He.value++]=G;else return!1;Q.c=K,Q.lc=te}function ce(G){return G&65535}function oe(G){var N=ce(G);return N>32767?N-65536:N}const he={a:0,b:0};function Re(G,N){var K=oe(G),te=oe(N),ee=te,ie=K+(ee&1)+(ee>>1),we=ie,Ce=ie-ee;he.a=we,he.b=Ce}function Oe(G,N){var K=ce(G),te=ce(N),ee=K-(te>>1)&65535,ie=te+ee-32768&65535;he.a=ie,he.b=ee}function Ve(G,N,K,te,ee,ie,we){for(var Ce=we<16384,He=K>ee?ee:K,We=1,Ge;We<=He;)We<<=1;for(We>>=1,Ge=We,We>>=1;We>=1;){for(var Be=0,gt=Be+ie*(ee-Ge),nt=ie*We,ot=ie*Ge,At=te*We,Rt=te*Ge,Ct,yt,Nt,St;Be<=gt;Be+=ot){for(var Wt=Be,Tn=Be+te*(K-Ge);Wt<=Tn;Wt+=Rt){var Dt=Wt+At,An=Wt+nt,pn=An+At;Ce?(Re(G[Wt+N],G[An+N]),Ct=he.a,Nt=he.b,Re(G[Dt+N],G[pn+N]),yt=he.a,St=he.b,Re(Ct,yt),G[Wt+N]=he.a,G[Dt+N]=he.b,Re(Nt,St),G[An+N]=he.a,G[pn+N]=he.b):(Oe(G[Wt+N],G[An+N]),Ct=he.a,Nt=he.b,Oe(G[Dt+N],G[pn+N]),yt=he.a,St=he.b,Oe(Ct,yt),G[Wt+N]=he.a,G[Dt+N]=he.b,Oe(Nt,St),G[An+N]=he.a,G[pn+N]=he.b)}if(K&We){var An=Wt+nt;Ce?Re(G[Wt+N],G[An+N]):Oe(G[Wt+N],G[An+N]),Ct=he.a,G[An+N]=he.b,G[Wt+N]=Ct}}if(ee&We)for(var Wt=Be,Tn=Be+te*(K-Ge);Wt<=Tn;Wt+=Rt){var Dt=Wt+At;Ce?Re(G[Wt+N],G[Dt+N]):Oe(G[Wt+N],G[Dt+N]),Ct=he.a,G[Dt+N]=he.b,G[Wt+N]=Ct}Ge=We,We>>=1}return Be}function Je(G,N,K,te,ee,ie,we,Ce,He,We){for(var Ge=0,Be=0,gt=Ce,nt=Math.trunc(ee.value+(ie+7)/8);ee.value<nt;)for(Y(Ge,Be,K,ee),Ge=D.c,Be=D.lc;Be>=14;){var ot=Ge>>Be-14&16383,At=N[ot];if(At.len)Be-=At.len,re(At.lit,we,Ge,Be,K,te,ee,He,We,gt),Ge=Q.c,Be=Q.lc;else{if(!At.p)throw"hufDecode issues";var Rt;for(Rt=0;Rt<At.lit;Rt++){for(var Ct=Z(G[At.p[Rt]]);Be<Ct&&ee.value<nt;)Y(Ge,Be,K,ee),Ge=D.c,Be=D.lc;if(Be>=Ct&&O(G[At.p[Rt]])==(Ge>>Be-Ct&(1<<Ct)-1)){Be-=Ct,re(At.p[Rt],we,Ge,Be,K,te,ee,He,We,gt),Ge=Q.c,Be=Q.lc;break}}if(Rt==At.lit)throw"hufDecode issues"}}var yt=8-ie&7;for(Ge>>=yt,Be-=yt;Be>0;){var At=N[Ge<<14-Be&16383];if(At.len)Be-=At.len,re(At.lit,we,Ge,Be,K,te,ee,He,We,gt),Ge=Q.c,Be=Q.lc;else throw"hufDecode issues"}return!0}function Fe(G,N,K,te,ee,ie){var we={value:0},Ce=K.value,He=it(N,K),We=it(N,K);K.value+=4;var Ge=it(N,K);if(K.value+=4,He<0||He>=65537||We<0||We>=65537)throw"Something wrong with HUF_ENCSIZE";var Be=new Array(65537),gt=new Array(16384);U(gt);var nt=te-(K.value-Ce);if(H(G,N,K,nt,He,We,Be),Ge>8*(te-(K.value-Ce)))throw"Something wrong with hufUncompress";W(Be,He,We,gt),Je(Be,gt,G,N,K,Ge,We,ie,ee,we)}function J(G,N,K){for(var te=0;te<K;++te)N[te]=G[N[te]]}function ge(G){for(var N=1;N<G.length;N++){var K=G[N-1]+G[N]-128;G[N]=K}}function de(G,N){for(var K=0,te=Math.floor((G.length+1)/2),ee=0,ie=G.length-1;!(ee>ie||(N[ee++]=G[K++],ee>ie));)N[ee++]=G[te++]}function Ae(G){for(var N=G.byteLength,K=new Array,te=0,ee=new DataView(G);N>0;){var ie=ee.getInt8(te++);if(ie<0){var we=-ie;N-=we+1;for(var Ce=0;Ce<we;Ce++)K.push(ee.getUint8(te++))}else{var we=ie;N-=2;for(var He=ee.getUint8(te++),Ce=0;Ce<we+1;Ce++)K.push(He)}}return K}function Ie(G,N,K,te,ee,ie){var Dt=new DataView(ie.buffer),we=K[G.idx[0]].width,Ce=K[G.idx[0]].height,He=3,We=Math.floor(we/8),Ge=Math.ceil(we/8),Be=Math.ceil(Ce/8),gt=we-(Ge-1)*8,nt=Ce-(Be-1)*8,ot={value:0},At=new Array(He),Rt=new Array(He),Ct=new Array(He),yt=new Array(He),Nt=new Array(He);for(let zt=0;zt<He;++zt)Nt[zt]=N[G.idx[zt]],At[zt]=zt<1?0:At[zt-1]+Ge*Be,Rt[zt]=new Float32Array(64),Ct[zt]=new Uint16Array(64),yt[zt]=new Uint16Array(Ge*64);for(let zt=0;zt<Be;++zt){var St=8;zt==Be-1&&(St=nt);var Wt=8;for(let wn=0;wn<Ge;++wn){wn==Ge-1&&(Wt=gt);for(let an=0;an<He;++an)Ct[an].fill(0),Ct[an][0]=ee[At[an]++],me(ot,te,Ct[an]),ye(Ct[an],Rt[an]),ke(Rt[an]);Xe(Rt);for(let an=0;an<He;++an)Le(Rt[an],yt[an],wn*64)}let ai=0;for(let wn=0;wn<He;++wn){const an=K[G.idx[wn]].type;for(let ti=8*zt;ti<8*zt+St;++ti){ai=Nt[wn][ti];for(let Ol=0;Ol<We;++Ol){const Kr=Ol*64+(ti&7)*8;Dt.setUint16(ai+0*2*an,yt[wn][Kr+0],!0),Dt.setUint16(ai+1*2*an,yt[wn][Kr+1],!0),Dt.setUint16(ai+2*2*an,yt[wn][Kr+2],!0),Dt.setUint16(ai+3*2*an,yt[wn][Kr+3],!0),Dt.setUint16(ai+4*2*an,yt[wn][Kr+4],!0),Dt.setUint16(ai+5*2*an,yt[wn][Kr+5],!0),Dt.setUint16(ai+6*2*an,yt[wn][Kr+6],!0),Dt.setUint16(ai+7*2*an,yt[wn][Kr+7],!0),ai+=8*2*an}}if(We!=Ge)for(let ti=8*zt;ti<8*zt+St;++ti){const Ol=Nt[wn][ti]+8*We*2*an,Kr=We*64+(ti&7)*8;for(let Ha=0;Ha<Wt;++Ha)Dt.setUint16(Ol+Ha*2*an,yt[wn][Kr+Ha],!0)}}}for(var Tn=new Uint16Array(we),Dt=new DataView(ie.buffer),An=0;An<He;++An){K[G.idx[An]].decoded=!0;var pn=K[G.idx[An]].type;if(K[An].type==2)for(var Nn=0;Nn<Ce;++Nn){const zt=Nt[An][Nn];for(var Mi=0;Mi<we;++Mi)Tn[Mi]=Dt.getUint16(zt+Mi*2*pn,!0);for(var Mi=0;Mi<we;++Mi)Dt.setFloat32(zt+Mi*2*pn,be(Tn[Mi]),!0)}}}function me(G,N,K){for(var te,ee=1;ee<64;)te=N[G.value],te==65280?ee=64:te>>8==255?ee+=te&255:(K[ee]=te,ee++),G.value++}function ye(G,N){N[0]=be(G[0]),N[1]=be(G[1]),N[2]=be(G[5]),N[3]=be(G[6]),N[4]=be(G[14]),N[5]=be(G[15]),N[6]=be(G[27]),N[7]=be(G[28]),N[8]=be(G[2]),N[9]=be(G[4]),N[10]=be(G[7]),N[11]=be(G[13]),N[12]=be(G[16]),N[13]=be(G[26]),N[14]=be(G[29]),N[15]=be(G[42]),N[16]=be(G[3]),N[17]=be(G[8]),N[18]=be(G[12]),N[19]=be(G[17]),N[20]=be(G[25]),N[21]=be(G[30]),N[22]=be(G[41]),N[23]=be(G[43]),N[24]=be(G[9]),N[25]=be(G[11]),N[26]=be(G[18]),N[27]=be(G[24]),N[28]=be(G[31]),N[29]=be(G[40]),N[30]=be(G[44]),N[31]=be(G[53]),N[32]=be(G[10]),N[33]=be(G[19]),N[34]=be(G[23]),N[35]=be(G[32]),N[36]=be(G[39]),N[37]=be(G[45]),N[38]=be(G[52]),N[39]=be(G[54]),N[40]=be(G[20]),N[41]=be(G[22]),N[42]=be(G[33]),N[43]=be(G[38]),N[44]=be(G[46]),N[45]=be(G[51]),N[46]=be(G[55]),N[47]=be(G[60]),N[48]=be(G[21]),N[49]=be(G[34]),N[50]=be(G[37]),N[51]=be(G[47]),N[52]=be(G[50]),N[53]=be(G[56]),N[54]=be(G[59]),N[55]=be(G[61]),N[56]=be(G[35]),N[57]=be(G[36]),N[58]=be(G[48]),N[59]=be(G[49]),N[60]=be(G[57]),N[61]=be(G[58]),N[62]=be(G[62]),N[63]=be(G[63])}function ke(G){const N=.5*Math.cos(.7853975),K=.5*Math.cos(3.14159/16),te=.5*Math.cos(3.14159/8),ee=.5*Math.cos(3*3.14159/16),ie=.5*Math.cos(5*3.14159/16),we=.5*Math.cos(3*3.14159/8),Ce=.5*Math.cos(7*3.14159/16);for(var He=new Array(4),We=new Array(4),Ge=new Array(4),Be=new Array(4),gt=0;gt<8;++gt){var nt=gt*8;He[0]=te*G[nt+2],He[1]=we*G[nt+2],He[2]=te*G[nt+6],He[3]=we*G[nt+6],We[0]=K*G[nt+1]+ee*G[nt+3]+ie*G[nt+5]+Ce*G[nt+7],We[1]=ee*G[nt+1]-Ce*G[nt+3]-K*G[nt+5]-ie*G[nt+7],We[2]=ie*G[nt+1]-K*G[nt+3]+Ce*G[nt+5]+ee*G[nt+7],We[3]=Ce*G[nt+1]-ie*G[nt+3]+ee*G[nt+5]-K*G[nt+7],Ge[0]=N*(G[nt+0]+G[nt+4]),Ge[3]=N*(G[nt+0]-G[nt+4]),Ge[1]=He[0]+He[3],Ge[2]=He[1]-He[2],Be[0]=Ge[0]+Ge[1],Be[1]=Ge[3]+Ge[2],Be[2]=Ge[3]-Ge[2],Be[3]=Ge[0]-Ge[1],G[nt+0]=Be[0]+We[0],G[nt+1]=Be[1]+We[1],G[nt+2]=Be[2]+We[2],G[nt+3]=Be[3]+We[3],G[nt+4]=Be[3]-We[3],G[nt+5]=Be[2]-We[2],G[nt+6]=Be[1]-We[1],G[nt+7]=Be[0]-We[0]}for(var ot=0;ot<8;++ot)He[0]=te*G[16+ot],He[1]=we*G[16+ot],He[2]=te*G[48+ot],He[3]=we*G[48+ot],We[0]=K*G[8+ot]+ee*G[24+ot]+ie*G[40+ot]+Ce*G[56+ot],We[1]=ee*G[8+ot]-Ce*G[24+ot]-K*G[40+ot]-ie*G[56+ot],We[2]=ie*G[8+ot]-K*G[24+ot]+Ce*G[40+ot]+ee*G[56+ot],We[3]=Ce*G[8+ot]-ie*G[24+ot]+ee*G[40+ot]-K*G[56+ot],Ge[0]=N*(G[ot]+G[32+ot]),Ge[3]=N*(G[ot]-G[32+ot]),Ge[1]=He[0]+He[3],Ge[2]=He[1]-He[2],Be[0]=Ge[0]+Ge[1],Be[1]=Ge[3]+Ge[2],Be[2]=Ge[3]-Ge[2],Be[3]=Ge[0]-Ge[1],G[0+ot]=Be[0]+We[0],G[8+ot]=Be[1]+We[1],G[16+ot]=Be[2]+We[2],G[24+ot]=Be[3]+We[3],G[32+ot]=Be[3]-We[3],G[40+ot]=Be[2]-We[2],G[48+ot]=Be[1]-We[1],G[56+ot]=Be[0]-We[0]}function Xe(G){for(var N=0;N<64;++N){var K=G[0][N],te=G[1][N],ee=G[2][N];G[0][N]=K+1.5747*ee,G[1][N]=K-.1873*te-.4682*ee,G[2][N]=K+1.8556*te}}function Le(G,N,K){for(var te=0;te<64;++te)N[K+te]=md.toHalfFloat(Ye(G[te]))}function Ye(G){return G<=1?Math.sign(G)*Math.pow(Math.abs(G),2.2):Math.sign(G)*Math.pow(T,Math.abs(G)-1)}function q(G){return new DataView(G.array.buffer,G.offset.value,G.size)}function X(G){var N=G.viewer.buffer.slice(G.offset.value,G.offset.value+G.size),K=new Uint8Array(Ae(N)),te=new Uint8Array(K.length);return ge(K),de(K,te),new DataView(te.buffer)}function pe(G){var N=G.array.slice(G.offset.value,G.offset.value+G.size),K=Fw(N),te=new Uint8Array(K.length);return ge(K),de(K,te),new DataView(te.buffer)}function _e(G){for(var N=G.viewer,K={value:G.offset.value},te=new Uint16Array(G.width*G.scanlineBlockSize*(G.channels*G.type)),ee=new Uint8Array(8192),ie=0,we=new Array(G.channels),Ce=0;Ce<G.channels;Ce++)we[Ce]={},we[Ce].start=ie,we[Ce].end=we[Ce].start,we[Ce].nx=G.width,we[Ce].ny=G.lines,we[Ce].size=G.type,ie+=we[Ce].nx*we[Ce].ny*we[Ce].size;var He=Te(N,K),We=Te(N,K);if(We>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(He<=We)for(var Ce=0;Ce<We-He+1;Ce++)ee[Ce+He]=Se(N,K);var Ge=new Uint16Array(65536),Be=I(ee,Ge),gt=it(N,K);Fe(G.array,N,K,gt,te,ie);for(var Ce=0;Ce<G.channels;++Ce)for(var nt=we[Ce],ot=0;ot<we[Ce].size;++ot)Ve(te,nt.start+ot,nt.nx,nt.size,nt.ny,nt.nx*nt.size,Be);J(Ge,te,ie);for(var At=0,Rt=new Uint8Array(te.buffer.byteLength),Ct=0;Ct<G.lines;Ct++)for(var yt=0;yt<G.channels;yt++){var nt=we[yt],Nt=nt.nx*nt.size,St=new Uint8Array(te.buffer,nt.end*2,Nt*2);Rt.set(St,At),At+=Nt*2,nt.end+=Nt}return new DataView(Rt.buffer)}function xe(G){var N=G.array.slice(G.offset.value,G.offset.value+G.size),K=Fw(N);const te=G.lines*G.channels*G.width,ee=G.type==1?new Uint16Array(te):new Uint32Array(te);let ie=0,we=0;const Ce=new Array(4);for(let He=0;He<G.lines;He++)for(let We=0;We<G.channels;We++){let Ge=0;switch(G.type){case 1:Ce[0]=ie,Ce[1]=Ce[0]+G.width,ie=Ce[1]+G.width;for(let Be=0;Be<G.width;++Be){const gt=K[Ce[0]++]<<8|K[Ce[1]++];Ge+=gt,ee[we]=Ge,we++}break;case 2:Ce[0]=ie,Ce[1]=Ce[0]+G.width,Ce[2]=Ce[1]+G.width,ie=Ce[2]+G.width;for(let Be=0;Be<G.width;++Be){const gt=K[Ce[0]++]<<24|K[Ce[1]++]<<16|K[Ce[2]++]<<8;Ge+=gt,ee[we]=Ge,we++}break}}return new DataView(ee.buffer)}function Me(G){var N=G.viewer,K={value:G.offset.value},te=new Uint8Array(G.width*G.lines*(G.channels*G.type*2)),ee={version:Ze(N,K),unknownUncompressedSize:Ze(N,K),unknownCompressedSize:Ze(N,K),acCompressedSize:Ze(N,K),dcCompressedSize:Ze(N,K),rleCompressedSize:Ze(N,K),rleUncompressedSize:Ze(N,K),rleRawSize:Ze(N,K),totalAcUncompressedCount:Ze(N,K),totalDcUncompressedCount:Ze(N,K),acCompression:Ze(N,K)};if(ee.version<2)throw"EXRLoader.parse: "+Ir.compression+" version "+ee.version+" is unsupported";for(var ie=new Array,we=Te(N,K)-2;we>0;){var Ce=je(N.buffer,K),He=Se(N,K),We=He>>2&3,Ge=(He>>4)-1,Be=new Int8Array([Ge])[0],gt=Se(N,K);ie.push({name:Ce,index:Be,type:gt,compression:We}),we-=Ce.length+3}for(var nt=Ir.channels,ot=new Array(G.channels),At=0;At<G.channels;++At){var Rt=ot[At]={},Ct=nt[At];Rt.name=Ct.name,Rt.compression=0,Rt.decoded=!1,Rt.type=Ct.pixelType,Rt.pLinear=Ct.pLinear,Rt.width=G.width,Rt.height=G.lines}for(var yt={idx:new Array(3)},Nt=0;Nt<G.channels;++Nt)for(var Rt=ot[Nt],At=0;At<ie.length;++At){var St=ie[At];Rt.name==St.name&&(Rt.compression=St.compression,St.index>=0&&(yt.idx[St.index]=Nt),Rt.offset=Nt)}if(ee.acCompressedSize>0)switch(ee.acCompression){case 0:var Dt=new Uint16Array(ee.totalAcUncompressedCount);Fe(G.array,N,K,ee.acCompressedSize,Dt,ee.totalAcUncompressedCount);break;case 1:var Wt=G.array.slice(K.value,K.value+ee.totalAcUncompressedCount),Tn=Fw(Wt),Dt=new Uint16Array(Tn.buffer);K.value+=ee.totalAcUncompressedCount;break}if(ee.dcCompressedSize>0){var An={array:G.array,offset:K,size:ee.dcCompressedSize},pn=new Uint16Array(pe(An).buffer);K.value+=ee.dcCompressedSize}if(ee.rleRawSize>0){var Wt=G.array.slice(K.value,K.value+ee.rleCompressedSize),Tn=Fw(Wt),Nn=Ae(Tn.buffer);K.value+=ee.rleCompressedSize}for(var Mi=0,zt=new Array(ot.length),At=0;At<zt.length;++At)zt[At]=new Array;for(var ai=0;ai<G.lines;++ai)for(var wn=0;wn<ot.length;++wn)zt[wn].push(Mi),Mi+=ot[wn].width*G.type*2;Ie(yt,zt,ot,Dt,pn,te);for(var At=0;At<ot.length;++At){var Rt=ot[At];if(!Rt.decoded)switch(Rt.compression){case 2:for(var an=0,ti=0,ai=0;ai<G.lines;++ai){for(var Ol=zt[At][an],Kr=0;Kr<Rt.width;++Kr){for(var Ha=0;Ha<2*Rt.type;++Ha)te[Ol++]=Nn[ti+Ha*Rt.width*Rt.height];ti++}an++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(te.buffer)}function je(G,N){for(var K=new Uint8Array(G),te=0;K[N.value+te]!=0;)te+=1;var ee=new TextDecoder().decode(K.slice(N.value,N.value+te));return N.value=N.value+te+1,ee}function qe(G,N,K){var te=new TextDecoder().decode(new Uint8Array(G).slice(N.value,N.value+K));return N.value=N.value+K,te}function Ne(G,N){var K=$e(G,N),te=it(G,N);return[K,te]}function Qe(G,N){var K=it(G,N),te=it(G,N);return[K,te]}function $e(G,N){var K=G.getInt32(N.value,!0);return N.value=N.value+4,K}function it(G,N){var K=G.getUint32(N.value,!0);return N.value=N.value+4,K}function se(G,N){var K=G[N.value];return N.value=N.value+1,K}function Se(G,N){var K=G.getUint8(N.value);return N.value=N.value+1,K}const Ze=function(G,N){let K;return"getBigInt64"in DataView.prototype?K=Number(G.getBigInt64(N.value,!0)):K=G.getUint32(N.value+4,!0)+Number(G.getUint32(N.value,!0)<<32),N.value+=8,K};function lt(G,N){var K=G.getFloat32(N.value,!0);return N.value+=4,K}function le(G,N){return md.toHalfFloat(lt(G,N))}function be(G){var N=(G&31744)>>10,K=G&1023;return(G>>15?-1:1)*(N?N===31?K?NaN:1/0:Math.pow(2,N-15)*(1+K/1024):6103515625e-14*(K/1024))}function Te(G,N){var K=G.getUint16(N.value,!0);return N.value+=2,K}function tt(G,N){return be(Te(G,N))}function at(G,N,K,te){for(var ee=K.value,ie=[];K.value<ee+te-1;){var we=je(N,K),Ce=$e(G,K),He=Se(G,K);K.value+=3;var We=$e(G,K),Ge=$e(G,K);ie.push({name:we,pixelType:Ce,pLinear:He,xSampling:We,ySampling:Ge})}return K.value+=1,ie}function kt(G,N){var K=lt(G,N),te=lt(G,N),ee=lt(G,N),ie=lt(G,N),we=lt(G,N),Ce=lt(G,N),He=lt(G,N),We=lt(G,N);return{redX:K,redY:te,greenX:ee,greenY:ie,blueX:we,blueY:Ce,whiteX:He,whiteY:We}}function en(G,N){var K=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],te=Se(G,N);return K[te]}function Ln(G,N){var K=it(G,N),te=it(G,N),ee=it(G,N),ie=it(G,N);return{xMin:K,yMin:te,xMax:ee,yMax:ie}}function Ei(G,N){var K=["INCREASING_Y"],te=Se(G,N);return K[te]}function cn(G,N){var K=lt(G,N),te=lt(G,N);return[K,te]}function Li(G,N){var K=lt(G,N),te=lt(G,N),ee=lt(G,N);return[K,te,ee]}function zi(G,N,K,te,ee){if(te==="string"||te==="stringvector"||te==="iccProfile")return qe(N,K,ee);if(te==="chlist")return at(G,N,K,ee);if(te==="chromaticities")return kt(G,K);if(te==="compression")return en(G,K);if(te==="box2i")return Ln(G,K);if(te==="lineOrder")return Ei(G,K);if(te==="float")return lt(G,K);if(te==="v2f")return cn(G,K);if(te==="v3f")return Li(G,K);if(te==="int")return $e(G,K);if(te==="rational")return Ne(G,K);if(te==="timecode")return Qe(G,K);if(te==="preview")return K.value+=ee,"skipped";K.value+=ee}function af(G,N,K){const te={};if(G.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";te.version=G.getUint8(4);const ee=G.getUint8(5);te.spec={singleTile:!!(ee&2),longName:!!(ee&4),deepFormat:!!(ee&8),multiPart:!!(ee&16)},K.value=8;for(var ie=!0;ie;){var we=je(N,K);if(we==0)ie=!1;else{var Ce=je(N,K),He=it(G,K),We=zi(G,N,K,Ce,He);We===void 0||(te[we]=We)}}if(ee&-5)throw"THREE.EXRLoader: provided file is currently unsupported.";return te}function lf(G,N,K,te,ee){const ie={size:0,viewer:N,array:K,offset:te,width:G.dataWindow.xMax-G.dataWindow.xMin+1,height:G.dataWindow.yMax-G.dataWindow.yMin+1,channels:G.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:G.channels[0].pixelType,uncompress:null,getter:null,format:null,[my?"colorSpace":"encoding"]:null};switch(G.compression){case"NO_COMPRESSION":ie.lines=1,ie.uncompress=q;break;case"RLE_COMPRESSION":ie.lines=1,ie.uncompress=X;break;case"ZIPS_COMPRESSION":ie.lines=1,ie.uncompress=pe;break;case"ZIP_COMPRESSION":ie.lines=16,ie.uncompress=pe;break;case"PIZ_COMPRESSION":ie.lines=32,ie.uncompress=_e;break;case"PXR24_COMPRESSION":ie.lines=16,ie.uncompress=xe;break;case"DWAA_COMPRESSION":ie.lines=32,ie.uncompress=Me;break;case"DWAB_COMPRESSION":ie.lines=256,ie.uncompress=Me;break;default:throw"EXRLoader.parse: "+G.compression+" is unsupported"}if(ie.scanlineBlockSize=ie.lines,ie.type==1)switch(ee){case ur:ie.getter=tt,ie.inputSize=2;break;case hr:ie.getter=Te,ie.inputSize=2;break}else if(ie.type==2)switch(ee){case ur:ie.getter=lt,ie.inputSize=4;break;case hr:ie.getter=le,ie.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+ie.type+" for "+G.compression+".";ie.blockCount=(G.dataWindow.yMax+1)/ie.scanlineBlockSize;for(var we=0;we<ie.blockCount;we++)Ze(N,te);ie.outputChannels=ie.channels==3?4:ie.channels;const Ce=ie.width*ie.height*ie.outputChannels;switch(ee){case ur:ie.byteArray=new Float32Array(Ce),ie.channels<ie.outputChannels&&ie.byteArray.fill(1,0,Ce);break;case hr:ie.byteArray=new Uint16Array(Ce),ie.channels<ie.outputChannels&&ie.byteArray.fill(15360,0,Ce);break;default:break}return ie.bytesPerLine=ie.width*ie.inputSize*ie.channels,ie.outputChannels==4?ie.format=$i:ie.format=Wk,my?ie.colorSpace="srgb-linear":ie.encoding=3e3,ie}const kl=new DataView(e),Ba=new Uint8Array(e),za={value:0},Ir=af(kl,e,za),Zt=lf(Ir,kl,Ba,za,this.type),cf={value:0},yg={R:0,G:1,B:2,A:3,Y:0};for(let G=0;G<Zt.height/Zt.scanlineBlockSize;G++){const N=it(kl,za);Zt.size=it(kl,za),Zt.lines=N+Zt.scanlineBlockSize>Zt.height?Zt.height-N:Zt.scanlineBlockSize;const te=Zt.size<Zt.lines*Zt.bytesPerLine?Zt.uncompress(Zt):q(Zt);za.value+=Zt.size;for(let ee=0;ee<Zt.scanlineBlockSize;ee++){const ie=ee+G*Zt.scanlineBlockSize;if(ie>=Zt.height)break;for(let we=0;we<Zt.channels;we++){const Ce=yg[Ir.channels[we].name];for(let He=0;He<Zt.width;He++){cf.value=(ee*(Zt.channels*Zt.width)+we*Zt.width+He)*Zt.inputSize;const We=(Zt.height-1-ie)*(Zt.width*Zt.outputChannels)+He*Zt.outputChannels+Ce;Zt.byteArray[We]=Zt.getter(te,cf)}}}}return{header:Ir,width:Zt.width,height:Zt.height,data:Zt.byteArray,format:Zt.format,[my?"colorSpace":"encoding"]:Zt[my?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){my?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=En,o.magFilter=En,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,i,r)}}const N5=new Yn,Bw=new V;class F3 extends S3{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new xt(e,3)),this.setAttribute("uv",new xt(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new wS(t,6,1);return this.setAttribute("instanceStart",new Xs(i,3,0)),this.setAttribute("instanceEnd",new Xs(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,t=3){let i;e instanceof Float32Array?i=e:Array.isArray(e)&&(i=new Float32Array(e));const r=new wS(i,t*2,1);return this.setAttribute("instanceColorStart",new Xs(r,t,0)),this.setAttribute("instanceColorEnd",new Xs(r,t,t)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new p3(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yn);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),N5.setFromBufferAttribute(t),this.boundingBox.union(N5))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ns),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Bw.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Bw)),Bw.fromBufferAttribute(t,s),r=Math.max(r,i.distanceToSquared(Bw));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)}}toJSON(){}applyMatrix(e){return this.applyMatrix4(e)}}class kY extends F3{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let r=0;r<t;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setPositions(i),this}setColors(e,t=3){const i=e.length-t,r=new Float32Array(2*i);if(t===3)for(let s=0;s<i;s+=t)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5];else for(let s=0;s<i;s+=t)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5],r[2*s+6]=e[s+6],r[2*s+7]=e[s+7];return super.setColors(r,t),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class U3 extends Is{constructor(e){super({type:"LineMaterial",uniforms:xS.clone(xS.merge([rt.common,rt.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ue(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${parseInt(ef.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const qC=new jt,k5=new V,O5=new V,yr=new jt,vr=new jt,Qa=new jt,ZC=new V,KC=new dt,br=new As,D5=new V,zw=new Yn,Hw=new Ns,Ja=new jt;let ul,Id;function F5(n,e,t){return Ja.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),Ja.multiplyScalar(1/Ja.w),Ja.x=Id/t.width,Ja.y=Id/t.height,Ja.applyMatrix4(n.projectionMatrixInverse),Ja.multiplyScalar(1/Ja.w),Math.abs(Math.max(Ja.x,Ja.y))}function YTe(n,e){const t=n.matrixWorld,i=n.geometry,r=i.attributes.instanceStart,s=i.attributes.instanceEnd,o=Math.min(i.instanceCount,r.count);for(let a=0,l=o;a<l;a++){br.start.fromBufferAttribute(r,a),br.end.fromBufferAttribute(s,a),br.applyMatrix4(t);const c=new V,u=new V;ul.distanceSqToSegment(br.start,br.end,u,c),u.distanceTo(c)<Id*.5&&e.push({point:u,pointOnLine:c,distance:ul.origin.distanceTo(u),object:n,face:null,faceIndex:a,uv:null,[AY]:null})}}function qTe(n,e,t){const i=e.projectionMatrix,s=n.material.resolution,o=n.matrixWorld,a=n.geometry,l=a.attributes.instanceStart,c=a.attributes.instanceEnd,u=Math.min(a.instanceCount,l.count),h=-e.near;ul.at(1,Qa),Qa.w=1,Qa.applyMatrix4(e.matrixWorldInverse),Qa.applyMatrix4(i),Qa.multiplyScalar(1/Qa.w),Qa.x*=s.x/2,Qa.y*=s.y/2,Qa.z=0,ZC.copy(Qa),KC.multiplyMatrices(e.matrixWorldInverse,o);for(let d=0,f=u;d<f;d++){if(yr.fromBufferAttribute(l,d),vr.fromBufferAttribute(c,d),yr.w=1,vr.w=1,yr.applyMatrix4(KC),vr.applyMatrix4(KC),yr.z>h&&vr.z>h)continue;if(yr.z>h){const _=yr.z-vr.z,b=(yr.z-h)/_;yr.lerp(vr,b)}else if(vr.z>h){const _=vr.z-yr.z,b=(vr.z-h)/_;vr.lerp(yr,b)}yr.applyMatrix4(i),vr.applyMatrix4(i),yr.multiplyScalar(1/yr.w),vr.multiplyScalar(1/vr.w),yr.x*=s.x/2,yr.y*=s.y/2,vr.x*=s.x/2,vr.y*=s.y/2,br.start.copy(yr),br.start.z=0,br.end.copy(vr),br.end.z=0;const x=br.closestPointToPointParameter(ZC,!0);br.at(x,D5);const v=Zk.lerp(yr.z,vr.z,x),y=v>=-1&&v<=1,w=ZC.distanceTo(D5)<Id*.5;if(y&&w){br.start.fromBufferAttribute(l,d),br.end.fromBufferAttribute(c,d),br.start.applyMatrix4(o),br.end.applyMatrix4(o);const _=new V,b=new V;ul.distanceSqToSegment(br.start,br.end,b,_),t.push({point:b,pointOnLine:_,distance:ul.origin.distanceTo(b),object:n,face:null,faceIndex:d,uv:null,[AY]:null})}}}class OY extends oi{constructor(e=new F3,t=new U3({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let o=0,a=0,l=t.count;o<l;o++,a+=2)k5.fromBufferAttribute(t,o),O5.fromBufferAttribute(i,o),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+k5.distanceTo(O5);const s=new wS(r,2,1);return e.setAttribute("instanceDistanceStart",new Xs(s,1,0)),e.setAttribute("instanceDistanceEnd",new Xs(s,1,1)),this}raycast(e,t){const i=this.material.worldUnits,r=e.camera,s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;ul=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;Id=l.linewidth+s,a.boundingSphere===null&&a.computeBoundingSphere(),Hw.copy(a.boundingSphere).applyMatrix4(o);let c;if(i)c=Id*.5;else{const h=Math.max(r.near,Hw.distanceToPoint(ul.origin));c=F5(r,h,l.resolution)}if(Hw.radius+=c,ul.intersectsSphere(Hw)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),zw.copy(a.boundingBox).applyMatrix4(o);let u;if(i)u=Id*.5;else{const h=Math.max(r.near,zw.distanceToPoint(ul.origin));u=F5(r,h,l.resolution)}zw.expandByScalar(u),ul.intersectsBox(zw)!==!1&&(i?YTe(this,t):qTe(this,r,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(qC),this.material.uniforms.resolution.value.set(qC.z,qC.w))}}class ZTe extends OY{constructor(e=new kY,t=new U3({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const KTe=new V,QTe=new V,JTe=new V,eAe=(n,e,t)=>{const i=t.width/2,r=t.height/2;e.updateMatrixWorld(!1);const s=n.project(e);return s.x=s.x*i+i,s.y=-(s.y*r)+r,s},tAe=(n,e,t,i=1)=>{const r=KTe.set(n.x/t.width*2-1,-(n.y/t.height)*2+1,i);return r.unproject(e),r},DY=(n,e,t,i)=>{const r=eAe(JTe.copy(n),t,i);let s=0;for(let o=0;o<2;++o){const a=QTe.copy(r).setComponent(o,r.getComponent(o)+e),l=tAe(a,t,i,a.z);s=Math.max(s,n.distanceTo(l))}return s},bS=R.forwardRef(function({points:e,color:t=16777215,vertexColors:i,linewidth:r,lineWidth:s,segments:o,dashed:a,...l},c){var u,h;const d=Pi(y=>y.size),f=R.useMemo(()=>o?new OY:new ZTe,[o]),[p]=R.useState(()=>new U3),x=(i==null||(u=i[0])==null?void 0:u.length)===4?4:3,v=R.useMemo(()=>{const y=o?new F3:new kY,w=e.map(_=>{const b=Array.isArray(_);return _ instanceof V||_ instanceof jt?[_.x,_.y,_.z]:_ instanceof Ue?[_.x,_.y,0]:b&&_.length===3?[_[0],_[1],_[2]]:b&&_.length===2?[_[0],_[1],0]:_});if(y.setPositions(w.flat()),i){t=16777215;const _=i.map(b=>b instanceof ht?b.toArray():b);y.setColors(_.flat(),x)}return y},[e,o,i,x]);return R.useLayoutEffect(()=>{f.computeLineDistances()},[e,f]),R.useLayoutEffect(()=>{a?p.defines.USE_DASH="":delete p.defines.USE_DASH,p.needsUpdate=!0},[a,p]),R.useEffect(()=>()=>v.dispose(),[v]),R.createElement("primitive",Ta({object:f,ref:c},l),R.createElement("primitive",{object:v,attach:"geometry"}),R.createElement("primitive",Ta({object:p,attach:"material",color:t,vertexColors:!!i,resolution:[d.width,d.height],linewidth:(h=r??s)!==null&&h!==void 0?h:1,dashed:a,transparent:x===4},l)))}),nAe=R.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const h=Pi(M=>M.invalidate),d=Pi(M=>M.camera),f=Pi(M=>M.gl),p=Pi(M=>M.events),x=Pi(M=>M.setEvents),v=Pi(M=>M.set),y=Pi(M=>M.get),w=Pi(M=>M.performance),_=e||d,b=i||p.connected||f.domElement,E=R.useMemo(()=>new jTe(_),[_]);return aM(()=>{E.enabled&&E.update()},-1),R.useEffect(()=>(s&&E.connect(s===!0?b:s),E.connect(b),()=>void E.dispose()),[s,b,t,E,h]),R.useEffect(()=>{const M=T=>{h(),t&&w.regress(),o&&o(T)},C=T=>{a&&a(T)},P=T=>{l&&l(T)};return E.addEventListener("change",M),E.addEventListener("start",C),E.addEventListener("end",P),()=>{E.removeEventListener("start",C),E.removeEventListener("end",P),E.removeEventListener("change",M)}},[o,a,l,E,h,x]),R.useEffect(()=>{if(n){const M=y().controls;return v({controls:E}),()=>v({controls:M})}},[n,E]),R.createElement("primitive",Ta({ref:u,object:E,enableDamping:r},c))}),iAe=3e3,rAe=3001,FY=(n,e,t)=>{let i;switch(n){case Ks:i=new Uint8ClampedArray(e*t*4);break;case hr:i=new Uint16Array(e*t*4);break;case fl:i=new Uint32Array(e*t*4);break;case Uk:i=new Int8Array(e*t*4);break;case Bk:i=new Int16Array(e*t*4);break;case kE:i=new Int32Array(e*t*4);break;case ur:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let Ww;const sAe=(n,e,t,i)=>{if(Ww!==void 0)return Ww;const r=new no(1,1,i);e.setRenderTarget(r);const s=new oi(new tf,new Nc({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=FY(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),s.geometry.dispose(),s.material.dispose(),Ww=o[0]!==0,Ww};class B3{constructor(e){var t,i,r,s,o,a,l,c,u,h,d,f,p,x,v,y;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(_){throw this._renderer.setRenderTarget(null),_}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const w={format:$i,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:En,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:En,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(h=e.renderTargetOptions)===null||h===void 0?void 0:h.samples:void 0,wrapS:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.wrapS)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.wrapS:si,wrapT:((p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapT)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.wrapT:si};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=B3.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new km,this._camera=new Ro,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!sAe(this._type,this._renderer,this._camera,w)){let _;switch(this._type){case hr:_=this._renderer.extensions.has("EXT_color_buffer_float")?ur:void 0;break}_!==void 0?this._type=_:this._supportsReadPixels=!1}this._quad=new oi(new tf,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new no(this.width,this.height,w),this._renderTarget.texture.mapping=((v=e.renderTargetOptions)===null||v===void 0?void 0:v.mapping)!==void 0?(y=e.renderTargetOptions)===null||y===void 0?void 0:y.mapping:Vu}static instantiateRenderer(){const e=new BE;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=FY(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Pd(this.toArray(),this.width,this.height,$i,this._type,(e==null?void 0:e.mapping)||Vu,(e==null?void 0:e.wrapS)||si,(e==null?void 0:e.wrapT)||si,(e==null?void 0:e.magFilter)||En,(e==null?void 0:e.minFilter)||En,(e==null?void 0:e.anisotropy)||1,Rs);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Is&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Rn&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Rn&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const oAe=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,aAe=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class lAe extends Is{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:r,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:oAe,fragmentShader:aAe,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new V(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new V().fromArray(t)},offsetSdr:{value:new V().fromArray(i)},gainMapMin:{value:new V().fromArray(r)},gainMapMax:{value:new V().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:bl,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class UY extends Error{}class BY extends Error{}const gy=(n,e,t)=>{var i;let r;const s=(i=n.attributes.getNamedItem(e))===null||i===void 0?void 0:i.nodeValue;if(s)r=s;else{const o=n.getElementsByTagName(e)[0];if(o){const a=o.getElementsByTagName("rdf:li");if(a.length===3)r=Array.from(a).map(l=>l.innerHTML);else throw new Error(`Gainmap metadata contains an array of items for ${e} but its length is not 3`)}else{if(t)return t;throw new Error(`Can't find ${e} in gainmap metadata`)}}return r},cAe=n=>{var e,t;let i;typeof TextDecoder<"u"?i=new TextDecoder().decode(n):i=n.toString();let r=i.indexOf("<x:xmpmeta");const s=new DOMParser;for(;r!==-1;){const o=i.indexOf("x:xmpmeta>",r);i.slice(r,o+10);const a=i.slice(r,o+10);try{const c=s.parseFromString(a,"text/xml").getElementsByTagName("rdf:Description")[0],u=gy(c,"hdrgm:GainMapMin","0"),h=gy(c,"hdrgm:GainMapMax"),d=gy(c,"hdrgm:Gamma","1"),f=gy(c,"hdrgm:OffsetSDR","0.015625"),p=gy(c,"hdrgm:OffsetHDR","0.015625");let x=(e=c.attributes.getNamedItem("hdrgm:HDRCapacityMin"))===null||e===void 0?void 0:e.nodeValue;x||(x="0");const v=(t=c.attributes.getNamedItem("hdrgm:HDRCapacityMax"))===null||t===void 0?void 0:t.nodeValue;if(!v)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(u)?u.map(y=>parseFloat(y)):[parseFloat(u),parseFloat(u),parseFloat(u)],gainMapMax:Array.isArray(h)?h.map(y=>parseFloat(y)):[parseFloat(h),parseFloat(h),parseFloat(h)],gamma:Array.isArray(d)?d.map(y=>parseFloat(y)):[parseFloat(d),parseFloat(d),parseFloat(d)],offsetSdr:Array.isArray(f)?f.map(y=>parseFloat(y)):[parseFloat(f),parseFloat(f),parseFloat(f)],offsetHdr:Array.isArray(p)?p.map(y=>parseFloat(y)):[parseFloat(p),parseFloat(p),parseFloat(p)],hdrCapacityMin:parseFloat(x),hdrCapacityMax:parseFloat(v)}}catch{}r=i.indexOf("<x:xmpmeta",o)}};class uAe{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,c;for(;a<o;){if(++l>250){i(new Error(`Found no marker after ${l} loops 😵`));return}if(s.getUint8(a)!==255){i(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(c=s.getUint8(a+1),c===226){const u=a+4;if(s.getUint32(u)===1297106432){const h=u+4;let d;if(s.getUint16(h)===18761)d=!1;else if(s.getUint16(h)===19789)d=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(h+2,!d)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const f=s.getUint32(h+4,!d);if(f<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const p=h+f,x=s.getUint16(p,!d),v=p+2;let y=0;for(let E=v;E<v+12*x;E+=12)s.getUint16(E,!d)===45057&&(y=s.getUint32(E+8,!d));const _=p+2+x*12+4,b=[];for(let E=_;E<_+y*16;E+=16){const M={MPType:s.getUint32(E,!d),size:s.getUint32(E+4,!d),dataOffset:s.getUint32(E+8,!d),dependantImages:s.getUint32(E+12,!d),start:-1,end:-1,isFII:!1};M.dataOffset?(M.start=h+M.dataOffset,M.isFII=!1):(M.start=0,M.isFII=!0),M.end=M.start+M.size,b.push(M)}if(this.options.extractNonFII&&b.length){const E=new Blob([s]),M=[];for(const C of b){if(C.isFII&&!this.options.extractFII)continue;const P=E.slice(C.start,C.end+1,"image/jpeg");M.push(P)}t(M)}}}a+=2+s.getUint16(a+2)}})}}const hAe=async n=>{const e=cAe(n);if(!e)throw new BY("Gain map XMP metadata not found");const i=await new uAe({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new UY("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},U5=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class zY extends Rr{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new q0}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer;const e=new lAe({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Rn,sdr:new Rn});return new B3({width:16,height:16,type:hr,colorSpace:Rs,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,o=new Blob([i],{type:"image/jpeg"});let a,l,c=!1;if(typeof createImageBitmap>"u"){const d=await Promise.all([s?U5(s):Promise.resolve(void 0),U5(o)]);l=d[0],a=d[1],c=!0}else{const d=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=d[0],a=d[1]}const u=new Rn(l||new ImageData(2,2),Vu,si,si,En,KR,$i,Ks,1,Rs);u.flipY=c,u.needsUpdate=!0;const h=new Rn(a,Vu,si,si,En,KR,$i,Ks,1,Ht);h.flipY=c,h.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=u,e.material.sdr=h,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class dAe extends zY{load([e,t,i],r,s,o){const a=this.prepareQuadRenderer();let l,c,u;const h=async()=>{if(l&&c&&u){try{await this.render(a,u,l,c)}catch(T){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof o=="function"&&o(T),a.disposeOnDemandRenderer();return}typeof r=="function"&&r(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),a.disposeOnDemandRenderer()}};let d=!0,f=0,p=0,x=!0,v=0,y=0,w=!0,_=0,b=0;const E=()=>{if(typeof s=="function"){const T=f+v+_,I=p+y+b,U=d&&x&&w;s(new ProgressEvent("progress",{lengthComputable:U,loaded:I,total:T}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const M=new ls(this._internalLoadingManager);M.setResponseType("arraybuffer"),M.setRequestHeader(this.requestHeader),M.setPath(this.path),M.setWithCredentials(this.withCredentials),M.load(e,async T=>{if(typeof T=="string")throw new Error("Invalid sdr buffer");l=T,await h()},T=>{d=T.lengthComputable,p=T.loaded,f=T.total,E()},T=>{this.manager.itemError(e),typeof o=="function"&&o(T)});const C=new ls(this._internalLoadingManager);C.setResponseType("arraybuffer"),C.setRequestHeader(this.requestHeader),C.setPath(this.path),C.setWithCredentials(this.withCredentials),C.load(t,async T=>{if(typeof T=="string")throw new Error("Invalid gainmap buffer");c=T,await h()},T=>{x=T.lengthComputable,y=T.loaded,v=T.total,E()},T=>{this.manager.itemError(t),typeof o=="function"&&o(T)});const P=new ls(this._internalLoadingManager);return P.setRequestHeader(this.requestHeader),P.setPath(this.path),P.setWithCredentials(this.withCredentials),P.load(i,async T=>{if(typeof T!="string")throw new Error("Invalid metadata string");u=JSON.parse(T),await h()},T=>{w=T.lengthComputable,b=T.loaded,_=T.total,E()},T=>{this.manager.itemError(i),typeof o=="function"&&o(T)}),a}}class fAe extends zY{load(e,t,i,r){const s=this.prepareQuadRenderer(),o=new ls(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let c,u,h;try{const d=await hAe(l);c=d.sdr,u=d.gainMap,h=d.metadata}catch(d){if(d instanceof BY||d instanceof UY)h={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw d}try{await this.render(s,h,c,u)}catch(d){this.manager.itemError(e),typeof r=="function"&&r(d),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,a=>{this.manager.itemError(e),typeof r=="function"&&r(a)}),s}}const QC={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},pAe="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Vw=n=>Array.isArray(n);function HY({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:i=void 0,extensions:r}={}){var s;let o=null,a=!1;if(t){if(!(t in QC))throw new Error("Preset must be one of: "+Object.keys(QC).join(", "));n=QC[t],e=pAe}const l=Vw(n)&&n.length===6,c=Vw(n)&&n.length===3&&n.some(v=>v.endsWith("json")),u=Vw(n)?n[0]:n;a=Vw(n);const h=l?"cube":c?"webp":u.startsWith("data:application/exr")?"exr":u.startsWith("data:application/hdr")?"hdr":u.startsWith("data:image/jpeg")?"jpg":(s=u.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase();if(o=h==="cube"?VX:h==="hdr"?$Te:h==="exr"?XTe:h==="jpg"||h==="jpeg"?fAe:h==="webp"?dAe:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);const d=Pi(v=>v.gl);R.useLayoutEffect(()=>{if(h!=="webp"&&h!=="jpg"&&h!=="jpeg")return;function v(){Dm.clear(o,a?[n]:n)}d.domElement.addEventListener("webglcontextlost",v,{once:!0})},[n,d.domElement]);const f=Dm(o,a?[n]:n,v=>{(h==="webp"||h==="jpg"||h==="jpeg")&&v.setRenderer(d),v.setPath==null||v.setPath(e),r&&r(v)});let p=a?f[0]:f;if(h==="jpg"||h==="jpeg"||h==="webp"){var x;p=(x=p.renderTarget)==null?void 0:x.texture}return p.mapping=l?Mc:Rm,"colorSpace"in p?p.colorSpace=i??l?"srgb":"srgb-linear":p.encoding=i??l?rAe:iAe,p}const mAe=n=>n.current&&n.current.isScene,gAe=n=>mAe(n)?n.current:n;function z3(n,e,t,i,r={}){var s,o,a,l,c;r={backgroundBlurriness:(s=r.blur)!==null&&s!==void 0?s:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const u=gAe(e||t),h=u.background,d=u.environment,f={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(o=(a=u.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&o!==void 0?o:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(l=(c=u.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&l!==void 0?l:[0,0,0]};return n!=="only"&&(u.environment=i),n&&(u.background=i),au(u,r),()=>{n!=="only"&&(u.environment=d),n&&(u.background=h),au(u,f)}}function H3({scene:n,background:e=!1,map:t,...i}){const r=Pi(s=>s.scene);return R.useLayoutEffect(()=>{if(t)return z3(e,n,r,t,i)}),null}function WY({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const c=HY(l),u=Pi(h=>h.scene);return R.useLayoutEffect(()=>z3(n,e,u,c,{blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),null}function yAe({children:n,near:e=1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:h,environmentRotation:d,scene:f,files:p,path:x,preset:v=void 0,extensions:y}){const w=Pi(P=>P.gl),_=Pi(P=>P.scene),b=R.useRef(null),[E]=R.useState(()=>new km),M=R.useMemo(()=>{const P=new t3(i);return P.texture.type=hr,P},[i]);R.useLayoutEffect(()=>(r===1&&b.current.update(w,E),z3(o,f,_,M.texture,{blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:h,environmentRotation:d})),[n,E,M.texture,f,_,o,r,w]);let C=1;return aM(()=>{(r===1/0||C<r)&&(b.current.update(w,E),C++)}),R.createElement(R.Fragment,null,KMe(R.createElement(R.Fragment,null,n,R.createElement("cubeCamera",{ref:b,args:[e,t,M]}),p||v?R.createElement(WY,{background:!0,files:p,preset:v,path:x,extensions:y}):s?R.createElement(H3,{background:!0,map:s,extensions:y}):null),E))}function vAe(n){var e,t,i,r;const s=HY(n),o=n.map||s;R.useMemo(()=>I3({GroundProjectedEnvImpl:HTe}),[]);const a=R.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,u=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return R.createElement(R.Fragment,null,R.createElement(H3,Ta({},n,{map:o})),R.createElement("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c}))}function xAe(n){return n.ground?R.createElement(vAe,n):n.map?R.createElement(H3,n):n.children?R.createElement(yAe,n):R.createElement(WY,n)}const J0=R.createContext(null),Gw=new V,B5=new V,_Ae=(n,e,t,i)=>{const r=e.dot(e),s=e.dot(n)-e.dot(t),o=e.dot(i);return o===0?-s/r:(Gw.copy(i).multiplyScalar(r/o).sub(e),B5.copy(i).multiplyScalar(s/o).add(t).sub(n),-Gw.dot(B5)/Gw.dot(Gw))},wAe=new V(0,1,0),z5=new dt,JC=({direction:n,axis:e})=>{const{translation:t,translationLimits:i,annotations:r,annotationsClass:s,depthTest:o,scale:a,lineWidth:l,fixed:c,axisColors:u,hoveredColor:h,opacity:d,onDragStart:f,onDrag:p,onDragEnd:x,userData:v}=R.useContext(J0),y=Pi(Z=>Z.controls),w=R.useRef(null),_=R.useRef(null),b=R.useRef(null),E=R.useRef(0),[M,C]=R.useState(!1),P=R.useCallback(Z=>{r&&(w.current.innerText=`${t.current[e].toFixed(2)}`,w.current.style.display="block"),Z.stopPropagation();const O=new dt().extractRotation(_.current.matrixWorld),W=Z.point.clone(),D=new V().setFromMatrixPosition(_.current.matrixWorld),Y=n.clone().applyMatrix4(O).normalize();b.current={clickPoint:W,dir:Y},E.current=t.current[e],f({component:"Arrow",axis:e,origin:D,directions:[Y]}),y&&(y.enabled=!1),Z.target.setPointerCapture(Z.pointerId)},[r,n,y,f,t,e]),T=R.useCallback(Z=>{if(Z.stopPropagation(),M||C(!0),b.current){const{clickPoint:O,dir:W}=b.current,[D,Y]=(i==null?void 0:i[e])||[void 0,void 0];let Q=_Ae(O,W,Z.ray.origin,Z.ray.direction);D!==void 0&&(Q=Math.max(Q,D-E.current)),Y!==void 0&&(Q=Math.min(Q,Y-E.current)),t.current[e]=E.current+Q,r&&(w.current.innerText=`${t.current[e].toFixed(2)}`),z5.makeTranslation(W.x*Q,W.y*Q,W.z*Q),p(z5)}},[r,p,M,t,i,e]),I=R.useCallback(Z=>{r&&(w.current.style.display="none"),Z.stopPropagation(),b.current=null,x(),y&&(y.enabled=!0),Z.target.releasePointerCapture(Z.pointerId)},[r,y,x]),U=R.useCallback(Z=>{Z.stopPropagation(),C(!1)},[]),{cylinderLength:j,coneWidth:B,coneLength:z,matrixL:$}=R.useMemo(()=>{const Z=c?l/a*1.6:a/20,O=c?.2:a/5,W=c?1-O:a-O,D=new fr().setFromUnitVectors(wAe,n.clone().normalize()),Y=new dt().makeRotationFromQuaternion(D);return{cylinderLength:W,coneWidth:Z,coneLength:O,matrixL:Y}},[n,a,l,c]),H=M?h:u[e];return R.createElement("group",{ref:_},R.createElement("group",{matrix:$,matrixAutoUpdate:!1,onPointerDown:P,onPointerMove:T,onPointerUp:I,onPointerOut:U},r&&R.createElement(lM,{position:[0,-z,0]},R.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:w})),R.createElement("mesh",{visible:!1,position:[0,(j+z)/2,0],userData:v},R.createElement("cylinderGeometry",{args:[B*1.4,B*1.4,j+z,8,1]})),R.createElement(bS,{transparent:!0,raycast:()=>null,depthTest:o,points:[0,0,0,0,j,0],lineWidth:l,side:cr,color:H,opacity:d,polygonOffset:!0,renderOrder:1,polygonOffsetFactor:-10,fog:!1}),R.createElement("mesh",{raycast:()=>null,position:[0,j+z/2,0],renderOrder:500},R.createElement("coneGeometry",{args:[B,z,24,1]}),R.createElement("meshBasicMaterial",{transparent:!0,depthTest:o,color:H,opacity:d,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))))},eP=new V,tP=new V,nP=n=>n*180/Math.PI,bAe=n=>n*Math.PI/180,SAe=(n,e,t,i,r)=>{eP.copy(n).sub(t),tP.copy(e).sub(t);const s=i.dot(i),o=r.dot(r),a=eP.dot(i)/s,l=eP.dot(r)/o,c=tP.dot(i)/s,u=tP.dot(r)/o,h=Math.atan2(l,a);return Math.atan2(u,c)-h},EAe=(n,e)=>{let t=Math.floor(n/e);return t=t<0?t+1:t,n-t*e},H5=n=>{let e=EAe(n,2*Math.PI);return Math.abs(e)<1e-6?0:(e<0&&(e+=2*Math.PI),e)},jw=new dt,W5=new V,$w=new Da,iP=new V,rP=({dir1:n,dir2:e,axis:t})=>{const{rotationLimits:i,annotations:r,annotationsClass:s,depthTest:o,scale:a,lineWidth:l,fixed:c,axisColors:u,hoveredColor:h,opacity:d,onDragStart:f,onDrag:p,onDragEnd:x,userData:v}=R.useContext(J0),y=Pi(H=>H.controls),w=R.useRef(null),_=R.useRef(null),b=R.useRef(0),E=R.useRef(0),M=R.useRef(null),[C,P]=R.useState(!1),T=R.useCallback(H=>{r&&(w.current.innerText=`${nP(E.current).toFixed(0)}º`,w.current.style.display="block"),H.stopPropagation();const Z=H.point.clone(),O=new V().setFromMatrixPosition(_.current.matrixWorld),W=new V().setFromMatrixColumn(_.current.matrixWorld,0).normalize(),D=new V().setFromMatrixColumn(_.current.matrixWorld,1).normalize(),Y=new V().setFromMatrixColumn(_.current.matrixWorld,2).normalize(),Q=new xs().setFromNormalAndCoplanarPoint(Y,O);M.current={clickPoint:Z,origin:O,e1:W,e2:D,normal:Y,plane:Q},f({component:"Rotator",axis:t,origin:O,directions:[W,D,Y]}),y&&(y.enabled=!1),H.target.setPointerCapture(H.pointerId)},[r,y,f,t]),I=R.useCallback(H=>{if(H.stopPropagation(),C||P(!0),M.current){const{clickPoint:Z,origin:O,e1:W,e2:D,normal:Y,plane:Q}=M.current,[re,ce]=(i==null?void 0:i[t])||[void 0,void 0];$w.copy(H.ray),$w.intersectPlane(Q,iP),$w.direction.negate(),$w.intersectPlane(Q,iP);let oe=SAe(Z,iP,O,W,D),he=nP(oe);H.shiftKey&&(he=Math.round(he/10)*10,oe=bAe(he)),re!==void 0&&ce!==void 0&&ce-re<2*Math.PI?(oe=H5(oe),oe=oe>Math.PI?oe-2*Math.PI:oe,oe=Zk.clamp(oe,re-b.current,ce-b.current),E.current=b.current+oe):(E.current=H5(b.current+oe),E.current=E.current>Math.PI?E.current-2*Math.PI:E.current),r&&(he=nP(E.current),w.current.innerText=`${he.toFixed(0)}º`),jw.makeRotationAxis(Y,oe),W5.copy(O).applyMatrix4(jw).sub(O).negate(),jw.setPosition(W5),p(jw)}},[r,p,C,i,t]),U=R.useCallback(H=>{r&&(w.current.style.display="none"),H.stopPropagation(),b.current=E.current,M.current=null,x(),y&&(y.enabled=!0),H.target.releasePointerCapture(H.pointerId)},[r,y,x]),j=R.useCallback(H=>{H.stopPropagation(),P(!1)},[]),B=R.useMemo(()=>{const H=n.clone().normalize(),Z=e.clone().normalize();return new dt().makeBasis(H,Z,H.clone().cross(Z))},[n,e]),z=c?.65:a*.65,$=R.useMemo(()=>{const Z=[];for(let O=0;O<=32;O++){const W=O*(Math.PI/2)/32;Z.push(new V(Math.cos(W)*z,Math.sin(W)*z,0))}return Z},[z]);return R.createElement("group",{ref:_,onPointerDown:T,onPointerMove:I,onPointerUp:U,onPointerOut:j,matrix:B,matrixAutoUpdate:!1},r&&R.createElement(lM,{position:[z,z,0]},R.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:w})),R.createElement(bS,{points:$,lineWidth:l*4,visible:!1,userData:v}),R.createElement(bS,{transparent:!0,raycast:()=>null,depthTest:o,points:$,lineWidth:l,side:cr,color:C?h:u[t],opacity:d,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))},MAe=(n,e,t)=>{const i=Math.abs(n.x)>=Math.abs(n.y)&&Math.abs(n.x)>=Math.abs(n.z)?0:Math.abs(n.y)>=Math.abs(n.x)&&Math.abs(n.y)>=Math.abs(n.z)?1:2,r=[0,1,2].sort((p,x)=>Math.abs(e.getComponent(x))-Math.abs(e.getComponent(p))),s=i===r[0]?r[1]:r[0],o=n.getComponent(i),a=n.getComponent(s),l=e.getComponent(i),c=e.getComponent(s),u=t.getComponent(i),d=(t.getComponent(s)-u*(a/o))/(c-l*(a/o));return[(u-d*l)/o,d]},Xw=new Da,Yw=new V,V5=new dt,sP=({dir1:n,dir2:e,axis:t})=>{const{translation:i,translationLimits:r,annotations:s,annotationsClass:o,depthTest:a,scale:l,lineWidth:c,fixed:u,axisColors:h,hoveredColor:d,opacity:f,onDragStart:p,onDrag:x,onDragEnd:v,userData:y}=R.useContext(J0),w=Pi(W=>W.controls),_=R.useRef(null),b=R.useRef(null),E=R.useRef(null),M=R.useRef(0),C=R.useRef(0),[P,T]=R.useState(!1),I=R.useCallback(W=>{s&&(_.current.innerText=`${i.current[(t+1)%3].toFixed(2)}, ${i.current[(t+2)%3].toFixed(2)}`,_.current.style.display="block"),W.stopPropagation();const D=W.point.clone(),Y=new V().setFromMatrixPosition(b.current.matrixWorld),Q=new V().setFromMatrixColumn(b.current.matrixWorld,0).normalize(),re=new V().setFromMatrixColumn(b.current.matrixWorld,1).normalize(),ce=new V().setFromMatrixColumn(b.current.matrixWorld,2).normalize(),oe=new xs().setFromNormalAndCoplanarPoint(ce,Y);E.current={clickPoint:D,e1:Q,e2:re,plane:oe},M.current=i.current[(t+1)%3],C.current=i.current[(t+2)%3],p({component:"Slider",axis:t,origin:Y,directions:[Q,re,ce]}),w&&(w.enabled=!1),W.target.setPointerCapture(W.pointerId)},[s,w,p,t]),U=R.useCallback(W=>{if(W.stopPropagation(),P||T(!0),E.current){const{clickPoint:D,e1:Y,e2:Q,plane:re}=E.current,[ce,oe]=(r==null?void 0:r[(t+1)%3])||[void 0,void 0],[he,Re]=(r==null?void 0:r[(t+2)%3])||[void 0,void 0];Xw.copy(W.ray),Xw.intersectPlane(re,Yw),Xw.direction.negate(),Xw.intersectPlane(re,Yw),Yw.sub(D);let[Oe,Ve]=MAe(Y,Q,Yw);ce!==void 0&&(Oe=Math.max(Oe,ce-M.current)),oe!==void 0&&(Oe=Math.min(Oe,oe-M.current)),he!==void 0&&(Ve=Math.max(Ve,he-C.current)),Re!==void 0&&(Ve=Math.min(Ve,Re-C.current)),i.current[(t+1)%3]=M.current+Oe,i.current[(t+2)%3]=C.current+Ve,s&&(_.current.innerText=`${i.current[(t+1)%3].toFixed(2)}, ${i.current[(t+2)%3].toFixed(2)}`),V5.makeTranslation(Oe*Y.x+Ve*Q.x,Oe*Y.y+Ve*Q.y,Oe*Y.z+Ve*Q.z),x(V5)}},[s,x,P,i,r,t]),j=R.useCallback(W=>{s&&(_.current.style.display="none"),W.stopPropagation(),E.current=null,v(),w&&(w.enabled=!0),W.target.releasePointerCapture(W.pointerId)},[s,w,v]),B=R.useCallback(W=>{W.stopPropagation(),T(!1)},[]),z=R.useMemo(()=>{const W=n.clone().normalize(),D=e.clone().normalize();return new dt().makeBasis(W,D,W.clone().cross(D))},[n,e]),$=u?1/7:l/7,H=u?.225:l*.225,Z=P?d:h[t],O=R.useMemo(()=>[new V(0,0,0),new V(0,H,0),new V(H,H,0),new V(H,0,0),new V(0,0,0)],[H]);return R.createElement("group",{ref:b,matrix:z,matrixAutoUpdate:!1},s&&R.createElement(lM,{position:[0,0,0]},R.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:o,ref:_})),R.createElement("group",{position:[$*1.7,$*1.7,0]},R.createElement("mesh",{visible:!0,onPointerDown:I,onPointerMove:U,onPointerUp:j,onPointerOut:B,scale:H,userData:y},R.createElement("planeGeometry",null),R.createElement("meshBasicMaterial",{transparent:!0,depthTest:a,color:Z,polygonOffset:!0,polygonOffsetFactor:-10,side:cr,fog:!1})),R.createElement(bS,{position:[-H/2,-H/2,0],transparent:!0,depthTest:a,points:O,lineWidth:c,color:Z,opacity:f,polygonOffset:!0,polygonOffsetFactor:-10,userData:y,fog:!1})))},Gy=new V,G5=new V,TAe=(n,e,t,i)=>{const r=e.dot(e),s=e.dot(n)-e.dot(t),o=e.dot(i);return o===0?-s/r:(Gy.copy(i).multiplyScalar(r/o).sub(e),G5.copy(i).multiplyScalar(s/o).add(t).sub(n),-Gy.dot(G5)/Gy.dot(Gy))},AAe=new V(0,1,0),yy=new V,j5=new dt,oP=({direction:n,axis:e})=>{const{scaleLimits:t,annotations:i,annotationsClass:r,depthTest:s,scale:o,lineWidth:a,fixed:l,axisColors:c,hoveredColor:u,opacity:h,onDragStart:d,onDrag:f,onDragEnd:p,userData:x}=R.useContext(J0),v=Pi(O=>O.size),y=Pi(O=>O.controls),w=R.useRef(null),_=R.useRef(null),b=R.useRef(null),E=R.useRef(1),M=R.useRef(1),C=R.useRef(null),[P,T]=R.useState(!1),I=l?1.2:1.2*o,U=R.useCallback(O=>{i&&(w.current.innerText=`${M.current.toFixed(2)}`,w.current.style.display="block"),O.stopPropagation();const W=new dt().extractRotation(_.current.matrixWorld),D=O.point.clone(),Y=new V().setFromMatrixPosition(_.current.matrixWorld),Q=n.clone().applyMatrix4(W).normalize(),re=_.current.matrixWorld.clone(),ce=re.clone().invert(),oe=l?1/DY(_.current.getWorldPosition(Gy),o,O.camera,v):1;C.current={clickPoint:D,dir:Q,mPLG:re,mPLGInv:ce,offsetMultiplier:oe},d({component:"Sphere",axis:e,origin:Y,directions:[Q]}),y&&(y.enabled=!1),O.target.setPointerCapture(O.pointerId)},[i,y,n,d,e,l,o,v]),j=R.useCallback(O=>{if(O.stopPropagation(),P||T(!0),C.current){const{clickPoint:W,dir:D,mPLG:Y,mPLGInv:Q,offsetMultiplier:re}=C.current,[ce,oe]=(t==null?void 0:t[e])||[1e-5,void 0],Re=TAe(W,D,O.ray.origin,O.ray.direction)*re,Oe=l?Re:Re/o;let Ve=Math.pow(2,Oe*.2);O.shiftKey&&(Ve=Math.round(Ve*10)/10),Ve=Math.max(Ve,ce/E.current),oe!==void 0&&(Ve=Math.min(Ve,oe/E.current)),M.current=E.current*Ve,b.current.position.set(0,I+Re,0),i&&(w.current.innerText=`${M.current.toFixed(2)}`),yy.set(1,1,1),yy.setComponent(e,Ve),j5.makeScale(yy.x,yy.y,yy.z).premultiply(Y).multiply(Q),f(j5)}},[i,I,f,P,t,e]),B=R.useCallback(O=>{i&&(w.current.style.display="none"),O.stopPropagation(),E.current=M.current,C.current=null,b.current.position.set(0,I,0),p(),y&&(y.enabled=!0),O.target.releasePointerCapture(O.pointerId)},[i,y,p,I]),z=R.useCallback(O=>{O.stopPropagation(),T(!1)},[]),{radius:$,matrixL:H}=R.useMemo(()=>{const O=l?a/o*1.8:o/22.5,W=new fr().setFromUnitVectors(AAe,n.clone().normalize()),D=new dt().makeRotationFromQuaternion(W);return{radius:O,matrixL:D}},[n,o,a,l]),Z=P?u:c[e];return R.createElement("group",{ref:_},R.createElement("group",{matrix:H,matrixAutoUpdate:!1,onPointerDown:U,onPointerMove:j,onPointerUp:B,onPointerOut:z},i&&R.createElement(lM,{position:[0,I/2,0]},R.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:r,ref:w})),R.createElement("mesh",{ref:b,position:[0,I,0],renderOrder:500,userData:x},R.createElement("sphereGeometry",{args:[$,12,12]}),R.createElement("meshBasicMaterial",{transparent:!0,depthTest:s,color:Z,opacity:h,polygonOffset:!0,polygonOffsetFactor:-10}))))},$5=new dt,X5=new dt,Y5=new dt,qw=new dt,aP=new dt,np=new dt,q5=new dt,Z5=new dt,K5=new dt,ip=new Yn,lP=new Yn,Q5=new V,J5=new V,eH=new V,tH=new V,vy=new V,rp=new V(1,0,0),sp=new V(0,1,0),op=new V(0,0,1),CAe=R.forwardRef(({enabled:n=!0,matrix:e,onDragStart:t,onDrag:i,onDragEnd:r,autoTransform:s=!0,anchor:o,disableAxes:a=!1,disableSliders:l=!1,disableRotations:c=!1,disableScaling:u=!1,activeAxes:h=[!0,!0,!0],offset:d=[0,0,0],rotation:f=[0,0,0],scale:p=1,lineWidth:x=4,fixed:v=!1,translationLimits:y,rotationLimits:w,scaleLimits:_,depthTest:b=!0,axisColors:E=["#ff2060","#20df80","#2080ff"],hoveredColor:M="#ffff40",annotations:C=!1,annotationsClass:P,opacity:T=1,visible:I=!0,userData:U,children:j,...B},z)=>{const $=Pi(oe=>oe.invalidate),H=R.useRef(null),Z=R.useRef(null),O=R.useRef(null),W=R.useRef(null),D=R.useRef([0,0,0]),Y=R.useRef(new V(1,1,1)),Q=R.useRef(new V(1,1,1));R.useLayoutEffect(()=>{o&&(W.current.updateWorldMatrix(!0,!0),qw.copy(W.current.matrixWorld).invert(),ip.makeEmpty(),W.current.traverse(oe=>{oe.geometry&&(oe.geometry.boundingBox||oe.geometry.computeBoundingBox(),np.copy(oe.matrixWorld).premultiply(qw),lP.copy(oe.geometry.boundingBox),lP.applyMatrix4(np),ip.union(lP))}),Q5.copy(ip.max).add(ip.min).multiplyScalar(.5),J5.copy(ip.max).sub(ip.min).multiplyScalar(.5),eH.copy(J5).multiply(new V(...o)).add(Q5),tH.set(...d).add(eH),O.current.position.copy(tH),$())});const re=R.useMemo(()=>({onDragStart:oe=>{$5.copy(Z.current.matrix),X5.copy(Z.current.matrixWorld),t&&t(oe),$()},onDrag:oe=>{Y5.copy(H.current.matrixWorld),qw.copy(Y5).invert(),aP.copy(X5).premultiply(oe),np.copy(aP).premultiply(qw),q5.copy($5).invert(),Z5.copy(np).multiply(q5),s&&Z.current.matrix.copy(np),i&&i(np,Z5,aP,oe),$()},onDragEnd:()=>{r&&r(),$()},translation:D,translationLimits:y,rotationLimits:w,axisColors:E,hoveredColor:M,opacity:T,scale:p,lineWidth:x,fixed:v,depthTest:b,userData:U,annotations:C,annotationsClass:P}),[t,i,r,D,y,w,_,b,p,x,v,...E,M,T,U,s,C,P]),ce=new V;return aM(oe=>{if(v){const he=DY(O.current.getWorldPosition(ce),p,oe.camera,oe.size);Y.current.setScalar(he)}e&&e instanceof dt&&(Z.current.matrix=e),Z.current.updateWorldMatrix(!0,!0),K5.makeRotationFromEuler(O.current.rotation).setPosition(O.current.position).premultiply(Z.current.matrixWorld),Q.current.setFromMatrixScale(K5),vy.copy(Y.current).divide(Q.current),(Math.abs(O.current.scale.x-vy.x)>1e-4||Math.abs(O.current.scale.y-vy.y)>1e-4||Math.abs(O.current.scale.z-vy.z)>1e-4)&&(O.current.scale.copy(vy),oe.invalidate())}),R.useImperativeHandle(z,()=>Z.current,[]),R.createElement(J0.Provider,{value:re},R.createElement("group",{ref:H},R.createElement("group",Ta({ref:Z,matrix:e,matrixAutoUpdate:!1},B),R.createElement("group",{visible:I,ref:O,position:d,rotation:f},n&&R.createElement(R.Fragment,null,!a&&h[0]&&R.createElement(JC,{axis:0,direction:rp}),!a&&h[1]&&R.createElement(JC,{axis:1,direction:sp}),!a&&h[2]&&R.createElement(JC,{axis:2,direction:op}),!l&&h[0]&&h[1]&&R.createElement(sP,{axis:2,dir1:rp,dir2:sp}),!l&&h[0]&&h[2]&&R.createElement(sP,{axis:1,dir1:op,dir2:rp}),!l&&h[2]&&h[1]&&R.createElement(sP,{axis:0,dir1:sp,dir2:op}),!c&&h[0]&&h[1]&&R.createElement(rP,{axis:2,dir1:rp,dir2:sp}),!c&&h[0]&&h[2]&&R.createElement(rP,{axis:1,dir1:op,dir2:rp}),!c&&h[2]&&h[1]&&R.createElement(rP,{axis:0,dir1:sp,dir2:op}),!u&&h[0]&&R.createElement(oP,{axis:0,direction:rp}),!u&&h[1]&&R.createElement(oP,{axis:1,direction:sp}),!u&&h[2]&&R.createElement(oP,{axis:2,direction:op}))),R.createElement("group",{ref:W},j))))}),PAe=R.memo(({direction:n=[5,5,5]})=>k.jsxs(k.Fragment,{children:[k.jsx("directionalLight",{position:n,intensity:.5,"shadow-mapSize":1024,castShadow:!0}),k.jsx("directionalLight",{position:[-5,5,5],intensity:.1,"shadow-mapSize":128,castShadow:!0}),k.jsx("directionalLight",{position:[-5,5,-5],intensity:.1,"shadow-mapSize":128,castShadow:!0}),k.jsx("directionalLight",{position:[0,5,0],intensity:.1,"shadow-mapSize":128,castShadow:!0}),k.jsx(xAe,{preset:"city"})]})),VY=0,RAe=1,IAe=2,nH=2,cP=1.25,iH=1,nb=6*4+4+4,cM=65535,LAe=Math.pow(2,-24),uP=Symbol("SKIP_GENERATION");function NAe(n){return n.index?n.index.count:n.attributes.position.count}function mg(n){return NAe(n)/3}function kAe(n,e=ArrayBuffer){return n>65535?new Uint32Array(new e(4*n)):new Uint16Array(new e(2*n))}function OAe(n,e){if(!n.index){const t=n.attributes.position.count,i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r=kAe(t,i);n.setIndex(new Mn(r,1));for(let s=0;s<t;s++)r[s]=s}}function GY(n){const e=mg(n),t=n.drawRange,i=t.start/3,r=(t.start+t.count)/3,s=Math.max(0,i),o=Math.min(e,r)-s;return[{offset:Math.floor(s),count:Math.floor(o)}]}function jY(n){if(!n.groups||!n.groups.length)return GY(n);const e=[],t=new Set,i=n.drawRange,r=i.start/3,s=(i.start+i.count)/3;for(const a of n.groups){const l=a.start/3,c=(a.start+a.count)/3;t.add(Math.max(r,l)),t.add(Math.min(s,c))}const o=Array.from(t.values()).sort((a,l)=>a-l);for(let a=0;a<o.length-1;a++){const l=o[a],c=o[a+1];e.push({offset:Math.floor(l),count:Math.floor(c-l)})}return e}function DAe(n){if(n.groups.length===0)return!1;const e=mg(n),t=jY(n).sort((s,o)=>s.offset-o.offset),i=t[t.length-1];i.count=Math.min(e-i.offset,i.count);let r=0;return t.forEach(({count:s})=>r+=s),e!==r}function hi(n,e,t){return t.min.x=e[n],t.min.y=e[n+1],t.min.z=e[n+2],t.max.x=e[n+3],t.max.y=e[n+4],t.max.z=e[n+5],t}function FAe(n){n[0]=n[1]=n[2]=1/0,n[3]=n[4]=n[5]=-1/0}function rH(n){let e=-1,t=-1/0;for(let i=0;i<3;i++){const r=n[i+3]-n[i];r>t&&(t=r,e=i)}return e}function sH(n,e){e.set(n)}function oH(n,e,t){let i,r;for(let s=0;s<3;s++){const o=s+3;i=n[s],r=e[s],t[s]=i<r?i:r,i=n[o],r=e[o],t[o]=i>r?i:r}}function Zw(n,e,t){for(let i=0;i<3;i++){const r=e[n+2*i],s=e[n+2*i+1],o=r-s,a=r+s;o<t[i]&&(t[i]=o),a>t[i+3]&&(t[i+3]=a)}}function xy(n){const e=n[3]-n[0],t=n[4]-n[1],i=n[5]-n[2];return 2*(e*t+t*i+i*e)}function hP(n,e,t,i,r=null){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,u=-1/0,h=1/0,d=1/0,f=1/0,p=-1/0,x=-1/0,v=-1/0;const y=r!==null;for(let w=e*6,_=(e+t)*6;w<_;w+=6){const b=n[w+0],E=n[w+1],M=b-E,C=b+E;M<s&&(s=M),C>l&&(l=C),y&&b<h&&(h=b),y&&b>p&&(p=b);const P=n[w+2],T=n[w+3],I=P-T,U=P+T;I<o&&(o=I),U>c&&(c=U),y&&P<d&&(d=P),y&&P>x&&(x=P);const j=n[w+4],B=n[w+5],z=j-B,$=j+B;z<a&&(a=z),$>u&&(u=$),y&&j<f&&(f=j),y&&j>v&&(v=j)}i[0]=s,i[1]=o,i[2]=a,i[3]=l,i[4]=c,i[5]=u,y&&(r[0]=h,r[1]=d,r[2]=f,r[3]=p,r[4]=x,r[5]=v)}function UAe(n,e,t,i){let r=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,c=-1/0;for(let u=e*6,h=(e+t)*6;u<h;u+=6){const d=n[u+0];d<r&&(r=d),d>a&&(a=d);const f=n[u+2];f<s&&(s=f),f>l&&(l=f);const p=n[u+4];p<o&&(o=p),p>c&&(c=p)}i[0]=r,i[1]=s,i[2]=o,i[3]=a,i[4]=l,i[5]=c}function BAe(n,e){FAe(e);const t=n.attributes.position,i=n.index?n.index.array:null,r=mg(n),s=new Float32Array(r*6),o=t.normalized,a=t.array,l=t.offset||0;let c=3;t.isInterleavedBufferAttribute&&(c=t.data.stride);const u=["getX","getY","getZ"];for(let h=0;h<r;h++){const d=h*3,f=h*6;let p=d+0,x=d+1,v=d+2;i&&(p=i[p],x=i[x],v=i[v]),o||(p=p*c+l,x=x*c+l,v=v*c+l);for(let y=0;y<3;y++){let w,_,b;o?(w=t[u[y]](p),_=t[u[y]](x),b=t[u[y]](v)):(w=a[p+y],_=a[x+y],b=a[v+y]);let E=w;_<E&&(E=_),b<E&&(E=b);let M=w;_>M&&(M=_),b>M&&(M=b);const C=(M-E)/2,P=y*2;s[f+P+0]=E+C,s[f+P+1]=C+(Math.abs(E)+C)*LAe,E<e[y]&&(e[y]=E),M>e[y+3]&&(e[y+3]=M)}}return s}const tc=32,zAe=(n,e)=>n.candidate-e.candidate,Kc=new Array(tc).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),Kw=new Float32Array(6);function HAe(n,e,t,i,r,s){let o=-1,a=0;if(s===VY)o=rH(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===RAe)o=rH(n),o!==-1&&(a=WAe(t,i,r,o));else if(s===IAe){const l=xy(n);let c=cP*r;const u=i*6,h=(i+r)*6;for(let d=0;d<3;d++){const f=e[d],v=(e[d+3]-f)/tc;if(r<tc/4){const y=[...Kc];y.length=r;let w=0;for(let b=u;b<h;b+=6,w++){const E=y[w];E.candidate=t[b+2*d],E.count=0;const{bounds:M,leftCacheBounds:C,rightCacheBounds:P}=E;for(let T=0;T<3;T++)P[T]=1/0,P[T+3]=-1/0,C[T]=1/0,C[T+3]=-1/0,M[T]=1/0,M[T+3]=-1/0;Zw(b,t,M)}y.sort(zAe);let _=r;for(let b=0;b<_;b++){const E=y[b];for(;b+1<_&&y[b+1].candidate===E.candidate;)y.splice(b+1,1),_--}for(let b=u;b<h;b+=6){const E=t[b+2*d];for(let M=0;M<_;M++){const C=y[M];E>=C.candidate?Zw(b,t,C.rightCacheBounds):(Zw(b,t,C.leftCacheBounds),C.count++)}}for(let b=0;b<_;b++){const E=y[b],M=E.count,C=r-E.count,P=E.leftCacheBounds,T=E.rightCacheBounds;let I=0;M!==0&&(I=xy(P)/l);let U=0;C!==0&&(U=xy(T)/l);const j=iH+cP*(I*M+U*C);j<c&&(o=d,c=j,a=E.candidate)}}else{for(let _=0;_<tc;_++){const b=Kc[_];b.count=0,b.candidate=f+v+_*v;const E=b.bounds;for(let M=0;M<3;M++)E[M]=1/0,E[M+3]=-1/0}for(let _=u;_<h;_+=6){let M=~~((t[_+2*d]-f)/v);M>=tc&&(M=tc-1);const C=Kc[M];C.count++,Zw(_,t,C.bounds)}const y=Kc[tc-1];sH(y.bounds,y.rightCacheBounds);for(let _=tc-2;_>=0;_--){const b=Kc[_],E=Kc[_+1];oH(b.bounds,E.rightCacheBounds,b.rightCacheBounds)}let w=0;for(let _=0;_<tc-1;_++){const b=Kc[_],E=b.count,M=b.bounds,P=Kc[_+1].rightCacheBounds;E!==0&&(w===0?sH(M,Kw):oH(M,Kw,Kw)),w+=E;let T=0,I=0;w!==0&&(T=xy(Kw)/l);const U=r-w;U!==0&&(I=xy(P)/l);const j=iH+cP*(T*w+I*U);j<c&&(o=d,c=j,a=b.candidate)}}}}return{axis:o,pos:a}}function WAe(n,e,t,i){let r=0;for(let s=e,o=e+t;s<o;s++)r+=n[s*6+i*2];return r/t}class Qw{constructor(){}}function VAe(n,e,t,i,r,s){let o=i,a=i+r-1;const l=s.pos,c=s.axis*2;for(;;){for(;o<=a&&t[o*6+c]<l;)o++;for(;o<=a&&t[a*6+c]>=l;)a--;if(o<a){for(let u=0;u<3;u++){let h=e[o*3+u];e[o*3+u]=e[a*3+u],e[a*3+u]=h}for(let u=0;u<6;u++){let h=t[o*6+u];t[o*6+u]=t[a*6+u],t[a*6+u]=h}o++,a--}else return o}}function GAe(n,e,t,i,r,s){let o=i,a=i+r-1;const l=s.pos,c=s.axis*2;for(;;){for(;o<=a&&t[o*6+c]<l;)o++;for(;o<=a&&t[a*6+c]>=l;)a--;if(o<a){let u=n[o];n[o]=n[a],n[a]=u;for(let h=0;h<6;h++){let d=t[o*6+h];t[o*6+h]=t[a*6+h],t[a*6+h]=d}o++,a--}else return o}}function jAe(n,e){const t=(n.index?n.index.count:n.attributes.position.count)/3,i=t>2**16,r=i?4:2,s=e?new SharedArrayBuffer(t*r):new ArrayBuffer(t*r),o=i?new Uint32Array(s):new Uint16Array(s);for(let a=0,l=o.length;a<l;a++)o[a]=a;return o}function $Ae(n,e){const t=n.geometry,i=t.index?t.index.array:null,r=e.maxDepth,s=e.verbose,o=e.maxLeafTris,a=e.strategy,l=e.onProgress,c=mg(t),u=n._indirectBuffer;let h=!1;const d=new Float32Array(6),f=new Float32Array(6),p=BAe(t,d),x=e.indirect?GAe:VAe,v=[],y=e.indirect?GY(t):jY(t);if(y.length===1){const b=y[0],E=new Qw;E.boundingData=d,UAe(p,b.offset,b.count,f),_(E,b.offset,b.count,f),v.push(E)}else for(let b of y){const E=new Qw;E.boundingData=new Float32Array(6),hP(p,b.offset,b.count,E.boundingData,f),_(E,b.offset,b.count,f),v.push(E)}return v;function w(b){l&&l(b/c)}function _(b,E,M,C=null,P=0){if(!h&&P>=r&&(h=!0),M<=o||P>=r)return w(E+M),b.offset=E,b.count=M,b;const T=HAe(b.boundingData,C,p,E,M,a);if(T.axis===-1)return w(E+M),b.offset=E,b.count=M,b;const I=x(u,i,p,E,M,T);if(I===E||I===E+M)w(E+M),b.offset=E,b.count=M;else{b.splitAxis=T.axis;const U=new Qw,j=E,B=I-E;b.left=U,U.boundingData=new Float32Array(6),hP(p,j,B,U.boundingData,f),_(U,j,B,f,P+1);const z=new Qw,$=I,H=M-B;b.right=z,z.boundingData=new Float32Array(6),hP(p,$,H,z.boundingData,f),_(z,$,H,f,P+1)}return b}}function XAe(n,e){const t=n.geometry;e.indirect&&(n._indirectBuffer=jAe(t,e.useSharedArrayBuffer),DAe(t)&&e.verbose),n._indirectBuffer||OAe(t,e);const i=$Ae(n,e);let r,s,o;const a=[],l=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let h=0;h<i.length;h++){const d=i[h];let f=c(d);const p=new l(nb*f);r=new Float32Array(p),s=new Uint32Array(p),o=new Uint16Array(p),u(0,d),a.push(p)}n._roots=a;return;function c(h){return h.count?1:1+c(h.left)+c(h.right)}function u(h,d){const f=h/4,p=h/2,x=!!d.count,v=d.boundingData;for(let y=0;y<6;y++)r[f+y]=v[y];if(x){const y=d.offset,w=d.count;return s[f+6]=y,o[p+14]=w,o[p+15]=cM,h+nb}else{const y=d.left,w=d.right,_=d.splitAxis;let b;if(b=u(h+nb,y),b/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return s[f+6]=b/4,b=u(b,w),s[f+7]=_,b}}}class Tc{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let i=1/0,r=-1/0;for(let s=0,o=e.length;s<o;s++){const l=e[s][t];i=l<i?l:i,r=l>r?l:r}this.min=i,this.max=r}setFromPoints(e,t){let i=1/0,r=-1/0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=e.dot(a);i=l<i?l:i,r=l>r?l:r}this.min=i,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}}Tc.prototype.setFromBox=function(){const n=new V;return function(t,i){const r=i.min,s=i.max;let o=1/0,a=-1/0;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let u=0;u<=1;u++){n.x=r.x*l+s.x*(1-l),n.y=r.y*c+s.y*(1-c),n.z=r.z*u+s.z*(1-u);const h=t.dot(n);o=Math.min(h,o),a=Math.max(h,a)}this.min=o,this.max=a}}();const YAe=function(){const n=new V,e=new V,t=new V;return function(r,s,o){const a=r.start,l=n,c=s.start,u=e;t.subVectors(a,c),n.subVectors(r.end,r.start),e.subVectors(s.end,s.start);const h=t.dot(u),d=u.dot(l),f=u.dot(u),p=t.dot(l),v=l.dot(l)*f-d*d;let y,w;v!==0?y=(h*d-p*f)/v:y=0,w=(h+y*d)/f,o.x=y,o.y=w}}(),W3=function(){const n=new Ue,e=new V,t=new V;return function(r,s,o,a){YAe(r,s,n);let l=n.x,c=n.y;if(l>=0&&l<=1&&c>=0&&c<=1){r.at(l,o),s.at(c,a);return}else if(l>=0&&l<=1){c<0?s.at(0,a):s.at(1,a),r.closestPointToPoint(a,!0,o);return}else if(c>=0&&c<=1){l<0?r.at(0,o):r.at(1,o),s.closestPointToPoint(o,!0,a);return}else{let u;l<0?u=r.start:u=r.end;let h;c<0?h=s.start:h=s.end;const d=e,f=t;if(r.closestPointToPoint(h,!0,e),s.closestPointToPoint(u,!0,t),d.distanceToSquared(h)<=f.distanceToSquared(u)){o.copy(d),a.copy(h);return}else{o.copy(u),a.copy(f);return}}}}(),qAe=function(){const n=new V,e=new V,t=new xs,i=new As;return function(s,o){const{radius:a,center:l}=s,{a:c,b:u,c:h}=o;if(i.start=c,i.end=u,i.closestPointToPoint(l,!0,n).distanceTo(l)<=a||(i.start=c,i.end=h,i.closestPointToPoint(l,!0,n).distanceTo(l)<=a)||(i.start=u,i.end=h,i.closestPointToPoint(l,!0,n).distanceTo(l)<=a))return!0;const x=o.getPlane(t);if(Math.abs(x.distanceToPoint(l))<=a){const y=x.projectPoint(l,e);if(o.containsPoint(y))return!0}return!1}}(),ZAe=1e-15;function dP(n){return Math.abs(n)<ZAe}class Go extends Bn{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new V),this.satBounds=new Array(4).fill().map(()=>new Tc),this.points=[this.a,this.b,this.c],this.sphere=new Ns,this.plane=new xs,this.needsUpdate=!0}intersectsSphere(e){return qAe(e,this)}update(){const e=this.a,t=this.b,i=this.c,r=this.points,s=this.satAxes,o=this.satBounds,a=s[0],l=o[0];this.getNormal(a),l.setFromPoints(a,r);const c=s[1],u=o[1];c.subVectors(e,t),u.setFromPoints(c,r);const h=s[2],d=o[2];h.subVectors(t,i),d.setFromPoints(h,r);const f=s[3],p=o[3];f.subVectors(i,e),p.setFromPoints(f,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}Go.prototype.closestPointToSegment=function(){const n=new V,e=new V,t=new As;return function(r,s=null,o=null){const{start:a,end:l}=r,c=this.points;let u,h=1/0;for(let d=0;d<3;d++){const f=(d+1)%3;t.start.copy(c[d]),t.end.copy(c[f]),W3(t,r,n,e),u=n.distanceToSquared(e),u<h&&(h=u,s&&s.copy(n),o&&o.copy(e))}return this.closestPointToPoint(a,n),u=a.distanceToSquared(n),u<h&&(h=u,s&&s.copy(n),o&&o.copy(a)),this.closestPointToPoint(l,n),u=l.distanceToSquared(n),u<h&&(h=u,s&&s.copy(n),o&&o.copy(l)),Math.sqrt(h)}}();Go.prototype.intersectsTriangle=function(){const n=new Go,e=new Array(3),t=new Array(3),i=new Tc,r=new Tc,s=new V,o=new V,a=new V,l=new V,c=new V,u=new As,h=new As,d=new As,f=new V;function p(x,v,y){const w=x.points;let _=0,b=-1;for(let E=0;E<3;E++){const{start:M,end:C}=u;M.copy(w[E]),C.copy(w[(E+1)%3]),u.delta(o);const P=dP(v.distanceToPoint(M));if(dP(v.normal.dot(o))&&P){y.copy(u),_=2;break}const T=v.intersectLine(u,f);if(!T&&P&&f.copy(M),(T||P)&&!dP(f.distanceTo(C))){if(_<=1)(_===1?y.start:y.end).copy(f),P&&(b=_);else if(_>=2){(b===1?y.start:y.end).copy(f),_=2;break}if(_++,_===2&&b===-1)break}}return _}return function(v,y=null,w=!1){this.needsUpdate&&this.update(),v.isExtendedTriangle?v.needsUpdate&&v.update():(n.copy(v),n.update(),v=n);const _=this.plane,b=v.plane;if(Math.abs(_.normal.dot(b.normal))>1-1e-10){const E=this.satBounds,M=this.satAxes;t[0]=v.a,t[1]=v.b,t[2]=v.c;for(let T=0;T<4;T++){const I=E[T],U=M[T];if(i.setFromPoints(U,t),I.isSeparated(i))return!1}const C=v.satBounds,P=v.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let T=0;T<4;T++){const I=C[T],U=P[T];if(i.setFromPoints(U,e),I.isSeparated(i))return!1}for(let T=0;T<4;T++){const I=M[T];for(let U=0;U<4;U++){const j=P[U];if(s.crossVectors(I,j),i.setFromPoints(s,e),r.setFromPoints(s,t),i.isSeparated(r))return!1}}return y&&(y.start.set(0,0,0),y.end.set(0,0,0)),!0}else{const E=p(this,b,h);if(E===1&&v.containsPoint(h.end))return y&&(y.start.copy(h.end),y.end.copy(h.end)),!0;if(E!==2)return!1;const M=p(v,_,d);if(M===1&&this.containsPoint(d.end))return y&&(y.start.copy(d.end),y.end.copy(d.end)),!0;if(M!==2)return!1;if(h.delta(a),d.delta(l),a.dot(l)<0){let B=d.start;d.start=d.end,d.end=B}const C=h.start.dot(a),P=h.end.dot(a),T=d.start.dot(a),I=d.end.dot(a),U=P<T,j=C<I;return C!==I&&T!==P&&U===j?!1:(y&&(c.subVectors(h.start,d.start),c.dot(a)>0?y.start.copy(h.start):y.start.copy(d.start),c.subVectors(h.end,d.end),c.dot(a)<0?y.end.copy(h.end):y.end.copy(d.end)),!0)}}}();Go.prototype.distanceToPoint=function(){const n=new V;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}}();Go.prototype.distanceToTriangle=function(){const n=new V,e=new V,t=["a","b","c"],i=new As,r=new As;return function(o,a=null,l=null){const c=a||l?i:null;if(this.intersectsTriangle(o,c))return(a||l)&&(a&&c.getCenter(a),l&&c.getCenter(l)),0;let u=1/0;for(let h=0;h<3;h++){let d;const f=t[h],p=o[f];this.closestPointToPoint(p,n),d=p.distanceToSquared(n),d<u&&(u=d,a&&a.copy(n),l&&l.copy(p));const x=this[f];o.closestPointToPoint(x,n),d=x.distanceToSquared(n),d<u&&(u=d,a&&a.copy(x),l&&l.copy(n))}for(let h=0;h<3;h++){const d=t[h],f=t[(h+1)%3];i.set(this[d],this[f]);for(let p=0;p<3;p++){const x=t[p],v=t[(p+1)%3];r.set(o[x],o[v]),W3(i,r,n,e);const y=n.distanceToSquared(e);y<u&&(u=y,a&&a.copy(n),l&&l.copy(e))}}return Math.sqrt(u)}}();class ds{constructor(e,t,i){this.isOrientedBox=!0,this.min=new V,this.max=new V,this.matrix=new dt,this.invMatrix=new dt,this.points=new Array(8).fill().map(()=>new V),this.satAxes=new Array(3).fill().map(()=>new V),this.satBounds=new Array(3).fill().map(()=>new Tc),this.alignedSatBounds=new Array(3).fill().map(()=>new Tc),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),i&&this.matrix.copy(i)}set(e,t,i){this.min.copy(e),this.max.copy(t),this.matrix.copy(i),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}ds.prototype.update=function(){return function(){const e=this.matrix,t=this.min,i=this.max,r=this.points;for(let c=0;c<=1;c++)for(let u=0;u<=1;u++)for(let h=0;h<=1;h++){const d=1*c|2*u|4*h,f=r[d];f.x=c?i.x:t.x,f.y=u?i.y:t.y,f.z=h?i.z:t.z,f.applyMatrix4(e)}const s=this.satBounds,o=this.satAxes,a=r[0];for(let c=0;c<3;c++){const u=o[c],h=s[c],d=1<<c,f=r[d];u.subVectors(a,f),h.setFromPoints(u,r)}const l=this.alignedSatBounds;l[0].setFromPointsField(r,"x"),l[1].setFromPointsField(r,"y"),l[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();ds.prototype.intersectsBox=function(){const n=new Tc;return function(t){this.needsUpdate&&this.update();const i=t.min,r=t.max,s=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(n.min=i.x,n.max=r.x,a[0].isSeparated(n)||(n.min=i.y,n.max=r.y,a[1].isSeparated(n))||(n.min=i.z,n.max=r.z,a[2].isSeparated(n)))return!1;for(let l=0;l<3;l++){const c=o[l],u=s[l];if(n.setFromBox(c,t),u.isSeparated(n))return!1}return!0}}();ds.prototype.intersectsTriangle=function(){const n=new Go,e=new Array(3),t=new Tc,i=new Tc,r=new V;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(n.copy(o),n.update(),o=n);const a=this.satBounds,l=this.satAxes;e[0]=o.a,e[1]=o.b,e[2]=o.c;for(let d=0;d<3;d++){const f=a[d],p=l[d];if(t.setFromPoints(p,e),f.isSeparated(t))return!1}const c=o.satBounds,u=o.satAxes,h=this.points;for(let d=0;d<3;d++){const f=c[d],p=u[d];if(t.setFromPoints(p,h),f.isSeparated(t))return!1}for(let d=0;d<3;d++){const f=l[d];for(let p=0;p<4;p++){const x=u[p];if(r.crossVectors(f,x),t.setFromPoints(r,e),i.setFromPoints(r,h),t.isSeparated(i))return!1}}return!0}}();ds.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();ds.prototype.distanceToPoint=function(){const n=new V;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}}();ds.prototype.distanceToBox=function(){const n=["x","y","z"],e=new Array(12).fill().map(()=>new As),t=new Array(12).fill().map(()=>new As),i=new V,r=new V;return function(o,a=0,l=null,c=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(l||c)&&(o.getCenter(r),this.closestPointToPoint(r,i),o.closestPointToPoint(i,r),l&&l.copy(i),c&&c.copy(r)),0;const u=a*a,h=o.min,d=o.max,f=this.points;let p=1/0;for(let v=0;v<8;v++){const y=f[v];r.copy(y).clamp(h,d);const w=y.distanceToSquared(r);if(w<p&&(p=w,l&&l.copy(y),c&&c.copy(r),w<u))return Math.sqrt(w)}let x=0;for(let v=0;v<3;v++)for(let y=0;y<=1;y++)for(let w=0;w<=1;w++){const _=(v+1)%3,b=(v+2)%3,E=y<<_|w<<b,M=1<<v|y<<_|w<<b,C=f[E],P=f[M];e[x].set(C,P);const I=n[v],U=n[_],j=n[b],B=t[x],z=B.start,$=B.end;z[I]=h[I],z[U]=y?h[U]:d[U],z[j]=w?h[j]:d[U],$[I]=d[I],$[U]=y?h[U]:d[U],$[j]=w?h[j]:d[U],x++}for(let v=0;v<=1;v++)for(let y=0;y<=1;y++)for(let w=0;w<=1;w++){r.x=v?d.x:h.x,r.y=y?d.y:h.y,r.z=w?d.z:h.z,this.closestPointToPoint(r,i);const _=r.distanceToSquared(i);if(_<p&&(p=_,l&&l.copy(i),c&&c.copy(r),_<u))return Math.sqrt(_)}for(let v=0;v<12;v++){const y=e[v];for(let w=0;w<12;w++){const _=t[w];W3(y,_,i,r);const b=i.distanceToSquared(r);if(b<p&&(p=b,l&&l.copy(i),c&&c.copy(r),b<u))return Math.sqrt(b)}}return Math.sqrt(p)}}();class V3{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}class KAe extends V3{constructor(){super(()=>new Go)}}const Io=new KAe;function Gs(n,e){return e[n+15]===65535}function Ys(n,e){return e[n+6]}function Lo(n,e){return e[n+14]}function No(n){return n+8}function ko(n,e){return e[n+6]}function $Y(n,e){return e[n+7]}class QAe{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;const e=[];let t=null;this.setBuffer=i=>{t&&e.push(t),t=i,this.float32Array=new Float32Array(i),this.uint16Array=new Uint16Array(i),this.uint32Array=new Uint32Array(i)},this.clearBuffer=()=>{t=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,e.length!==0&&this.setBuffer(e.pop())}}}const ei=new QAe;let bu,Xp;const ap=[],Jw=new V3(()=>new Yn);function JAe(n,e,t,i,r,s){bu=Jw.getPrimitive(),Xp=Jw.getPrimitive(),ap.push(bu,Xp),ei.setBuffer(n._roots[e]);const o=UI(0,n.geometry,t,i,r,s);ei.clearBuffer(),Jw.releasePrimitive(bu),Jw.releasePrimitive(Xp),ap.pop(),ap.pop();const a=ap.length;return a>0&&(Xp=ap[a-1],bu=ap[a-2]),o}function UI(n,e,t,i,r=null,s=0,o=0){const{float32Array:a,uint16Array:l,uint32Array:c}=ei;let u=n*2;if(Gs(u,l)){const d=Ys(n,c),f=Lo(u,l);return hi(n,a,bu),i(d,f,!1,o,s+n,bu)}else{let I=function(j){const{uint16Array:B,uint32Array:z}=ei;let $=j*2;for(;!Gs($,B);)j=No(j),$=j*2;return Ys(j,z)},U=function(j){const{uint16Array:B,uint32Array:z}=ei;let $=j*2;for(;!Gs($,B);)j=ko(j,z),$=j*2;return Ys(j,z)+Lo($,B)};const d=No(n),f=ko(n,c);let p=d,x=f,v,y,w,_;if(r&&(w=bu,_=Xp,hi(p,a,w),hi(x,a,_),v=r(w),y=r(_),y<v)){p=f,x=d;const j=v;v=y,y=j,w=_}w||(w=bu,hi(p,a,w));const b=Gs(p*2,l),E=t(w,b,v,o+1,s+p);let M;if(E===nH){const j=I(p),z=U(p)-j;M=i(j,z,!0,o+1,s+p,w)}else M=E&&UI(p,e,t,i,r,s,o+1);if(M)return!0;_=Xp,hi(x,a,_);const C=Gs(x*2,l),P=t(_,C,y,o+1,s+x);let T;if(P===nH){const j=I(x),z=U(x)-j;T=i(j,z,!0,o+1,s+x,_)}else T=P&&UI(x,e,t,i,r,s,o+1);return!!T}}const _y=new V,fP=new V;function eCe(n,e,t={},i=0,r=1/0){const s=i*i,o=r*r;let a=1/0,l=null;if(n.shapecast({boundsTraverseOrder:u=>(_y.copy(e).clamp(u.min,u.max),_y.distanceToSquared(e)),intersectsBounds:(u,h,d)=>d<a&&d<o,intersectsTriangle:(u,h)=>{u.closestPointToPoint(e,_y);const d=e.distanceToSquared(_y);return d<a&&(fP.copy(_y),a=d,l=h),d<s}}),a===1/0)return null;const c=Math.sqrt(a);return t.point?t.point.copy(fP):t.point=fP.clone(),t.distance=c,t.faceIndex=l,t}const lp=new V,cp=new V,up=new V,e1=new Ue,t1=new Ue,n1=new Ue,aH=new V,lH=new V,cH=new V,i1=new V;function tCe(n,e,t,i,r,s){let o;return s===Xr?o=n.intersectTriangle(i,t,e,!0,r):o=n.intersectTriangle(e,t,i,s!==cr,r),o===null?null:{distance:n.origin.distanceTo(r),point:r.clone()}}function nCe(n,e,t,i,r,s,o,a,l){lp.fromBufferAttribute(e,s),cp.fromBufferAttribute(e,o),up.fromBufferAttribute(e,a);const c=tCe(n,lp,cp,up,i1,l);if(c){i&&(e1.fromBufferAttribute(i,s),t1.fromBufferAttribute(i,o),n1.fromBufferAttribute(i,a),c.uv=Bn.getInterpolation(i1,lp,cp,up,e1,t1,n1,new Ue)),r&&(e1.fromBufferAttribute(r,s),t1.fromBufferAttribute(r,o),n1.fromBufferAttribute(r,a),c.uv1=Bn.getInterpolation(i1,lp,cp,up,e1,t1,n1,new Ue)),t&&(aH.fromBufferAttribute(t,s),lH.fromBufferAttribute(t,o),cH.fromBufferAttribute(t,a),c.normal=Bn.getInterpolation(i1,lp,cp,up,aH,lH,cH,new V),c.normal.dot(n.direction)>0&&c.normal.multiplyScalar(-1));const u={a:s,b:o,c:a,normal:new V,materialIndex:0};Bn.getNormal(lp,cp,up,u.normal),c.face=u,c.faceIndex=s}return c}function uM(n,e,t,i,r){const s=i*3;let o=s+0,a=s+1,l=s+2;const c=n.index;n.index&&(o=c.getX(o),a=c.getX(a),l=c.getX(l));const{position:u,normal:h,uv:d,uv1:f}=n.attributes,p=nCe(t,u,h,d,f,o,a,l,e);return p?(p.faceIndex=i,r&&r.push(p),p):null}function Bi(n,e,t,i){const r=n.a,s=n.b,o=n.c;let a=e,l=e+1,c=e+2;t&&(a=t.getX(a),l=t.getX(l),c=t.getX(c)),r.x=i.getX(a),r.y=i.getY(a),r.z=i.getZ(a),s.x=i.getX(l),s.y=i.getY(l),s.z=i.getZ(l),o.x=i.getX(c),o.y=i.getY(c),o.z=i.getZ(c)}function iCe(n,e,t,i,r,s){const{geometry:o,_indirectBuffer:a}=n;for(let l=i,c=i+r;l<c;l++)uM(o,e,t,l,s)}function rCe(n,e,t,i,r){const{geometry:s,_indirectBuffer:o}=n;let a=1/0,l=null;for(let c=i,u=i+r;c<u;c++){let h;h=uM(s,e,t,c),h&&h.distance<a&&(l=h,a=h.distance)}return l}function sCe(n,e,t,i,r,s,o){const{geometry:a}=t,{index:l}=a,c=a.attributes.position;for(let u=n,h=e+n;u<h;u++){let d;if(d=u,Bi(o,d*3,l,c),o.needsUpdate=!0,i(o,d,r,s))return!0}return!1}function oCe(n,e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=n.geometry,i=t.index?t.index.array:null,r=t.attributes.position;let s,o,a,l,c=0;const u=n._roots;for(let d=0,f=u.length;d<f;d++)s=u[d],o=new Uint32Array(s),a=new Uint16Array(s),l=new Float32Array(s),h(0,c),c+=s.byteLength;function h(d,f,p=!1){const x=d*2;if(a[x+15]===cM){const y=o[d+6],w=a[x+14];let _=1/0,b=1/0,E=1/0,M=-1/0,C=-1/0,P=-1/0;for(let T=3*y,I=3*(y+w);T<I;T++){let U=i[T];const j=r.getX(U),B=r.getY(U),z=r.getZ(U);j<_&&(_=j),j>M&&(M=j),B<b&&(b=B),B>C&&(C=B),z<E&&(E=z),z>P&&(P=z)}return l[d+0]!==_||l[d+1]!==b||l[d+2]!==E||l[d+3]!==M||l[d+4]!==C||l[d+5]!==P?(l[d+0]=_,l[d+1]=b,l[d+2]=E,l[d+3]=M,l[d+4]=C,l[d+5]=P,!0):!1}else{const y=d+8,w=o[d+6],_=y+f,b=w+f;let E=p,M=!1,C=!1;e?E||(M=e.has(_),C=e.has(b),E=!M&&!C):(M=!0,C=!0);const P=E||M,T=E||C;let I=!1;P&&(I=h(y,f,E));let U=!1;T&&(U=h(w,f,E));const j=I||U;if(j)for(let B=0;B<3;B++){const z=y+B,$=w+B,H=l[z],Z=l[z+3],O=l[$],W=l[$+3];l[d+B]=H<O?H:O,l[d+B+3]=Z>W?Z:W}return j}}}const uH=new Yn;function Xu(n,e,t,i){return hi(n,e,uH),t.intersectBox(uH,i)}function aCe(n,e,t,i,r,s){const{geometry:o,_indirectBuffer:a}=n;for(let l=i,c=i+r;l<c;l++){let u=a?a[l]:l;uM(o,e,t,u,s)}}function lCe(n,e,t,i,r){const{geometry:s,_indirectBuffer:o}=n;let a=1/0,l=null;for(let c=i,u=i+r;c<u;c++){let h;h=uM(s,e,t,o?o[c]:c),h&&h.distance<a&&(l=h,a=h.distance)}return l}function cCe(n,e,t,i,r,s,o){const{geometry:a}=t,{index:l}=a,c=a.attributes.position;for(let u=n,h=e+n;u<h;u++){let d;if(d=t.resolveTriangleIndex(u),Bi(o,d*3,l,c),o.needsUpdate=!0,i(o,d,r,s))return!0}return!1}const hH=new V;function uCe(n,e,t,i,r){ei.setBuffer(n._roots[e]),BI(0,n,t,i,r),ei.clearBuffer()}function BI(n,e,t,i,r){const{float32Array:s,uint16Array:o,uint32Array:a}=ei,l=n*2;if(Gs(l,o)){const u=Ys(n,a),h=Lo(l,o);iCe(e,t,i,u,h,r)}else{const u=No(n);Xu(u,s,i,hH)&&BI(u,e,t,i,r);const h=ko(n,a);Xu(h,s,i,hH)&&BI(h,e,t,i,r)}}const dH=new V,hCe=["x","y","z"];function dCe(n,e,t,i){ei.setBuffer(n._roots[e]);const r=zI(0,n,t,i);return ei.clearBuffer(),r}function zI(n,e,t,i){const{float32Array:r,uint16Array:s,uint32Array:o}=ei;let a=n*2;if(Gs(a,s)){const c=Ys(n,o),u=Lo(a,s);return rCe(e,t,i,c,u)}else{const c=$Y(n,o),u=hCe[c],d=i.direction[u]>=0;let f,p;d?(f=No(n),p=ko(n,o)):(f=ko(n,o),p=No(n));const v=Xu(f,r,i,dH)?zI(f,e,t,i):null;if(v){const _=v.point[u];if(d?_<=r[p+c]:_>=r[p+c+3])return v}const w=Xu(p,r,i,dH)?zI(p,e,t,i):null;return v&&w?v.distance<=w.distance?v:w:v||w||null}}const r1=new Yn,hp=new Go,dp=new Go,wy=new dt,fH=new ds,s1=new ds;function fCe(n,e,t,i){ei.setBuffer(n._roots[e]);const r=HI(0,n,t,i);return ei.clearBuffer(),r}function HI(n,e,t,i,r=null){const{float32Array:s,uint16Array:o,uint32Array:a}=ei;let l=n*2;if(r===null&&(t.boundingBox||t.computeBoundingBox(),fH.set(t.boundingBox.min,t.boundingBox.max,i),r=fH),Gs(l,o)){const u=e.geometry,h=u.index,d=u.attributes.position,f=t.index,p=t.attributes.position,x=Ys(n,a),v=Lo(l,o);if(wy.copy(i).invert(),t.boundsTree)return hi(n,s,s1),s1.matrix.copy(wy),s1.needsUpdate=!0,t.boundsTree.shapecast({intersectsBounds:w=>s1.intersectsBox(w),intersectsTriangle:w=>{w.a.applyMatrix4(i),w.b.applyMatrix4(i),w.c.applyMatrix4(i),w.needsUpdate=!0;for(let _=x*3,b=(v+x)*3;_<b;_+=3)if(Bi(dp,_,h,d),dp.needsUpdate=!0,w.intersectsTriangle(dp))return!0;return!1}});for(let y=x*3,w=(v+x)*3;y<w;y+=3){Bi(hp,y,h,d),hp.a.applyMatrix4(wy),hp.b.applyMatrix4(wy),hp.c.applyMatrix4(wy),hp.needsUpdate=!0;for(let _=0,b=f.count;_<b;_+=3)if(Bi(dp,_,f,p),dp.needsUpdate=!0,hp.intersectsTriangle(dp))return!0}}else{const u=n+8,h=a[n+6];return hi(u,s,r1),!!(r.intersectsBox(r1)&&HI(u,e,t,i,r)||(hi(h,s,r1),r.intersectsBox(r1)&&HI(h,e,t,i,r)))}}const o1=new dt,pP=new ds,by=new ds,pCe=new V,mCe=new V,gCe=new V,yCe=new V;function vCe(n,e,t,i={},r={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),pP.set(e.boundingBox.min,e.boundingBox.max,t),pP.needsUpdate=!0;const a=n.geometry,l=a.attributes.position,c=a.index,u=e.attributes.position,h=e.index,d=Io.getPrimitive(),f=Io.getPrimitive();let p=pCe,x=mCe,v=null,y=null;r&&(v=gCe,y=yCe);let w=1/0,_=null,b=null;return o1.copy(t).invert(),by.matrix.copy(o1),n.shapecast({boundsTraverseOrder:E=>pP.distanceToBox(E),intersectsBounds:(E,M,C)=>C<w&&C<o?(M&&(by.min.copy(E.min),by.max.copy(E.max),by.needsUpdate=!0),!0):!1,intersectsRange:(E,M)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:P=>by.distanceToBox(P),intersectsBounds:(P,T,I)=>I<w&&I<o,intersectsRange:(P,T)=>{for(let I=P,U=P+T;I<U;I++){Bi(f,3*I,h,u),f.a.applyMatrix4(t),f.b.applyMatrix4(t),f.c.applyMatrix4(t),f.needsUpdate=!0;for(let j=E,B=E+M;j<B;j++){Bi(d,3*j,c,l),d.needsUpdate=!0;const z=d.distanceToTriangle(f,p,v);if(z<w&&(x.copy(p),y&&y.copy(v),w=z,_=j,b=I),z<s)return!0}}}});{const C=mg(e);for(let P=0,T=C;P<T;P++){Bi(f,3*P,h,u),f.a.applyMatrix4(t),f.b.applyMatrix4(t),f.c.applyMatrix4(t),f.needsUpdate=!0;for(let I=E,U=E+M;I<U;I++){Bi(d,3*I,c,l),d.needsUpdate=!0;const j=d.distanceToTriangle(f,p,v);if(j<w&&(x.copy(p),y&&y.copy(v),w=j,_=I,b=P),j<s)return!0}}}}}),Io.releasePrimitive(d),Io.releasePrimitive(f),w===1/0?null:(i.point?i.point.copy(x):i.point=x.clone(),i.distance=w,i.faceIndex=_,r&&(r.point?r.point.copy(y):r.point=y.clone(),r.point.applyMatrix4(o1),x.applyMatrix4(o1),r.distance=x.sub(r.point).length(),r.faceIndex=b),i)}function xCe(n,e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=n.geometry,i=t.index?t.index.array:null,r=t.attributes.position;let s,o,a,l,c=0;const u=n._roots;for(let d=0,f=u.length;d<f;d++)s=u[d],o=new Uint32Array(s),a=new Uint16Array(s),l=new Float32Array(s),h(0,c),c+=s.byteLength;function h(d,f,p=!1){const x=d*2;if(a[x+15]===cM){const y=o[d+6],w=a[x+14];let _=1/0,b=1/0,E=1/0,M=-1/0,C=-1/0,P=-1/0;for(let T=y,I=y+w;T<I;T++){const U=3*n.resolveTriangleIndex(T);for(let j=0;j<3;j++){let B=U+j;B=i?i[B]:B;const z=r.getX(B),$=r.getY(B),H=r.getZ(B);z<_&&(_=z),z>M&&(M=z),$<b&&(b=$),$>C&&(C=$),H<E&&(E=H),H>P&&(P=H)}}return l[d+0]!==_||l[d+1]!==b||l[d+2]!==E||l[d+3]!==M||l[d+4]!==C||l[d+5]!==P?(l[d+0]=_,l[d+1]=b,l[d+2]=E,l[d+3]=M,l[d+4]=C,l[d+5]=P,!0):!1}else{const y=d+8,w=o[d+6],_=y+f,b=w+f;let E=p,M=!1,C=!1;e?E||(M=e.has(_),C=e.has(b),E=!M&&!C):(M=!0,C=!0);const P=E||M,T=E||C;let I=!1;P&&(I=h(y,f,E));let U=!1;T&&(U=h(w,f,E));const j=I||U;if(j)for(let B=0;B<3;B++){const z=y+B,$=w+B,H=l[z],Z=l[z+3],O=l[$],W=l[$+3];l[d+B]=H<O?H:O,l[d+B+3]=Z>W?Z:W}return j}}}const pH=new V;function _Ce(n,e,t,i,r){ei.setBuffer(n._roots[e]),WI(0,n,t,i,r),ei.clearBuffer()}function WI(n,e,t,i,r){const{float32Array:s,uint16Array:o,uint32Array:a}=ei,l=n*2;if(Gs(l,o)){const u=Ys(n,a),h=Lo(l,o);aCe(e,t,i,u,h,r)}else{const u=No(n);Xu(u,s,i,pH)&&WI(u,e,t,i,r);const h=ko(n,a);Xu(h,s,i,pH)&&WI(h,e,t,i,r)}}const mH=new V,wCe=["x","y","z"];function bCe(n,e,t,i){ei.setBuffer(n._roots[e]);const r=VI(0,n,t,i);return ei.clearBuffer(),r}function VI(n,e,t,i){const{float32Array:r,uint16Array:s,uint32Array:o}=ei;let a=n*2;if(Gs(a,s)){const c=Ys(n,o),u=Lo(a,s);return lCe(e,t,i,c,u)}else{const c=$Y(n,o),u=wCe[c],d=i.direction[u]>=0;let f,p;d?(f=No(n),p=ko(n,o)):(f=ko(n,o),p=No(n));const v=Xu(f,r,i,mH)?VI(f,e,t,i):null;if(v){const _=v.point[u];if(d?_<=r[p+c]:_>=r[p+c+3])return v}const w=Xu(p,r,i,mH)?VI(p,e,t,i):null;return v&&w?v.distance<=w.distance?v:w:v||w||null}}const a1=new Yn,fp=new Go,pp=new Go,Sy=new dt,gH=new ds,l1=new ds;function SCe(n,e,t,i){ei.setBuffer(n._roots[e]);const r=GI(0,n,t,i);return ei.clearBuffer(),r}function GI(n,e,t,i,r=null){const{float32Array:s,uint16Array:o,uint32Array:a}=ei;let l=n*2;if(r===null&&(t.boundingBox||t.computeBoundingBox(),gH.set(t.boundingBox.min,t.boundingBox.max,i),r=gH),Gs(l,o)){const u=e.geometry,h=u.index,d=u.attributes.position,f=t.index,p=t.attributes.position,x=Ys(n,a),v=Lo(l,o);if(Sy.copy(i).invert(),t.boundsTree)return hi(n,s,l1),l1.matrix.copy(Sy),l1.needsUpdate=!0,t.boundsTree.shapecast({intersectsBounds:w=>l1.intersectsBox(w),intersectsTriangle:w=>{w.a.applyMatrix4(i),w.b.applyMatrix4(i),w.c.applyMatrix4(i),w.needsUpdate=!0;for(let _=x,b=v+x;_<b;_++)if(Bi(pp,3*e.resolveTriangleIndex(_),h,d),pp.needsUpdate=!0,w.intersectsTriangle(pp))return!0;return!1}});for(let y=x,w=v+x;y<w;y++){const _=e.resolveTriangleIndex(y);Bi(fp,3*_,h,d),fp.a.applyMatrix4(Sy),fp.b.applyMatrix4(Sy),fp.c.applyMatrix4(Sy),fp.needsUpdate=!0;for(let b=0,E=f.count;b<E;b+=3)if(Bi(pp,b,f,p),pp.needsUpdate=!0,fp.intersectsTriangle(pp))return!0}}else{const u=n+8,h=a[n+6];return hi(u,s,a1),!!(r.intersectsBox(a1)&&GI(u,e,t,i,r)||(hi(h,s,a1),r.intersectsBox(a1)&&GI(h,e,t,i,r)))}}const c1=new dt,mP=new ds,Ey=new ds,ECe=new V,MCe=new V,TCe=new V,ACe=new V;function CCe(n,e,t,i={},r={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),mP.set(e.boundingBox.min,e.boundingBox.max,t),mP.needsUpdate=!0;const a=n.geometry,l=a.attributes.position,c=a.index,u=e.attributes.position,h=e.index,d=Io.getPrimitive(),f=Io.getPrimitive();let p=ECe,x=MCe,v=null,y=null;r&&(v=TCe,y=ACe);let w=1/0,_=null,b=null;return c1.copy(t).invert(),Ey.matrix.copy(c1),n.shapecast({boundsTraverseOrder:E=>mP.distanceToBox(E),intersectsBounds:(E,M,C)=>C<w&&C<o?(M&&(Ey.min.copy(E.min),Ey.max.copy(E.max),Ey.needsUpdate=!0),!0):!1,intersectsRange:(E,M)=>{if(e.boundsTree){const C=e.boundsTree;return C.shapecast({boundsTraverseOrder:P=>Ey.distanceToBox(P),intersectsBounds:(P,T,I)=>I<w&&I<o,intersectsRange:(P,T)=>{for(let I=P,U=P+T;I<U;I++){const j=C.resolveTriangleIndex(I);Bi(f,3*j,h,u),f.a.applyMatrix4(t),f.b.applyMatrix4(t),f.c.applyMatrix4(t),f.needsUpdate=!0;for(let B=E,z=E+M;B<z;B++){const $=n.resolveTriangleIndex(B);Bi(d,3*$,c,l),d.needsUpdate=!0;const H=d.distanceToTriangle(f,p,v);if(H<w&&(x.copy(p),y&&y.copy(v),w=H,_=B,b=I),H<s)return!0}}}})}else{const C=mg(e);for(let P=0,T=C;P<T;P++){Bi(f,3*P,h,u),f.a.applyMatrix4(t),f.b.applyMatrix4(t),f.c.applyMatrix4(t),f.needsUpdate=!0;for(let I=E,U=E+M;I<U;I++){const j=n.resolveTriangleIndex(I);Bi(d,3*j,c,l),d.needsUpdate=!0;const B=d.distanceToTriangle(f,p,v);if(B<w&&(x.copy(p),y&&y.copy(v),w=B,_=I,b=P),B<s)return!0}}}}}),Io.releasePrimitive(d),Io.releasePrimitive(f),w===1/0?null:(i.point?i.point.copy(x):i.point=x.clone(),i.distance=w,i.faceIndex=_,r&&(r.point?r.point.copy(y):r.point=y.clone(),r.point.applyMatrix4(c1),x.applyMatrix4(c1),r.distance=x.sub(r.point).length(),r.faceIndex=b),i)}function PCe(){return typeof SharedArrayBuffer<"u"}const yv=new ei.constructor,SS=new ei.constructor,lu=new V3(()=>new Yn),mp=new Yn,gp=new Yn,gP=new Yn,yP=new Yn;let vP=!1;function RCe(n,e,t,i){if(vP)throw new Error("MeshBVH: Recursive calls to bvhcast not supported.");vP=!0;const r=n._roots,s=e._roots;let o,a=0,l=0;const c=new dt().copy(t).invert();for(let u=0,h=r.length;u<h;u++){yv.setBuffer(r[u]),l=0;const d=lu.getPrimitive();hi(0,yv.float32Array,d),d.applyMatrix4(c);for(let f=0,p=s.length;f<p&&(SS.setBuffer(s[u]),o=la(0,0,t,c,i,a,l,0,0,d),SS.clearBuffer(),l+=s[f].length,!o);f++);if(lu.releasePrimitive(d),yv.clearBuffer(),a+=r[u].length,o)break}return vP=!1,o}function la(n,e,t,i,r,s=0,o=0,a=0,l=0,c=null,u=!1){let h,d;u?(h=SS,d=yv):(h=yv,d=SS);const f=h.float32Array,p=h.uint32Array,x=h.uint16Array,v=d.float32Array,y=d.uint32Array,w=d.uint16Array,_=n*2,b=e*2,E=Gs(_,x),M=Gs(b,w);let C=!1;if(M&&E)u?C=r(Ys(e,y),Lo(e*2,w),Ys(n,p),Lo(n*2,x),l,o+e,a,s+n):C=r(Ys(n,p),Lo(n*2,x),Ys(e,y),Lo(e*2,w),a,s+n,l,o+e);else if(M){const P=lu.getPrimitive();hi(e,v,P),P.applyMatrix4(t);const T=No(n),I=ko(n,p);hi(T,f,mp),hi(I,f,gp);const U=P.intersectsBox(mp),j=P.intersectsBox(gp);C=U&&la(e,T,i,t,r,o,s,l,a+1,P,!u)||j&&la(e,I,i,t,r,o,s,l,a+1,P,!u),lu.releasePrimitive(P)}else{const P=No(e),T=ko(e,y);hi(P,v,gP),hi(T,v,yP);const I=c.intersectsBox(gP),U=c.intersectsBox(yP);if(I&&U)C=la(n,P,t,i,r,s,o,a,l+1,c,u)||la(n,T,t,i,r,s,o,a,l+1,c,u);else if(I)if(E)C=la(n,P,t,i,r,s,o,a,l+1,c,u);else{const j=lu.getPrimitive();j.copy(gP).applyMatrix4(t);const B=No(n),z=ko(n,p);hi(B,f,mp),hi(z,f,gp);const $=j.intersectsBox(mp),H=j.intersectsBox(gp);C=$&&la(P,B,i,t,r,o,s,l,a+1,j,!u)||H&&la(P,z,i,t,r,o,s,l,a+1,j,!u),lu.releasePrimitive(j)}else if(U)if(E)C=la(n,T,t,i,r,s,o,a,l+1,c,u);else{const j=lu.getPrimitive();j.copy(yP).applyMatrix4(t);const B=No(n),z=ko(n,p);hi(B,f,mp),hi(z,f,gp);const $=j.intersectsBox(mp),H=j.intersectsBox(gp);C=$&&la(T,B,i,t,r,o,s,l,a+1,j,!u)||H&&la(T,z,i,t,r,o,s,l,a+1,j,!u),lu.releasePrimitive(j)}}return C}const u1=new ds,yH=new Yn;class G3{static serialize(e,t={}){t={cloneBuffers:!0,...t};const i=e.geometry,r=e._roots,s=e._indirectBuffer,o=i.getIndex();let a;return t.cloneBuffers?a={roots:r.map(l=>l.slice()),index:o.array.slice(),indirectBuffer:s?s.slice():null}:a={roots:r,index:o.array,indirectBuffer:s},a}static deserialize(e,t,i={}){i={setIndex:!0,indirect:!!e.indirectBuffer,...i};const{index:r,roots:s,indirectBuffer:o}=e,a=new G3(t,{...i,[uP]:!0});if(a._roots=s,a._indirectBuffer=o||null,i.setIndex){const l=t.getIndex();if(l===null){const c=new Mn(e.index,1,!1);t.setIndex(c)}else l.array!==r&&(l.array.set(r),l.needsUpdate=!0)}return a}get indirect(){return!!this._indirectBuffer}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:VY,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,[uP]:!1},t),t.useSharedArrayBuffer&&!PCe())throw new Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=e,this._roots=null,this._indirectBuffer=null,t[uP]||(XAe(this,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Yn)));const{_indirectBuffer:i}=this;this.resolveTriangleIndex=t.indirect?r=>i[r]:r=>r}refit(e=null){return(this.indirect?xCe:oCe)(this,e)}traverse(e,t=0){const i=this._roots[t],r=new Uint32Array(i),s=new Uint16Array(i);o(0);function o(a,l=0){const c=a*2,u=s[c+15]===cM;if(u){const h=r[a+6],d=s[c+14];e(l,u,new Float32Array(i,a*4,6),h,d)}else{const h=a+nb/4,d=r[a+6],f=r[a+7];e(l,u,new Float32Array(i,a*4,6),f)||(o(h,l+1),o(d,l+1))}}}raycast(e,t=Wo){const i=this._roots,r=this.geometry,s=[],o=t.isMaterial,a=Array.isArray(t),l=r.groups,c=o?t.side:t,u=this.indirect?_Ce:uCe;for(let h=0,d=i.length;h<d;h++){const f=a?t[l[h].materialIndex].side:c,p=s.length;if(u(this,h,f,e,s),a){const x=l[h].materialIndex;for(let v=p,y=s.length;v<y;v++)s[v].face.materialIndex=x}}return s}raycastFirst(e,t=Wo){const i=this._roots,r=this.geometry,s=t.isMaterial,o=Array.isArray(t);let a=null;const l=r.groups,c=s?t.side:t,u=this.indirect?bCe:dCe;for(let h=0,d=i.length;h<d;h++){const f=o?t[l[h].materialIndex].side:c,p=u(this,h,f,e);p!=null&&(a==null||p.distance<a.distance)&&(a=p,o&&(p.face.materialIndex=l[h].materialIndex))}return a}intersectsGeometry(e,t){let i=!1;const r=this._roots,s=this.indirect?SCe:fCe;for(let o=0,a=r.length;o<a&&(i=s(this,o,e,t),!i);o++);return i}shapecast(e){const t=Io.getPrimitive(),i=this.indirect?cCe:sCe;let{boundsTraverseOrder:r,intersectsBounds:s,intersectsRange:o,intersectsTriangle:a}=e;if(o&&a){const h=o;o=(d,f,p,x,v)=>h(d,f,p,x,v)?!0:i(d,f,this,a,p,x,t)}else o||(a?o=(h,d,f,p)=>i(h,d,this,a,f,p,t):o=(h,d,f)=>f);let l=!1,c=0;const u=this._roots;for(let h=0,d=u.length;h<d;h++){const f=u[h];if(l=JAe(this,h,s,o,r,c),l)break;c+=f.byteLength}return Io.releasePrimitive(t),l}bvhcast(e,t,i){let{intersectsRanges:r,intersectsTriangles:s}=i;const o=Io.getPrimitive(),a=this.geometry.index,l=this.geometry.attributes.position,c=this.indirect?p=>{const x=this.resolveTriangleIndex(p);Bi(o,x*3,a,l)}:p=>{Bi(o,p*3,a,l)},u=Io.getPrimitive(),h=e.geometry.index,d=e.geometry.attributes.position,f=e.indirect?p=>{const x=e.resolveTriangleIndex(p);Bi(u,x*3,h,d)}:p=>{Bi(u,p*3,h,d)};if(s){const p=(x,v,y,w,_,b,E,M)=>{for(let C=y,P=y+w;C<P;C++){f(C),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let T=x,I=x+v;T<I;T++)if(c(T),o.needsUpdate=!0,s(o,u,T,C,_,b,E,M))return!0}return!1};if(r){const x=r;r=function(v,y,w,_,b,E,M,C){return x(v,y,w,_,b,E,M,C)?!0:p(v,y,w,_,b,E,M,C)}}else r=p}return RCe(this,e,t,r)}intersectsBox(e,t){return u1.set(e.min,e.max,t),u1.needsUpdate=!0,this.shapecast({intersectsBounds:i=>u1.intersectsBox(i),intersectsTriangle:i=>u1.intersectsTriangle(i)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,i={},r={},s=0,o=1/0){return(this.indirect?CCe:vCe)(this,e,t,i,r,s,o)}closestPointToPoint(e,t={},i=0,r=1/0){return eCe(this,e,t,i,r)}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(i=>{hi(0,new Float32Array(i),yH),e.union(yH)}),e}}const XY=1e-6,ICe=XY*.5,YY=Math.pow(10,-Math.log10(XY)),LCe=ICe*YY;function ml(n){return~~(n*YY+LCe)}function NCe(n){return`${ml(n.x)},${ml(n.y)}`}function vH(n){return`${ml(n.x)},${ml(n.y)},${ml(n.z)}`}function kCe(n){return`${ml(n.x)},${ml(n.y)},${ml(n.z)},${ml(n.w)}`}function OCe(n,e,t){t.direction.subVectors(e,n).normalize();const i=n.dot(t.direction);return t.origin.copy(n).addScaledVector(t.direction,-i),t}function qY(){return typeof SharedArrayBuffer<"u"}function DCe(n){if(n.buffer instanceof SharedArrayBuffer)return n;const e=n.constructor,t=n.buffer,i=new SharedArrayBuffer(t.byteLength),r=new Uint8Array(t);return new Uint8Array(i).set(r,0),new e(i)}function FCe(n,e=ArrayBuffer){return n>65535?new Uint32Array(new e(4*n)):new Uint16Array(new e(2*n))}function UCe(n,e){if(!n.index){const t=n.attributes.position.count,i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r=FCe(t,i);n.setIndex(new Mn(r,1));for(let s=0;s<t;s++)r[s]=s}}function BCe(n){return n.index?n.index.count:n.attributes.position.count}function j3(n){return BCe(n)/3}const zCe=1e-8,HCe=new V;function WCe(n){return~~(n/3)}function VCe(n){return n%3}function xH(n,e){return n.start-e.start}function _H(n,e){return HCe.subVectors(e,n.origin).dot(n.direction)}function GCe(n,e,t,i=zCe){n.sort(xH),e.sort(xH);for(let a=0;a<n.length;a++){const l=n[a];for(let c=0;c<e.length;c++){const u=e[c];if(!(u.start>l.end)){if(l.end<u.start||u.end<l.start)continue;if(l.start<=u.start&&l.end>=u.end)s(u.end,l.end)||n.splice(a+1,0,{start:u.end,end:l.end,index:l.index}),l.end=u.start,u.start=0,u.end=0;else if(l.start>=u.start&&l.end<=u.end)s(l.end,u.end)||e.splice(c+1,0,{start:l.end,end:u.end,index:u.index}),u.end=l.start,l.start=0,l.end=0;else if(l.start<=u.start&&l.end<=u.end){const h=l.end;l.end=u.start,u.start=h}else if(l.start>=u.start&&l.end>=u.end){const h=u.end;u.end=l.start,l.start=h}else throw new Error}if(t.has(l.index)||t.set(l.index,[]),t.has(u.index)||t.set(u.index,[]),t.get(l.index).push(u.index),t.get(u.index).push(l.index),o(u)&&(e.splice(c,1),c--),o(l)){n.splice(a,1),a--;break}}}r(n),r(e);function r(a){for(let l=0;l<a.length;l++)o(a[l])&&(a.splice(l,1),l--)}function s(a,l){return Math.abs(l-a)<i}function o(a){return Math.abs(a.end-a.start)<i}}const wH=1e-5,bH=1e-4;class jCe{constructor(){this._rays=[]}addRay(e){this._rays.push(e)}findClosestRay(e){const t=this._rays,i=e.clone();i.direction.multiplyScalar(-1);let r=1/0,s=null;for(let l=0,c=t.length;l<c;l++){const u=t[l];if(o(u,e)&&o(u,i))continue;const h=a(u,e),d=a(u,i),f=Math.min(h,d);f<r&&(r=f,s=u)}return s;function o(l,c){const u=l.origin.distanceTo(c.origin)>wH;return l.direction.angleTo(c.direction)>bH||u}function a(l,c){const u=l.origin.distanceTo(c.origin),h=l.direction.angleTo(c.direction);return u/wH+h/bH}}}const xP=new V,_P=new V,h1=new Da;function $Ce(n,e,t){const i=n.attributes,r=n.index,s=i.position,o=new Map,a=new Map,l=Array.from(e),c=new jCe;for(let u=0,h=l.length;u<h;u++){const d=l[u],f=WCe(d),p=VCe(d);let x=3*f+p,v=3*f+(p+1)%3;r&&(x=r.getX(x),v=r.getX(v)),xP.fromBufferAttribute(s,x),_P.fromBufferAttribute(s,v),OCe(xP,_P,h1);let y,w=c.findClosestRay(h1);w===null&&(w=h1.clone(),c.addRay(w)),a.has(w)||a.set(w,{forward:[],reverse:[],ray:w}),y=a.get(w);let _=_H(w,xP),b=_H(w,_P);_>b&&([_,b]=[b,_]),h1.direction.dot(w.direction)<0?y.reverse.push({start:_,end:b,index:d}):y.forward.push({start:_,end:b,index:d})}return a.forEach(({forward:u,reverse:h},d)=>{GCe(u,h,o,t),u.length===0&&h.length===0&&a.delete(d)}),{disjointConnectivityMap:o,fragmentMap:a}}const XCe=new Ue,wP=new V,YCe=new jt,bP=["","",""];class qCe{constructor(e=null){this.data=null,this.disjointConnections=null,this.unmatchedDisjointEdges=null,this.unmatchedEdges=-1,this.matchedEdges=-1,this.useDrawRange=!0,this.useAllAttributes=!1,this.matchDisjointEdges=!1,this.degenerateEpsilon=1e-8,e&&this.updateFrom(e)}getSiblingTriangleIndex(e,t){const i=this.data[e*3+t];return i===-1?-1:~~(i/3)}getSiblingEdgeIndex(e,t){const i=this.data[e*3+t];return i===-1?-1:i%3}getDisjointSiblingTriangleIndices(e,t){const i=e*3+t,r=this.disjointConnections.get(i);return r?r.map(s=>~~(s/3)):[]}getDisjointSiblingEdgeIndices(e,t){const i=e*3+t,r=this.disjointConnections.get(i);return r?r.map(s=>s%3):[]}isFullyConnected(){return this.unmatchedEdges===0}updateFrom(e){const{useAllAttributes:t,useDrawRange:i,matchDisjointEdges:r,degenerateEpsilon:s}=this,o=t?_:w,a=new Map,{attributes:l}=e,c=t?Object.keys(l):null,u=e.index,h=l.position;let d=j3(e);const f=d;let p=0;i&&(p=e.drawRange.start,e.drawRange.count!==1/0&&(d=~~(e.drawRange.count/3)));let x=this.data;(!x||x.length<3*f)&&(x=new Int32Array(3*f)),x.fill(-1);let v=0,y=new Set;for(let b=p,E=d*3+p;b<E;b+=3){const M=b;for(let C=0;C<3;C++){let P=M+C;u&&(P=u.getX(P)),bP[C]=o(P)}for(let C=0;C<3;C++){const P=(C+1)%3,T=bP[C],I=bP[P],U=`${I}_${T}`;if(a.has(U)){const j=M+C,B=a.get(U);x[j]=B,x[B]=j,a.delete(U),v+=2,y.delete(B)}else{const j=`${T}_${I}`,B=M+C;a.set(j,B),y.add(B)}}}if(r){const{fragmentMap:b,disjointConnectivityMap:E}=$Ce(e,y,s);y.clear(),b.forEach(({forward:M,reverse:C})=>{M.forEach(({index:P})=>y.add(P)),C.forEach(({index:P})=>y.add(P))}),this.unmatchedDisjointEdges=b,this.disjointConnections=E,v=d*3-y.size}this.matchedEdges=v,this.unmatchedEdges=y.size,this.data=x;function w(b){return wP.fromBufferAttribute(h,b),vH(wP)}function _(b){let E="";for(let M=0,C=c.length;M<C;M++){const P=l[c[M]];let T;switch(P.itemSize){case 1:T=ml(P.getX(b));break;case 2:T=NCe(XCe.fromBufferAttribute(P,b));break;case 3:T=vH(wP.fromBufferAttribute(P,b));break;case 4:T=kCe(YCe.fromBufferAttribute(P,b));break}E!==""&&(E+="|"),E+=T}return E}}}class p0 extends oi{constructor(...e){super(...e),this.isBrush=!0,this._previousMatrix=new dt,this._previousMatrix.elements.fill(0)}markUpdated(){this._previousMatrix.copy(this.matrix)}isDirty(){const{matrix:e,_previousMatrix:t}=this,i=e.elements,r=t.elements;for(let s=0;s<16;s++)if(i[s]!==r[s])return!0;return!1}prepareGeometry(){const e=this.geometry,t=e.attributes,i=qY();if(i)for(const r in t){const s=t[r];if(s.isInterleavedBufferAttribute)throw new Error("Brush: InterleavedBufferAttributes are not supported.");s.array=DCe(s.array)}if(e.boundsTree||(UCe(e,{useSharedArrayBuffer:i}),e.boundsTree=new G3(e,{maxLeafTris:3,indirect:!0,useSharedArrayBuffer:i})),e.halfEdges||(e.halfEdges=new qCe(e)),!e.groupIndices){const r=j3(e),s=new Uint16Array(r),o=e.groups;for(let a=0,l=o.length;a<l;a++){const{start:c,count:u}=o[a];for(let h=c/3,d=(c+u)/3;h<d;h++)s[h]=a}e.groupIndices=s}}disposeCacheData(){const{geometry:e}=this;e.halfEdges=null,e.boundsTree=null,e.groupIndices=null}}const ZCe=1e-14,SP=new V,SH=new V,EH=new V;function mu(n,e=ZCe){SP.subVectors(n.b,n.a),SH.subVectors(n.c,n.a),EH.subVectors(n.b,n.c);const t=SP.angleTo(SH),i=SP.angleTo(EH),r=Math.PI-t-i;return Math.abs(t)<e||Math.abs(i)<e||Math.abs(r)<e||n.a.distanceToSquared(n.b)<e||n.a.distanceToSquared(n.c)<e||n.b.distanceToSquared(n.c)<e}const EP=1e-10,My=1e-10,KCe=1e-10,Kl=new As,Ci=new As,Ql=new V,MP=new V,MH=new V,d1=new xs,TP=new Go;class QCe{constructor(){this._pool=[],this._index=0}getTriangle(){return this._index>=this._pool.length&&this._pool.push(new Bn),this._pool[this._index++]}clear(){this._index=0}reset(){this._pool.length=0,this._index=0}}class JCe{constructor(){this.trianglePool=new QCe,this.triangles=[],this.normal=new V,this.coplanarTriangleUsed=!1}initialize(e){this.reset();const{triangles:t,trianglePool:i,normal:r}=this;if(Array.isArray(e))for(let s=0,o=e.length;s<o;s++){const a=e[s];if(s===0)a.getNormal(r);else if(Math.abs(1-a.getNormal(Ql).dot(r))>EP)throw new Error("Triangle Splitter: Cannot initialize with triangles that have different normals.");const l=i.getTriangle();l.copy(a),t.push(l)}else{e.getNormal(r);const s=i.getTriangle();s.copy(e),t.push(s)}}splitByTriangle(e){const{normal:t,triangles:i}=this;if(e.getNormal(MP).normalize(),Math.abs(1-Math.abs(MP.dot(t)))<KCe){this.coplanarTriangleUsed=!0;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.coplanarCount=0}const r=[e.a,e.b,e.c];for(let s=0;s<3;s++){const o=(s+1)%3,a=r[s],l=r[o];Ql.subVectors(l,a).normalize(),MH.crossVectors(MP,Ql),d1.setFromNormalAndCoplanarPoint(MH,a),this.splitByPlane(d1,e)}}else e.getPlane(d1),this.splitByPlane(d1,e)}splitByPlane(e,t){const{triangles:i,trianglePool:r}=this;TP.copy(t),TP.needsUpdate=!0;for(let s=0,o=i.length;s<o;s++){const a=i[s];if(!TP.intersectsTriangle(a,Kl,!0))continue;const{a:l,b:c,c:u}=a;let h=0,d=-1,f=!1,p=[],x=[];const v=[l,c,u];for(let y=0;y<3;y++){const w=(y+1)%3;Kl.start.copy(v[y]),Kl.end.copy(v[w]);const _=e.distanceToPoint(Kl.start),b=e.distanceToPoint(Kl.end);if(Math.abs(_)<My&&Math.abs(b)<My){f=!0;break}if(_>0?p.push(y):x.push(y),Math.abs(_)<My)continue;let E=!!e.intersectLine(Kl,Ql);!E&&Math.abs(b)<My&&(Ql.copy(Kl.end),E=!0),E&&!(Ql.distanceTo(Kl.start)<EP)&&(Ql.distanceTo(Kl.end)<EP&&(d=y),h===0?Ci.start.copy(Ql):Ci.end.copy(Ql),h++)}if(!f&&h===2&&Ci.distance()>My)if(d!==-1){d=(d+1)%3;let y=0;y===d&&(y=(y+1)%3);let w=y+1;w===d&&(w=(w+1)%3);const _=r.getTriangle();_.a.copy(v[w]),_.b.copy(Ci.end),_.c.copy(Ci.start),mu(_)||i.push(_),a.a.copy(v[y]),a.b.copy(Ci.start),a.c.copy(Ci.end),mu(a)&&(i.splice(s,1),s--,o--)}else{const y=p.length>=2?x[0]:p[0];if(y===0){let M=Ci.start;Ci.start=Ci.end,Ci.end=M}const w=(y+1)%3,_=(y+2)%3,b=r.getTriangle(),E=r.getTriangle();v[w].distanceToSquared(Ci.start)<v[_].distanceToSquared(Ci.end)?(b.a.copy(v[w]),b.b.copy(Ci.start),b.c.copy(Ci.end),E.a.copy(v[w]),E.b.copy(v[_]),E.c.copy(Ci.start)):(b.a.copy(v[_]),b.b.copy(Ci.start),b.c.copy(Ci.end),E.a.copy(v[w]),E.b.copy(v[_]),E.c.copy(Ci.end)),a.a.copy(v[y]),a.b.copy(Ci.end),a.c.copy(Ci.start),mu(b)||i.push(b),mu(E)||i.push(E),mu(a)&&(i.splice(s,1),s--,o--)}}}reset(){this.triangles.length=0,this.trianglePool.clear(),this.coplanarTriangleUsed=!1}}function ePe(n){return n=~~n,n+4-n%4}class TH{constructor(e,t=500){this.expansionFactor=1.5,this.type=e,this.length=0,this.array=null,this.setSize(t)}setType(e){if(this.length!==0)throw new Error("TypeBackedArray: Cannot change the type while there is used data in the buffer.");const t=this.array.buffer;this.array=new e(t),this.type=e}setSize(e){if(this.array&&e===this.array.length)return;const t=this.type,i=qY()?SharedArrayBuffer:ArrayBuffer,r=new t(new i(ePe(e*t.BYTES_PER_ELEMENT)));this.array&&r.set(this.array,0),this.array=r}expand(){const{array:e,expansionFactor:t}=this;this.setSize(e.length*t)}push(...e){let{array:t,length:i}=this;i+e.length>t.length&&(this.expand(),t=this.array);for(let r=0,s=e.length;r<s;r++)t[i+r]=e[r];this.length+=e.length}clear(){this.length=0}}class tPe{constructor(){this.groupAttributes=[{}],this.groupCount=0}getType(e){return this.groupAttributes[0][e].type}getItemSize(e){return this.groupAttributes[0][e].itemSize}getNormalized(e){return this.groupAttributes[0][e].normalized}getCount(e){if(this.groupCount<=e)return 0;const t=this.getGroupAttrArray("position",e);return t.length/t.itemSize}getTotalLength(e){const{groupCount:t,groupAttributes:i}=this;let r=0;for(let s=0;s<t;s++){const o=i[s];r+=o[e].length}return r}getGroupAttrSet(e=0){const{groupAttributes:t}=this;if(t[e])return this.groupCount=Math.max(this.groupCount,e+1),t[e];const i=t[0];for(this.groupCount=Math.max(this.groupCount,e+1);e>=t.length;){const r={};t.push(r);for(const s in i){const o=i[s],a=new TH(o.type);a.itemSize=o.itemSize,a.normalized=o.normalized,r[s]=a}}return t[e]}getGroupAttrArray(e,t=0){const{groupAttributes:i}=this;if(!i[0][e])throw new Error(`TypedAttributeData: Attribute with "${e}" has not been initialized`);return this.getGroupAttrSet(t)[e]}initializeArray(e,t,i,r){const{groupAttributes:s}=this,a=s[0][e];if(a){if(a.type!==t)for(let l=0,c=s.length;l<c;l++){const u=s[l][e];u.setType(t),u.itemSize=i,u.normalized=r}}else for(let l=0,c=s.length;l<c;l++){const u=new TH(t);u.itemSize=i,u.normalized=r,s[l][e]=u}}clear(){this.groupCount=0;const{groupAttributes:e}=this;e.forEach(t=>{for(const i in t)t[i].clear()})}delete(e){this.groupAttributes.forEach(t=>{delete t[e]})}reset(){this.groupAttributes=[],this.groupCount=0}}class AH{constructor(){this.intersectionSet={},this.ids=[]}add(e,t){const{intersectionSet:i,ids:r}=this;i[e]||(i[e]=[],r.push(e)),i[e].push(t)}}const $3=0,ZY=1,KY=2,QY=3,JY=4,eq=5,tq=6,bo=new Da,CH=new dt,ts=new Bn,Jl=new V,PH=new jt,RH=new jt,IH=new jt,AP=new jt,f1=new jt,p1=new jt,LH=new As,CP=new V,PP=1e-8,nPe=1e-15,id=-1,rd=1,ib=-2,rb=2,vv=0,Ph=1,X3=2,iPe=1e-14;let sb=null;function NH(n){sb=n}function nq(n,e){n.getMidpoint(bo.origin),n.getNormal(bo.direction);const t=e.raycastFirst(bo,cr);return!!(t&&bo.direction.dot(t.face.normal)>0)?id:rd}function rPe(n,e){function t(){return Math.random()-.5}n.getNormal(CP),bo.direction.copy(CP),n.getMidpoint(bo.origin);const i=3;let r=0,s=1/0;for(let o=0;o<i;o++){bo.direction.x+=t()*PP,bo.direction.y+=t()*PP,bo.direction.z+=t()*PP,bo.direction.multiplyScalar(-1);const a=e.raycastFirst(bo,cr);if(!!(a&&bo.direction.dot(a.face.normal)>0)&&r++,a!==null&&(s=Math.min(s,a.distance)),s<=nPe)return a.face.normal.dot(CP)>0?rb:ib;if(r/i>.5||(o-r+1)/i>.5)break}return r/i>.5?id:rd}function sPe(n,e){const t=new AH,i=new AH;return CH.copy(n.matrixWorld).invert().multiply(e.matrixWorld),n.geometry.boundsTree.bvhcast(e.geometry.boundsTree,CH,{intersectsTriangles(r,s,o,a){if(!mu(r)&&!mu(s)){let l=r.intersectsTriangle(s,LH,!0);if(!l){const c=r.plane,u=s.plane,h=c.normal,d=u.normal;h.dot(d)===1&&Math.abs(c.constant-u.constant)<iPe&&(l=!0)}if(l){let c=n.geometry.boundsTree.resolveTriangleIndex(o),u=e.geometry.boundsTree.resolveTriangleIndex(a);t.add(c,u),i.add(u,c),sb&&(sb.addEdge(LH),sb.addIntersectingTriangles(o,r,a,s))}}return!1}}),{aIntersections:t,bIntersections:i}}function oPe(n,e,t,i,r,s,o=!1){const a=t.attributes,l=t.index,c=n*3,u=l.getX(c+0),h=l.getX(c+1),d=l.getX(c+2);for(const f in s){const p=a[f],x=s[f];if(!(f in a))throw new Error(`CSG Operations: Attribute ${f} not available on geometry.`);const v=p.itemSize;f==="position"?(ts.a.fromBufferAttribute(p,u).applyMatrix4(i),ts.b.fromBufferAttribute(p,h).applyMatrix4(i),ts.c.fromBufferAttribute(p,d).applyMatrix4(i),RP(ts.a,ts.b,ts.c,e,3,x,o)):f==="normal"?(ts.a.fromBufferAttribute(p,u).applyNormalMatrix(r),ts.b.fromBufferAttribute(p,h).applyNormalMatrix(r),ts.c.fromBufferAttribute(p,d).applyNormalMatrix(r),o&&(ts.a.multiplyScalar(-1),ts.b.multiplyScalar(-1),ts.c.multiplyScalar(-1)),RP(ts.a,ts.b,ts.c,e,3,x,o,!0)):(PH.fromBufferAttribute(p,u),RH.fromBufferAttribute(p,h),IH.fromBufferAttribute(p,d),RP(PH,RH,IH,e,v,x,o))}}function aPe(n,e,t,i,r,s,o,a=!1){IP(n,i,r,s,o,a),IP(a?t:e,i,r,s,o,a),IP(a?e:t,i,r,s,o,a)}function iq(n,e,t=!1){switch(n){case $3:if(e===rd||e===rb&&!t)return Ph;break;case ZY:if(t){if(e===id)return vv}else if(e===rd||e===ib)return Ph;break;case KY:if(t){if(e===rd||e===ib)return Ph}else if(e===id)return vv;break;case JY:if(e===id)return vv;if(e===rd)return Ph;break;case QY:if(e===id||e===rb&&!t)return Ph;break;case eq:if(!t&&(e===rd||e===ib))return Ph;break;case tq:if(!t&&(e===id||e===rb))return Ph;break;default:throw new Error(`Unrecognized CSG operation enum "${n}".`)}return X3}function RP(n,e,t,i,r,s,o=!1,a=!1){const l=c=>{s.push(c.x),r>1&&s.push(c.y),r>2&&s.push(c.z),r>3&&s.push(c.w)};AP.set(0,0,0,0).addScaledVector(n,i.a.x).addScaledVector(e,i.a.y).addScaledVector(t,i.a.z),f1.set(0,0,0,0).addScaledVector(n,i.b.x).addScaledVector(e,i.b.y).addScaledVector(t,i.b.z),p1.set(0,0,0,0).addScaledVector(n,i.c.x).addScaledVector(e,i.c.y).addScaledVector(t,i.c.z),a&&(AP.normalize(),f1.normalize(),p1.normalize()),l(AP),o?(l(p1),l(f1)):(l(f1),l(p1))}function IP(n,e,t,i,r,s=!1){for(const o in r){const a=e[o],l=r[o];if(!(o in e))throw new Error(`CSG Operations: Attribute ${o} no available on geometry.`);const c=a.itemSize;o==="position"?(Jl.fromBufferAttribute(a,n).applyMatrix4(t),l.push(Jl.x,Jl.y,Jl.z)):o==="normal"?(Jl.fromBufferAttribute(a,n).applyNormalMatrix(i),s&&Jl.multiplyScalar(-1),l.push(Jl.x,Jl.y,Jl.z)):(l.push(a.getX(n)),c>1&&l.push(a.getY(n)),c>2&&l.push(a.getZ(n)),c>3&&l.push(a.getW(n)))}}class lPe{constructor(e){this.triangle=new Bn().copy(e),this.intersects={}}addTriangle(e,t){this.intersects[e]=new Bn().copy(t)}getIntersectArray(){const e=[],{intersects:t}=this;for(const i in t)e.push(t[i]);return e}}class kH{constructor(){this.data={}}addTriangleIntersection(e,t,i,r){const{data:s}=this;s[e]||(s[e]=new lPe(t)),s[e].addTriangle(i,r)}getTrianglesAsArray(e=null){const{data:t}=this,i=[];if(e!==null)e in t&&i.push(t[e].triangle);else for(const r in t)i.push(t[r].triangle);return i}getTriangleIndices(){return Object.keys(this.data).map(e=>parseInt(e))}getIntersectionIndices(e){const{data:t}=this;return t[e]?Object.keys(t[e].intersects).map(i=>parseInt(i)):[]}getIntersectionsAsArray(e=null,t=null){const{data:i}=this,r=new Set,s=[],o=a=>{if(i[a])if(t!==null)i[a].intersects[t]&&s.push(i[a].intersects[t]);else{const l=i[a].intersects;for(const c in l)r.has(c)||(r.add(c),s.push(l[c]))}};if(e!==null)o(e);else for(const a in i)o(a);return s}reset(){this.data={}}}class cPe{constructor(){this.enabled=!1,this.triangleIntersectsA=new kH,this.triangleIntersectsB=new kH,this.intersectionEdges=[]}addIntersectingTriangles(e,t,i,r){const{triangleIntersectsA:s,triangleIntersectsB:o}=this;s.addTriangleIntersection(e,t,i,r),o.addTriangleIntersection(i,r,e,t)}addEdge(e){this.intersectionEdges.push(e.clone())}reset(){this.triangleIntersectsA.reset(),this.triangleIntersectsB.reset(),this.intersectionEdges=[]}init(){this.enabled&&(this.reset(),NH(this))}complete(){this.enabled&&NH(null)}}const Su=new dt,ES=new Yt,Rh=new Bn,m1=new Bn,Qc=new Bn,g1=new Bn,_a=[],Ld=[];function uPe(n){for(const e of n)return e}function hPe(n,e,t,i,r,s={}){const{useGroups:o=!0}=s,{aIntersections:a,bIntersections:l}=sPe(n,e),c=[];let u=null,h;return h=o?0:-1,OH(n,e,a,t,!1,i,r,h),DH(n,e,a,t,!1,r,h),t.findIndex(f=>f!==tq&&f!==eq)!==-1&&(h=o?n.geometry.groups.length||1:-1,OH(e,n,l,t,!0,i,r,h),DH(e,n,l,t,!0,r,h)),_a.length=0,Ld.length=0,{groups:c,materials:u}}function OH(n,e,t,i,r,s,o,a=0){const l=n.matrixWorld.determinant()<0;Su.copy(e.matrixWorld).invert().multiply(n.matrixWorld),ES.getNormalMatrix(n.matrixWorld).multiplyScalar(l?-1:1);const c=n.geometry.groupIndices,u=n.geometry.index,h=n.geometry.attributes.position,d=e.geometry.boundsTree,f=e.geometry.index,p=e.geometry.attributes.position,x=t.ids,v=t.intersectionSet;for(let y=0,w=x.length;y<w;y++){const _=x[y],b=a===-1?0:c[_]+a,E=3*_,M=u.getX(E+0),C=u.getX(E+1),P=u.getX(E+2);Rh.a.fromBufferAttribute(h,M).applyMatrix4(Su),Rh.b.fromBufferAttribute(h,C).applyMatrix4(Su),Rh.c.fromBufferAttribute(h,P).applyMatrix4(Su),s.reset(),s.initialize(Rh);const T=v[_];for(let U=0,j=T.length;U<j;U++){const B=3*T[U],z=f.getX(B+0),$=f.getX(B+1),H=f.getX(B+2);m1.a.fromBufferAttribute(p,z),m1.b.fromBufferAttribute(p,$),m1.c.fromBufferAttribute(p,H),s.splitByTriangle(m1)}const I=s.triangles;for(let U=0,j=I.length;U<j;U++){const B=I[U],z=s.coplanarTriangleUsed?rPe(B,d):nq(B,d);_a.length=0,Ld.length=0;for(let $=0,H=i.length;$<H;$++){const Z=iq(i[$],z,r);Z!==X3&&(Ld.push(Z),_a.push(o[$].getGroupAttrSet(b)))}if(_a.length!==0){Rh.getBarycoord(B.a,g1.a),Rh.getBarycoord(B.b,g1.b),Rh.getBarycoord(B.c,g1.c);for(let $=0,H=_a.length;$<H;$++){const Z=_a[$],W=Ld[$]===vv;oPe(_,g1,n.geometry,n.matrixWorld,ES,Z,l!==W)}}}}return x.length}function DH(n,e,t,i,r,s,o=0){const a=n.matrixWorld.determinant()<0;Su.copy(e.matrixWorld).invert().multiply(n.matrixWorld),ES.getNormalMatrix(n.matrixWorld).multiplyScalar(a?-1:1);const l=e.geometry.boundsTree,c=n.geometry.groupIndices,u=n.geometry.index,h=n.geometry.attributes,d=h.position,f=[],p=n.geometry.halfEdges,x=new Set,v=j3(n.geometry);for(let y=0,w=v;y<w;y++)y in t.intersectionSet||x.add(y);for(;x.size>0;){const y=uPe(x);x.delete(y),f.push(y);const w=3*y,_=u.getX(w+0),b=u.getX(w+1),E=u.getX(w+2);Qc.a.fromBufferAttribute(d,_).applyMatrix4(Su),Qc.b.fromBufferAttribute(d,b).applyMatrix4(Su),Qc.c.fromBufferAttribute(d,E).applyMatrix4(Su);const M=nq(Qc,l);Ld.length=0,_a.length=0;for(let C=0,P=i.length;C<P;C++){const T=iq(i[C],M,r);T!==X3&&(Ld.push(T),_a.push(s[C]))}for(;f.length>0;){const C=f.pop();for(let P=0;P<3;P++){const T=p.getSiblingTriangleIndex(C,P);T!==-1&&x.has(T)&&(f.push(T),x.delete(T))}if(_a.length!==0){const P=3*C,T=u.getX(P+0),I=u.getX(P+1),U=u.getX(P+2),j=o===-1?0:c[C]+o;if(Qc.a.fromBufferAttribute(d,T),Qc.b.fromBufferAttribute(d,I),Qc.c.fromBufferAttribute(d,U),!mu(Qc))for(let B=0,z=_a.length;B<z;B++){const $=Ld[B],H=_a[B].getGroupAttrSet(j),Z=$===vv;aPe(T,I,U,h,n.matrixWorld,ES,H,Z!==a)}}}}}function dPe(n){for(let e=0;e<n.length-1;e++){const t=n[e],i=n[e+1];if(t.materialIndex===i.materialIndex){const r=t.start,s=i.start+i.count;i.start=r,i.count=s-r,n.splice(e,1),e--}}}function fPe(n,e,t,i){t.clear();const r=n.attributes;for(let s=0,o=i.length;s<o;s++){const a=i[s],l=r[a];t.initializeArray(a,l.array.constructor,l.itemSize,l.normalized)}for(const s in t.attributes)i.includes(s)||t.delete(s);for(const s in e.attributes)i.includes(s)||(e.deleteAttribute(s),e.dispose())}function pPe(n,e,t){let i=!1,r=-1;const s=n.attributes,o=e.groupAttributes[0];for(const l in o){const c=e.getTotalLength(l),u=e.getType(l),h=e.getItemSize(l),d=e.getNormalized(l);let f=s[l];(!f||f.array.length<c)&&(f=new Mn(new u(c),h,d),n.setAttribute(l,f),i=!0);let p=0;for(let x=0,v=Math.min(t.length,e.groupCount);x<v;x++){const y=t[x].index,{array:w,type:_,length:b}=e.groupAttributes[y][l],E=new _(w.buffer,0,b);f.array.set(E,p),p+=E.length}f.needsUpdate=!0,r=c/f.itemSize}if(n.index){const l=n.index.array;if(l.length<r)n.index=null,i=!0;else for(let c=0,u=l.length;c<u;c++)l[c]=c}let a=0;n.clearGroups();for(let l=0,c=Math.min(t.length,e.groupCount);l<c;l++){const{index:u,materialIndex:h}=t[l],d=e.getCount(u);d!==0&&(n.addGroup(a,d,h),a+=d)}n.setDrawRange(0,r),n.boundsTree=null,i&&n.dispose()}function FH(n,e){let t=e;return Array.isArray(e)||(t=[],n.forEach(i=>{t[i.materialIndex]=e})),t}class mPe{constructor(){this.triangleSplitter=new JCe,this.attributeData=[],this.attributes=["position","uv","normal"],this.useGroups=!0,this.consolidateGroups=!0,this.debug=new cPe}getGroupRanges(e){return!this.useGroups||e.groups.length===0?[{start:0,count:1/0,materialIndex:0}]:e.groups.map(t=>({...t}))}evaluate(e,t,i,r=new p0){let s=!0;if(Array.isArray(i)||(i=[i]),Array.isArray(r)||(r=[r],s=!1),r.length!==i.length)throw new Error("Evaluator: operations and target array passed as different sizes.");e.prepareGeometry(),t.prepareGeometry();const{triangleSplitter:o,attributeData:a,attributes:l,useGroups:c,consolidateGroups:u,debug:h}=this;for(;a.length<r.length;)a.push(new tPe);r.forEach((y,w)=>{fPe(e.geometry,y.geometry,a[w],l)}),h.init(),hPe(e,t,i,o,a,{useGroups:c}),h.complete();const d=this.getGroupRanges(e.geometry),f=FH(d,e.material),p=this.getGroupRanges(t.geometry),x=FH(p,t.material);p.forEach(y=>y.materialIndex+=f.length);let v=[...d,...p].map((y,w)=>({...y,index:w}));if(c){const y=[...f,...x];u&&(v=v.map(_=>{const b=y[_.materialIndex];return _.materialIndex=y.indexOf(b),_}).sort((_,b)=>_.materialIndex-b.materialIndex));const w=[];for(let _=0,b=y.length;_<b;_++){let E=!1;for(let M=0,C=v.length;M<C;M++){const P=v[M];P.materialIndex===_&&(E=!0,P.materialIndex=w.length)}E&&w.push(y[_])}r.forEach(_=>{_.material=w})}else v=[{start:0,count:1/0,index:0,materialIndex:0}],r.forEach(y=>{y.material=f[0]});return r.forEach((y,w)=>{const _=y.geometry;pPe(_,a[w],v),u&&dPe(_.groups)}),s?r:r[0]}evaluateHierarchy(e,t=new p0){e.updateMatrixWorld(!0);const i=(s,o)=>{const a=s.children;for(let l=0,c=a.length;l<c;l++){const u=a[l];u.isOperationGroup?i(u,o):o(u)}},r=s=>{const o=s.children;let a=!1;for(let c=0,u=o.length;c<u;c++){const h=o[c];a=r(h)||a}const l=s.isDirty();if(l&&s.markUpdated(),a&&!s.isOperationGroup){let c;return i(s,u=>{c?c=this.evaluate(c,u,u.operation):c=this.evaluate(s,u,u.operation)}),s._cachedGeometry=c.geometry,s._cachedMaterials=c.material,!0}else return a||l};return r(e),t.geometry=e._cachedGeometry,t.material=e._cachedMaterials,t}reset(){this.triangleSplitter.reset()}}const gPe={subtraction:ZY,reverseSubtraction:KY,addition:$3,difference:JY,intersection:QY};function yPe(n){n.dispose(),n.attributes={},n.groups=[],n.boundsTree=n.index=n.boundingBox=n.boundingSphere=null,n.drawRange={start:0,count:1/0}}function UH(n){let e=null;return n instanceof p0?(n.updateMatrixWorld(),e=n):n.traverse(t=>{t.updateMatrixWorld(),!e&&t instanceof p0&&(e=t)}),e}const rq=R.createContext(null),Y3=R.forwardRef(({children:n,computeVertexNormals:e=!1,useGroups:t=!1,showOperations:i=!1},r)=>{const s=R.useRef(null),o=R.useRef(null),a=R.useMemo(()=>Object.assign(new mPe,{useGroups:t}),[t]),l=R.useCallback(()=>{try{const f=o.current.children.slice();if(f.length>0){yPe(s.current),o.current.matrixWorld.identity();let p=UH(f.shift());if(p){for(var u,h,d;f.length;){const x=UH(f.shift());x&&(p=a.evaluate(p,x,gPe[x.operator]||$3))}s.current.boundsTree=p.geometry.boundsTree,s.current.index=p.geometry.index,s.current.attributes=p.geometry.attributes,s.current.groups=p.geometry.groups,s.current.drawRange=p.geometry.drawRange,a.useGroups&&(u=s.current)!=null&&(h=u.__r3f)!=null&&(d=h.parent)!=null&&d.material&&(s.current.__r3f.parent.material=p.material),e&&s.current.computeVertexNormals()}}}catch{}},[e,a]),c=R.useMemo(()=>({computeVertexNormals:e,showOperations:i,useGroups:t,update:l}),[e,i,t]);return R.useLayoutEffect(()=>void l()),R.useImperativeHandle(r,()=>({geometry:s.current,operations:o.current,...c}),[c]),R.createElement(R.Fragment,null,R.createElement("group",{matrixAutoUpdate:!1,ref:o},R.createElement(rq.Provider,{value:c},n)),R.createElement("bufferGeometry",{ref:s}))}),hM=R.forwardRef(({showOperation:n=!1,operator:e="addition",...t},i)=>{I3({Brush:p0});const{showOperations:r}=R.useContext(rq);return R.createElement("brush",Ta({operator:e,raycast:()=>null,visible:n||r,ref:i},t))}),jI=R.forwardRef((n,e)=>R.createElement(hM,Ta({ref:e,operator:"subtraction"},n))),sr=n=>n/100,vPe=/^[og]\s*(.+)?/,xPe=/^mtllib /,_Pe=/^usemtl /,wPe=/^usemap /,BH=/\s+/,zH=new V,LP=new V,HH=new V,WH=new V,vo=new V,y1=new ht;function bPe(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}const i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:o!==void 0?o.smooth:this.smooth,groupStart:o!==void 0?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&s.groupEnd===-1&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),s}},i&&i.name&&typeof i.clone=="function"){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseNormalIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseUVIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/2)*2},addVertex:function(e,t,i){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){const r=this.vertices,s=this.object.geometry.normals;zH.fromArray(r,e),LP.fromArray(r,t),HH.fromArray(r,i),vo.subVectors(HH,LP),WH.subVectors(zH,LP),vo.cross(WH),vo.normalize(),s.push(vo.x,vo.y,vo.z),s.push(vo.x,vo.y,vo.z),s.push(vo.x,vo.y,vo.z)},addColor:function(e,t,i){const r=this.colors,s=this.object.geometry.colors;r[e]!==void 0&&s.push(r[e+0],r[e+1],r[e+2]),r[t]!==void 0&&s.push(r[t+0],r[t+1],r[t+2]),r[i]!==void 0&&s.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[i+0],r[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,s,o,a,l,c){const u=this.vertices.length;let h=this.parseVertexIndex(e,u),d=this.parseVertexIndex(t,u),f=this.parseVertexIndex(i,u);if(this.addVertex(h,d,f),this.addColor(h,d,f),a!==void 0&&a!==""){const p=this.normals.length;h=this.parseNormalIndex(a,p),d=this.parseNormalIndex(l,p),f=this.parseNormalIndex(c,p),this.addNormal(h,d,f)}else this.addFaceNormal(h,d,f);if(r!==void 0&&r!==""){const p=this.uvs.length;h=this.parseUVIndex(r,p),d=this.parseUVIndex(s,p),f=this.parseUVIndex(o,p),this.addUV(h,d,f),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){const s=this.parseVertexIndex(e[i],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let s=0,o=e.length;s<o;s++)this.addVertexLine(this.parseVertexIndex(e[s],i));for(let s=0,o=t.length;s<o;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return n.startObject("",!1),n}class SPe extends Rr{constructor(e){super(e),this.materials=null}load(e,t,i,r){const s=this,o=new ls(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(a))}catch(l){r&&r(l),s.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new bPe;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const i=e.split(`
`);let r=[];for(let a=0,l=i.length;a<l;a++){const c=i[a].trimStart();if(c.length===0)continue;const u=c.charAt(0);if(u!=="#"){if(u==="v"){const h=c.split(BH);switch(h[0]){case"v":t.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(y1.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6])).convertSRGBToLinear(),t.colors.push(y1.r,y1.g,y1.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":t.uvs.push(parseFloat(h[1]),parseFloat(h[2]));break}}else if(u==="f"){const d=c.slice(1).trim().split(BH),f=[];for(let x=0,v=d.length;x<v;x++){const y=d[x];if(y.length>0){const w=y.split("/");f.push(w)}}const p=f[0];for(let x=1,v=f.length-1;x<v;x++){const y=f[x],w=f[x+1];t.addFace(p[0],y[0],w[0],p[1],y[1],w[1],p[2],y[2],w[2])}}else if(u==="l"){const h=c.substring(1).trim().split(" ");let d=[];const f=[];if(c.indexOf("/")===-1)d=h;else for(let p=0,x=h.length;p<x;p++){const v=h[p].split("/");v[0]!==""&&d.push(v[0]),v[1]!==""&&f.push(v[1])}t.addLineGeometry(d,f)}else if(u==="p"){const d=c.slice(1).trim().split(" ");t.addPointGeometry(d)}else if((r=vPe.exec(c))!==null){const h=(" "+r[0].slice(1).trim()).slice(1);t.startObject(h)}else if(_Pe.test(c))t.object.startMaterial(c.substring(7).trim(),t.materialLibraries);else if(xPe.test(c))t.materialLibraries.push(c.substring(7).trim());else if(!wPe.test(c)){if(u==="s"){if(r=c.split(" "),r.length>1){const d=r[1].trim().toLowerCase();t.object.smooth=d!=="0"&&d!=="off"}else t.object.smooth=!0;const h=t.object.currentMaterial();h&&(h.smooth=t.object.smooth)}else if(c==="\0")continue}}}t.finalize();const s=new gd;if(s.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let a=0,l=t.objects.length;a<l;a++){const c=t.objects[a],u=c.geometry,h=c.materials,d=u.type==="Line",f=u.type==="Points";let p=!1;if(u.vertices.length===0)continue;const x=new $t;x.setAttribute("position",new xt(u.vertices,3)),u.normals.length>0&&x.setAttribute("normal",new xt(u.normals,3)),u.colors.length>0&&(p=!0,x.setAttribute("color",new xt(u.colors,3))),u.hasUVIndices===!0&&x.setAttribute("uv",new xt(u.uvs,2));const v=[];for(let w=0,_=h.length;w<_;w++){const b=h[w],E=b.name+"_"+b.smooth+"_"+p;let M=t.materials[E];if(this.materials!==null){if(M=this.materials.create(b.name),d&&M&&!(M instanceof pr)){const C=new pr;Ki.prototype.copy.call(C,M),C.color.copy(M.color),M=C}else if(f&&M&&!(M instanceof yd)){const C=new yd({size:10,sizeAttenuation:!1});Ki.prototype.copy.call(C,M),C.color.copy(M.color),C.map=M.map,M=C}}M===void 0&&(d?M=new pr:f?M=new yd({size:1,sizeAttenuation:!1}):M=new rM,M.name=b.name,M.flatShading=!b.smooth,M.vertexColors=p,t.materials[E]=M),v.push(M)}let y;if(v.length>1){for(let w=0,_=h.length;w<_;w++){const b=h[w];x.addGroup(b.groupStart,b.groupCount,w)}d?y=new Vo(x,v):f?y=new fv(x,v):y=new oi(x,v)}else d?y=new Vo(x,v[0]):f?y=new fv(x,v[0]):y=new oi(x,v[0]);y.name=c.name,s.add(y)}else if(t.vertices.length>0){const a=new yd({size:1,sizeAttenuation:!1}),l=new $t;l.setAttribute("position",new xt(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(l.setAttribute("color",new xt(t.colors,3)),a.vertexColors=!0);const c=new fv(l,a);s.add(c)}return s}}class EPe extends Rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?_S.extractUrlBase(e):this.path,a=new ls(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){r&&r(c),s.manager.itemError(e)}},i,r)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const i=e.split(`
`);let r={};const s=/\s+/,o={};for(let l=0;l<i.length;l++){let c=i[l];if(c=c.trim(),c.length===0||c.charAt(0)==="#")continue;const u=c.indexOf(" ");let h=u>=0?c.substring(0,u):c;h=h.toLowerCase();let d=u>=0?c.substring(u+1):"";if(d=d.trim(),h==="newmtl")r={name:d},o[d]=r;else if(h==="ka"||h==="kd"||h==="ks"||h==="ke"){const f=d.split(s,3);r[h]=[parseFloat(f[0]),parseFloat(f[1]),parseFloat(f[2])]}else r[h]=d}const a=new MPe(this.resourcePath||t,this.materialOptions);return a.setCrossOrigin(this.crossOrigin),a.setManager(this.manager),a.setMaterials(o),a}}class MPe{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:Wo,this.wrap=this.options.wrap!==void 0?this.options.wrap:Im}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const i in e){const r=e[i],s={};t[i]=s;for(const o in r){let a=!0,l=r[o];const c=o.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&l[0]===0&&l[1]===0&&l[2]===0&&(a=!1);break}a&&(s[c]=l)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return this.materials[e]===void 0&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,i=this.materialsInfo[e],r={name:e,side:this.side};function s(a,l){return typeof l!="string"||l===""?"":/^https?:\/\//i.test(l)?l:a+l}function o(a,l){if(r[a])return;const c=t.getTextureParams(l,r),u=t.loadTexture(s(t.baseUrl,c.url));u.repeat.copy(c.scale),u.offset.copy(c.offset),u.wrapS=t.wrap,u.wrapT=t.wrap,(a==="map"||a==="emissiveMap")&&(u.colorSpace=Ht),r[a]=u}for(const a in i){const l=i[a];let c;if(l!=="")switch(a.toLowerCase()){case"kd":r.color=new ht().fromArray(l).convertSRGBToLinear();break;case"ks":r.specular=new ht().fromArray(l).convertSRGBToLinear();break;case"ke":r.emissive=new ht().fromArray(l).convertSRGBToLinear();break;case"map_kd":o("map",l);break;case"map_ks":o("specularMap",l);break;case"map_ke":o("emissiveMap",l);break;case"norm":o("normalMap",l);break;case"map_bump":case"bump":o("bumpMap",l);break;case"map_d":o("alphaMap",l),r.transparent=!0;break;case"ns":r.shininess=parseFloat(l);break;case"d":c=parseFloat(l),c<1&&(r.opacity=c,r.transparent=!0);break;case"tr":c=parseFloat(l),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(r.opacity=1-c,r.transparent=!0);break}}return this.materials[e]=new rM(r),this.materials[e]}getTextureParams(e,t){const i={scale:new Ue(1,1),offset:new Ue(0,0)},r=e.split(/\s+/);let s;return s=r.indexOf("-bm"),s>=0&&(t.bumpScale=parseFloat(r[s+1]),r.splice(s,2)),s=r.indexOf("-s"),s>=0&&(i.scale.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),s=r.indexOf("-o"),s>=0&&(i.offset.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),i.url=r.join(" ").trim(),i}loadTexture(e,t,i,r,s){const o=this.manager!==void 0?this.manager:_3;let a=o.getHandler(e);a===null&&(a=new GX(o)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin);const l=a.load(e,i,r,s);return t!==void 0&&(l.mapping=t),l}}function TPe({length:n,...e}){const t="/assets/furnitures/door/Textures/Door.001.png",i=Dm(EPe,"/assets/furnitures/door/DoorOBJ.mtl",a=>{const l=new q0;l.setURLModifier(c=>t),a.manager=l});let r=Dm(SPe,"/assets/furnitures/door/DoorOBJ.obj",a=>{i.preload(),a.setMaterials(i)});const s=0,o=-sr(Ak)/2;return k.jsx("primitive",{object:r,scale:[.11,.15,.12],position:[s,o,0],...e})}const APe=({length:n,position:e,rotation:t,...i})=>{const r=new Nl(sr(n),sr(Ak),1),[s,o,a]=e;return k.jsxs("group",{position:[s,o,a],rotation:t,children:[k.jsx(jI,{...i,children:k.jsx(Y3,{children:k.jsx(hM,{geometry:r})})}),k.jsx(TPe,{length:n})]})};new Nl(2,2,2);const CPe=({height:n,length:e,bottom:t,type:i,...r})=>{const s=new Nl(sr(e),sr(n),1);return k.jsx(jI,{...r,children:k.jsxs(Y3,{children:[k.jsx(hM,{geometry:s}),i===sS.Casement?k.jsx(jI,{geometry:s,scale:[.01,1,1]}):null]})})},v1=250;new nf(1,1,2,3);const PPe=(n,e,t)=>Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))+0,RPe=(n,e)=>({x:(n.x+e.x)/2,y:(n.y+e.y)/2}),IPe=(n,e)=>Math.atan2(e.y-n.y,e.x-n.x),LPe=({plan:n})=>{if(R.useRef(null),!!n)return k.jsx(k.Fragment,{children:n.wallNodes.map(({a:e,b:t,thickness:i,...r},s)=>{const o=PPe(e,t),a=RPe(e,t),l=IPe(e,t);return k.jsxs("mesh",{position:[a.x,sr(v1)/2,a.y],rotation:[0,-l,0],children:[k.jsx("meshStandardMaterial",{color:"gray"}),k.jsx(Y3,{children:k.jsxs(k.Fragment,{children:[k.jsx(hM,{name:"base",visible:!1,children:k.jsx("boxGeometry",{args:[o,sr(v1),i/100]})}),r.furnitures.map(c=>{if(c.element==="door"){const h=-(sr(r.length)/2-sr(c.x))+sr(c.length/2),d=0,f=(sr(v1)-sr(Ak))/2;return k.jsx(APe,{position:[h,-f,d],scale:1,rotation:[0,0,0],length:c.length})}return null}),r.furnitures.map(c=>{if(c.element==="window"){const h=-(sr(r.length)/2-sr(c.x))+sr(c.length/2),d=0,p=(sr(v1)-sr(c.height))*-.5+sr(c.bottom);return k.jsx(CAe,{activeAxes:[!1,!1,!1],children:k.jsx(CPe,{position:[h,p,d],scale:1,rotation:[0,0,0],length:c.length,height:c.height,bottom:c.bottom,type:c.type})})}return null})]})})]},r.uuid)})})},NPe=n=>{let e=0,t=0;const i=0;n.forEach(o=>{const a=(o.a.x+o.b.x)/2,l=(o.a.y+o.b.y)/2;e+=a,t+=l});const r=e/n.length,s=t/n.length;return i/n.length,new V(r,0,s)};function kPe(){const n=cs.Instance.getPlanForModel(),{setActiveMode:e}=Lt(),t=NPe(n.wallNodes);return k.jsx(k.Fragment,{children:n.wallNodes.length?k.jsxs(gTe,{style:{height:"100vh"},shadows:!0,camera:{position:[-60,40,15],fov:25},children:[k.jsx("axesHelper",{args:[10]}),k.jsx("gridHelper",{args:[200,200,16711680,"teal"]}),k.jsx(LPe,{plan:n}),k.jsx(PAe,{}),k.jsx(nAe,{makeDefault:!0,target:t})]}):k.jsxs("div",{className:"w-full h-screen flex justify-center items-center gap-2 text-xl text-gray-800",children:[k.jsx(Mse,{className:"text-blue-500"}),"Dodaj ściany w ",k.jsx(L0,{onClick:()=>e(bs.Edit),children:"Tryb edycji"})]})})}function OPe(){const{activeMode:n}=Lt();return k.jsxs(k.Fragment,{children:[k.jsx(H0e,{}),k.jsx(M0e,{}),k.jsx("div",{className:n===bs.Edit||n===bs.View2d?"":"absolute opacity-0 pointer-events-none",children:k.jsx(xve,{})}),n===bs.View3d?k.jsx(kPe,{}):null]})}var DPe=!1;function FPe(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function UPe(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var BPe=function(){function n(t){var i=this;this._insertTag=function(r){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,s),i.tags.push(r)},this.isSpeedy=t.speedy===void 0?!DPe:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(UPe(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=FPe(r);try{s.insertRule(i,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){var r;return(r=i.parentNode)==null?void 0:r.removeChild(i)}),this.tags=[],this.ctr=0},n}(),zr="-ms-",MS="-moz-",bn="-webkit-",sq="comm",q3="rule",Z3="decl",zPe="@import",oq="@keyframes",HPe="@layer",WPe=Math.abs,dM=String.fromCharCode,VPe=Object.assign;function GPe(n,e){return Sr(n,0)^45?(((e<<2^Sr(n,0))<<2^Sr(n,1))<<2^Sr(n,2))<<2^Sr(n,3):0}function aq(n){return n.trim()}function jPe(n,e){return(n=e.exec(n))?n[0]:n}function Sn(n,e,t){return n.replace(e,t)}function $I(n,e){return n.indexOf(e)}function Sr(n,e){return n.charCodeAt(e)|0}function m0(n,e,t){return n.slice(e,t)}function ol(n){return n.length}function K3(n){return n.length}function x1(n,e){return e.push(n),n}function $Pe(n,e){return n.map(e).join("")}var fM=1,Um=1,lq=0,Ls=0,Fi=0,gg="";function pM(n,e,t,i,r,s,o){return{value:n,root:e,parent:t,type:i,props:r,children:s,line:fM,column:Um,length:o,return:""}}function Ty(n,e){return VPe(pM("",null,null,"",null,null,0),n,{length:-n.length},e)}function XPe(){return Fi}function YPe(){return Fi=Ls>0?Sr(gg,--Ls):0,Um--,Fi===10&&(Um=1,fM--),Fi}function Js(){return Fi=Ls<lq?Sr(gg,Ls++):0,Um++,Fi===10&&(Um=1,fM++),Fi}function El(){return Sr(gg,Ls)}function ob(){return Ls}function ex(n,e){return m0(gg,n,e)}function g0(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function cq(n){return fM=Um=1,lq=ol(gg=n),Ls=0,[]}function uq(n){return gg="",n}function ab(n){return aq(ex(Ls-1,XI(n===91?n+2:n===40?n+1:n)))}function qPe(n){for(;(Fi=El())&&Fi<33;)Js();return g0(n)>2||g0(Fi)>3?"":" "}function ZPe(n,e){for(;--e&&Js()&&!(Fi<48||Fi>102||Fi>57&&Fi<65||Fi>70&&Fi<97););return ex(n,ob()+(e<6&&El()==32&&Js()==32))}function XI(n){for(;Js();)switch(Fi){case n:return Ls;case 34:case 39:n!==34&&n!==39&&XI(Fi);break;case 40:n===41&&XI(n);break;case 92:Js();break}return Ls}function KPe(n,e){for(;Js()&&n+Fi!==57;)if(n+Fi===84&&El()===47)break;return"/*"+ex(e,Ls-1)+"*"+dM(n===47?n:Js())}function QPe(n){for(;!g0(El());)Js();return ex(n,Ls)}function JPe(n){return uq(lb("",null,null,null,[""],n=cq(n),0,[0],n))}function lb(n,e,t,i,r,s,o,a,l){for(var c=0,u=0,h=o,d=0,f=0,p=0,x=1,v=1,y=1,w=0,_="",b=r,E=s,M=i,C=_;v;)switch(p=w,w=Js()){case 40:if(p!=108&&Sr(C,h-1)==58){$I(C+=Sn(ab(w),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:C+=ab(w);break;case 9:case 10:case 13:case 32:C+=qPe(p);break;case 92:C+=ZPe(ob()-1,7);continue;case 47:switch(El()){case 42:case 47:x1(e2e(KPe(Js(),ob()),e,t),l);break;default:C+="/"}break;case 123*x:a[c++]=ol(C)*y;case 125*x:case 59:case 0:switch(w){case 0:case 125:v=0;case 59+u:y==-1&&(C=Sn(C,/\f/g,"")),f>0&&ol(C)-h&&x1(f>32?GH(C+";",i,t,h-1):GH(Sn(C," ","")+";",i,t,h-2),l);break;case 59:C+=";";default:if(x1(M=VH(C,e,t,c,u,r,a,_,b=[],E=[],h),s),w===123)if(u===0)lb(C,e,M,M,b,s,h,a,E);else switch(d===99&&Sr(C,3)===110?100:d){case 100:case 108:case 109:case 115:lb(n,M,M,i&&x1(VH(n,M,M,0,0,r,a,_,r,b=[],h),E),r,E,h,a,i?b:E);break;default:lb(C,M,M,M,[""],E,0,a,E)}}c=u=f=0,x=y=1,_=C="",h=o;break;case 58:h=1+ol(C),f=p;default:if(x<1){if(w==123)--x;else if(w==125&&x++==0&&YPe()==125)continue}switch(C+=dM(w),w*x){case 38:y=u>0?1:(C+="\f",-1);break;case 44:a[c++]=(ol(C)-1)*y,y=1;break;case 64:El()===45&&(C+=ab(Js())),d=El(),u=h=ol(_=C+=QPe(ob())),w++;break;case 45:p===45&&ol(C)==2&&(x=0)}}return s}function VH(n,e,t,i,r,s,o,a,l,c,u){for(var h=r-1,d=r===0?s:[""],f=K3(d),p=0,x=0,v=0;p<i;++p)for(var y=0,w=m0(n,h+1,h=WPe(x=o[p])),_=n;y<f;++y)(_=aq(x>0?d[y]+" "+w:Sn(w,/&\f/g,d[y])))&&(l[v++]=_);return pM(n,e,t,r===0?q3:a,l,c,u)}function e2e(n,e,t){return pM(n,e,t,sq,dM(XPe()),m0(n,2,-2),0)}function GH(n,e,t,i){return pM(n,e,t,Z3,m0(n,0,i),m0(n,i+1,-1),i)}function hm(n,e){for(var t="",i=K3(n),r=0;r<i;r++)t+=e(n[r],r,n,e)||"";return t}function t2e(n,e,t,i){switch(n.type){case HPe:if(n.children.length)break;case zPe:case Z3:return n.return=n.return||n.value;case sq:return"";case oq:return n.return=n.value+"{"+hm(n.children,i)+"}";case q3:n.value=n.props.join(",")}return ol(t=hm(n.children,i))?n.return=n.value+"{"+t+"}":""}function n2e(n){var e=K3(n);return function(t,i,r,s){for(var o="",a=0;a<e;a++)o+=n[a](t,i,r,s)||"";return o}}function i2e(n){return function(e){e.root||(e=e.return)&&n(e)}}var r2e=function(e,t,i){for(var r=0,s=0;r=s,s=El(),r===38&&s===12&&(t[i]=1),!g0(s);)Js();return ex(e,Ls)},s2e=function(e,t){var i=-1,r=44;do switch(g0(r)){case 0:r===38&&El()===12&&(t[i]=1),e[i]+=r2e(Ls-1,t,i);break;case 2:e[i]+=ab(r);break;case 4:if(r===44){e[++i]=El()===58?"&\f":"",t[i]=e[i].length;break}default:e[i]+=dM(r)}while(r=Js());return e},o2e=function(e,t){return uq(s2e(cq(e),t))},jH=new WeakMap,a2e=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,i=e.parent,r=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!jH.get(i))&&!r){jH.set(e,!0);for(var s=[],o=o2e(t,s),a=i.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},l2e=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function hq(n,e){switch(GPe(n,e)){case 5103:return bn+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return bn+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return bn+n+MS+n+zr+n+n;case 6828:case 4268:return bn+n+zr+n+n;case 6165:return bn+n+zr+"flex-"+n+n;case 5187:return bn+n+Sn(n,/(\w+).+(:[^]+)/,bn+"box-$1$2"+zr+"flex-$1$2")+n;case 5443:return bn+n+zr+"flex-item-"+Sn(n,/flex-|-self/,"")+n;case 4675:return bn+n+zr+"flex-line-pack"+Sn(n,/align-content|flex-|-self/,"")+n;case 5548:return bn+n+zr+Sn(n,"shrink","negative")+n;case 5292:return bn+n+zr+Sn(n,"basis","preferred-size")+n;case 6060:return bn+"box-"+Sn(n,"-grow","")+bn+n+zr+Sn(n,"grow","positive")+n;case 4554:return bn+Sn(n,/([^-])(transform)/g,"$1"+bn+"$2")+n;case 6187:return Sn(Sn(Sn(n,/(zoom-|grab)/,bn+"$1"),/(image-set)/,bn+"$1"),n,"")+n;case 5495:case 3959:return Sn(n,/(image-set\([^]*)/,bn+"$1$`$1");case 4968:return Sn(Sn(n,/(.+:)(flex-)?(.*)/,bn+"box-pack:$3"+zr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+bn+n+n;case 4095:case 3583:case 4068:case 2532:return Sn(n,/(.+)-inline(.+)/,bn+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ol(n)-1-e>6)switch(Sr(n,e+1)){case 109:if(Sr(n,e+4)!==45)break;case 102:return Sn(n,/(.+:)(.+)-([^]+)/,"$1"+bn+"$2-$3$1"+MS+(Sr(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~$I(n,"stretch")?hq(Sn(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Sr(n,e+1)!==115)break;case 6444:switch(Sr(n,ol(n)-3-(~$I(n,"!important")&&10))){case 107:return Sn(n,":",":"+bn)+n;case 101:return Sn(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+bn+(Sr(n,14)===45?"inline-":"")+"box$3$1"+bn+"$2$3$1"+zr+"$2box$3")+n}break;case 5936:switch(Sr(n,e+11)){case 114:return bn+n+zr+Sn(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return bn+n+zr+Sn(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return bn+n+zr+Sn(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return bn+n+zr+n+n}return n}var c2e=function(e,t,i,r){if(e.length>-1&&!e.return)switch(e.type){case Z3:e.return=hq(e.value,e.length);break;case oq:return hm([Ty(e,{value:Sn(e.value,"@","@"+bn)})],r);case q3:if(e.length)return $Pe(e.props,function(s){switch(jPe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return hm([Ty(e,{props:[Sn(s,/:(read-\w+)/,":"+MS+"$1")]})],r);case"::placeholder":return hm([Ty(e,{props:[Sn(s,/:(plac\w+)/,":"+bn+"input-$1")]}),Ty(e,{props:[Sn(s,/:(plac\w+)/,":"+MS+"$1")]}),Ty(e,{props:[Sn(s,/:(plac\w+)/,zr+"input-$1")]})],r)}return""})}},u2e=[c2e],h2e=function(e){var t=e.key;if(t==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(x){var v=x.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var r=e.stylisPlugins||u2e,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(x){for(var v=x.getAttribute("data-emotion").split(" "),y=1;y<v.length;y++)s[v[y]]=!0;a.push(x)});var l,c=[a2e,l2e];{var u,h=[t2e,i2e(function(x){u.insert(x)})],d=n2e(c.concat(r,h)),f=function(v){return hm(JPe(v),d)};l=function(v,y,w,_){u=w,f(v?v+"{"+y.styles+"}":y.styles),_&&(p.inserted[y.name]=!0)}}var p={key:t,sheet:new BPe({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p},dq=R.createContext(typeof HTMLElement<"u"?h2e({key:"css"}):null);dq.Provider;var d2e=function(e){return R.forwardRef(function(t,i){var r=R.useContext(dq);return e(t,r,i)})};const f2e=R.createContext(null),p2e=d2e(({children:n,cache:e},t)=>k.jsx(f2e.Provider,{value:e||t,children:n}));function m2e(){const{getCategories:n}=q9();return R.useEffect(()=>{n()},[]),k.jsx(k.Fragment,{children:k.jsx(rj,{children:k.jsxs(p2e,{children:[k.jsx(Lc,{}),k.jsx(Oa,{children:k.jsx(OPe,{})})]})})})}const g2e=document.getElementById("root"),y2e=O3(g2e);y2e.render(k.jsx(m2e,{}));export{os as $,j6 as A,ys as B,dn as C,Tr as D,Bt as E,CS as F,dK as G,PT as H,_s as I,w6 as J,wi as K,_i as L,q6 as M,LQ as N,db as O,qt as P,sd as Q,Er as R,BQ as S,Yu as T,$D as U,fm as V,SJ as W,aW as X,JJ as Y,eee as Z,v0 as _,Sv as a,IS as a0,tee as a1,eW as a2,Xd as a3,Ml as a4,YD as a5,Vn as a6,WZ as a7,nW as a8,AK as b,W6 as c,L6 as d,qs as e,dF as f,DQ as g,$n as h,aF as i,On as j,Al as k,HZ as l,zQ as m,x2e as n,OQ as o,va as p,x6 as q,KZ as r,Du as s,JZ as t,Mr as u,hb as v,Zn as w,PK as x,XK as y,jQ as z};
